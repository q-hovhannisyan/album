/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _libs = __webpack_require__(2);

__webpack_require__(1);

exports.default = _libs.$;

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/******/(function (modules) {
  // webpackBootstrap
  /******/ // The module cache
  /******/var installedModules = {};
  /******/
  /******/ // The require function
  /******/function __webpack_require__(moduleId) {
    /******/
    /******/ // Check if module is in cache
    /******/if (installedModules[moduleId])
      /******/return installedModules[moduleId].exports;
    /******/
    /******/ // Create a new module (and put it into the cache)
    /******/var module = installedModules[moduleId] = {
      /******/i: moduleId,
      /******/l: false,
      /******/exports: {}
      /******/ };
    /******/
    /******/ // Execute the module function
    /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
    /******/
    /******/ // Flag the module as loaded
    /******/module.l = true;
    /******/
    /******/ // Return the exports of the module
    /******/return module.exports;
    /******/
  }
  /******/
  /******/
  /******/ // expose the modules object (__webpack_modules__)
  /******/__webpack_require__.m = modules;
  /******/
  /******/ // expose the module cache
  /******/__webpack_require__.c = installedModules;
  /******/
  /******/ // identity function for calling harmony imports with the correct context
  /******/__webpack_require__.i = function (value) {
    return value;
  };
  /******/
  /******/ // define getter function for harmony exports
  /******/__webpack_require__.d = function (exports, name, getter) {
    /******/if (!__webpack_require__.o(exports, name)) {
      /******/Object.defineProperty(exports, name, {
        /******/configurable: false,
        /******/enumerable: true,
        /******/get: getter
        /******/ });
      /******/
    }
    /******/
  };
  /******/
  /******/ // getDefaultExport function for compatibility with non-harmony modules
  /******/__webpack_require__.n = function (module) {
    /******/var getter = module && module.__esModule ?
    /******/function getDefault() {
      return module['default'];
    } :
    /******/function getModuleExports() {
      return module;
    };
    /******/__webpack_require__.d(getter, 'a', getter);
    /******/return getter;
    /******/
  };
  /******/
  /******/ // Object.prototype.hasOwnProperty.call
  /******/__webpack_require__.o = function (object, property) {
    return Object.prototype.hasOwnProperty.call(object, property);
  };
  /******/
  /******/ // __webpack_public_path__
  /******/__webpack_require__.p = "";
  /******/
  /******/ // Load entry module and return exports
  /******/return __webpack_require__(__webpack_require__.s = 72);
  /******/
})(
/************************************************************************/
/******/[
/* 0 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;
  var _$ = true ? window.jQuery : require('jquery'),
      _html2canvas = true ? window.html2canvas : require('html2canvas'),
      _THREE = true ? window.THREE : require('three'),
      _React = true ? window.React : require('react'),
      _ReactDOM = true ? window.ReactDOM : require('react-dom'),
      _PDFJS = true ? window.PDFJS : require('pdfjs'),
      _tr = function _tr(s) {
    return (window.iberezansky || {}).tr && window.iberezansky.tr(s) || s;
  };

  exports.$ = _$;
  exports.html2canvas = _html2canvas;
  exports.THREE = _THREE;
  exports.React = _React;
  exports.ReactDOM = _ReactDOM;
  exports.PDFJS = _PDFJS;
  exports.tr = _tr;

  /***/
},
/* 1 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _$ = true ? window.jQuery : require('jquery'),
      _html2canvas = true ? window.html2canvas : require('html2canvas'),
      _THREE = true ? window.THREE : require('three'),
      _PDFJS = true ? window.PDFJS : require('pdfjs'),
      _tr = function _tr(s) {
    return (window.iberezansky || {}).tr && window.iberezansky.tr(s) || s;
  };

  if (window.FB3D_LOCALE) {
    window.iberezansky = _extends({}, window.iberezansky, {
      tr: function tr(s) {
        return (FB3D_LOCALE.dictionary || {})[s] || s;
      }
    });
  }

  exports.$ = _$;
  exports.html2canvas = _html2canvas;
  exports.THREE = _THREE;
  exports.PDFJS = _PDFJS;
  exports.tr = _tr;

  /***/
},
/* 2 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var BaseMathUtils = function () {
    function BaseMathUtils() {
      _classCallCheck(this, BaseMathUtils);
    }

    BaseMathUtils.sum1 = function sum1(ka, a, kb, b) {
      return [ka * a[0] + kb * b[0]];
    };

    BaseMathUtils.sum2 = function sum2(ka, a, kb, b) {
      return [ka * a[0] + kb * b[0], ka * a[1] + kb * b[1]];
    };

    BaseMathUtils.sum3 = function sum3(ka, a, kb, b) {
      return [ka * a[0] + kb * b[0], ka * a[1] + kb * b[1], ka * a[2] + kb * b[2]];
    };

    BaseMathUtils.sum4 = function sum4(ka, a, kb, b) {
      return [ka * a[0] + kb * b[0], ka * a[1] + kb * b[1], ka * a[2] + kb * b[2], ka * a[3] + kb * b[3]];
    };

    BaseMathUtils.rk4 = function rk4(dy, t, dt, y) {
      var sum = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : BaseMathUtils.sum[y.length - 1];

      var k1 = dy(t, y),
          k2 = dy(t + dt / 2, sum(1, y, dt / 2, k1)),
          k3 = dy(t + dt / 2, sum(1, y, dt / 2, k2)),
          k4 = dy(t + dt, sum(1, y, dt, k3));
      return sum(1, y, dt / 6, sum(1, sum(1, k1, 2, k2), 1, sum(2, k3, 1, k4)));
    };

    BaseMathUtils.extrapolateLinear = function extrapolateLinear(x, y, xi) {
      return y[0] + (y[1] - y[0]) / (x[1] - x[0]) * (xi - x[0]);
    };

    BaseMathUtils.interpolateLinear = function interpolateLinear(x, y, xi) {
      var yi = void 0;
      if (x[0] > x[1]) {
        x = x.reverse();
        y = y.reverse();
      }
      if (xi < x[0]) {
        yi = y[0];
      } else if (xi > x[1]) {
        yi = y[1];
      } else {
        yi = BaseMathUtils.extrapolateLinear(x, y, xi);
      }
      return yi;
    };

    BaseMathUtils.calcScale = function calcScale(srcW, srcH, dstW, dstH) {
      return Math.min(dstW / srcW, dstH / srcH);
    };

    BaseMathUtils.mulM = function mulM(a, b) {
      var r = [];
      for (var i = 0; i < a.length; ++i) {
        r.push([]);
        for (var j = 0; j < b[0].length; ++j) {
          r[i][j] = 0;
          for (var k = 0; k < b.length; ++k) {
            r[i][j] += a[i][k] * b[k][j];
          }
        }
      }
      return r;
    };

    BaseMathUtils.transM = function transM(m) {
      var r = [];
      for (var i = 0; i < m.length; ++i) {
        for (var j = 0; j < m[0].length; ++j) {
          if (!r[j]) {
            r[j] = [];
          }
          r[j][i] = m[i][j];
        }
      }
      return r;
    };

    BaseMathUtils.mat = function mat(data) {
      var s = 0;
      for (var _iterator = data, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var x = _ref;

        s += x;
      }
      return s / data.length;
    };

    BaseMathUtils.disp = function disp(data) {
      var M = BaseMathUtils.mat(data);
      var s = 0;
      for (var _iterator2 = data, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i2 >= _iterator2.length) break;
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) break;
          _ref2 = _i2.value;
        }

        var x = _ref2;

        s += (x - M) * (x - M);
      }
      return s / data.length;
    };

    BaseMathUtils.predict = function predict(data, num) {
      var r = [],
          l = data.length,
          D = BaseMathUtils.disp(data);
      if (D < l && l > 1) {
        var am = [],
            bm = [];
        for (var i = 0; i < l; ++i) {
          am.push([i, 1]);
          bm.push([data[i]]);
        }
        var ta = BaseMathUtils.transM(am),
            a = BaseMathUtils.mulM(ta, am),
            b = BaseMathUtils.mulM(ta, bm),
            d = a[0][0] * a[1][1] - a[1][0] * a[0][1],
            p = [-(a[0][1] * b[1][0] - b[0][0] * a[1][1]) / d, (a[0][0] * b[1][0] - a[1][0] * b[0][0]) / d];
        for (var _i3 = 0; _i3 < num; ++_i3) {
          var v = Math.round(p[0] * (_i3 + l) + p[1]);
          if (r.indexOf(v) === -1) {
            r.push(v);
          }
        }
      }
      return r;
    };

    BaseMathUtils.getUnique = function getUnique() {
      return Math.ceil(1e9 * Math.random());
    };

    BaseMathUtils.setSplinePoints = function setSplinePoints(spline, ps) {
      if (spline.points.length !== ps.x.length) {
        console.warn('setSplinePoints: bad points');
      }
      for (var i = 0; i < spline.points.length; ++i) {
        spline.points[i].set(ps.x[i], ps.y[i], ps.z ? ps.z[i] : 0);
      }
    };

    BaseMathUtils.mapl2L = function mapl2L(ls, len, n, f) {
      var dL = len / (n - 1);
      var L = 0;
      for (var i = 0, d = ls[0]; i < ls.length - 1 && L < len + 0.1 * dL; ++i, d += ls[i]) {
        if (Math.abs(L - d) < Math.abs(L - d - ls[i + 1])) {
          f(i, L);
          L += dL;
        }
      }
      if (L < len + 0.1 * dL) {
        console.warn('mapl2L: ls is not enought');
      }
    };

    BaseMathUtils.det2 = function det2(a, b, c, d) {
      return a * d - b * c;
    };

    BaseMathUtils.solve2Lin = function solve2Lin(a1, b1, a2, b2) {
      var res = void 0;
      var d = BaseMathUtils.det2(a1[0], a1[1], a2[0], a2[1]);
      if (Math.abs(d) > BaseMathUtils.eps) {
        var dx = BaseMathUtils.det2(b1, a1[1], b2, a2[1]),
            dy = BaseMathUtils.det2(a1[0], b1, a2[0], b2);
        res = {
          x: dx / d,
          y: dy / d
        };
      }
      return res;
    };

    BaseMathUtils.isInsidePoly = function isInsidePoly(ps, p) {
      var done = false,
          ct = void 0;
      for (var i = 0; i < ps.length; ++i) {
        if (BaseMathUtils.v2dist(p, ps[i]) < BaseMathUtils.eps) {
          ct = 1;
          done = true;
          break;
        }
      }
      while (!done) {
        done = true;
        ct = 0;
        var np = { x: p.x + Math.random() - 0.5, y: p.y + Math.random() - 0.5 },
            rn = { x: np.x - p.x, y: np.y - p.y },
            a1 = [rn.y, -rn.x],
            b1 = p.x * rn.y - p.y * rn.x;
        for (var _i4 = 0; _i4 < ps.length; ++_i4) {
          var p0 = ps[_i4],
              p1 = ps[(_i4 + 1) % ps.length],
              n = { x: p1.x - p0.x, y: p1.y - p0.y },
              a2 = [n.y, -n.x],
              b2 = p0.x * n.y - p0.y * n.x,
              ip = BaseMathUtils.solve2Lin(a1, b1, a2, b2);
          if (ip) {
            if (BaseMathUtils.v2dist(ip, p0) < BaseMathUtils.eps || BaseMathUtils.v2dist(ip, p1) < BaseMathUtils.eps) {
              done = false;
              break;
            } else if (ip.x > Math.min(p0.x, p1.x) - BaseMathUtils.eps && ip.x < Math.max(p0.x, p1.x) + BaseMathUtils.eps && ip.y > Math.min(p0.y, p1.y) - BaseMathUtils.eps && ip.y < Math.max(p0.y, p1.y) + BaseMathUtils.eps) {
              if (BaseMathUtils.v2dist(ip, p) < BaseMathUtils.eps) {
                ct = 1;
                break;
              } else {
                var tn = { x: ip.x - p.x, y: ip.y - p.y };
                ct += tn.x * rn.x + tn.y * rn.y > 0;
              }
            }
          }
        }
      }
      return ct % 2;
    };

    BaseMathUtils.isInsideConvPoly = function isInsideConvPoly(ps, p) {
      var sg = [0, 0];
      for (var i = 0; i < ps.length; ++i) {
        var p0 = ps[i],
            p1 = ps[(i + 1) % ps.length],
            a = { x: p0.x - p.x, y: p0.y - p.y },
            b = { x: p1.x - p.x, y: p1.y - p.y };
        ++sg[(a.x * b.y - a.y * b.x < 0) + 0];
      }
      return ~sg.indexOf(ps.length);
    };

    BaseMathUtils.v2len = function v2len(v2) {
      return Math.sqrt(v2.x * v2.x + v2.y * v2.y);
    };

    BaseMathUtils.v2dist = function v2dist(v21, v22) {
      return BaseMathUtils.v2len({
        x: v22.x - v21.x,
        y: v22.y - v21.y
      });
    };

    BaseMathUtils.computeSquare = function computeSquare(ps) {
      var a = [];
      var p = 0;
      for (var i = 0; i < ps.length; ++i) {
        a.push(BaseMathUtils.v2dist(ps[i], ps[(i + 1) % ps.length]));
        p += 0.5 * a[i];
      }
      return Math.sqrt(p * (p - a[0]) * (p - a[1]) * (p - a[2]));
    };

    BaseMathUtils.computeInterpCoefs = function computeInterpCoefs(tri, p) {
      var s = BaseMathUtils.computeSquare(tri),
          coefs = [],
          l = tri.length;
      for (var i = 0; i < l; ++i) {
        coefs[i] = BaseMathUtils.computeSquare([p, tri[(i + 1) % l], tri[(i + 2) % l]]) / s;
      }
      return coefs;
    };

    return BaseMathUtils;
  }();

  BaseMathUtils.sum = [BaseMathUtils.sum1, BaseMathUtils.sum2, BaseMathUtils.sum3, BaseMathUtils.sum4];
  BaseMathUtils.eps = 1e-4;
  exports.default = BaseMathUtils;

  /***/
},
/* 3 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _BaseMathUtils2 = __webpack_require__(2);

  var _BaseMathUtils3 = _interopRequireDefault(_BaseMathUtils2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var MathUtils = function (_BaseMathUtils) {
    _inherits(MathUtils, _BaseMathUtils);

    function MathUtils() {
      _classCallCheck(this, MathUtils);

      return _possibleConstructorReturn(this, _BaseMathUtils.apply(this, arguments));
    }

    MathUtils.splitSpline = function splitSpline(spline, N) {
      var o = { len: 0, ls: [0] },
          dl = 1 / N;
      for (var i = 0; i <= N; ++i) {
        var p = spline.getPoint(i * dl);
        if (i) {
          var d = MathUtils.v1.distanceTo(p);
          o.len += d;
          o.ls.push(d);
        }
        MathUtils.v1.copy(p);
      }
      return o;
    };

    MathUtils.getLinearIndeces = function getLinearIndeces(spline, n) {
      var del = 5000,
          dDel = 1 / del;
      var ls = [0];
      var l = 0;
      for (var i = 0; i <= del; ++i) {
        var p = spline.getPoint(i * dDel);
        if (i) {
          var d = MathUtils.v1.distanceTo(p);
          l += d;
          ls.push(d);
        }
        MathUtils.v1.copy(p);
      }
      ls.push(1e7);

      var res = [],
          dl = l / (n - 1);
      for (var _i = 0, L = 0, _d = ls[0]; _i < ls.length - 1; ++_i, _d += ls[_i]) {
        if (Math.abs(L - _d) < Math.abs(L - _d - ls[_i + 1])) {
          res.push(_i * dDel);
          L += dl;
        }
      }

      return res;
    };

    MathUtils.refinePoly = function refinePoly(poly, maxDl) {
      var res = [];
      for (var i = 0; i < poly.length; ++i) {
        var p0 = poly[i],
            p1 = poly[(i + 1) % poly.length],
            l = _BaseMathUtils3.default.v2dist(p0, p1),
            n = Math.ceil(l / maxDl),
            dl = l / n;
        res.push(p0);
        for (var j = 1; j < n; ++j) {
          res.push(new _libs.THREE.Vector2(p0.x + j * dl * (p1.x - p0.x) / l, p0.y + j * dl * (p1.y - p0.y) / l));
        }
      }
      return res;
    };

    return MathUtils;
  }(_BaseMathUtils3.default);

  MathUtils.v1 = new _libs.THREE.Vector3();
  exports.default = MathUtils;

  /***/
},
/* 4 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Utils = function () {
    function Utils() {
      _classCallCheck(this, Utils);
    }

    Utils.normalizeUrl = function normalizeUrl(url) {
      function split(s) {
        return s.replace(/\\/g, '/').split('/');
      }
      var base = split(window.location.href);
      url = split(url);
      if (base[2] === url[2]) {
        url[0] = base[0];
      }
      return url.join('/');
    };

    Utils.extends = function _extends(der, base) {
      for (var name in base) {
        if (!der.hasOwnProperty(name)) {
          der[name] = base[name];
        }
      }
    };

    Utils.defaultCmp = function defaultCmp(a, b) {
      return a - b;
    };

    Utils.lowerBound = function lowerBound(a, x, cmp) {
      cmp = cmp || Utils.defaultCmp;
      var l = 0,
          h = a.length - 1;
      while (h - l > 1) {
        var mid = Math.floor((l + h) / 2);
        if (cmp(x, a[mid]) < 0) {
          h = mid;
        } else {
          l = mid;
        }
      }
      return cmp(x, a[h]) >= 0 ? h : l;
    };

    return Utils;
  }();

  exports.default = Utils;

  /***/
},
/* 5 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _GraphUtils = __webpack_require__(7);

  var _GraphUtils2 = _interopRequireDefault(_GraphUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var ImageBase = function () {
    function ImageBase(context, width, height, color) {
      _classCallCheck(this, ImageBase);

      this.context = context;
      this.wnd = context.wnd;
      this.doc = context.doc;
      this.element = context.element || context.doc.body;
      this.c = context.renderCanvas || ImageBase.renderCanvas;
      this.ctx = context.renderCanvasCtx || ImageBase.renderCanvasCtx;
      this.resW = this.width = width;
      this.resH = this.height = height;
      this.color = color;
    }

    ImageBase.prototype.setResolution = function setResolution(res) {
      this.resW = res.width;
      this.resH = res.height;
    };

    ImageBase.prototype.dispose = function dispose() {};

    ImageBase.prototype.renderBlankPage = function renderBlankPage() {
      this.ctx.beginPath();
      this.ctx.fillStyle = _GraphUtils2.default.color2Rgba(this.color, 1);
      this.ctx.rect(0, 0, this.c.width, this.c.height);
      this.ctx.fill();
    };

    ImageBase.prototype.renderImage = function renderImage(image) {
      this.pushCtx();
      this.ctx.drawImage(image, 0, 0);
      this.popCtx();
    };

    ImageBase.prototype.normToConv = function normToConv(p) {
      return {
        x: p.x * this.c.width,
        y: (1 - p.y) * this.c.height
      };
    };

    ImageBase.prototype.renderHit = function renderHit(poly) {
      var ctx = this.ctx;
      ctx.fillStyle = 'rgba(255,255,0,0.4)';
      ctx.beginPath();
      var p = this.normToConv(poly[0]);
      ctx.moveTo(p.x, p.y);
      for (var i = 1; i < poly.length; ++i) {
        p = this.normToConv(poly[i]);
        ctx.lineTo(p.x, p.y);
      }
      ctx.closePath();
      ctx.fill();
    };

    ImageBase.prototype.pushCtx = function pushCtx() {
      if (this.resW != this.c.width) {
        this.c.width = this.resW;
      }
      if (this.resH != this.c.height) {
        this.c.height = this.resH;
      }
      this.ctx.save();
      this.ctx.scale(this.c.width / this.width, this.c.height / this.height);
      return this.ctx;
    };

    ImageBase.prototype.popCtx = function popCtx() {
      this.ctx.restore();
    };

    ImageBase.prototype.renderNotFoundPage = function renderNotFoundPage() {
      this.renderBlankPage();
    };

    ImageBase.prototype.finishRender = function finishRender() {
      if (this.onChange) {
        this.onChange(this.c);
      }
    };

    ImageBase.prototype.finishLoad = function finishLoad() {
      if (this.onLoad) {
        this.onLoad();
      } else {
        this.startRender();
      }
    };

    ImageBase.prototype.getSimulatedDoc = function getSimulatedDoc() {
      return undefined;
    };

    return ImageBase;
  }();

  ImageBase.renderCanvas = (0, _libs.$)('<canvas>')[0];
  ImageBase.renderCanvasCtx = ImageBase.renderCanvas.getContext('2d');
  exports.default = ImageBase;

  /***/
},
/* 6 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var EventConverter = function () {

    // virtuals
    // getObject(e, data);
    // getCallback(object);
    // test(object1, object1);

    function EventConverter(wnd, doc) {
      _classCallCheck(this, EventConverter);

      this.wnd = wnd;
      this.doc = doc;
      this.enabled = true;
    }

    EventConverter.prototype.setEnable = function setEnable(vl) {
      if (!vl) {
        if (this.mCapObject) {
          this.notify(this.mCapObject, _libs.$.Event('mouseup'), 'mouseup');
          this.mCapObject = undefined;
        }
        if (this.mHovObject) {
          this.notify(this.mHovObject, _libs.$.Event('mouseout'), 'mouseout');
          this.mHovObject = undefined;
        }
      }
      this.enabled = vl;
    };

    EventConverter.prototype.getCallback = function getCallback(object) {
      return undefined;
    };

    EventConverter.prototype.notify = function notify(object, e, type) {
      var callback = this.getCallback(object);
      if (callback) {
        var props = _extends({}, e, {
          type: type,
          view: this.wnd
        });
        var jE = _libs.$.Event(type, props);
        callback(jE, object);
      }
    };

    EventConverter.prototype.convert = function convert(e, data) {
      if (!this.enabled) return;

      if (this.filter) {
        e = this.filter(this.element, e);
      }

      var object = this.getObject(e, data),
          notify = ~e.type.indexOf('touch') ? this.convertTouch(e, data, object) : this.convertMouse(e, data, object);
      if (notify && object) {
        this.notify(object, e, e.type);
      }
    };

    EventConverter.prototype.convertTouch = function convertTouch(e, data, object) {
      var notify = true;
      switch (e.type) {
        case 'touchstart':
          {
            if (this.tCapObject) {
              this.notify(this.tCapObject, e, 'touchend');
            }
            this.tCapObject = object;
            break;
          }
        case 'touchend':
          {
            if (this.tCapObject && !this.test(this.tCapObject, object)) {
              this.notify(this.tCapObject, e, 'touchend');
              notify = false;
            } else if (object && this.test(this.tCapObject, object)) {
              this.notify(object, e, 'touchtap');
            }
            this.tCapObject = undefined;
            break;
          }
        case 'touchtap':
          {
            notify = false;
            break;
          }
      }
      return notify;
    };

    EventConverter.prototype.convertMouse = function convertMouse(e, data, object) {
      var notify = true;
      switch (e.type) {
        case 'mousedown':
          {
            if (this.mCapObject) {
              this.notify(this.mCapObject, e, 'mouseup');
            }
            this.mCapObject = object;
            break;
          }
        case 'mouseup':
          {
            if (this.mCapObject && !this.test(this.mCapObject, object)) {
              this.notify(this.mCapObject, e, 'mouseup');
              notify = false;
            }
            break;
          }
        case 'click':
          {
            notify = this.test(this.mCapObject, object);
            this.mCapObject = undefined;
            break;
          }
        case 'mouseenter':
        case 'mouseover':
        case 'mousemove':
          {
            if (!this.test(this.mHovObject, object) && this.mHovObject) {
              this.notify(this.mHovObject, e, 'mouseout');
              this.mHovObject = undefined;
            }
            if (!this.mHovObject && object) {
              this.notify(object, e, 'mouseover');
              this.mHovObject = object;
            }
            notify = e.type === 'mousemove';
            break;
          }
        case 'mouseleave':
        case 'mouseout':
          {
            if (this.mHovObject) {
              this.notify(this.mHovObject, e, 'mouseout');
              this.mHovObject = undefined;
            }
            notify = false;
            break;
          }
      }
      return notify;
    };

    return EventConverter;
  }();

  exports.default = EventConverter;

  /***/
},
/* 7 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var GraphUtils = function () {
    function GraphUtils() {
      _classCallCheck(this, GraphUtils);
    }

    GraphUtils.extrapolateLinear = function extrapolateLinear(x, y, xi) {
      return y[0] + (y[1] - y[0]) / (x[1] - x[0]) * (xi - x[0]);
    };

    GraphUtils.interpolate01 = function interpolate01(y1, y2, t) {
      return GraphUtils.extrapolateLinear([0, 1], [y1, y2], t);
    };

    GraphUtils.getColorBytes = function getColorBytes(color) {
      return [color >> 16 & 0xFF, color >> 8 & 0xFF, color & 0xFF];
    };

    GraphUtils.inverseColor = function inverseColor(color) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

      var bs = GraphUtils.getColorBytes(color),
          ibs = [0xFF - bs[0], 0xFF - bs[1], 0xFF - bs[2]],
          nbs = [Math.round(GraphUtils.interpolate01(bs[0], ibs[0], t)), Math.round(GraphUtils.interpolate01(bs[1], ibs[1], t)), Math.round(GraphUtils.interpolate01(bs[2], ibs[2], t))];
      return GraphUtils.bytes2Color(nbs);
    };

    GraphUtils.color2Rgba = function color2Rgba(color, a) {
      return GraphUtils.bytes2Rgba(GraphUtils.getColorBytes(color), a);
    };

    GraphUtils.bytes2Rgba = function bytes2Rgba(bs, a) {
      return 'rgba(' + bs.join(',') + ',' + a + ')';
    };

    GraphUtils.bytes2Color = function bytes2Color(bs) {
      return bs[2] | bs[1] << 8 | bs[0] << 16;
    };

    return GraphUtils;
  }();

  exports.default = GraphUtils;

  /***/
},
/* 8 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Cache = __webpack_require__(14);

  var _Cache2 = _interopRequireDefault(_Cache);

  var _BlankImage = __webpack_require__(43);

  var _BlankImage2 = _interopRequireDefault(_BlankImage);

  var _StaticImage = __webpack_require__(59);

  var _StaticImage2 = _interopRequireDefault(_StaticImage);

  var _PdfImage = __webpack_require__(57);

  var _PdfImage2 = _interopRequireDefault(_PdfImage);

  var _InteractiveImage = __webpack_require__(51);

  var _InteractiveImage2 = _interopRequireDefault(_InteractiveImage);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var ImageFactory = function () {
    function ImageFactory(context, cache) {
      _classCallCheck(this, ImageFactory);

      this.context = context;
      this.cache = cache || new _Cache2.default();
    }

    ImageFactory.prototype.build = function build(info) {
      var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var widthTexels = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 210;
      var heightTexels = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 297;
      var color = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0xFFFFFF;
      var injector = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : undefined;

      var image = void 0;
      switch (info.type) {
        case 'html':
          {
            image = new _InteractiveImage2.default(this.context, widthTexels, heightTexels, color, info.src, this.cache, injector);
            break;
          }
        case 'image':
          {
            image = new _StaticImage2.default(this.context, widthTexels, heightTexels, color, info.src);
            break;
          }
        case 'pdf':
          {
            image = new _PdfImage2.default(this.context, widthTexels, heightTexels, color, info.src, n);
            break;
          }
        case 'blank':
        default:
          {
            image = new _BlankImage2.default(this.context, widthTexels, heightTexels, color);
            break;
          }
      }
      return image;
    };

    return ImageFactory;
  }();

  exports.default = ImageFactory;

  /***/
},
/* 9 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _book = __webpack_require__(11);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var BookPropsBuilder = function () {
    function BookPropsBuilder(onReady) {
      _classCallCheck(this, BookPropsBuilder);

      this.onReady = onReady;
      this.defaults = (0, _book.props)();
    }

    BookPropsBuilder.prototype.dispose = function dispose() {};

    BookPropsBuilder.prototype.calcSize = function calcSize(width, height) {
      var scale = _BaseMathUtils2.default.calcScale(width, height, this.defaults.width, this.defaults.height);
      return {
        width: scale * width,
        height: scale * height
      };
    };

    BookPropsBuilder.prototype.calcTexels = function calcTexels(width, height) {
      var sheet = this.defaults.sheet,
          scale = _BaseMathUtils2.default.calcScale(width, height, sheet.widthTexels, sheet.heightTexels);
      return {
        widthTexels: scale * width,
        heightTexels: scale * height
      };
    };

    BookPropsBuilder.prototype.calcProps = function calcProps(width, height) {
      this.props = _extends({}, this.defaults, this.calcSize(width, height), {
        sheet: _extends({}, this.defaults.sheet, this.calcTexels(width, height)),
        cover: _extends({}, this.defaults.cover),
        page: _extends({}, this.defaults.page)
      });
    };

    BookPropsBuilder.prototype.calcSheets = function calcSheets(pages) {
      return this.sheets = Math.ceil(Math.max(0, pages - 4) / 2);
    };

    BookPropsBuilder.prototype.getSheets = function getSheets() {
      return this.sheets;
    };

    BookPropsBuilder.prototype.getProps = function getProps() {
      return this.props;
    };

    BookPropsBuilder.prototype.getPageCallback = function getPageCallback() {
      return this.binds.pageCallback;
    };

    BookPropsBuilder.prototype.ready = function ready() {
      if (this.onReady) {
        this.onReady(this.getProps(), this.getSheets(), this.getPageCallback());
      }
    };

    return BookPropsBuilder;
  }();

  exports.default = BookPropsBuilder;

  /***/
},
/* 10 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
    return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  };

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _sheetBlock = __webpack_require__(41);

  var _sheetBlock2 = _interopRequireDefault(_sheetBlock);

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  var _ThreeUtils = __webpack_require__(20);

  var _ThreeUtils2 = _interopRequireDefault(_ThreeUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  // import ThreeMarkup from './ThreeMarkup';

  var SheetBlock = function () {
    function SheetBlock(visual, p, first, last) {
      var angle = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;

      var _this = this;

      var state = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 'closed';
      var height = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;

      _classCallCheck(this, SheetBlock);

      this.visual = visual;
      this.p = _extends({}, p, {
        first: first,
        last: last
      });
      var props = this.getProps();

      var loadedPoints = this.loadPoints();
      Object.keys(loadedPoints).map(function (k) {
        _this[k] = loadedPoints[k][props.shape] || loadedPoints[k][0];
      });

      this.pSpline = new _libs.THREE.Spline([]);
      for (var i = 0; i < this.interpolationPoints.x[0].length; ++i) {
        this.pSpline.points.push(new _libs.THREE.Vector3());
      }

      this.iSpline = new _libs.THREE.Spline([]);
      for (var _i = 0; _i < _sheetBlock2.default.resX; ++_i) {
        this.iSpline.points.push(new _libs.THREE.Vector3());
      }

      this.aSplines = [];

      //this.three = new THREE.Object3D();

      this.geometry = _sheetBlock2.default.geometry.clone();

      this.p.sideFaces = [{
        first: 0,
        last: _sheetBlock2.default.faces[0]
      }, {
        first: _sheetBlock2.default.faces[0],
        last: _sheetBlock2.default.faces[1]
      }];

      this.sideTexture = new _libs.THREE.Texture();
      this.sideTexture.wrapT = _libs.THREE.RepeatWrapping;
      this.sideTexture.repeat.set(0, last - first);
      this.sideTexture.image = props.sideTexture;
      this.sideTexture.needsUpdate = true;

      this.materials = [new _libs.THREE.MeshPhongMaterial(), new _libs.THREE.MeshPhongMaterial(), new _libs.THREE.MeshPhongMaterial({ map: this.sideTexture }), new _libs.THREE.MeshPhongMaterial({ map: this.sideTexture }), new _libs.THREE.MeshPhongMaterial({ map: this.sideTexture }), new _libs.THREE.MeshPhongMaterial({ map: this.sideTexture })];

      this.p.setTexture(this.materials[0], 2 * first);
      this.p.setTexture(this.materials[1], 2 * last - 1);

      this.mesh = new _libs.THREE.Mesh(this.geometry, new _libs.THREE.MeshFaceMaterial(this.materials));
      this.mesh.castShadow = false;
      this.mesh.receiveShadow = false;
      // this.mesh.frustumCulled = true;

      //this.three.add(this.mesh);
      this.three = this.mesh;
      this.three.userData.self = this;

      this.markers = [];
      if (this.p.marker.use) {
        var l = this.geometry.vertices.length;
        var is = void 0;
        // is = [0, sheetBlock.resX-1, (sheetBlock.resZ-1)*sheetBlock.resX, sheetBlock.resZ*sheetBlock.resX-1];
        is = Array.apply(0, Array(l)).map(function (_, i) {
          return i;
        });

        for (var _iterator = is, _isArray = Array.isArray(_iterator), _i2 = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i2 >= _iterator.length) break;
            _ref = _iterator[_i2++];
          } else {
            _i2 = _iterator.next();
            if (_i2.done) break;
            _ref = _i2.value;
          }

          var _i3 = _ref;

          var marker = _ThreeUtils2.default.createMarker(this.geometry.vertices[_i3], _i3 < l / 2 ? 0xFF0000 : 0x00FF00, this.p.marker.size);
          this.markers.push({
            marker: marker,
            vertex: _i3
          });
          this.three.add(marker);
        }
      }

      this.corner = {
        use: true,
        height: 0,
        maxDistance: 0,
        points: [],
        OZ: new _libs.THREE.Vector3(0, 0, 1),
        axis: new _libs.THREE.Vector3()
      };
      this.set(0, 'closed', height, first, last); // calculate corner points

      this.set(angle, state, height, first, last); // init position

      // if(!SheetBlock.markup) {
      //   SheetBlock.markup=true;
      //   this.markup = new ThreeMarkup(this, 0, [{
      //     x: 0,
      //     y: 0,
      //   }, {
      //     x: 0.5,
      //     y: 1
      //   }, {
      //     x: 1,
      //     y: 0
      //   }].map((p)=>new THREE.Vector2(p.x, p.y)), {});
      // }
    }

    SheetBlock.prototype.dispose = function dispose() {
      for (var _iterator2 = this.materials, _isArray2 = Array.isArray(_iterator2), _i4 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i4 >= _iterator2.length) break;
          _ref2 = _iterator2[_i4++];
        } else {
          _i4 = _iterator2.next();
          if (_i4.done) break;
          _ref2 = _i4.value;
        }

        var m = _ref2;

        if (m.map) {
          m.map = null;
          m.needsUpdate = true;
        }
        m.dispose();
      }
      delete this.materials;
      this.geometry.dispose();
    };

    SheetBlock.prototype.getSize = function getSize() {
      return this.p.last - this.p.first;
    };

    SheetBlock.prototype.getProps = function getProps() {
      return _extends({}, this.p.page, {
        sheets: this.p.sheets
      });
    };

    SheetBlock.prototype.getTopCerners = function getTopCerners() {
      var off = this.angle > Math.PI / 2 ? this.geometry.vertices.length / 2 : 0;
      return [this.geometry.vertices[off], this.geometry.vertices[_sheetBlock2.default.resX - 1 + off], this.geometry.vertices[(_sheetBlock2.default.resZ - 1) * _sheetBlock2.default.resX + off], this.geometry.vertices[_sheetBlock2.default.resZ * _sheetBlock2.default.resX - 1 + off]];
    };

    SheetBlock.prototype.getTopSize = function getTopSize() {
      // const l=this.geometry.vertices.length, off = this.angle>Math.PI/2? l/2: 0,
      //   v0 = this.geometry.vertices[off], v1 = this.geometry.vertices[sheetBlock.resZ*sheetBlock.resX-1+off];
      // // is = [0, sheetBlock.resX-1, (sheetBlock.resZ-1)*sheetBlock.resX, sheetBlock.resZ*sheetBlock.resX-1];
      // return {
      //   width: Math.abs(v1.x-v0.x),
      //   height: Math.abs(v1.z-v0.z)
      // };
      var vs = this.getTopCerners();
      return {
        width: vs[0].distanceTo(vs[1]),
        height: vs[0].distanceTo(vs[2])
      };
    };

    SheetBlock.prototype.getTopWorldRotation = function getTopWorldRotation(q) {
      q.x = -Math.PI / 2;
      return q;
    };

    SheetBlock.prototype.getTopWorldPosition = function getTopWorldPosition(v) {
      var l = this.geometry.vertices.length,
          off = this.angle > Math.PI / 2 ? l / 2 : 0,
          vs = [this.geometry.vertices[off], this.geometry.vertices[_sheetBlock2.default.resX - 1 + off], this.geometry.vertices[(_sheetBlock2.default.resZ - 1) * _sheetBlock2.default.resX + off], this.geometry.vertices[_sheetBlock2.default.resZ * _sheetBlock2.default.resX - 1 + off]];
      v.set(0, 0, 0);
      for (var _iterator3 = vs, _isArray3 = Array.isArray(_iterator3), _i5 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i5 >= _iterator3.length) break;
          _ref3 = _iterator3[_i5++];
        } else {
          _i5 = _iterator3.next();
          if (_i5.done) break;
          _ref3 = _i5.value;
        }

        var vi = _ref3;

        v.x += 0.25 * vi.x;
        v.y += 0.25 * vi.y;
        v.z += 0.25 * vi.z;
      }
      this.three.localToWorld(v);
      return v;
    };

    SheetBlock.prototype.getInterpolationPoints = function getInterpolationPoints(inds, mod) {
      var ps = { x: [], y: [] },
          K = this.getProps().wave;
      for (var _iterator4 = inds, _isArray4 = Array.isArray(_iterator4), _i6 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i6 >= _iterator4.length) break;
          _ref4 = _iterator4[_i6++];
        } else {
          _i6 = _iterator4.next();
          if (_i6.done) break;
          _ref4 = _i6.value;
        }

        var i = _ref4;

        ps.x.push([].concat(this.interpolationPoints.x[i]));
        ps.y.push(~mod.indexOf(i) ? this.interpolationPoints.y[i].map(function (n) {
          return K * n;
        }) : [].concat(this.interpolationPoints.y[i]));
      }
      return ps;
    };

    SheetBlock.prototype.set = function set(angle) {
      var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;
      var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.corner.height;
      var first = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.p.first;
      var last = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.p.last;

      var PI = Math.PI;
      this.state = state;
      var closedAngle = void 0,
          binderTurn = void 0;
      if ((typeof angle === 'undefined' ? 'undefined' : _typeof(angle)) === 'object') {
        this.angle = angle.openedAngle;
        closedAngle = angle.closedAngle;
        binderTurn = angle.binderTurn > PI / 2 ? PI - angle.binderTurn : angle.binderTurn;
      } else {
        this.angle = angle;
      }
      this.corner.height = height;
      if (this.p.first !== first || this.p.last !== last) {
        this.sideTexture.repeat.set(0, last - first);
        this.sideTexture.needsUpdate = true;
        if (this.p.first !== first) {
          this.p.setTexture(this.materials[0], 2 * first);
        }
        if (this.p.last !== last) {
          this.p.setTexture(this.materials[1], 2 * last - 1);
        }
      }
      this.p.first = first;
      this.p.last = last;
      var points = void 0;
      var props = this.getProps();
      if (this.state === 'closed') {
        points = this.getInterpolationPoints(this.closedInterpolationIndeces, this.closedInterpolationIndeces);
      } else if (this.state === 'opened') {
        if (closedAngle !== undefined && Math.abs(closedAngle - PI / 2) > 1e-2) {
          points = this.getInterpolationPoints(this.flatInterpolationIndeces, []);
          var ps = this.getPointsAtAngle(this.getInterpolationPoints(this.closedInterpolationIndeces, this.closedInterpolationIndeces), closedAngle > PI / 2 ? PI - closedAngle : closedAngle);
          points.x = [ps.x].concat(points.x);
          points.y = [ps.y].concat(points.y);
          // console.log(ps);
        } else {
          points = this.getInterpolationPoints(this.openedInterpolationIndeces, this.closedInterpolationIndeces);
        }
      }
      var hl = void 0,
          hr = void 0,
          offset = 0.5 * props.sheets * props.depth;
      if (this.state === 'closed') {
        offset -= 7e-6 * this.p.scale;
      }
      if (this.angle <= PI / 2) {
        hl = (props.sheets - first) * props.depth;
        hr = (props.sheets - last) * props.depth;
      } else {
        hl = first * props.depth;
        hr = last * props.depth;
      }

      var inAngle = this.angle > PI / 2 ? PI - this.angle : this.angle,
          hAngle = this.state === 'closed' ? inAngle : binderTurn === undefined ? PI / 2 : binderTurn;

      var _getPointsAtAngleAndH = this.getPointsAtAngleAndHs(points, inAngle, hAngle, [hl / props.width, hr / props.width]),
          left = _getPointsAtAngleAndH[0],
          right = _getPointsAtAngleAndH[1];

      if (this.angle > PI / 2) {
        this.inverse(left);
        this.inverse(right);
        offset = -offset;
      }
      this.setPoints(left, right, offset);
    };

    SheetBlock.prototype.setPoints = function setPoints(left, right, offset) {
      var _this2 = this;

      var p = this.getProps();
      var i = 0;

      var ys = [right, left];
      for (var y = 0; y < _sheetBlock2.default.resY; ++y) {
        for (var z = 0; z < _sheetBlock2.default.resZ; ++z) {
          for (var x = 0; x < _sheetBlock2.default.resX; ++x) {
            this.geometry.vertices[i++].set(ys[y].x[x] * p.width + offset, ys[y].y[x] * p.width, z * p.height / (_sheetBlock2.default.resZ - 1) - 0.5 * p.height);
          }
        }
      }
      if (i !== this.geometry.vertices.length) {
        console.warn('setPoints: bad mapping!');
      }

      if (this.corner.use && !this.corner.points.length) {
        var plane = new _libs.THREE.Plane(),
            normal = plane.normal,
            planeOffset = (1 - this.getProps().flexibleCorner) * Math.min(p.width, p.height),
            proj = new _libs.THREE.Vector3();
        plane.setFromNormalAndCoplanarPoint(new _libs.THREE.Vector3(-1, 0, -1).normalize(), new _libs.THREE.Vector3(planeOffset + offset, 0, 0.5 * p.height));
        for (var _i7 = 0, l = this.geometry.vertices.length; _i7 < l; ++_i7) {
          plane.projectPoint(this.geometry.vertices[_i7], proj);
          proj.sub(this.geometry.vertices[_i7]);
          if (proj.x * normal.x + proj.y * normal.y + proj.z * normal.z > 0) {
            var d = proj.length() / planeOffset;
            this.corner.maxDistance = Math.max(this.corner.maxDistance, d);
            this.corner.points.push({ vertex: _i7, distance: d });
          }
        }
      }

      if (this.corner.use && Math.abs(this.corner.height) > 1e-3) {
        var d2Angle = function d2Angle(d) {
          return p.cornerDeviation * _this2.corner.height / (1 + Math.exp(-p.bending * (d - 0.5 * _this2.corner.maxDistance)));
        };
        this.corner.axis.set(-1, 0, 1).normalize();
        this.corner.axis.applyAxisAngle(this.corner.OZ, this.angle);
        for (var _iterator5 = this.corner.points, _isArray5 = Array.isArray(_iterator5), _i8 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
          var _ref5;

          if (_isArray5) {
            if (_i8 >= _iterator5.length) break;
            _ref5 = _iterator5[_i8++];
          } else {
            _i8 = _iterator5.next();
            if (_i8.done) break;
            _ref5 = _i8.value;
          }

          var point = _ref5;

          this.geometry.vertices[point.vertex].applyAxisAngle(this.corner.axis, d2Angle(point.distance));
        }
      }

      for (var _iterator6 = this.markers, _isArray6 = Array.isArray(_iterator6), _i9 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
        var _ref6;

        if (_isArray6) {
          if (_i9 >= _iterator6.length) break;
          _ref6 = _iterator6[_i9++];
        } else {
          _i9 = _iterator6.next();
          if (_i9.done) break;
          _ref6 = _i9.value;
        }

        var m = _ref6;

        m.marker.position.copy(this.geometry.vertices[m.vertex]);
      }

      this.geometry.computeVertexNormals();
      //this.geometry.computeFaceNormals();
      this.geometry.computeBoundingSphere();
      //this.geometry.computeBoundingBox();
      this.geometry.verticesNeedUpdate = true;

      if (this.markup) {
        this.markup.computeVertices();
      }
    };

    SheetBlock.prototype.inverse = function inverse(ps) {
      for (var i = 0; i < ps.x.length; ++i) {
        ps.x[i] = -ps.x[i];
      }
      return ps;
    };

    SheetBlock.prototype.getPointsAtHs = function getPointsAtHs(ps, angle, hs) {
      var _this3 = this;

      var N = 1000;
      _MathUtils2.default.setSplinePoints(this.pSpline, ps);
      var bl = _MathUtils2.default.splitSpline(this.pSpline, N),
          r = [];
      {
        var p1 = _extends({}, this.pSpline.getPoint((N - 1) / N)),
            p2 = _extends({}, this.pSpline.getPoint(1)),
            dp = { x: p2.x - p1.x, y: p2.y - p1.y },
            ln = Math.sqrt(dp.x * dp.x + dp.y * dp.y),
            sp = this.pSpline.points[this.pSpline.points.length - 1];
        sp.set(sp.x + 0.1 * dp.x / ln, sp.y + 0.1 * dp.y / ln, 0);
        bl = _MathUtils2.default.splitSpline(this.pSpline, N);
      }
      bl.ls.push(1e7);
      _MathUtils2.default.mapl2L(bl.ls, bl.len, _sheetBlock2.default.resX, function (i) {
        for (var j = 0; j < hs.length; ++j) {
          if (!i) {
            r[j] = { x: [-hs[j] * Math.sin(angle)], y: [hs[j] * Math.cos(angle)] };
          } else {
            var p0 = _extends({}, _this3.pSpline.getPoint((i - 1) / N)),
                _p = _this3.pSpline.getPoint(i / N),
                x = -(_p.y - p0.y),
                y = _p.x - p0.x,
                l = Math.sqrt(x * x + y * y);
            r[j].x.push(_p.x + x / l * hs[j]);
            r[j].y.push(_p.y + y / l * hs[j]);
          }
        }
      });

      var nps = [];

      var _loop = function _loop(j) {
        nps[j] = { x: [], y: [] };
        _MathUtils2.default.setSplinePoints(_this3.iSpline, r[j]);
        var l = _MathUtils2.default.splitSpline(_this3.iSpline, N);
        l.ls.push(1e7);
        _MathUtils2.default.mapl2L(l.ls, 1, _sheetBlock2.default.resX, function (i) {
          var p = _this3.iSpline.getPoint(i / N);
          nps[j].x.push(p.x);
          nps[j].y.push(p.y);
        });
      };

      for (var j = 0; j < hs.length; ++j) {
        _loop(j);
      }
      return nps;
    };

    SheetBlock.prototype.getPointsAtAngleAndHs = function getPointsAtAngleAndHs(points, angle, hAngle, hs) {
      var ps = this.getPointsAtAngle(points, angle);
      return this.getPointsAtHs(ps, hAngle, hs);
    };

    SheetBlock.prototype.getPointsAtAngle = function getPointsAtAngle(points, angle) {
      var ps = { x: [], y: [] },
          angles = [];
      angle /= Math.PI / 2;
      for (var j = 0; j < points.x.length; ++j) {
        angles.push(j / (points.x.length - 1));
      }
      for (var i = 0; i < points.x[0].length; ++i) {
        var xps = [],
            yps = [];
        for (var _j = 0; _j < points.x.length; ++_j) {
          xps.push(points.x[_j][i]);
          yps.push(points.y[_j][i]);
        }
        ps.x.push(this.interpolate(angles, xps, angle));
        ps.y.push(this.interpolate(angles, yps, angle));
      }
      return ps;
    };

    SheetBlock.prototype.interpolate = function interpolate(x, y, xi) {
      if (!this.aSplines[x.length]) {
        this.aSplines[x.length] = new _libs.THREE.Spline([]);
        var ps = this.aSplines[x.length].points;
        for (var i = 0; i < x.length; ++i) {
          ps.push(new _libs.THREE.Vector3());
        }
      }
      var spline = this.aSplines[x.length];
      for (var _i10 = 0; _i10 < x.length; ++_i10) {
        spline.points[_i10].set(x[_i10], y[_i10], 0);
      }
      return spline.getPoint(Math.min(1, Math.max(xi, 0))).y;
    };

    SheetBlock.prototype.loadPoints = function loadPoints() {
      var x = [],
          y = [];
      var _arr = [0, 0.2877, 0.6347, 0.8174, 1.0000];
      for (var _i11 = 0; _i11 < _arr.length; _i11++) {
        var r = _arr[_i11];
        x.push(r * Math.cos(0.9 * Math.PI / 4));
        y.push(r * Math.sin(0.9 * Math.PI / 4));
      }

      var openedInterpolationIndeces = [[2, 3, 4], [2, 3, 4, 5, 6]],
          closedInterpolationIndeces = [[0, 1, 2], [0, 1, 2]],
          flatInterpolationIndeces = [[5, 4], [7, 6]],
          interpolationPoints = [{
        x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0.000, 0.286, 0.632, 0.815, 0.997], [0.000, 0.279, 0.623, 0.806, 0.988], [0.000, 0.126, 0.411, 0.593, 0.774], [0, 0, 0, 0, 0], x],
        y: [[0, 0, 0, 0, 0], [0.000, 0.030, 0.010, 0.002, 0.000], [0.000, 0.060, 0.017, 0.004, 0.000], [0.000, 0.259, 0.440, 0.446, 0.429], [0, 0.2877, 0.6347, 0.8174, 1.0000], y]
      }, {
        x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0.000, 0.286, 0.632, 0.815, 0.997], [0.000, 0.279, 0.623, 0.806, 0.988], [0.000, 0.233, 0.563, 0.746, 0.927], [0.000, 0.144, 0.433, 0.613, 0.796], [0.000, 0.070, 0.288, 0.455, 0.626], [0, 0, 0, 0, 0], x],
        y: [[0, 0, 0, 0, 0], [0.000, 0.030, 0.010, 0.002, 0.000], [0.000, 0.060, 0.017, 0.004, 0.000], [0.000, 0.168, 0.269, 0.270, 0.255], [0.000, 0.245, 0.435, 0.458, 0.460], [0.000, 0.278, 0.544, 0.614, 0.673], [0, 0.2877, 0.6347, 0.8174, 1.0000], y]
      }];

      return {
        interpolationPoints: interpolationPoints,
        openedInterpolationIndeces: openedInterpolationIndeces,
        closedInterpolationIndeces: closedInterpolationIndeces,
        flatInterpolationIndeces: flatInterpolationIndeces
      };
    };

    return SheetBlock;
  }();

  exports.default = SheetBlock;

  /***/
},
/* 11 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;
  exports.props = props;
  function props() {
    // const props = {
    //   height,
    //   width,
    //   gravity,
    //   injector,
    //   cachedPages,
    //   renderInactivePages,
    //   renderWhileFlipping,
    //   pagesForPredicting,
    //   preloadPages,
    //   sheet: {
    //     startVelocity,
    //     cornerDeviation,
    //     flexibility,
    //     flexibleCorner,
    //     bending,
    //     wave,
    //     shape,
    //     widthTexels,
    //     heightTexels,
    //     color,
    //     sideTexture
    //   },
    //   cover: {
    //     ...sheet,
    //     padding,
    //     binderTexture,
    //     depth,
    //     mass
    //   },
    //   page: {
    //     ...sheet,
    //     depth,
    //     mass
    //   }
    // };

    return {
      height: 0.297,
      width: 0.21,
      gravity: 1,
      cachedPages: 50,
      renderInactivePages: true,
      renderInactivePagesOnMobile: false,
      renderWhileFlipping: false,
      pagesForPredicting: 5,
      preloadPages: 5,
      rtl: false,
      sheet: {
        startVelocity: 0.9,
        cornerDeviation: 0.25,
        flexibility: 10,
        flexibleCorner: 0.5,
        bending: 11,
        wave: 0.5,
        shape: 0,
        widthTexels: 5 * 210,
        heightTexels: 5 * 297,
        color: 0xFFFFFF
      },
      cover: {
        binderTexture: '',
        depth: 0.0003,
        padding: 0,
        mass: 0.003
      },
      page: {
        depth: 0.0001,
        mass: 0.001
      },
      cssLayerProps: {
        width: 1024
      }
    };
  };

  /***/
},
/* 12 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;
  exports.CSS3DSprite = exports.CSS3DObject = undefined;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  _libs.THREE.CSS3DObject = function (_THREE$Object3D) {
    _inherits(CSS3DObject, _THREE$Object3D);

    function CSS3DObject() {
      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;

      _classCallCheck(this, CSS3DObject);

      var _this = _possibleConstructorReturn(this, _THREE$Object3D.call(this));

      if (element) {
        _this.set(element);
      }
      return _this;
    }

    CSS3DObject.prototype.set = function set(element) {
      this.element = element;
      this.element.style.position = 'absolute';

      this.addEventListener('removed', function () {
        if (this.element.parentNode !== null) {
          this.element.parentNode.removeChild(this.element);
        }
      });
    };

    return CSS3DObject;
  }(_libs.THREE.Object3D);

  _libs.THREE.CSS3DSprite = function (_THREE$CSS3DObject) {
    _inherits(CSS3DSprite, _THREE$CSS3DObject);

    function CSS3DSprite(element) {
      _classCallCheck(this, CSS3DSprite);

      return _possibleConstructorReturn(this, _THREE$CSS3DObject.call(this, element));
    }

    return CSS3DSprite;
  }(_libs.THREE.CSS3DObject);

  _libs.THREE.CSS3DRenderer = function CSS3DRenderer() {
    _classCallCheck(this, CSS3DRenderer);

    var _width, _height;
    var _widthHalf, _heightHalf;

    var matrix = new _libs.THREE.Matrix4();

    var cache = {
      camera: { fov: 0, style: '' },
      objects: {}
    };

    var domElement = document.createElement('div');
    domElement.style.overflow = 'hidden';

    this.domElement = domElement;

    var cameraElement = document.createElement('div');

    cameraElement.style.WebkitTransformStyle = 'preserve-3d';
    cameraElement.style.MozTransformStyle = 'preserve-3d';
    cameraElement.style.transformStyle = 'preserve-3d';

    domElement.appendChild(cameraElement);

    var isIE = /Trident/i.test(navigator.userAgent);

    this.setClearColor = function () {};

    this.getSize = function () {

      return {
        width: _width,
        height: _height
      };
    };

    this.setSize = function (width, height) {

      _width = width;
      _height = height;
      _widthHalf = _width / 2;
      _heightHalf = _height / 2;

      domElement.style.width = width + 'px';
      domElement.style.height = height + 'px';

      cameraElement.style.width = width + 'px';
      cameraElement.style.height = height + 'px';
    };

    function epsilon(value) {

      return Math.abs(value) < 1e-10 ? 0 : value;
    }

    function getCameraCSSMatrix(matrix) {

      var elements = matrix.elements;

      return 'matrix3d(' + epsilon(elements[0]) + ',' + epsilon(-elements[1]) + ',' + epsilon(elements[2]) + ',' + epsilon(elements[3]) + ',' + epsilon(elements[4]) + ',' + epsilon(-elements[5]) + ',' + epsilon(elements[6]) + ',' + epsilon(elements[7]) + ',' + epsilon(elements[8]) + ',' + epsilon(-elements[9]) + ',' + epsilon(elements[10]) + ',' + epsilon(elements[11]) + ',' + epsilon(elements[12]) + ',' + epsilon(-elements[13]) + ',' + epsilon(elements[14]) + ',' + epsilon(elements[15]) + ')';
    }

    function getObjectCSSMatrix(matrix, cameraCSSMatrix) {

      var elements = matrix.elements;
      var matrix3d = 'matrix3d(' + epsilon(elements[0]) + ',' + epsilon(elements[1]) + ',' + epsilon(elements[2]) + ',' + epsilon(elements[3]) + ',' + epsilon(-elements[4]) + ',' + epsilon(-elements[5]) + ',' + epsilon(-elements[6]) + ',' + epsilon(-elements[7]) + ',' + epsilon(elements[8]) + ',' + epsilon(elements[9]) + ',' + epsilon(elements[10]) + ',' + epsilon(elements[11]) + ',' + epsilon(elements[12]) + ',' + epsilon(elements[13]) + ',' + epsilon(elements[14]) + ',' + epsilon(elements[15]) + ')';

      if (isIE) {

        return 'translate(-50%,-50%)' + 'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)' + cameraCSSMatrix + matrix3d;
      }

      return 'translate(-50%,-50%)' + matrix3d;
    }

    function renderObject(object, camera, cameraCSSMatrix) {

      if (object instanceof _libs.THREE.CSS3DObject) {

        var style;

        if (object instanceof _libs.THREE.CSS3DSprite) {
          matrix.copy(camera.matrixWorldInverse);
          matrix.transpose();
          matrix.copyPosition(object.matrixWorld);
          matrix.scale(object.scale);

          matrix.elements[3] = 0;
          matrix.elements[7] = 0;
          matrix.elements[11] = 0;
          matrix.elements[15] = 1;

          style = getObjectCSSMatrix(matrix, cameraCSSMatrix);
        } else {

          style = getObjectCSSMatrix(object.matrixWorld, cameraCSSMatrix);
        }

        var element = object.element;
        var cachedStyle = cache.objects[object.id] && cache.objects[object.id].style;

        if (cachedStyle === undefined || cachedStyle !== style) {
          element.style.WebkitTransform = style;
          element.style.MozTransform = style;
          element.style.transform = style;

          cache.objects[object.id] = { style: style };
          if (isIE) {
            cache.objects[object.id].distanceToCameraSquared = getDistanceToSquared(camera, object);
          }
        }

        if (element.parentNode !== cameraElement) {
          cameraElement.appendChild(element);
        }
      }

      for (var i = 0, l = object.children.length; i < l; i++) {

        renderObject(object.children[i], camera, cameraCSSMatrix);
      }
    }

    var getDistanceToSquared = function () {

      var a = new _libs.THREE.Vector3();
      var b = new _libs.THREE.Vector3();

      return function (object1, object2) {

        a.setFromMatrixPosition(object1.matrixWorld);
        b.setFromMatrixPosition(object2.matrixWorld);

        return a.distanceToSquared(b);
      };
    }();

    function zOrder(scene) {

      var order = Object.keys(cache.objects).sort(function (a, b) {

        return cache.objects[a].distanceToCameraSquared - cache.objects[b].distanceToCameraSquared;
      });
      var zMax = order.length;

      scene.traverse(function (object) {

        var index = order.indexOf(object.id + '');

        if (index !== -1) {

          object.element.style.zIndex = zMax - index;
        }
      });
    }

    this.render = function (scene, camera) {

      var fov = camera.projectionMatrix.elements[5] * _heightHalf;

      if (cache.camera.fov !== fov) {

        domElement.style.WebkitPerspective = fov + 'px';
        domElement.style.MozPerspective = fov + 'px';
        domElement.style.perspective = fov + 'px';

        cache.camera.fov = fov;
      }

      scene.updateMatrixWorld();

      if (camera.parent === null) camera.updateMatrixWorld();

      var cameraCSSMatrix = 'translateZ(' + fov + 'px)' + getCameraCSSMatrix(camera.matrixWorldInverse);

      var style = cameraCSSMatrix + 'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';

      if (cache.camera.style !== style && !isIE) {

        cameraElement.style.WebkitTransform = style;
        cameraElement.style.MozTransform = style;
        cameraElement.style.transform = style;

        cache.camera.style = style;
      }

      renderObject(scene, camera, cameraCSSMatrix);

      if (isIE) {

        // IE10 and 11 does not support 'preserve-3d'.
        // Thus, z-order in 3D will not work.
        // We have to calc z-order manually and set CSS z-index for IE.
        // FYI: z-index can't handle object intersection
        zOrder(scene);
      }
    };
  };

  exports.default = _libs.THREE.CSS3DRenderer;

  var _CSS3DObject = _libs.THREE.CSS3DObject,
      _CSS3DSprite = _libs.THREE.CSS3DSprite;
  exports.CSS3DObject = _CSS3DObject;
  exports.CSS3DSprite = _CSS3DSprite;

  /***/
},
/* 13 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _CSS3DRenderer = __webpack_require__(12);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var CSSLayer = function (_CSS3DObject) {
    _inherits(CSSLayer, _CSS3DObject);

    CSSLayer.init = function init(doc) {
      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 150;

      CSSLayer.delay = delay;
      CSSLayer.style = (0, _libs.$)('<style type=text/css>\n      .css-layer {\n    \t\topacity: 1;\n    \t\ttransition: opacity ' + delay + 'ms ease-out;\n        visibility: visible;\n        overflow: hidden;\n    \t}\n    \t.css-layer.hidden {\n    \t\ttransition: opacity ' + delay + 'ms ease-in, visibility ' + delay + 'ms step-end;\n    \t\topacity: 0;\n        visibility: hidden;\n      }\n    </style>').appendTo(doc.head);
    };

    CSSLayer.dispose = function dispose() {
      CSSLayer.style.remove();
    };

    function CSSLayer(width, height, props) {
      _classCallCheck(this, CSSLayer);

      var _this = _possibleConstructorReturn(this, _CSS3DObject.call(this));

      _this.props = props;
      _this.jContainer = (0, _libs.$)('<div class="hidden css-layer"></div>');
      var widthPxs = props.width,
          heightPxs = height / width * widthPxs;
      _this.jContainer.width(widthPxs).height(heightPxs);
      _this.scale.x /= widthPxs / width;
      _this.scale.y /= widthPxs / width;

      _this.setData();
      _this.set(_this.jContainer[0]);
      return _this;
    }

    CSSLayer.prototype.callInternal = function callInternal(name) {
      if (this.object && this.object[name]) {
        try {
          this.object[name]();
        } catch (e) {
          console.error(e);
        }
      }
    };

    CSSLayer.prototype.dispose = function dispose() {
      this.clearInternals();
    };

    CSSLayer.prototype.clearInternals = function clearInternals() {
      this.callInternal('dispose');
      !this.css || this.css.remove();
      !this.html || this.html.remove();
    };

    CSSLayer.prototype.setData = function setData() {
      var css = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var html = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
      var js = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';

      this.clearInternals();

      this.css = (0, _libs.$)('<style type="text/css">' + css + '</style>').appendTo(this.jContainer);
      this.html = (0, _libs.$)(html).appendTo(this.jContainer);
      var init = eval(js);
      if (init) {
        this.object = init(this.jContainer, this.props) || {};
      }
    };

    CSSLayer.prototype.pendedCall = function pendedCall(clb) {
      var _this2 = this;

      var timestamp = this.timestamp = Date.now();
      setTimeout(function () {
        if (timestamp === _this2.timestamp) {
          clb();
        }
      }, CSSLayer.delay);
    };

    CSSLayer.prototype.isHidden = function isHidden() {
      return this.jContainer.hasClass('hidden');
    };

    CSSLayer.prototype.hide = function hide() {
      var _this3 = this;

      var res = void 0;
      if (!this.isHidden()) {
        this.jContainer.addClass('hidden');
        this.callInternal('hide');
        res = new Promise(function (resolve) {
          _this3.pendedCall(function () {
            _this3.callInternal('hidden');
            resolve();
          });
        });
      } else {
        res = Promise.resolve();
      }
      return res;
    };

    CSSLayer.prototype.show = function show() {
      var _this4 = this;

      var res = void 0;
      if (this.isHidden()) {
        this.jContainer.removeClass('hidden');
        this.callInternal('show');
        res = new Promise(function (resolve) {
          _this4.pendedCall(function () {
            _this4.callInternal('shown');
            resolve();
          });
        });
      } else {
        res = Promise.resolve();
      }
      return res;
    };

    return CSSLayer;
  }(_CSS3DRenderer.CSS3DObject);

  exports.default = CSSLayer;

  /***/
},
/* 14 */
/***/function (module, exports) {

  "use strict";
  "use strict";

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Cache = function () {
    function Cache() {
      var maxSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Infinity;
      var sizeof = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Cache.countSizeof;

      _classCallCheck(this, Cache);

      this.os = new Map();
      this.sizeof = sizeof;
      this.maxSize = maxSize;
      this.size = 0;
    }

    Cache.prototype.forEach = function forEach(clb) {
      this.os.forEach(function (v, k) {
        return clb([k, v]);
      });
    };

    Cache.countSizeof = function countSizeof(value) {
      return 1;
    };

    Cache.prototype.remove = function remove(k) {
      var res = false;
      var v = this.os.get(k);
      if (!v.locked || !v.locked(k)) {
        this.size -= this.sizeof(v);
        if (v.dispose) {
          v.dispose();
        }
        this.os.delete(k);
        res = true;
      }
      return res;
    };

    Cache.prototype.freeSpace = function freeSpace() {
      var arr = [];
      for (var _iterator = this.os, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var p = _ref;

        arr.push({ timestamp: p[1].timestamp, key: p[0] });
      }
      arr.sort(function (a, b) {
        return a.timestamp - b.timestamp;
      });
      for (var i = 0; i < arr.length && this.size > 3 * this.maxSize / 4; ++i) {
        this.remove(arr[i].key);
      }
    };

    Cache.prototype.dispose = function dispose() {
      var arr = [];
      for (var _iterator2 = this.os, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i2 >= _iterator2.length) break;
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) break;
          _ref2 = _i2.value;
        }

        var p = _ref2;

        arr.push({ v: p[1], k: p[0] });
      }
      for (var _iterator3 = arr, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i3 >= _iterator3.length) break;
          _ref3 = _iterator3[_i3++];
        } else {
          _i3 = _iterator3.next();
          if (_i3.done) break;
          _ref3 = _i3.value;
        }

        var o = _ref3;

        if (o.v.dispose) {
          o.v.dispose();
        }
        this.os.delete(o.k);
      }
    };

    Cache.recursionSizeof = function recursionSizeof(value) {
      var size = 0;
      if (value) {
        ++size;
        var len = value.length;
        if (len === undefined) {
          for (var p in value) {
            if (value.hasOwnProperty(p)) {
              size += Cache.recursionSizeof(value[p]);
            }
          }
        } else {
          size += len;
        }
      }
      return size;
    };

    Cache.prototype.getTimestamp = function getTimestamp() {
      return Date.now();
    };

    Cache.prototype.get = function get(key) {
      var value = this.os.get(key);
      if (value) {
        value.timestamp = this.getTimestamp();
      }
      return value;
    };

    Cache.prototype.put = function put(key, value) {
      value.timestamp = this.getTimestamp();
      this.os.set(key, value);
      this.size += this.sizeof(value);
      if (this.size > this.maxSize) {
        this.freeSpace();
      }
      return value;
    };

    return Cache;
  }();

  exports.default = Cache;

  /***/
},
/* 15 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var Controller = function (_THREE$EventDispatche) {
    _inherits(Controller, _THREE$EventDispatche);

    function Controller() {
      _classCallCheck(this, Controller);

      return _possibleConstructorReturn(this, _THREE$EventDispatche.apply(this, arguments));
    }

    Controller.prototype.handleDefault = function handleDefault(id, e, data) {
      //console.log(id+'-'+e.type+'-'+data);
    };

    Controller.prototype.dispatchAsync = function dispatchAsync(e) {
      var _this2 = this;

      Promise.resolve().then(function () {
        return _this2.dispatchEvent(e);
      });
    };

    Controller.prototype.dispose = function dispose() {};

    return Controller;
  }(_libs.THREE.EventDispatcher);

  exports.default = Controller;

  /***/
},
/* 16 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _EventConverter2 = __webpack_require__(6);

  var _EventConverter3 = _interopRequireDefault(_EventConverter2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var CustomEventConverter = function (_EventConverter) {
    _inherits(CustomEventConverter, _EventConverter);

    // custom
    // testIntersection(e, data);
    // custom.object
    // test(object);

    function CustomEventConverter(wnd, doc) {
      var customTest = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {
        return false;
      };
      var eDoc = arguments[3];

      _classCallCheck(this, CustomEventConverter);

      var _this = _possibleConstructorReturn(this, _EventConverter.call(this, wnd, doc));

      _this.eDoc = eDoc;
      _this.customTest = customTest;
      _this.customs = [];
      return _this;
    }

    CustomEventConverter.prototype.test = function test(object1, object2) {
      return object1 && object2 ? this.customTest(object1, object2) : false;
    };

    CustomEventConverter.prototype.getCallback = function getCallback(object) {
      return object.target.callback;
    };

    CustomEventConverter.prototype.addCustom = function addCustom(custom) {
      this.customs.push(custom);
    };

    CustomEventConverter.prototype.getObject = function getObject(e, data) {
      var object = void 0;
      if (data.doc === this.eDoc) {
        for (var _iterator = this.customs, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i >= _iterator.length) break;
            _ref = _iterator[_i++];
          } else {
            _i = _iterator.next();
            if (_i.done) break;
            _ref = _i.value;
          }

          var custom = _ref;

          object = custom.testIntersection(e, data);
          if (object) {
            break;
          }
        }
      }
      return object;
    };

    return CustomEventConverter;
  }(_EventConverter3.default);

  exports.default = CustomEventConverter;

  /***/
},
/* 17 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Finder = function () {
    Finder.isDelimetr = function isDelimetr(s) {
      return s === Finder.DELIMITER;
    };

    Finder.prototype.merge = function merge() {
      var as = [],
          map = [],
          strs = this.strs;
      var p = 0;
      for (var i = 0; i < strs.length; ++i) {
        if (strs[i].length) {
          map.push({
            base: i,
            offset: p
          });
          as.push(strs[i]);
          p += strs[i].length;
          if (i < strs.length - 1 && !Finder.isDelimetr(strs[i].charAt(strs[i].length - 1)) && !Finder.isDelimetr(strs[i + 1].charAt(0))) {
            as.push(Finder.DELIMITER);
            ++p;
          }
        }
      }
      this.map = map;
      this.str = as.join('');
    };

    Finder.prototype.addHits = function addHits(p) {
      var info = this.map[_Utils2.default.lowerBound(this.map, { offset: p }, function (a, b) {
        return a.offset - b.offset;
      })];
      var chars = this.pattern.length,
          i = info.base;
      p -= info.offset;
      while (chars) {
        if (this.strs[i].length) {
          var delimeter = i < this.strs.length - 1 && !Finder.isDelimetr(this.strs[i].charAt(this.strs[i].length - 1)) && !Finder.isDelimetr(this.strs[i + 1].charAt(0)),
              length = Math.min(this.strs[i].length + (delimeter ? 1 : 0) - p, chars);
          if (p < this.strs[i].length) {
            this.hits.push({
              index: i,
              offset: p,
              length: Math.min(length, this.strs[i].length - p)
            });
          }
          chars -= length;
          ++i;
          p = 0;
        }
      }
    };

    Finder.prototype.addContext = function addContext(p) {
      var f = p,
          l = p + this.pattern.length - 1,
          dels = this.props.contextLength,
          prevDels = dels + 1;
      while (dels && prevDels - dels) {
        prevDels = dels;
        if (dels % 2) {
          for (var i = f - 2; i >= 0; --i) {
            if (Finder.isDelimetr(this.str[i]) || i === 0) {
              f = i === 0 ? 0 : i + 1;
              --dels;
              break;
            }
          }
        } else {
          for (var _i = l + 2; _i < this.str.length; ++_i) {
            if (Finder.isDelimetr(this.str[_i]) || _i === this.str.length - 1) {
              l = _i === this.str.length - 1 ? _i === this.str.length - 1 : _i - 1;
              --dels;
              break;
            }
          }
        }
      }
      this.contexts.push(this.str.substr(f, l - f + 1));
    };

    Finder.prototype.getHits = function getHits() {
      return this.hits;
    };

    Finder.prototype.getContexts = function getContexts() {
      return this.contexts;
    };

    function Finder(strs, pattern, props) {
      _classCallCheck(this, Finder);

      this.props = _extends({}, Finder.defaults, props);
      this.strs = strs;
      var data = this.merge(strs);
      this.hits = [];
      this.contexts = [];
      this.pattern = pattern.toLowerCase();
      this.lstr = this.str.toLowerCase();
      var p = 0;
      while (true) {
        p = this.lstr.indexOf(this.pattern, p);
        if (p === -1) {
          break;
        } else {
          this.addHits(p);
          this.addContext(p);
          p += this.pattern.length;
        }
      }
    }

    return Finder;
  }();

  Finder.DELIMITER = ' ';
  Finder.defaults = {
    contextLength: 7,
    hits: true,
    contexts: true
  };
  exports.default = Finder;

  /***/
},
/* 18 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  _libs.PDFJS.workerSrc = (window.PDFJS_LOCALE ? PDFJS_LOCALE : { "pdfJsWorker": "js/pdf.worker.js", "pdfJsCMapUrl": "cmaps/" }).pdfJsWorker;
  _libs.PDFJS.cMapUrl = (window.PDFJS_LOCALE ? PDFJS_LOCALE : { "pdfJsWorker": "js/pdf.worker.js", "pdfJsCMapUrl": "cmaps/" }).pdfJsCMapUrl;
  _libs.PDFJS.cMapPacked = true;

  var Pdf = function () {
    function Pdf(src, loadingProgress) {
      var _this = this;

      _classCallCheck(this, Pdf);

      this.src = _Utils2.default.normalizeUrl(src);
      this.handlerQueue = [];
      this.progresData = { loaded: -1, total: 1 };
      this.loadingProgress = loadingProgress;

      _libs.PDFJS.getDocument({
        url: this.src,
        rangeChunkSize: 512 * 1024
      }, null, null, function (data) {
        if (_this.loadingProgress) {
          var cur = Math.floor(100 * data.loaded / data.total),
              old = Math.floor(100 * _this.progresData.loaded / _this.progresData.total);
          if (cur !== old) {
            cur = isNaN(cur) ? 0 : cur;
            cur = cur > 100 ? 100 : cur;
            _this.loadingProgress(cur);
          }
        }
        _this.progresData = data;
      }).then(function (handler) {
        if (handler.numPages > 1) {
          Promise.all([handler.getPage(1), handler.getPage(2)]).then(function (pages) {
            _this.init(handler, pages);
          });
        } else {
          _this.init(handler);
        }
      });
    }

    Pdf.prototype.init = function init(handler, pages) {
      this.handler = handler;
      this.doubledPages = pages ? Math.abs(2 * Pdf.getPageSize(pages[0]).width - Pdf.getPageSize(pages[1]).width) / Pdf.getPageSize(pages[0]).width < 1e-4 : false;
      var done = Promise.resolve(handler);

      var _loop = function _loop() {
        if (_isArray) {
          if (_i >= _iterator.length) return 'break';
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) return 'break';
          _ref = _i.value;
        }

        var clb = _ref;

        done = done.then(function (handler) {
          clb(handler);
          return handler;
        });
      };

      for (var _iterator = this.handlerQueue.reverse(), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        var _ret = _loop();

        if (_ret === 'break') break;
      }
    };

    Pdf.prototype.getPageType = function getPageType(n) {
      return !this.doubledPages || n === 0 || n === this.getPagesNum() - 1 ? 'full' : n & 1 ? 'left' : 'right';
    };

    Pdf.prototype.getPage = function getPage(n) {
      return this.handler.getPage(this.doubledPages ? Math.ceil(n / 2) + 1 : n + 1);
    };

    Pdf.prototype.dispose = function dispose() {
      this.handlerQueue.splice(0, this.handlerQueue.length);
      delete this.handler;
    };

    Pdf.prototype.setLoadingProgressClb = function setLoadingProgressClb(clb) {
      this.loadingProgress = clb;
    };

    Pdf.prototype.getPagesNum = function getPagesNum() {
      return this.handler ? this.doubledPages ? 2 * (this.handler.numPages - 1) : this.handler.numPages : undefined;
    };

    Pdf.getPageSize = function getPageSize(page) {
      return {
        width: page.view[2] - page.view[0],
        height: page.view[3] - page.view[1]
      };
    };

    //   if(pages>1) {
    //   handler.getPage(2).
    //   then((page)=> {
    //     const size1 = Pdf.getPageSize(page);
    //     this.props.doubledPages = 2*size0.width===size1.width;
    //     this.ready();
    //   }).
    //   catch(()=> this.ready());
    // }
    // else {

    Pdf.prototype.getHandler = function getHandler(clb) {
      if (this.handler) {
        clb(this.handler);
      } else {
        this.handlerQueue.push(clb);
      }
    };

    return Pdf;
  }();

  exports.default = Pdf;

  /***/
},
/* 19 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var ThreeEventConverterFs = function () {
    ThreeEventConverterFs.objectsTest = function objectsTest(object1, object2) {
      return object1 && object2 ? object1.object === object2.object : false;
    };

    ThreeEventConverterFs.objectsAndFacesTest = function objectsAndFacesTest(object1, object2) {
      return object1 && object2 ? object1.object === object2.object && object1.face.materialIndex === object2.face.materialIndex : false;
    };

    function ThreeEventConverterFs(visualWorld) {
      var test = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ThreeEventConverterFs.objectsAndFacesTest;

      _classCallCheck(this, ThreeEventConverterFs);

      this.visual = visualWorld;
      this.coords = new _libs.THREE.Vector2();
      this.raycaster = this.visual.raycaster;
      this.camera = this.visual.camera;
      this.threes = [];
      this.test = test;
    }

    ThreeEventConverterFs.prototype.addThree = function addThree(three) {
      this.threes.push(three);
    };

    ThreeEventConverterFs.prototype.removeThree = function removeThree(three) {
      var i = this.threes.indexOf(three);
      if (~i) {
        this.threes.splice(i, 1);
      }
    };

    ThreeEventConverterFs.prototype.getObject = function getObject(e) {
      this.setCoordsFromEvent(e);
      this.raycaster.setFromCamera(this.coords, this.camera);
      var intersects = this.raycaster.intersectObjects(this.threes);
      return intersects[0];
    };

    return ThreeEventConverterFs;
  }();

  exports.default = ThreeEventConverterFs;

  /***/
},
/* 20 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var ThreeUtils = function () {
    function ThreeUtils() {
      _classCallCheck(this, ThreeUtils);
    }

    ThreeUtils.vertices2UVs = function vertices2UVs(vertices, indeces, first, last, converClb) {
      var r = [];
      for (var i = first; i < last; ++i) {
        var vis = [indeces[i].a, indeces[i].b, indeces[i].c];
        for (var j = 0; j < vis.length; ++j) {
          if (!r[vis[j]]) {
            r[vis[j]] = converClb(vertices[vis[j]]);
          }
        }
      }
      return r;
    };

    ThreeUtils.computeFaceVertexUvs = function computeFaceVertexUvs(geometry, faces) {
      var uvs = [ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, 0, faces[0], function (p) {
        return new THREE.Vector2(p.x, 1 - p.z);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[0], faces[1], function (p) {
        return new THREE.Vector2(1 - p.x, 1 - p.z);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[1], faces[2], function (p) {
        return new THREE.Vector2(p.x, p.y);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[2], faces[3], function (p) {
        return new THREE.Vector2(1 - p.x, p.y);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[3], faces[4], function (p) {
        return new THREE.Vector2(p.z, p.y);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[4], geometry.faces.length, function (p) {
        return new THREE.Vector2(1 - p.z, p.y);
      })];

      var uvsi = 0;
      for (var i = 0; i < geometry.faces.length; ++i) {
        uvsi += faces[uvsi] === i;
        var f = geometry.faces[i];
        f.materialIndex = uvsi;
        geometry.faceVertexUvs[0][i] = [uvs[uvsi][f.a], uvs[uvsi][f.b], uvs[uvsi][f.c]];
      }
    };

    ThreeUtils.createMarker = function createMarker(p, c, size) {
      var marker = new THREE.Mesh(new THREE.SphereGeometry(size), new THREE.MeshPhongMaterial({ color: c }));
      marker.position.set(p.x, p.y, p.z);
      return marker;
    };

    ThreeUtils.findUvTris = function findUvTris(geometry, ps, first, last) {
      var res = [];
      for (var _iterator = ps, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var p = _ref;

        var found = false;
        for (var i = first; i < last && !found; ++i) {
          var tri = geometry.faceVertexUvs[0][i];
          if (_BaseMathUtils2.default.isInsideConvPoly(tri, p)) {
            res.push({
              coefs: _BaseMathUtils2.default.computeInterpCoefs(tri, p),
              i: i
            });
            found = true;
          }
        }
        if (!found) {
          console.error('Bad point');
          res.push(undefined);
        }
      }
      return res;
    };

    ThreeUtils.findInternalVertices = function findInternalVertices(geometry, ps, first, last) {
      var res = {};
      for (var i = first; i < last; ++i) {
        var tri = geometry.faceVertexUvs[0][i],
            f = geometry.faces[i],
            vs = [f.a, f.b, f.c];
        for (var j = 0; j < tri.length; ++j) {
          if (res[vs[j]] === undefined && _BaseMathUtils2.default.isInsidePoly(ps, tri[j])) {
            res[vs[j]] = {
              p: tri[j],
              i: vs[j],
              n: f.vertexNormals[j]
            };
          }
        }
      }
      return Object.values(res);
    };

    return ThreeUtils;
  }();

  exports.default = ThreeUtils;

  /***/
},
/* 21 */
/***/function (module, exports) {

  "use strict";
  "use strict";

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Target = function () {
    function Target() {
      _classCallCheck(this, Target);
    }

    Target.test = function test(object1, object2) {
      return object1.target === object2.target;
    };

    return Target;
  }();

  exports.default = Target;

  /***/
},
/* 22 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _Detector = __webpack_require__(45);

  var _Detector2 = _interopRequireDefault(_Detector);

  var _VisualWorld = __webpack_require__(66);

  var _VisualWorld2 = _interopRequireDefault(_VisualWorld);

  var _PdfLinksHandler = __webpack_require__(35);

  var _PdfLinksHandler2 = _interopRequireDefault(_PdfLinksHandler);

  var _Book = __webpack_require__(26);

  var _Book2 = _interopRequireDefault(_Book);

  var _BookView = __webpack_require__(29);

  var _BookView2 = _interopRequireDefault(_BookView);

  var _BookController = __webpack_require__(27);

  var _BookController2 = _interopRequireDefault(_BookController);

  var _PdfBookPropsBuilder = __webpack_require__(34);

  var _PdfBookPropsBuilder2 = _interopRequireDefault(_PdfBookPropsBuilder);

  var _ClbBookPropsBuilder = __webpack_require__(30);

  var _ClbBookPropsBuilder2 = _interopRequireDefault(_ClbBookPropsBuilder);

  var _LoadingController = __webpack_require__(53);

  var _LoadingController2 = _interopRequireDefault(_LoadingController);

  var _Search = __webpack_require__(58);

  var _Search2 = _interopRequireDefault(_Search);

  var _Bookmarks = __webpack_require__(44);

  var _Bookmarks2 = _interopRequireDefault(_Bookmarks);

  var _Thumbnails = __webpack_require__(63);

  var _Thumbnails2 = _interopRequireDefault(_Thumbnails);

  var _TocController = __webpack_require__(40);

  var _TocController2 = _interopRequireDefault(_TocController);

  var _BookPrinter = __webpack_require__(28);

  var _BookPrinter2 = _interopRequireDefault(_BookPrinter);

  var _AutoNavigator = __webpack_require__(24);

  var _AutoNavigator2 = _interopRequireDefault(_AutoNavigator);

  var _SoundsEnviroment = __webpack_require__(39);

  var _SoundsEnviroment2 = _interopRequireDefault(_SoundsEnviroment);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  _libs.$.fn.FlipBook = function (options) {
    var scene = {
      dispose: function dispose() {
        if (this.ready) {
          !scene.pdfLinksHandler || scene.pdfLinksHandler.dispose();
          delete scene.pdfLinksHandler;
          scene.sounds.dispose();
          delete scene.sounds;
          scene.tocCtrl.dispose();
          delete scene.tocCtrl;
          scene.thumbnails.dispose();
          delete scene.thumbnails;
          !scene.bookmarks || scene.bookmarks.dispose();
          delete scene.bookmarks;
          scene.ctrl.dispose();
          delete scene.ctrl;
          scene.bookPrinter.dispose();
          delete scene.bookPrinter;
          scene.book.dispose();
          delete scene.book;
          scene.propsBuilder.dispose();
          delete scene.propsBuilder;
          delete scene.bookBuilder;
          scene.visual.dispose();
          delete scene.visual;
          scene.view.dispose();
          delete scene.view;
          delete scene.dispose;
        } else {
          this.pendingDispose = true;
        }
      }
    };
    options = _extends({}, options);
    scene.view = new _BookView2.default(this.length ? this[0] : (0, _libs.$)('<div>').appendTo('body'), function () {
      if (!_Detector2.default.webgl) {
        _Detector2.default.addGetWebGLMessage({ parent: scene.view.getView() });
      } else {
        scene.loadingCtrl = new _LoadingController2.default(scene.view, true, function (progress) {
          return progress === 0 ? (0, _libs.tr)('Please wait... the Application is Loading') : (0, _libs.tr)('PDF is Loading:') + ' ' + progress + '%';
        });
        scene.visual = new _VisualWorld2.default(scene.view.getContainer().ownerDocument.defaultView, scene.view.getContainer().ownerDocument, scene.view.getView());
        scene.bookBuilder = function (props, sheets, pageCallback) {
          props.cssLayerProps = _extends({}, props.cssLayerProps, {
            scene: scene
          });
          if (options.propertiesCallback) {
            props = options.propertiesCallback(props);
          }
          scene.book = new _Book2.default(scene.visual, sheets, pageCallback, props);
          scene.bookPrinter = new _BookPrinter2.default(scene.visual, scene.book, (options.template || {}).printStyle);
          scene.loadingCtrl.dispose();
          delete scene.loadingCtrl;
          scene.ctrl = new _BookController2.default(scene.book, scene.view, options.controlsProps);
          scene.book.setInjector(function (w) {
            w.jQuery = w.$ = _libs.$;
            w.book = scene.book;
            w.bookCtrl = scene.ctrl;
            if (props.injector) {
              props.injector(w);
            }
          });
          scene.view.addHandler(scene.ctrl);
          scene.ctrl.setPrinter(scene.bookPrinter);
          var test = pageCallback(0);

          scene.search = new _Search2.default(scene.view.getSearchView(), scene.book.getPages());
          scene.search.onQuery = scene.book.setQuery.bind(scene.book);
          scene.book.addEventListener('searchResults', function (e) {
            scene.search.setResults(e.results, e.lastPage);
          });

          scene.thumbnails = new _Thumbnails2.default(scene.visual, scene.view.getThumbnailsView(), pageCallback, 2 * (sheets + 2), { kWtoH: props.width / props.height });
          scene.tocCtrl = new _TocController2.default(scene.view, scene.ctrl);
          scene.tocCtrl.setThumbnails(scene.thumbnails);
          scene.tocCtrl.setSearch(scene.search);
          scene.ctrl.setTocCtrl(scene.tocCtrl);
          scene.view.addHandler(scene.tocCtrl);

          if (test.type === 'pdf') {
            scene.pdfLinksHandler = new _PdfLinksHandler2.default(test.src, scene.ctrl, scene.visual.element);
            scene.book.addEventListener('pdfAnnotation', scene.pdfLinksHandler.handleEvent.bind(scene.pdfLinksHandler));
            test.src.getHandler(function (handler) {
              handler.getOutline().then(function (outline) {
                scene.bookmarks = new _Bookmarks2.default(scene.view.getBookmarksView(), outline);
                scene.tocCtrl.setBookmarks(scene.bookmarks, test.src);
              });
            });
            if (options.pdfLinks && options.pdfLinks.handler) {
              scene.pdfLinksHandler.setHandler(options.pdfLinks.handler);
            }
          }

          scene.sounds = new _SoundsEnviroment2.default(options.template);
          scene.ctrl.setSounds(scene.sounds);
          scene.sounds.subscribeFlips(scene.ctrl);

          scene.ready = true;
          new _AutoNavigator2.default(scene.visual, scene.ctrl, options.autoNavigation).dispose();
          if (options.ready) {
            options.ready(scene);
          }
          if (scene.pendingDispose) {
            scene.dispose();
          }
        };
        if (options.pdf) {
          scene.propsBuilder = new _PdfBookPropsBuilder2.default(options.pdf, scene.bookBuilder);
          scene.propsBuilder.pdf.setLoadingProgressClb(scene.loadingCtrl.setProgress.bind(scene.loadingCtrl));
        } else if (options.pageCallback) {
          scene.propsBuilder = new _ClbBookPropsBuilder2.default(scene.visual, options.pageCallback, options.pages, scene.bookBuilder);
        } else {
          scene.propsBuilder = new _ClbBookPropsBuilder2.default(scene.visual, _Book2.default.pageCallback, 6, scene.bookBuilder);
        }
      }
    }, options.template);
    return scene;
  };

  (0, _libs.$)(function () {
    var containers = (0, _libs.$)('.flip-book-container');
    for (var i = 0; i < containers.length; ++i) {
      var jContainer = (0, _libs.$)(containers[i]),
          src = jContainer.attr('src');
      if (!!src) {
        jContainer.FlipBook({ pdf: src });
      }
    }
  });

  window.jQuery = window.$ = _libs.$;

  /***/
},
/* 23 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  if (!Array.prototype.fill) {
    Array.prototype.fill = function (value) {

      //  1-2.
      if (this == null) {
        throw new TypeError('this is null or not defined');
      }

      var O = Object(this);

      //  3-5.
      var len = O.length >>> 0;

      //  6-7.
      var start = arguments[1];
      var relativeStart = start >> 0;

      //  8.
      var k = relativeStart < 0 ? Math.max(len + relativeStart, 0) : Math.min(relativeStart, len);

      //  9-10.
      var end = arguments[2];
      var relativeEnd = end === undefined ? len : end >> 0;

      //  11.
      var final = relativeEnd < 0 ? Math.max(len + relativeEnd, 0) : Math.min(relativeEnd, len);

      //  12.
      while (k < final) {
        O[k] = value;
        k++;
      }

      //  13.
      return O;
    };
  }

  if (!Array.prototype.find) {
    Object.defineProperty(Array.prototype, 'find', {
      value: function value(predicate) {
        'use strict';

        if (this == null) {
          throw new TypeError('Array.prototype.find called on null or undefined');
        }
        if (typeof predicate !== 'function') {
          throw new TypeError('predicate must be a function');
        }
        var list = Object(this);
        var length = list.length >>> 0;
        var thisArg = arguments[1];
        var value;

        for (var i = 0; i < length; i++) {
          value = list[i];
          if (predicate.call(thisArg, value, i, list)) {
            return value;
          }
        }
        return undefined;
      }
    });
  }

  if (!Array.prototype.findIndex) {
    Array.prototype.findIndex = function (predicate) {
      if (this == null) {
        throw new TypeError('Array.prototype.findIndex called on null or undefined');
      }
      if (typeof predicate !== 'function') {
        throw new TypeError('predicate must be a function');
      }
      var list = Object(this);
      var length = list.length >>> 0;
      var thisArg = arguments[1];
      var value;

      for (var i = 0; i < length; i++) {
        value = list[i];
        if (predicate.call(thisArg, value, i, list)) {
          return i;
        }
      }
      return -1;
    };
  }

  if (!Object.values) {
    Object.values = function values(O) {
      return Object.keys(O).map(function (name) {
        return O[name];
      }) || [];
    };
  }

  /***/
},
/* 24 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var AutoNavigator = function () {
    function AutoNavigator(context, bookCtrl) {
      var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

      _classCallCheck(this, AutoNavigator);

      props = _extends({}, props, {
        urlParam: props.urlParam || 'fb3d-page',
        navigates: props.navigates === undefined ? 1 : props.navigates
      });
      this.props = props;
      this.context = context;
      this.bookCtrl = bookCtrl;
      this.urlParam = props.urlParam;
      this.wnd = context.wnd;

      this.wnd.fb3d = _extends({}, this.wnd.fb3d);
      this.wnd.fb3d.navigator = _extends({}, this.wnd.fb3d.navigator);
      this.navigator = this.wnd.fb3d.navigator[this.urlParam] = _extends({}, this.wnd.fb3d.navigator[this.urlParam]);
      this.navigator.instances = (this.navigator.instances || 0) + 1;

      if (this.navigator.instances <= this.props.navigates) {
        this.bookCtrl.goToPage(this.getPageNumber());
      }
    }

    AutoNavigator.prototype.dispose = function dispose() {};

    AutoNavigator.prototype.getParameterByName = function getParameterByName(name, url) {
      if (!url) {
        url = window.location.href;
      }
      name = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + name + '(=([^]*)|&|#|$)'),
          results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    };

    AutoNavigator.prototype.getPageNumber = function getPageNumber() {
      var number = this.getParameterByName(this.urlParam);
      number = parseInt(number);
      if (isNaN(number)) {
        number = 1;
      }
      return number - 1;
    };

    return AutoNavigator;
  }();

  exports.default = AutoNavigator;

  /***/
},
/* 25 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Binder = function () {
    function Binder(visual, p) {
      var _this = this;

      _classCallCheck(this, Binder);

      this.visual = visual;
      this.p = _extends({}, p, {
        backSize: 2 * p.cover.depth + p.sheets * p.page.depth
      });
      this.OZ = new _libs.THREE.Vector3(0, 0, 1);

      this.backG = new _libs.THREE.BoxGeometry(p.cover.depth, this.p.backSize, p.cover.height);

      this.materials = [new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color })];

      var backM = new _libs.THREE.Mesh(this.backG, new _libs.THREE.MeshFaceMaterial(this.materials));

      if (p.cover.binderTexture !== '') {
        this.visual.textureLoader.load(p.cover.binderTexture, function (texture) {
          _this.materials[1].color.setHex(0xFFFFFF);
          _this.materials[1].map = texture;
          texture.minFilter = _libs.THREE.LinearFilter;
          texture.needsUpdate = true;
          _this.materials[1].needsUpdate = true;
        });
      }

      this.three = new _libs.THREE.Object3D();
      this.back = new _libs.THREE.Object3D();
      this.backRT = new _libs.THREE.Object3D();
      this.backRR = new _libs.THREE.Object3D();
      this.backLT = new _libs.THREE.Object3D();
      this.backLR = new _libs.THREE.Object3D();
      this.leftPivot = new _libs.THREE.Object3D();
      this.rightPivot = new _libs.THREE.Object3D();

      this.back.add(backM);
      this.back.add(this.leftPivot);
      this.back.add(this.rightPivot);
      this.backRT.add(this.back);
      this.backRR.add(this.backRT);
      this.backLT.add(this.backRR);
      this.backLR.add(this.backLT);
      this.three.add(this.backLR);
    }

    Binder.prototype.dispose = function dispose() {
      for (var _iterator = this.materials, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var m = _ref;

        if (m.map) {
          m.map = null;
          m.needsUpdate = true;
        }
        m.dispose();
      }
      delete this.materials;
      this.backG.dispose();
    };

    Binder.prototype.set = function set(angle) {
      var right = void 0,
          left = void 0;
      if (angle > Math.PI / 2) {
        right = Math.PI / 2;
        left = angle - Math.PI / 2;
      } else {
        right = angle;
        left = 0;
      }
      var p = this.p,
          tr1 = { x: -0.5 * p.cover.depth, y: 0.5 * p.backSize - p.cover.depth };
      this.backRT.position.set(tr1.x, tr1.y, 0);
      this.backRR.position.set(-tr1.x, -tr1.y, 0);
      this.backRR.quaternion.setFromAxisAngle(this.OZ, right);

      var tr2 = { x: p.backSize - 2 * p.cover.depth - 0.5 * p.cover.depth, y: 0.5 * p.backSize - p.cover.depth };
      this.backLT.position.set(tr2.x, tr2.y, 0);
      this.backLR.position.set(-tr2.x, -tr2.y, 0);
      this.backLR.quaternion.setFromAxisAngle(this.OZ, left);
    };

    Binder.prototype.setLeft = function setLeft(angle) {
      var PI = Math.PI;
      this.leftPivot.position.set(_MathUtils2.default.interpolateLinear([-PI, -PI / 2], [0, this.p.cover.depth], angle), 0.5 * this.p.backSize - 0.5 * this.p.cover.depth, 0);
      this.leftPivot.quaternion.setFromAxisAngle(this.OZ, angle);
    };

    Binder.prototype.setRight = function setRight(angle) {
      var PI = Math.PI;
      this.rightPivot.position.set(_MathUtils2.default.interpolateLinear([-PI / 2, 0], [this.p.cover.depth, 0], angle), -0.5 * this.p.backSize + 0.5 * this.p.cover.depth, 0);
      this.rightPivot.quaternion.setFromAxisAngle(this.OZ, angle);
    };

    Binder.prototype.joinLeftCover = function joinLeftCover(cover) {
      cover.three.position.set(0, -0.5 * this.p.cover.depth, 0);
      this.leftPivot.add(cover.three);
    };

    Binder.prototype.disconnectLeftCover = function disconnectLeftCover(cover) {
      this.leftPivot.remove(cover.three);
    };

    Binder.prototype.joinRightCover = function joinRightCover(cover) {
      cover.three.position.set(0, -0.5 * this.p.cover.depth, 0);
      this.rightPivot.add(cover.three);
    };

    Binder.prototype.disconnectRightCover = function disconnectRightCover(cover) {
      this.rightPivot.remove(cover.three);
    };

    return Binder;
  }();

  exports.default = Binder;

  /***/
},
/* 26 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _book = __webpack_require__(11);

  var _GraphUtils = __webpack_require__(7);

  var _GraphUtils2 = _interopRequireDefault(_GraphUtils);

  var _Binder = __webpack_require__(25);

  var _Binder2 = _interopRequireDefault(_Binder);

  var _Cover = __webpack_require__(31);

  var _Cover2 = _interopRequireDefault(_Cover);

  var _SheetBlock = __webpack_require__(10);

  var _SheetBlock2 = _interopRequireDefault(_SheetBlock);

  var _SheetPhysics = __webpack_require__(38);

  var _SheetPhysics2 = _interopRequireDefault(_SheetPhysics);

  var _PageManager = __webpack_require__(33);

  var _PageManager2 = _interopRequireDefault(_PageManager);

  var _CSSLayer = __webpack_require__(13);

  var _CSSLayer2 = _interopRequireDefault(_CSSLayer);

  var _CssLayersManager = __webpack_require__(32);

  var _CssLayersManager2 = _interopRequireDefault(_CssLayersManager);

  var _SearchEngine = __webpack_require__(36);

  var _SearchEngine2 = _interopRequireDefault(_SearchEngine);

  var _CustomEventConverter = __webpack_require__(16);

  var _CustomEventConverter2 = _interopRequireDefault(_CustomEventConverter);

  var _CircleTarget = __webpack_require__(68);

  var _CircleTarget2 = _interopRequireDefault(_CircleTarget);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var Book = function (_THREE$EventDispatche) {
    _inherits(Book, _THREE$EventDispatche);

    // pageCallback samples

    // (n)=> ({
    //   type: 'image',
    //   src: 'sample.png',
    //   interactive: false
    // });
    //
    // (n)=> ({
    //   type: 'html',
    //   src: 'sample.html',
    //   interactive: true
    // });
    //
    // const pdf = new Pdf('sample.pdf');
    // (n)=> ({
    //   type: 'pdf',
    //   src: pdf,
    //   interactive: false
    // });

    function Book(visual, sheets, pageCallback, props) {
      _classCallCheck(this, Book);

      var _this = _possibleConstructorReturn(this, _THREE$EventDispatche.call(this));

      sheets = Math.min(3, sheets);
      visual.jContainer.append('\n      <style type="text/css">\n        .demo-msg {\n          position: absolute;\n          top: 10px;\n          right: 10px;\n          padding: 10px;\n          background-color: #ffe4e1;\n          border-radius: 3px;\n        }\n      </style>\n      <div class="demo-msg">\n        This is the demo version, only 10 pages are available. Use the <a href="https://goo.gl/bt3Zhh" target="_blank">full version</a>.\n      </div>\n    ');
      _this.visual = visual;
      _this.mouseController = true;
      _this.p = _extends({}, Book.prepareProps(props), {
        sheets: sheets,
        pageCallback: pageCallback,
        zoom: 1,
        singlePage: false,
        autoResolution: {
          enable: false,
          k: 1.5
        }
      });
      _this.pageManager = new _PageManager2.default(visual, _this, _this.p);
      _CSSLayer2.default.init(visual.doc);
      _this.layerManager = new _CssLayersManager2.default(_this);
      _this.searchEngine = new _SearchEngine2.default(pageCallback, 2 * (sheets + 2));
      _this.searchEngine.onPageHitsChanged = function (page, query) {
        _this.pageManager.refreshPageQuery(page, query);
        _this.dispatchEvent({
          type: 'searchResults',
          results: _this.searchEngine.results,
          lastPage: page,
          query: query
        });
      };

      _this.three = new _libs.THREE.Object3D();

      _this.binder = new _Binder2.default(visual, _this.p);
      _this.three.add(_this.binder.three);

      _this.leftCover = new _Cover2.default(visual, _extends({}, _this.p, { setTexture: _this.setLeftCoverTexture.bind(_this) }), Math.PI / 2, 'opened');
      _this.binder.joinLeftCover(_this.leftCover);
      _this.subscribeSheetBlock(_this.leftCover, 0);
      _this.rightCover = new _Cover2.default(visual, _extends({}, _this.p, { setTexture: _this.setRightCoverTexture.bind(_this) }), 0, 'closed');
      _this.binder.joinRightCover(_this.rightCover);
      _this.subscribeSheetBlock(_this.rightCover, 2 * (_this.p.sheets + 1));

      _this.threeSheetBlocks = new _libs.THREE.Object3D();
      _this.three.add(_this.threeSheetBlocks);
      _this.threeSheetBlocks.position.set(0.5 * _this.p.cover.depth - 0.5 * sheets * _this.p.page.depth, -0.5 * sheets * _this.p.page.depth, 0);

      _this.sheetBlocks = [];
      if (sheets > 0) {
        _this.addSheetBlock(0, new _SheetBlock2.default(visual, _extends({}, _this.p, { setTexture: _this.setPageTexture.bind(_this) }), 0, sheets, 0, 'closed'));
      }

      _this.angle = _this.p.rtl ? Math.PI : 0;
      _this.closedAngle = 0;
      _this.set(_this.angle, 0);
      _this.lastMousePos = {
        t: 0
      };

      _this.three.position.set(-0.5 * _this.p.cover.depth + 0.5 * sheets * _this.p.page.depth, 0, 0);
      _this.sheetPhysics = new _SheetPhysics2.default(_this.p.page.width / _this.p.scale, _this.p.gravity, _this.p.page.cornerDeviation);

      _this.binds = {
        update: _this.update.bind(_this),
        lastMousePos: function lastMousePos(e) {
          _this.lastMousePos = _extends({}, _this.lastMousePos, {
            pageX: e.pageX,
            pageY: e.pageY
          });
        }
      };
      _this.visual.addRenderCallback(_this.binds.update);
      (0, _libs.$)(_this.visual.element).on('mousemove', _this.binds.lastMousePos);

      _this.binds.onPickCallback = _this.onPickCallback.bind(_this);
      _this.visual.drag.onPickCallback = _this.binds.onPickCallback;
      _this.binds.onDragCallback = _this.onDragCallback.bind(_this);
      _this.visual.drag.onDragCallback = _this.binds.onDragCallback;
      _this.binds.onReleaseCallback = _this.onReleaseCallback.bind(_this);
      _this.visual.drag.onReleaseCallback = _this.binds.onReleaseCallback;

      _this.dragAngle = 0.05;
      _this.tmp = {
        boxs: [new _libs.THREE.Box3(), new _libs.THREE.Box3()]
      };

      _this.visual.addObject(_this.three);
      _this.visual.addEventListener('resize', _this.pageManager.refreshZoom.bind(_this.pageManager));

      setTimeout(function () {
        _this.notifyBeforeAnimation();
        _this.notifyAfterAnimation();
      }, 100);
      return _this;
    }

    Book.prototype.dispose = function dispose() {
      this.visual.removeObject(this.three);
      this.sheetPhysics.dispose();
      delete this.visual.drag.onPickCallback;
      delete this.visual.drag.onDragCallback;
      delete this.visual.drag.onReleaseCallback;
      (0, _libs.$)(this.visual.element).off('mousemove', this.binds.lastMousePos);
      this.visual.removeRenderCallback(this.binds.update);
      this.removeSheetBlocks(0, this.sheetBlocks.length);
      this.binder.disconnectLeftCover(this.leftCover);
      this.removeSheetBlock(this.leftCover);
      this.binder.disconnectRightCover(this.rightCover);
      this.removeSheetBlock(this.rightCover);
      this.binder.dispose();
      this.layerManager.dispose();
      _CSSLayer2.default.dispose();
      this.pageManager.dispose();
    };

    // publics {

    Book.prototype.setAutoResolution = function setAutoResolution(enable) {
      var k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1.5;

      this.p.autoResolution = _extends({}, this.p.autoResolution, {
        enable: enable,
        k: k
      });
    };

    Book.prototype.setZoom = function setZoom(zoom, singlePage) {
      if (Math.abs(this.p.zoom - zoom) > 1e-3 || singlePage !== this.p.singlePage) {
        this.p.zoom = zoom;
        this.p.singlePage = singlePage;
        this.pageManager.refreshZoom();
      }
    };

    Book.prototype.getPageCallback = function getPageCallback() {
      return this.p.pageCallback;
    };

    Book.prototype.setQuery = function setQuery(query) {
      this.searchEngine.setQuery(query);
    };

    Book.prototype.isProcessing = function isProcessing() {
      return this.sheetPhysics.getSize() !== 0;
    };

    Book.prototype.getPages = function getPages() {
      return 4 + 2 * this.p.sheets;
    };

    Book.prototype.setFlipProgressClb = function setFlipProgressClb(clb) {
      this.p.flipProgressClb = clb;
    };

    Book.prototype.setInjector = function setInjector(injector) {
      this.p.injector = injector;
    };

    Book.prototype.isActivePage = function isActivePage(n) {
      var res = true;
      if (n > 1 && n < this.getPages() - 2) {
        for (var _iterator = this.sheetBlocks, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i >= _iterator.length) break;
            _ref = _iterator[_i++];
          } else {
            _i = _iterator.next();
            if (_i.done) break;
            _ref = _i.value;
          }

          var b = _ref;

          if (n - 2 > 2 * b.p.first && n - 2 < 2 * b.p.last - 1) {
            res = false;
            break;
          }
        }
      }
      return res;
    };

    Book.prototype.getBlockByPage = function getBlockByPage(n) {
      var block = void 0;
      if (n < 2) {
        block = this.leftCover;
      } else if (n < 2 * (this.p.sheets + 1)) {
        for (var _iterator2 = this.sheetBlocks, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var b = _ref2;

          if (n - 2 >= 2 * b.p.first && n - 2 < 2 * b.p.last) {
            block = b;
            break;
          }
        }
      } else {
        block = this.rightCover;
      }
      return block;
    };

    Book.prototype.getBlockPages = function getBlockPages(block) {
      var range = void 0;
      switch (block) {
        case this.leftCover:
          {
            range = [0, 1];
            break;
          }
        case this.rightCover:
          {
            range = [2 * (this.p.sheets + 1), 2 * (this.p.sheets + 1) + 1];
            break;
          }
        default:
          {
            range = block ? [2 * (block.p.first + 1), 2 * (block.p.last + 1) - 1] : undefined;
          }
      }
      return range;
    };

    Book.prototype.getPage = function getPage() {
      var PI = Math.PI;
      var p = void 0;
      if (this.angle === PI / 2 || this.angle === 3 * PI / 2) {
        for (var _iterator3 = this.sheetBlocks, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          if (_isArray3) {
            if (_i3 >= _iterator3.length) break;
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) break;
            _ref3 = _i3.value;
          }

          var block = _ref3;

          if (block.angle <= PI / 2) {
            p = this.getBlockPages(block)[0] - 1;
            break;
          }
        }
        if (!p) {
          p = this.getPages() - 3;
        }
      } else if (this.angle < PI / 2) {
        p = 0;
      } else if (this.angle > 3 * PI / 2) {
        p = 1;
      } else if (this.angle < PI) {
        p = this.getPages() - 3;
      } else if (this.angle >= PI) {
        p = this.getPages() - 1;
      }
      return p;
    };

    Book.prototype.getTopPages = function getTopPages() {
      var p = this.getPage();
      return p === 0 || p === this.getPages() - 1 ? [p] : [p, p + 1];
    };

    Book.prototype.getPageState = function getPageState(n) {
      return this.pageManager.getPageState(n);
    };

    Book.prototype.enableLoadingAnimation = function enableLoadingAnimation(enable) {
      this.pageManager.enableLoadingAnimation(enable);
    };

    Book.prototype.getLeftFlipping = function getLeftFlipping() {
      var block = void 0;
      var left = this.sheetBlocks[0],
          PI = Math.PI;
      if (this.angle === PI) {
        block = this.rightCover;
      } else {
        if (left && left.state === 'closed' && left.angle > PI / 2) {
          block = left;
        } else if (this.angle === PI / 2 || this.angle === 3 * PI / 2) {
          block = this.leftCover;
        }
      }
      return block;
    };

    Book.prototype.getRightFlipping = function getRightFlipping() {
      var block = void 0;
      var right = this.sheetBlocks[this.sheetBlocks.length - 1],
          PI = Math.PI;
      if (this.angle === 0) {
        block = this.leftCover;
      } else {
        if (right && right.state === 'closed' && right.angle <= PI / 2) {
          block = right;
        } else if (this.angle === PI / 2 || this.angle === 3 * PI / 2) {
          block = this.rightCover;
        }
      }
      return block;
    };

    Book.prototype.getClosedBlockAngle = function getClosedBlockAngle(angle) {
      var closedAngle = void 0,
          PI = Math.PI;

      if (this.leftCover.physicId) {
        var test = void 0;
        try {
          test = Math.abs(this.sheetPhysics.getParametr(this.leftCover.physicId, 'angle') - angle);
        } catch (e) {
          test = 0;
        }
        closedAngle = angle > PI / 2 || test > PI / 6 ? PI / 2 : this.closedAngle;
      } else if (this.rightCover.physicId) {
        var _test = void 0;
        try {
          _test = Math.abs(this.sheetPhysics.getParametr(this.rightCover.physicId, 'angle') - angle);
        } catch (e) {
          _test = 0;
        }
        closedAngle = angle < PI / 2 || _test > PI / 6 ? PI / 2 + 1e-7 : this.closedAngle;
      } else {
        closedAngle = PI / 2 + (angle !== 0) * 1e-7;
      }

      return {
        openedAngle: angle,
        closedAngle: closedAngle,
        binderTurn: this.closedAngle
      };
    };

    Book.prototype.flipLeft = function flipLeft() {
      var _this2 = this;

      var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
      var progressClb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.p.flipProgressClb;

      var block = void 0,
          res = void 0;
      if (this.sheetPhysics.getSize() < 25) {
        (function () {
          var left = _this2.sheetBlocks[0],
              PI = Math.PI;
          if (_this2.angle === PI) {
            res = _this2.connectPhysics(block = _this2.rightCover, _this2.p.cover.mass, PI, -_this2.p.cover.startVelocity, _this2.p.cover.flexibility, 0, function (angle, height) {
              return _this2.set(3 * PI / 2 - angle / 2, height);
            }, function (angle, height) {
              _this2.set(3 * PI / 2 - angle / 2, 0);
              _this2.setSheetBlocks(angle ? PI : PI / 2 + 1e-7, 'closed');
            }, progressClb);
          } else {
            if (left && left.state === 'closed' && left.angle > PI / 2) {
              block = size < left.getSize() ? _this2.splitSheetBlock(0, left.getSize() - size)[1] : left;
              res = _this2.connectPhysics(block, _this2.p.page.mass * block.getSize(), PI, -_this2.p.page.startVelocity, _this2.p.page.flexibility, 0, function (angle, height) {
                return block.set(_this2.getClosedBlockAngle(angle), 'opened', height);
              }, Book.finishAnimationClb.bind({ book: _this2, block: block }), progressClb);
            } else if (_this2.angle === PI / 2 || _this2.angle === 3 * PI / 2) {
              res = _this2.connectPhysics(block = _this2.leftCover, _this2.p.cover.mass, PI, -_this2.p.cover.startVelocity, _this2.p.cover.flexibility, 0, function (angle, height) {
                _this2.set(2 * PI - angle / 2, height);
                if (angle > PI / 2) {
                  _this2.setSheetBlocks(angle ? PI / 2 : 0, 'closed');
                }
              }, function (angle, height) {
                return _this2.set(angle === 0 ? 0 : 2 * PI - angle / 2, 0);
              }, progressClb);
            }
          }
        })();
      }
      return res;
    };

    Book.prototype.flipRight = function flipRight() {
      var _this3 = this;

      var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
      var progressClb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.p.flipProgressClb;

      var block = void 0,
          res = void 0;
      if (this.sheetPhysics.getSize() < 25) {
        (function () {
          var right = _this3.sheetBlocks[_this3.sheetBlocks.length - 1],
              PI = Math.PI;
          if (_this3.angle === 0) {
            res = _this3.connectPhysics(block = _this3.leftCover, _this3.p.cover.mass, 0, _this3.p.cover.startVelocity, _this3.p.cover.flexibility, 0, function (angle, height) {
              return _this3.set(angle / 2, height);
            }, function (angle, height) {
              _this3.set(angle / 2, 0);
              _this3.setSheetBlocks(angle ? PI / 2 : 0, 'closed');
            }, progressClb);
          } else {
            if (right && right.state === 'closed' && right.angle <= PI / 2) {
              block = size < right.getSize() ? _this3.splitSheetBlock(_this3.sheetBlocks.length - 1, size)[0] : right;
              res = _this3.connectPhysics(block, _this3.p.page.mass * block.getSize(), 0, _this3.p.page.startVelocity, _this3.p.page.flexibility, 0, function (angle, height) {
                return block.set(_this3.getClosedBlockAngle(angle), 'opened', height);
              }, Book.finishAnimationClb.bind({ book: _this3, block: block }), progressClb);
            } else if (_this3.angle === PI / 2 || _this3.angle === 3 * PI / 2) {
              res = _this3.connectPhysics(block = _this3.rightCover, _this3.p.cover.mass, 0, _this3.p.cover.startVelocity, _this3.p.cover.flexibility, 0, function (angle, height) {
                _this3.set(PI / 2 + angle / 2, height);
                if (angle < PI / 2) {
                  _this3.setSheetBlocks(PI / 2 + 1e-7, 'closed');
                }
              }, function (angle, height) {
                return _this3.set(PI / 2 + angle / 2, 0);
              }, progressClb);
            }
          }
        })();
      }
      return res;
    };

    // }

    Book.prototype.clearHoverInfo = function clearHoverInfo() {
      this.pageManager.turnOnEvents();
      delete this.hoverInfo.block.force;
      delete this.hoverInfo.block.cornerForce;
      delete this.hoverInfo;
    };

    Book.prototype.xSegment = function xSegment() {
      var boxs = this.tmp.boxs,
          res = {};
      if (this.leftCover.physicId) {
        boxs[0].setFromObject(this.rightCover.three);
        res.min = -(res.max = boxs[0].max.x);
      } else if (this.rightCover.physicId) {
        boxs[0].setFromObject(this.leftCover.three);
        res.max = -(res.min = boxs[0].min.x);
      } else {
        boxs[0].setFromObject(this.leftCover.three);
        boxs[1].setFromObject(this.rightCover.three);
        boxs[0].union(boxs[1]);
        res.min = boxs[0].min.x;
        res.max = boxs[0].max.x;
      }
      return res;
    };

    Book.prototype.computeTarget = function computeTarget(point) {
      var x = point.x,
          y = point.y,
          seg = this.xSegment(),
          angle = void 0;

      angle = (seg.max - x) / (seg.max - seg.min) * Math.PI;
      // angle = Math.acos(x/Math.sqrt(x*x+y*y));
      return Math.max(this.dragAngle, Math.min(Math.PI - this.dragAngle, angle));
    };

    Book.prototype.onPickCallback = function onPickCallback(object) {
      var res = false;
      var block = object.object.userData.self,
          p = _extends({}, object.uv),
          i = object.face.materialIndex;
      if (i < 2) {
        p.x = i === 0 ? p.x : 1 - p.x;
        if (block.cornerTarget.testIntersection(null, p) && block.physicId) {
          if (this.hoverInfo) {
            this.clearHoverInfo();
          }
          block.force = _SheetPhysics2.default.dragForceClb;
          block.cornerForce = _SheetPhysics2.default.getDragCornerForceClb(this.computeTarget(object.point));
          this.dragInfo = {
            object: object,
            block: block
          };
          res = true;
          this.pageManager.turnOffEvents();
        }
      }
      return res;
    };

    Book.prototype.onDragCallback = function onDragCallback(point) {
      var block = this.dragInfo.block,
          p = block.getProps();
      block.force = _SheetPhysics2.default.dragForceClb;
      block.cornerForce = _SheetPhysics2.default.getDragCornerForceClb(this.computeTarget(point));
      return true;
    };

    Book.prototype.onReleaseCallback = function onReleaseCallback() {
      delete this.dragInfo.block.force;
      delete this.dragInfo.block.cornerForce;
      delete this.dragInfo;
      this.pageManager.turnOnEvents();
    };

    Book.prototype.getFlipping = function getFlipping(i) {
      return i ? this.getLeftFlipping() : this.getRightFlipping();
    };

    Book.prototype.flip = function flip(i) {
      var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

      return i ? this.flipLeft(size) : this.flipRight(size);
    };

    Book.prototype.enableMouse = function enableMouse(enable) {
      this.mouseController = enable;
    };

    Book.prototype.cornerCallback = function cornerCallback(e, data) {
      var _this4 = this;

      if (this.mouseController) {
        (function () {
          var _data$data = data.data,
              i = _data$data.i,
              n = _data$data.n;

          if (e.type === 'mouseover') {
            if (_this4.hoverInfo && _this4.hoverInfo.pendings !== undefined) {
              ++_this4.hoverInfo.pendings;
            } else {
              if (_this4.hoverInfo) {
                console.warn('Wrong state: element is already hover');
                if (_this4.hoverInfo.n !== n) {
                  _this4.clearHoverInfo();
                }
              }
              if (!_this4.hoverInfo && !_this4.dragInfo) {
                (function () {
                  var res = Promise.resolve(undefined);
                  var hoverAngle = 0.02,
                      hover = _this4.getBlockByPage(n),
                      possible = _this4.getFlipping(i);
                  if (n > 1 && n < 2 * (_this4.p.sheets + 1) && hover.physicId && (hover.angle < hoverAngle || hover.angle > Math.PI - hoverAngle)) {
                    res = Promise.resolve(hover);
                  } else if (hover === possible) {
                    var sheetBlocks = [_this4.leftCover].concat(_this4.sheetBlocks, [_this4.rightCover]);
                    var j = sheetBlocks.indexOf(hover),
                        nextBlock = ~j ? sheetBlocks[j + 2 * i - 1] : undefined;
                    if (!nextBlock || !nextBlock.physicId || nextBlock.angle > hoverAngle && nextBlock.angle < Math.PI - hoverAngle) {
                      res = _this4.flip(i, 1).then(function (block) {
                        if (!block) {
                          delete _this4.hoverInfo;
                        } else {
                          _this4.sheetPhysics.setParametr(block.physicId, 'velocity', 0);
                        }
                        return block;
                      });
                      _this4.hoverInfo = {
                        pendings: 1
                      };
                    }
                  }
                  res.then(function (block) {
                    if (_this4.hoverInfo && _this4.hoverInfo.pendings < 1) {
                      block = undefined;
                      delete _this4.hoverInfo;
                    }
                    if (block) {
                      _this4.pageManager.turnOffEvents();
                      var p = block.getProps();
                      block.force = _this4.sheetPhysics.getTargetForceClb(p.mass * block.getSize(), i ? Math.PI - hoverAngle : hoverAngle);
                      block.cornerForce = function () {
                        return (i ? -1 : 1) * _SheetPhysics2.default.hoverCornerForceClb();
                      };
                      _this4.sheetPhysics.setParametr(block.physicId, 'angle', i ? Math.PI - 0.5 * hoverAngle : 0.5 * hoverAngle);
                      _this4.hoverInfo = {
                        n: n,
                        block: block
                      };
                      _this4.update(1 / 30);
                    }
                  });
                })();
              }
            }
          } else if (_this4.hoverInfo && e.type === 'mouseout') {
            if (_this4.hoverInfo.pendings !== undefined) {
              --_this4.hoverInfo.pendings;
            } else if (n === _this4.hoverInfo.n) {
              _this4.clearHoverInfo();
            }
          } else if (e.type === 'mousedown') {
            _this4.cornerClickData = {
              x: e.pageX,
              y: e.pageY
            };
          } else if (e.type === 'click') {
            if (Math.sqrt(Math.pow(_this4.cornerClickData.x - e.pageX, 2) + Math.pow(_this4.cornerClickData.y - e.pageY, 2)) < 5) {
              var hover = _this4.getBlockByPage(n);
              if (hover.physicId) {
                var id = hover.physicId,
                    props = hover.getProps();
                _this4.sheetPhysics.setParametr(id, 'velocity', (i ? -1 : 1) * props.startVelocity);
              }
            }
            delete _this4.cornerClickData;
          }
        })();
      }
    };

    Book.prototype.addSheetBlock = function addSheetBlock(p, block) {
      this.sheetBlocks.splice(p, 0, block);
      this.subscribeSheetBlock(block, 2);
      this.threeSheetBlocks.add(block.three);
    };

    Book.prototype.subscribeSheetBlock = function subscribeSheetBlock(block, offset) {
      var _this5 = this;

      var eventConverter = new _CustomEventConverter2.default(this.visual.wnd, this.visual.doc, _CircleTarget2.default.test),
          r = 0.15,
          target = new _CircleTarget2.default(1 - 0.5 * r, 0.5 * r, r);
      target.block = block;
      target.callback = this.cornerCallback.bind(this);
      eventConverter.addCustom(target);
      block.cornerTarget = target;
      block.three.userData.mouseCallback = function (e, data) {
        var i = data.face.materialIndex;
        if (i < 2) {
          var n = i === 0 ? offset + 2 * block.p.first : offset + 2 * block.p.last - 1;
          eventConverter.convert(e, { x: i === 0 ? data.uv.x : 1 - data.uv.x, y: data.uv.y, i: i, n: n });
          _this5.pageManager.transferEventToTexture(n, e, data);
        }
      };
      block.three.userData.touchCallback = function (e, data) {
        var i = data.face.materialIndex;
        if (i < 2) {
          var n = i === 0 ? offset + 2 * block.p.first : offset + 2 * block.p.last - 1;
          _this5.pageManager.transferEventToTexture(n, e, data);
        }
      };
      this.visual.drag.addThree(block.three);
      this.visual.mouseEvents.addThree(block.three);
      this.visual.touchEvents.addThree(block.three);
    };

    Book.prototype.removeSheetBlock = function removeSheetBlock(block) {
      this.visual.mouseEvents.removeThree(block.three);
      this.visual.touchEvents.removeThree(block.three);
      this.visual.drag.removeThree(block.three);
      this.threeSheetBlocks.remove(block.three);
      block.dispose();
    };

    Book.prototype.removeSheetBlocks = function removeSheetBlocks(first, size) {
      var blocks = this.sheetBlocks.splice(first, size);
      for (var _iterator4 = blocks, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i4 >= _iterator4.length) break;
          _ref4 = _iterator4[_i4++];
        } else {
          _i4 = _iterator4.next();
          if (_i4.done) break;
          _ref4 = _i4.value;
        }

        var block = _ref4;

        this.removeSheetBlock(block);
      }
    };

    Book.prototype.setTexture = function setTexture(material, n) {
      this.pageManager.setTexture(material, n);
    };

    Book.prototype.setPageTexture = function setPageTexture(material, n) {
      this.setTexture(material, n + 2);
    };

    Book.prototype.setLeftCoverTexture = function setLeftCoverTexture(material, n) {
      this.setTexture(material, n);
    };

    Book.prototype.setRightCoverTexture = function setRightCoverTexture(material, n) {
      this.setTexture(material, n + 2 * (this.p.sheets + 1));
    };

    Book.finishAnimationClb = function finishAnimationClb(angle) {
      this.block.set(this.book.getClosedBlockAngle(angle).closedAngle, 'closed', 0);
      var i = this.book.sheetBlocks.indexOf(this.block);
      if (~i) {
        if (angle === 0) {
          this.book.mergeSheetBlocks(i, this.book.sheetBlocks.length - i);
        } else {
          this.book.mergeSheetBlocks(0, i + 1);
        }
      }
    };

    Book.prototype.calcBlockForce = function calcBlockForce(block, object, angle, velocity, cornerHeight) {
      return block.force ? block.force(object, angle, velocity, cornerHeight) : 0;
    };

    Book.prototype.calcBlockCornerForce = function calcBlockCornerForce(block, object, angle, velocity, cornerHeight) {
      return block.cornerForce ? block.cornerForce(object, angle, velocity, cornerHeight) : 0;
    };

    Book.prototype.notifyBeforeAnimation = function notifyBeforeAnimation() {
      var res = void 0;
      if (this.animationNotification) {
        res = Promise.reject();
      } else {
        this.animationNotification = true;
        this.dispatchEvent({
          type: 'beforeAnimation'
        });
        res = this.layerManager.hide();
      }
      return res;
    };

    Book.prototype.notifyAfterAnimation = function notifyAfterAnimation() {
      if (this.animationNotification) {
        delete this.animationNotification;
        this.layerManager.show();
        this.dispatchEvent({
          type: 'afterAnimation'
        });
      }
    };

    Book.prototype.connectPhysics = function connectPhysics(block, mass, angle, velocity, flexibility, coverHeight, simulateClb, removeClb, progressClb) {
      var _this6 = this;

      var type = function type() {
        return _this6.hoverInfo ? 'hover' : _this6.dragInfo ? 'drag' : 'free';
      },
          res = this.sheetPhysics.getSize() ? Promise.resolve() : this.notifyBeforeAnimation();
      return res.then(function () {
        block.physicId = _this6.sheetPhysics.addObject(mass, angle, velocity, flexibility, coverHeight, function (angl, ch) {
          simulateClb(angl, ch);
          progressClb(block, Math.abs(angle - angl) / Math.PI, 'process', type());
        }, function (angl, ch) {
          removeClb(angl, ch);
          delete block.physicId;
          progressClb(block, Math.abs(angle - angl) / Math.PI, 'finish', type());
          Promise.resolve().then(function () {
            if (!_this6.sheetPhysics.getSize()) {
              _this6.notifyAfterAnimation();
            }
          });
        }, function (object, angle, velocity, cornerHeight) {
          return _this6.calcBlockForce(block, object, angle, velocity, cornerHeight);
        }, function (object, angle, velocity, cornerHeight) {
          return _this6.calcBlockCornerForce(block, object, angle, velocity, cornerHeight);
        });
        progressClb(block, 0, 'init', type());
        return block;
      }).catch(function () {
        return undefined;
      });
    };

    Book.prototype.update = function update(dt) {
      var _this7 = this;

      this.lastMousePos.t += dt;
      if (this.isProcessing() && this.lastMousePos.pageX !== undefined && this.lastMousePos.t - (this.lastMousePos.lastT || 0) > 0.25 && !this.hoverInfo && !this.dragInfo) {
        this.lastMousePos.lastT = this.lastMousePos.t;
        Promise.resolve().then(function () {
          (0, _libs.$)(_this7.visual.element).trigger(_libs.$.Event('mousemove', _this7.lastMousePos));
        });
      }
      this.sheetPhysics.simulate(dt);
    };

    Book.prototype.splitSheetBlock = function splitSheetBlock(i, leftSize) {
      var block = this.sheetBlocks[i];
      if (block && leftSize < block.getSize()) {
        var newBlock = new _SheetBlock2.default(this.visual, _extends({}, this.p, { setTexture: this.setPageTexture.bind(this) }), block.p.first, block.p.first + leftSize, block.angle, block.state);
        block.set(block.angle, block.state, block.corner.height, block.p.first + leftSize, block.p.last);
        this.addSheetBlock(i, newBlock);
        return [newBlock, block];
      }
    };

    Book.prototype.mergeSheetBlocks = function mergeSheetBlocks(first, size) {
      if (first < this.sheetBlocks.length) {
        size = Math.min(this.sheetBlocks.length - first, size);
        var firstBlock = this.sheetBlocks[first],
            lastBlock = this.sheetBlocks[first + size - 1];
        firstBlock.set(firstBlock.angle, firstBlock.state, firstBlock.corner.height, firstBlock.p.first, lastBlock.p.last);
        this.removeSheetBlocks(first + 1, size - 1);
      }
    };

    Book.prototype.setSheetBlocks = function setSheetBlocks(angle, state) {
      if (state === 'closed') {
        this.closedAngle = angle;
      }
      this.sheetBlocks.forEach(function (s) {
        if (!s.physicId) {
          s.set(angle, state);
        }
      });
    };

    Book.prototype.set = function set(angle) {
      var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      this.angle = angle;
      var PI = Math.PI;
      if (angle < PI / 4) {
        this.binder.set(0);

        this.binder.setLeft(-PI / 2 + 2 * angle);
        this.leftCover.set(PI / 2, 'opened', height);

        this.setSheetBlocks(0, 'closed');

        this.binder.setRight(0);
        this.rightCover.set(0, 'closed', 0);
      } else if (angle < 2 * PI / 4) {
        var a = 2 * (angle - PI / 4);
        this.binder.set(a);

        this.binder.setLeft(-a);
        this.leftCover.set(PI / 2 + a, 'opened', height);

        this.setSheetBlocks(a, 'closed');

        this.binder.setRight(-a);
        this.rightCover.set(a, 'closed', 0);
      } else if (angle < 3 * PI / 4) {
        var _a = 2 * (angle - PI / 2);
        this.binder.set(PI / 2);

        this.binder.setLeft(-PI / 2);
        this.leftCover.set(PI, 'opened', 0);

        this.binder.setRight(-PI / 2);
        this.rightCover.set(_a, 'opened', height);
      } else if (angle < 4 * PI / 4) {
        var _a2 = 2 * (angle - 3 * PI / 4) + PI / 2;
        this.binder.set(_a2);

        this.binder.setLeft(-_a2);
        this.leftCover.set(_a2, 'closed', 0);

        this.setSheetBlocks(_a2, 'closed');

        this.binder.setRight(-PI / 2);
        this.rightCover.set(PI / 2, 'opened', height);
      } else if (angle < 5 * PI / 4) {
        this.binder.set(PI);

        this.binder.setLeft(-PI);
        this.leftCover.set(PI, 'closed', 0);

        this.setSheetBlocks(PI, 'closed');

        this.binder.setRight(-PI / 2 - 2 * (angle - PI));
        this.rightCover.set(PI / 2, 'opened', height);
      } else if (angle < 6 * PI / 4) {
        var _a3 = 2 * (angle - 5 * PI / 4);
        this.binder.set(PI - _a3);

        this.binder.setLeft(-PI + _a3);
        this.leftCover.set(PI - _a3, 'closed', 0);

        this.setSheetBlocks(PI - _a3, 'closed');

        this.binder.setRight(-PI + _a3);
        this.rightCover.set(PI / 2 - _a3, 'opened', height);
      } else if (angle < 7 * PI / 4) {
        var _a4 = 2 * (angle - 6 * PI / 4);
        this.binder.set(PI / 2);

        this.binder.setLeft(-PI / 2);
        this.leftCover.set(PI - _a4, 'opened', height);

        this.binder.setRight(-PI / 2);
        this.rightCover.set(0, 'opened', 0);
      } else if (angle < 8 * PI / 4) {
        var _a5 = 2 * (angle - 7 * PI / 4);
        this.binder.set(PI / 2 - _a5);

        this.binder.setLeft(-PI / 2);
        this.leftCover.set(PI / 2, 'opened', height);

        this.setSheetBlocks(PI / 2 - _a5, 'closed');

        this.binder.setRight(-PI / 2 + _a5);
        this.rightCover.set(PI / 2 - _a5, 'closed', 0);
      }
    };

    Book.createSideTexture = function createSideTexture(color) {
      var jC = (0, _libs.$)('<canvas width="8" height="8"></canvas>');
      var ctx = jC[0].getContext('2d');
      ctx.beginPath();
      ctx.fillStyle = _GraphUtils2.default.color2Rgba(color, 1);
      ctx.rect(0, 0, 8, 7);
      ctx.fill();
      ctx.beginPath();
      ctx.fillStyle = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(color, 0.5), 1);
      ctx.rect(0, 7, 8, 1);
      ctx.fill();
      return jC[0];
    };

    Book.prepareProps = function prepareProps(props) {
      return Book.calcProps(Book.mergeProps((0, _book.props)(), props));
    };

    Book.mergeProps = function mergeProps(first, second) {
      second = second || {};
      return _extends({}, first, second, {
        sheet: _extends({}, first.sheet, second.sheet),
        cover: _extends({}, first.cover, second.cover),
        page: _extends({}, first.page, second.page),
        cssLayerProps: _extends({}, first.cssLayerProps, second.cssLayerProps)
      });
    };

    Book.calcProps = function calcProps(props) {
      var p = _extends({}, props, {
        sheet: _extends({}, props.sheet),
        cover: _extends({}, props.sheet, props.cover),
        page: _extends({}, props.sheet, props.page),
        cssLayerProps: _extends({}, props.cssLayerProps, {
          $: _libs.$
        })
      }),
          scale = 10,
          height = scale * p.height,
          width = scale * p.width,
          flipProgressClb = function flipProgressClb() {
        return undefined;
      },
          sheet = {
        sideTexture: p.sheet.sideTexture || Book.createSideTexture(p.sheet.color)
      },
          cover = _extends({}, sheet, p.cover, {
        depth: scale * p.cover.depth,
        width: width,
        height: height,
        padding: scale * p.cover.padding
      }),
          page = _extends({}, sheet, p.page, {
        depth: scale * p.page.depth,
        width: cover.width - cover.padding,
        height: cover.height - 2 * cover.padding
      }),
          marker = {
        use: false,
        color: 0XFF0000,
        size: scale * 0.001
      };
      if (cover.color !== sheet.color && !p.cover.sideTexture) {
        cover.sideTexture = Book.createSideTexture(cover.color);
      }
      if (page.color !== sheet.color && !p.page.sideTexture) {
        page.sideTexture = Book.createSideTexture(page.color);
      }
      return _extends({}, p, { scale: scale, height: height, width: width, flipProgressClb: flipProgressClb, cover: cover, page: page, marker: marker });
    };

    return Book;
  }(_libs.THREE.EventDispatcher);

  exports.default = Book;

  /***/
},
/* 27 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
    return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  };

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _Controller2 = __webpack_require__(15);

  var _Controller3 = _interopRequireDefault(_Controller2);

  var _bookController = __webpack_require__(42);

  var _EventsToActions = __webpack_require__(49);

  var _EventsToActions2 = _interopRequireDefault(_EventsToActions);

  var _stats = __webpack_require__(70);

  var _stats2 = _interopRequireDefault(_stats);

  var _Object3DWatcher = __webpack_require__(55);

  var _Object3DWatcher2 = _interopRequireDefault(_Object3DWatcher);

  var _FullScreen = __webpack_require__(50);

  var _FullScreen2 = _interopRequireDefault(_FullScreen);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var BookController = function (_Controller) {
    _inherits(BookController, _Controller);

    function BookController(book, view, props) {
      _classCallCheck(this, BookController);

      var _this = _possibleConstructorReturn(this, _Controller.call(this));

      _this.navigationControls = true;
      _this.book = book;
      _this.visual = book.visual;
      _this.p = BookController.prepareProps(props);
      _this.p.rtl = book.p.rtl;
      _this.devicePixelRatio = _this.visual.wnd.devicePixelRatio || 1;

      _this.orbit = book.visual.getOrbit();
      book.setFlipProgressClb(_this.updateViewIfState.bind(_this));
      _this.view = view;
      _this.bindActions();

      _this.state = {
        smartPan: !_this.actions['cmdSmartPan'].active,
        singlePage: _this.actions['cmdSinglePage'].active || _this.actions['cmdSinglePage'].activeForMobile && _this.devicePixelRatio > 1,
        stats: _this.actions['cmdStats'].active,
        lighting: _this.p.lighting.default,
        activeSide: 1
      };

      _this.boxs = [new _libs.THREE.Box3(), new _libs.THREE.Box3()];
      _this.bookWatcher = new _Object3DWatcher2.default(_this.visual, function () {
        if (_this.state.singlePage) {
          if (_this.state.activeSide) {
            _this.boxs[0].setFromObject(book.rightCover.three);
          } else {
            _this.boxs[0].setFromObject(book.leftCover.three);
          }
        } else {
          _this.boxs[0].setFromObject(book.leftCover.three);
          _this.boxs[1].setFromObject(book.rightCover.three);
          _this.boxs[0].union(_this.boxs[1]);
        }
        return _this.boxs[0];
      });
      _this.bookWatcher.scale = _this.p.scale.default;
      _this.book.setZoom(_this.bookWatcher.scale, _this.state.singlePage);

      _this.Stats = new _stats2.default();
      _this.Stats.domElement.style.position = 'absolute';
      _this.Stats.domElement.style.top = '0px';

      _this.visual.setExtraLighting(_this.state.lighting);
      _this.binds = {
        onScreenModeChanged: _this.onScreenModeChanged.bind(_this),
        stats: _this.Stats.update.bind(_this.Stats),
        onUpdateView: _this.updateView.bind(_this)
      };
      _FullScreen2.default.addEventListener(_this.view.getParentContainer().ownerDocument, _this.binds.onScreenModeChanged);

      _this.cmdSmartPan();

      if (_this.view.templateObject.appLoaded) {
        Promise.resolve().then(_this.view.templateObject.appLoaded);
      }

      _this.book.enableLoadingAnimation(_this.p.loadingAnimation.book);
      if (_this.p.loadingAnimation.skin) {
        _this.initLoadingAnimation();
      }

      _this.book.enableLoadingAnimation(_this.p.loadingAnimation.book);
      _this.book.setAutoResolution(_this.p.autoResolution.enabled, _this.p.autoResolution.coefficient);
      return _this;
    }

    BookController.prototype.dispose = function dispose() {
      _FullScreen2.default.removeEventListener(this.view.getParentContainer().ownerDocument, this.binds.onScreenModeChanged);
      delete this.book;
      delete this.view;
      delete this.visual;
    };

    BookController.prototype.initLoadingAnimation = function initLoadingAnimation() {
      var _this2 = this;

      var handler = function handler() {
        var pages = _this2.book.getTopPages();
        var visible = false;
        for (var _iterator = pages, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i >= _iterator.length) break;
            _ref = _iterator[_i++];
          } else {
            _i = _iterator.next();
            if (_i.done) break;
            _ref = _i.value;
          }

          var n = _ref;

          var state = _this2.book.getPageState(n);
          visible = state === undefined || state === 'loading';
          if (visible) {
            break;
          }
        }
        _this2.view.setState('widLoading', {
          visible: visible
        });
      };
      this.book.addEventListener('beforeAnimation', handler);
      this.book.addEventListener('afterAnimation', handler);
      this.book.addEventListener('loadPage', handler);
      this.book.addEventListener('loadedPage', handler);
    };

    BookController.prototype.enableNavigation = function enableNavigation(enable) {
      this.navigationControls = enable;
    };

    BookController.prototype.setTocCtrl = function setTocCtrl(tocCtrl) {
      this.tocCtrl = tocCtrl;
      this.tocCtrl.onChange = this.updateView.bind(this);
      this.updateView();
    };

    BookController.prototype.setPrinter = function setPrinter(printer) {
      this.printer = printer;
      this.updateView();
    };

    BookController.prototype.setSounds = function setSounds(sounds) {
      this.sounds = sounds;
      sounds.setEnabled(this.actions['cmdSounds'].active);
      this.updateView();
    };

    BookController.prototype.onScreenModeChanged = function onScreenModeChanged(e) {
      this.updateView();
    };

    BookController.prototype.canZoomIn = function canZoomIn() {
      return !this.state.smartPan || Math.abs(this.bookWatcher.scale - this.p.scale.max) > this.p.eps;
    };

    BookController.prototype.canZoomOut = function canZoomOut() {
      return !this.state.smartPan || Math.abs(this.bookWatcher.scale - this.p.scale.min) > this.p.eps;
    };

    BookController.prototype.canDefaultZoom = function canDefaultZoom() {
      return this.state.smartPan;
    };

    BookController.prototype.setBookZoom = function setBookZoom(scale) {
      var _this3 = this;

      setTimeout(function () {
        if (_this3.bookWatcher.scale === scale) {
          _this3.book.setZoom(scale, _this3.state.singlePage);
        }
      }, 1000);
    };

    BookController.prototype.cmdZoomIn = function cmdZoomIn() {
      if (this.state.smartPan) {
        this.bookWatcher.scale = Math.min(this.p.scale.max, this.bookWatcher.scale + this.p.scale.delta);
        this.setBookZoom(this.bookWatcher.scale);
      } else {
        this.orbit.zoomIn(6.6 * this.p.scale.delta / 0.32);
      }
      this.updateView();
    };

    BookController.prototype.cmdZoomOut = function cmdZoomOut() {
      if (this.state.smartPan) {
        this.bookWatcher.scale = Math.max(this.p.scale.min, this.bookWatcher.scale - this.p.scale.delta);
        this.setBookZoom(this.bookWatcher.scale);
      } else {
        this.orbit.zoomOut(6.6 * this.p.scale.delta / 0.32);
      }
      this.updateView();
    };

    BookController.prototype.cmdDefaultZoom = function cmdDefaultZoom() {
      if (this.state.smartPan) {
        this.bookWatcher.scale = this.p.scale.default;
        this.setBookZoom(this.bookWatcher.scale);
        this.updateView();
      }
    };

    BookController.prototype.cmdToc = function cmdToc() {
      if (this.tocCtrl) {
        this.tocCtrl.togle();
      }
    };

    BookController.prototype.cmdFastBackward = function cmdFastBackward() {
      this.startFlip(this.book.flipLeft(5));
    };

    BookController.prototype.cmdBackward = function cmdBackward() {
      var _this4 = this;

      if (this.state.singlePage) {
        this.state.activeSide = (this.getPage() + 1) % 2;
        if (this.state.activeSide) {
          this.state.activeSide = 0;
          this.updateView();
        } else {
          this.startFlip(this.book.flipLeft(1)).then(function (block) {
            if (block) {
              _this4.state.activeSide = 1;
            }
          });
        }
      } else {
        this.startFlip(this.book.flipLeft(1));
      }
    };

    BookController.prototype.cmdForward = function cmdForward() {
      var _this5 = this;

      if (this.state.singlePage) {
        this.state.activeSide = (this.getPage() + 1) % 2;
        if (!this.state.activeSide) {
          this.state.activeSide = 1;
          this.updateView();
        } else {
          this.startFlip(this.book.flipRight(1)).then(function (block) {
            if (block) {
              _this5.state.activeSide = 0;
            }
          });
        }
      } else {
        this.startFlip(this.book.flipRight(1));
      }
    };

    BookController.prototype.cmdFastForward = function cmdFastForward() {
      this.startFlip(this.book.flipRight(5));
    };

    BookController.prototype.cmdSave = function cmdSave() {
      window.open(this.p.downloadURL, '_blank');
    };

    BookController.prototype.cmdPrint = function cmdPrint() {
      this.printer.print();
    };

    BookController.prototype.cmdFullScreen = function cmdFullScreen() {
      if (!_FullScreen2.default.activated()) {
        _FullScreen2.default.request(this.view.getParentContainer());
      } else {
        _FullScreen2.default.cancel();
      }
    };

    BookController.prototype.cmdSmartPan = function cmdSmartPan() {
      this.state.smartPan = !this.state.smartPan;
      if (this.state.smartPan) {
        this.orbit.minAzimuthAngle = 0;
        this.orbit.maxAzimuthAngle = 0;
        this.orbit.minPolarAngle = 0;
        this.orbit.maxPolarAngle = Math.PI / 4;
        this.bookWatcher.enabled = true;
      } else {
        this.orbit.minAzimuthAngle = -Infinity;
        this.orbit.maxAzimuthAngle = Infinity;
        this.orbit.minPolarAngle = 0;
        this.orbit.maxPolarAngle = Math.PI;
        this.bookWatcher.enabled = false;
      }
      this.updateView();
    };

    BookController.prototype.cmdSinglePage = function cmdSinglePage() {
      this.state.singlePage = !this.state.singlePage;
      this.setBookZoom(this.bookWatcher.scale);
      this.updateView();
    };

    BookController.prototype.cmdSounds = function cmdSounds() {
      if (this.sounds) {
        this.sounds.togle();
      }
      this.updateView();
    };

    BookController.prototype.cmdStats = function cmdStats() {
      this.state.stats = !this.state.stats;
      if (this.state.stats) {
        (0, _libs.$)(this.view.getContainer()).append(this.Stats.domElement);
        this.visual.addRenderCallback(this.binds.stats);
      } else {
        (0, _libs.$)(this.view.getContainer()).find(this.Stats.domElement).remove();
        this.visual.removeRenderCallback(this.binds.stats);
      }
      this.updateView();
    };

    BookController.prototype.cmdLightingUp = function cmdLightingUp() {
      this.state.lighting = Math.min(this.state.lighting + this.p.lighting.delta, this.p.lighting.max);
      this.visual.setExtraLighting(this.state.lighting);
      this.updateView();
    };

    BookController.prototype.cmdLightingDown = function cmdLightingDown() {
      this.state.lighting = Math.max(this.state.lighting - this.p.lighting.delta, this.p.lighting.min);
      this.visual.setExtraLighting(this.state.lighting);
      this.updateView();
    };

    BookController.prototype.goToPage = function goToPage(page) {
      var _this6 = this;

      if (this.p.rtl) {
        page = this.book.getPages() - 1 - page;
      }
      var pageNum = Math.max(Math.min(page, this.book.getPages() - 1), 0);
      this.state.activeSide = (pageNum + 1) % 2;
      var target = Math.max(Math.min(page - 1 + page % 2, this.book.getPages() - 1), 0),
          current = this.book.getPage(),
          flips = [],
          covs = 0;;
      if (target != current) {
        if (current === 0) {
          flips.push(1);
          current += 1;
          ++covs;
        } else if (current === this.book.getPages() - 1) {
          flips.push(-1);
          current -= 2;
          ++covs;
        }
        var cv = 0;
        if (target === 0) {
          cv = -1;
          target += 1;
          ++covs;
        } else if (target === this.book.getPages() - 1) {
          cv = 1;
          target -= 2;
          ++covs;
        }
        if (target - current) {
          flips.push(Math.ceil((target - current) / 2));
        }
        if (cv) {
          flips.push(cv);
        }
      }

      var setClb = function setClb(fl, time, clb) {
        setTimeout(function () {
          if (fl < 0) {
            _this6.startFlip(_this6.book.flipLeft(-fl, clb));
          } else {
            _this6.startFlip(_this6.book.flipRight(fl, clb));
          }
        }, time);
      };

      if (covs === 2) {
        setClb(flips[0], 0, function (block, progress, state) {
          if (state == 'finish' && progress == 1) {
            setClb(flips[flips.length - 1], 0);
          }
        });
        setClb(flips[1], 500);
      } else {
        var time = 0;
        for (var _iterator2 = flips, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var fl = _ref2;

          setClb(fl, time);
          time += 250;
        }
      }
    };

    BookController.prototype.startFlip = function startFlip(flipRes) {
      var _this7 = this;

      return flipRes ? flipRes.then(function (block) {
        if (block) {
          _this7.dispatchAsync({
            type: 'startFlip'
          });
        }
        return block;
      }) : Promise.resolve(undefined);
    };

    BookController.prototype.endFlip = function endFlip(block) {
      this.dispatchAsync({
        type: 'endFlip'
      });
      return block;
    };

    BookController.prototype.getPage = function getPage() {
      var page = this.book.getPage();
      return page ? Math.min(this.book.getPage() + this.state.activeSide, this.book.getPages() - 1) : 0;
    };

    BookController.prototype.getPageForGUI = function getPageForGUI() {
      var n = (this.state.singlePage ? this.getPage() : this.book.getPage()) + 1;
      if (this.p.rtl) {
        n = this.book.getPages() - n + 1;
      }
      return n;
    };

    BookController.prototype.inpPage = function inpPage(e, data) {
      this.goToPage(data - 1);
    };

    BookController.prototype.updateViewIfState = function updateViewIfState(block, progress, state, type) {
      if (state === 'init' || state === 'finish') {
        setTimeout(this.updateView.bind(this), 100);
      }
      if (state === 'finish') {
        this.endFlip(block);
      }
    };

    BookController.prototype.updateViewState = function updateViewState() {
      this.viewState = {
        'cmdZoomIn': {
          enable: this.canZoomIn(),
          visible: this.actions['cmdZoomIn'].enabled,
          active: false
        },
        'cmdZoomOut': {
          enable: this.canZoomOut(),
          visible: this.actions['cmdZoomOut'].enabled,
          active: false
        },
        'cmdDefaultZoom': {
          enable: this.canDefaultZoom(),
          visible: this.actions['cmdDefaultZoom'].enabled,
          active: this.canDefaultZoom() && Math.abs(this.bookWatcher.scale - this.p.scale.default) < this.p.eps
        },
        'cmdToc': {
          enable: !!this.tocCtrl,
          visible: this.actions['cmdToc'].enabled && this.tocCtrl,
          active: this.tocCtrl && this.tocCtrl.visible
        },
        'inpPages': {
          visible: true,
          value: this.book.getPages()
        },
        'inpPage': {
          visible: true,
          enable: !this.book.isProcessing() && this.navigationControls,
          value: this.getPageForGUI()
        },
        'cmdSave': {
          enable: true,
          visible: this.actions['cmdSave'].enabled && !!this.p.downloadURL,
          active: false
        },
        'cmdPrint': {
          enable: true,
          visible: this.actions['cmdPrint'].enabled && !!this.printer,
          active: false
        },
        'cmdFullScreen': {
          enable: _FullScreen2.default.available(),
          visible: this.actions['cmdFullScreen'].enabled,
          active: _FullScreen2.default.available() && _FullScreen2.default.activated()
        },
        'widSettings': {
          enable: true,
          visible: this.actions['widSettings'].enabled,
          active: false
        },
        'cmdSmartPan': {
          enable: true,
          visible: this.actions['cmdSmartPan'].enabled,
          active: this.state.smartPan
        },
        'cmdSinglePage': {
          enable: true,
          visible: this.actions['cmdSinglePage'].enabled,
          active: this.state.singlePage
        },
        'cmdSounds': {
          enable: true,
          visible: this.actions['cmdSounds'].enabled && !!this.sounds,
          active: !!this.sounds && this.sounds.enabled
        },
        'cmdStats': {
          enable: true,
          visible: this.actions['cmdStats'].enabled,
          active: this.state.stats
        },
        'cmdLightingUp': {
          enable: Math.abs(this.state.lighting - this.p.lighting.max) > this.p.eps,
          visible: this.actions['cmdLightingUp'].enabled,
          active: false
        },
        'cmdLightingDown': {
          enable: Math.abs(this.state.lighting - this.p.lighting.min) > this.p.eps,
          visible: this.actions['cmdLightingDown'].enabled,
          active: false
        }
      };

      var left = this.book.getLeftFlipping(),
          right = this.book.getRightFlipping();
      var flippersEnable = {
        cmdFastBackward: !!left && this.navigationControls,
        cmdBackward: !!left && this.navigationControls,
        cmdForward: !!right && this.navigationControls,
        cmdFastForward: !!right && this.navigationControls
      };
      for (var _iterator3 = Object.keys(flippersEnable), _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i3 >= _iterator3.length) break;
          _ref3 = _iterator3[_i3++];
        } else {
          _i3 = _iterator3.next();
          if (_i3.done) break;
          _ref3 = _i3.value;
        }

        var name = _ref3;

        this.viewState[name] = {
          enable: flippersEnable[name],
          visible: this.actions[name].enabled,
          active: false
        };
      };
    };

    BookController.prototype.updateView = function updateView() {
      if (this.view) {
        this.updateViewState();
        for (var _iterator4 = Object.keys(this.viewState), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
          var _ref4;

          if (_isArray4) {
            if (_i4 >= _iterator4.length) break;
            _ref4 = _iterator4[_i4++];
          } else {
            _i4 = _iterator4.next();
            if (_i4.done) break;
            _ref4 = _i4.value;
          }

          var name = _ref4;

          this.view.setState(name, this.viewState[name]);
        }
      }
    };

    BookController.prototype.getActions = function getActions() {
      var _this8 = this;

      var isSwipping = function isSwipping(name) {
        return _this8.actions.touchCmdSwipe.enabled && _this8.actions.touchCmdSwipe.code === _this8.actions[name].code && _this8.state.smartPan && _this8.bookWatcher.scale <= 1;
      },
          cmds = {};

      var _loop = function _loop(name) {
        if (name.indexOf('cmd') === 0) {
          cmds[name] = {
            activate: function activate() {
              if (_this8.viewState && _this8.viewState[name].enable) {
                _this8[name].apply(_this8, arguments);
              }
            }
          };
        }
      };

      for (var name in this) {
        _loop(name);
      }

      return _extends({}, cmds, {
        cmdPanLeft: {
          activate: function activate(e) {
            return _this8.orbit.actions.pan(e, {
              state: 'move',
              dx: -_this8.p.pan.speed,
              dy: 0
            });
          }
        },
        cmdPanRight: {
          activate: function activate(e) {
            return _this8.orbit.actions.pan(e, {
              state: 'move',
              dx: _this8.p.pan.speed,
              dy: 0
            });
          }
        },
        cmdPanUp: {
          activate: function activate(e) {
            return _this8.orbit.actions.pan(e, {
              state: 'move',
              dx: 0,
              dy: -_this8.p.pan.speed
            });
          }
        },
        cmdPanDown: {
          activate: function activate(e) {
            return _this8.orbit.actions.pan(e, {
              state: 'move',
              dx: 0,
              dy: _this8.p.pan.speed
            });
          }
        },
        mouseCmdRotate: {
          activate: this.orbit.actions.rotate
        },
        mouseCmdDragZoom: {
          activate: function activate(e, data) {
            if (data.dy > 0) {
              _this8.cmdZoomOut();
            } else if (data.dy < 0) {
              _this8.cmdZoomIn();
            }
          }
        },
        mouseCmdPan: {
          activate: this.orbit.actions.pan
        },
        mouseCmdWheelZoom: {
          activate: function activate(e) {
            e.preventDefault();
            if (e.deltaY < 0) {
              _this8.cmdZoomOut();
            } else if (e.deltaY > 0) {
              _this8.cmdZoomIn();
            }
          }
        },
        touchCmdRotate: {
          activate: function activate(e, data) {
            if (!isSwipping('touchCmdRotate')) {
              e.preventDefault();
              _this8.orbit.actions.rotate(e, data);
            }
          }
        },
        touchCmdZoom: {
          activate: function activate(e, data) {
            if (!isSwipping('touchCmdZoom')) {
              e.preventDefault();
              if (data.dy > 0) {
                _this8.cmdZoomOut();
              } else if (data.dy < 0) {
                _this8.cmdZoomIn();
              }
            }
          }
        },
        touchCmdPan: {
          activate: function activate(e, data) {
            if (!isSwipping('touchCmdPan')) {
              e.preventDefault();
              _this8.orbit.actions.pan(e, data);
            }
          }
        },
        touchCmdSwipe: {
          activate: function activate(e, data) {
            if (isSwipping('touchCmdSwipe')) {
              e.preventDefault();
              if (data.state === 'start') {
                var touch = (e.touches || e.originalEvent.touches)[_this8.actions.touchCmdSwipe.code - 1];
                _this8.swipeData = {
                  handled: false,
                  x0: touch.pageX,
                  y0: touch.pageY,
                  x: touch.pageX,
                  y: touch.pageY
                };
              } else if (data.state === 'move') {
                if (!_this8.swipeData.handled) {
                  _this8.swipeData = _extends({}, _this8.swipeData, {
                    x: _this8.swipeData.x + data.dx,
                    y: _this8.swipeData.y + data.dy
                  });
                  if (Math.abs(_this8.swipeData.x0 - _this8.swipeData.x) > 100) {
                    _this8.swipeData.x0 > _this8.swipeData.x ? _this8.cmdForward() : _this8.cmdBackward();
                    _this8.swipeData.handled = true;
                  }
                }
              } else {
                delete _this8.swipeData;
              }
            }
          }
        },
        widSettings: {
          activate: function activate() {
            return undefined;
          }
        }
      });
    };

    BookController.prototype.bindActions = function bindActions() {
      this.eToA = new _EventsToActions2.default((0, _libs.$)(this.visual.element));
      this.eToA.addAction(function (e) {
        return e.preventDefault();
      }, 'contextmenu', _EventsToActions2.default.mouseButtons.Right, 0);

      this.actions = this.getActions();
      for (var _iterator5 = Object.keys(this.actions), _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
        var _ref5;

        if (_isArray5) {
          if (_i5 >= _iterator5.length) break;
          _ref5 = _iterator5[_i5++];
        } else {
          _i5 = _iterator5.next();
          if (_i5.done) break;
          _ref5 = _i5.value;
        }

        var name = _ref5;

        var action = _extends({}, this.actions[name], this.p.actions[name]);
        this.actions[name] = action;
        if (action.enabled) {
          var flags = action.flags || 0;
          if (action.type) {
            this.eToA.addAction(action.activate, action.type, action.code, flags);
          } else if (action.code !== undefined) {
            this.eToA.addAction(action.activate, 'keydown', action.code, flags);
          }
        }
      }
    };

    BookController.prepareProps = function prepareProps(props) {
      return BookController.calcProps(BookController.mergeProps((0, _bookController.props)(), props));
    };

    BookController.setActions = function setActions(props, actions) {
      for (var _iterator6 = Object.keys(actions || {}), _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
        var _ref6;

        if (_isArray6) {
          if (_i6 >= _iterator6.length) break;
          _ref6 = _iterator6[_i6++];
        } else {
          _i6 = _iterator6.next();
          if (_i6.done) break;
          _ref6 = _i6.value;
        }

        var name = _ref6;

        props.actions[name] = _extends({}, props.actions[name], actions[name]);
      }
    };

    BookController.mergeProps = function mergeProps(first, second) {
      second = second || {};
      function merge(first, second) {
        second = second || {};
        var props = _extends({}, first, second);
        for (var _iterator7 = Object.keys(first), _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {
          var _ref7;

          if (_isArray7) {
            if (_i7 >= _iterator7.length) break;
            _ref7 = _iterator7[_i7++];
          } else {
            _i7 = _iterator7.next();
            if (_i7.done) break;
            _ref7 = _i7.value;
          }

          var name = _ref7;

          if (_typeof(first[name]) === 'object') {
            props[name] = merge(first[name], second[name]);
          }
        }
        return props;
      }
      var props = merge(first, second);
      BookController.setActions(props, first.actions);
      BookController.setActions(props, second.actions);
      return props;
    };

    BookController.calcProps = function calcProps(props) {
      props.scale.delta = (props.scale.max - props.scale.min) / props.scale.levels;
      props.lighting.delta = (props.lighting.max - props.lighting.min) / props.lighting.levels;
      return props;
    };

    return BookController;
  }(_Controller3.default);

  exports.default = BookController;

  /***/
},
/* 28 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(1);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var BookPrinter = function () {
    function BookPrinter(context, book, styleSheet) {
      _classCallCheck(this, BookPrinter);

      this.book = book;
      this.styleSheet = styleSheet;
      this.wnd = context.wnd;
      this.doc = context.doc;
      this.pageCallback = book.getPageCallback();
      var test = this.pageCallback(0);
      this.type = test.type;
      if (this.type === 'pdf') {
        this.pdfSrc = test.src.src;
      }
    }

    BookPrinter.prototype.cancel = function cancel() {
      this.canceled = true;
    };

    BookPrinter.prototype.dispose = function dispose() {
      if (this.frame) {
        this.frame.remove();
        delete this.frame;
      }
    };

    BookPrinter.prototype.print = function print() {
      var _this = this;

      delete this.canceled;
      if (this.type === 'pdf') {
        (function () {
          var printWnd = void 0,
              callManually = false;
          if (_this.useIFrame()) {
            callManually = !!_this.frame;
            if (!_this.frame) {
              _this.frame = (0, _libs.$)('<iframe src="' + _this.pdfSrc + '" style="display: none;"></iframe>').appendTo(_this.doc.body);
            }
            printWnd = _this.frame[0].contentWindow;
          } else {
            printWnd = _this.wnd.open(_this.pdfSrc);
          }
          if (callManually) {
            printWnd.print();
          } else {
            (0, _libs.$)(printWnd).on('load', function () {
              try {
                printWnd.print();
              } catch (e) {
                console.error(e);
              }
            });
          }
        })();
      } else {
        this.renderContent().then(function (content) {
          var printWnd = _this.wnd.open(),
              printDoc = printWnd.document,
              html = '\n            <!DOCTYPE html>\n            <html>\n              <head>\n                <meta charset="utf-8">\n                <title>3D FlipBook - Printing</title>\n                ' + content.head + '\n                <script type="text/javascript">\n                  function printDocument() {\n                    window.print();\n                    window.close();\n                  }\n                  function init() {\n                    setTimeout(printDocument, 100);\n                  }\n                </script>\n              </head>\n              <body onload="init()">\n                ' + content.body + '\n              </body>\n            </html>\n          ';
          printDoc.open();
          printDoc.write(html);
          printDoc.close();
        }).catch(function (e) {
          return console.warn('3D FlipBook - Printing was canceled');
        });
      }
    };

    BookPrinter.prototype.progress = function progress(v) {
      if (this.canceled) {
        throw 'Cancel Printing';
      }
      if (this.onProgress) {
        this.onProgress(Math.floor(v * 100));
      }
    };

    BookPrinter.prototype.renderContent = function renderContent() {
      var _this2 = this;

      var pages = this.book.getPages(),
          head = new Set(),
          body = [];
      var done = Promise.resolve();

      var _loop = function _loop(page) {
        var info = _this2.pageCallback(page);
        if (info.type === 'image') {
          done = done.then(function () {
            _this2.progress(page / pages);
            return _this2.renderImage(head, body, info.src);
          });
        } else if (info.type === 'html') {
          done = done.then(function () {
            _this2.progress(page / pages);
            return _this2.renderHtml(head, body, info.src);
          });
        }
      };

      for (var page = 0; page < pages; ++page) {
        _loop(page);
      }
      return done.then(function () {
        _this2.progress(1);
        return { head: _this2.renderHead(head), body: body.join('\n') };
      });
    };

    BookPrinter.wrap = function wrap(content) {
      return '<div class="fb3d-printer-page">' + content + '</div>';
    };

    BookPrinter.prototype.renderImage = function renderImage(head, body, src) {
      body.push(BookPrinter.wrap('<img src="' + src + '" />'));
    };

    BookPrinter.prototype.renderHtml = function renderHtml(head, body, src) {
      return new Promise(function (resolve, reject) {
        _libs.$.get(src, function (html) {
          var links = html.match(/<link.*?>/ig) || [];
          for (var _iterator = links, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
            var _ref;

            if (_isArray) {
              if (_i >= _iterator.length) break;
              _ref = _iterator[_i++];
            } else {
              _i = _iterator.next();
              if (_i.done) break;
              _ref = _i.value;
            }

            var link = _ref;

            if (link.match(/stylesheet/i)) {
              var href = link.match(/href\s*=\s*['"](.*)['"]/i);
              if (href) {
                head.add(href[1]);
              }
            }
          }
          var content = html.match(/<body.*?>([\S\s]*)<\/body>/i);
          if (content) {
            body.push(BookPrinter.wrap(content[1]));
          }
          resolve();
        }).fail(function (e) {
          console.error(e.responseText);
          reject();
        });
      });
    };

    BookPrinter.prototype.renderHead = function renderHead(head) {
      var content = [];
      head.forEach(function (k) {
        return content.push('<link rel="stylesheet" href="' + k + '">');
      });
      content.push(this.styleSheet ? '<link rel="stylesheet" href="' + this.styleSheet + '">' : BookPrinter.defaultStyleSheet());
      return content.join('\n');
    };

    BookPrinter.prototype.useIFrame = function useIFrame() {
      var isChromium = this.wnd.chrome,
          winNav = this.wnd.navigator,
          vendorName = winNav.vendor,
          isIEedge = winNav.userAgent.indexOf("Edge") > -1,
          isIOSChrome = winNav.userAgent.match("CriOS");
      var use = void 0;
      if (isIOSChrome) {
        use = true;
      } else if (isChromium && vendorName === 'Google Inc.' && !isIEedge) {
        use = true;
      } else {
        use = false;
      }
      return use;
    };

    BookPrinter.defaultStyleSheet = function defaultStyleSheet() {
      return '\n      <style type="text/css">\n        body {\n          margin: 0;\n          padding: 0;\n        }\n        .fb3d-printer-page {\n          page-break-after: always;\n        }\n      </style>\n    ';
    };

    return BookPrinter;
  }();

  exports.default = BookPrinter;

  /***/
},
/* 29 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(1);

  var _View2 = __webpack_require__(65);

  var _View3 = _interopRequireDefault(_View2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var BookView = function (_View) {
    _inherits(BookView, _View);

    function BookView(container, onLoad, template, handler) {
      _classCallCheck(this, BookView);

      return _possibleConstructorReturn(this, _View.call(this, container, onLoad, template, handler));
    }

    BookView.prototype.initView = function initView() {
      this.view = this.container.find('.view');
      this.bookmarksView = this.container.find('.widBookmarks');
      this.thumbnailsView = this.container.find('.widThumbnails');
      this.searchView = this.container.find('.widSearch');
    };

    BookView.prototype.getHandlers = function getHandlers(id) {
      var _this2 = this;

      var handlers = void 0;
      if (id === 'inpPage') {
        handlers = [{
          inpPage: function inpPage(e, data) {
            return _this2.callLater(_View.prototype.getHandlers.call(_this2, id), id, e, data, BookView.PAGE_HANDLER_DELAY);
          }
        }];
      } else {
        handlers = _View.prototype.getHandlers.call(this, id);
      }
      return handlers;
    };

    BookView.prototype.onItemStateChanged = function onItemStateChanged(id, state) {
      if (id === 'cmdFullScreen') {
        if (state.active) {
          this.parentContainer.addClass('fullscreen');
        } else {
          this.parentContainer.removeClass('fullscreen');
        }
      }
    };

    BookView.prototype.getView = function getView() {
      return this.view;
    };

    BookView.prototype.getBookmarksView = function getBookmarksView() {
      return this.bookmarksView;
    };

    BookView.prototype.getThumbnailsView = function getThumbnailsView() {
      return this.thumbnailsView;
    };

    BookView.prototype.getSearchView = function getSearchView() {
      return this.searchView;
    };

    BookView.prototype.getForms = function getForms() {
      return [];
    };

    BookView.prototype.getLinks = function getLinks() {
      return ['cmdZoomIn', 'cmdZoomOut', 'cmdDefaultZoom', 'cmdToc', 'cmdFastBackward', 'cmdBackward', 'cmdForward', 'cmdFastForward', 'cmdSave', 'cmdPrint', 'cmdFullScreen', 'cmdSmartPan', 'cmdSinglePage', 'cmdSounds', 'cmdStats', 'cmdLightingUp', 'cmdLightingDown', 'cmdCloseToc', 'cmdBookmarks', 'cmdSearch', 'cmdThumbnails'];
    };

    BookView.prototype.getWidgets = function getWidgets() {
      return ['widLoadingProgress', 'widFloatWnd', 'widTocMenu', 'widBookmarks', 'widThumbnails', 'widSearch', 'widSettings', 'widLoading'];
    };

    BookView.prototype.getInputs = function getInputs() {
      return ['inpPage', 'inpPages'];
    };

    BookView.prototype.getTexts = function getTexts() {
      return ['txtLoadingProgress'];
    };

    BookView.prototype.getTemplate = function getTemplate() {
      return {
        html: 'templates/default-book-view.html',
        styles: ['css/black-book-view.css'],
        links: [{
          rel: 'stylesheet',
          href: 'css/font-awesome.min.css'
        }],
        script: 'js/default-book-view.js'
      };
    };

    return BookView;
  }(_View3.default);

  BookView.PAGE_HANDLER_DELAY = 1000;
  exports.default = BookView;

  /***/
},
/* 30 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _BookPropsBuilder2 = __webpack_require__(9);

  var _BookPropsBuilder3 = _interopRequireDefault(_BookPropsBuilder2);

  var _ImageFactory = __webpack_require__(8);

  var _ImageFactory2 = _interopRequireDefault(_ImageFactory);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var ClbBookPropsBuilder = function (_BookPropsBuilder) {
    _inherits(ClbBookPropsBuilder, _BookPropsBuilder);

    function ClbBookPropsBuilder(context, pageCallback, pages, onReady) {
      _classCallCheck(this, ClbBookPropsBuilder);

      var _this = _possibleConstructorReturn(this, _BookPropsBuilder.call(this, onReady));

      _this.calcSheets(pages);
      _this.pageCallback = pageCallback;
      _this.binds = {
        pageCallback: pageCallback.bind(_this)
      };
      _this.imageFactory = new _ImageFactory2.default(context);

      if (pages > 0) {
        (function () {
          var test = _this.imageFactory.build(pageCallback(0), 0, _this.defaults.sheet.widthTexels, _this.defaults.sheet.heightTexels, _this.defaults.sheet.color);
          test.onLoad = function () {
            _this.calcProps(test.width, test.height);
            test.dispose();
            _this.ready();
          };
        })();
      } else {
        _this.props = _this.defaults;
        _this.ready();
      }
      return _this;
    }

    return ClbBookPropsBuilder;
  }(_BookPropsBuilder3.default);

  exports.default = ClbBookPropsBuilder;

  /***/
},
/* 31 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _SheetBlock2 = __webpack_require__(10);

  var _SheetBlock3 = _interopRequireDefault(_SheetBlock2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var Cover = function (_SheetBlock) {
    _inherits(Cover, _SheetBlock);

    function Cover(visual, p, angle, state) {
      _classCallCheck(this, Cover);

      return _possibleConstructorReturn(this, _SheetBlock.call(this, visual, p, 0, 1, angle, state));
    }

    Cover.prototype.getProps = function getProps() {
      return _extends({}, this.p.cover, {
        sheets: 1
      });
    };

    Cover.prototype.loadPoints = function loadPoints() {
      var openedInterpolationIndeces = [[2, 3, 4], [2, 3, 4, 5, 6]],
          closedInterpolationIndeces = [[0, 1, 2], [0, 1, 2]],
          interpolationPoints = [{
        x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0, 0.2831, 0.6256, 0.8082, 0.9909], [0, 0.2603, 0.5936, 0.7763, 0.9589], [0, 0.1370, 0.3881, 0.5342, 0.6758], [0, 0, 0, 0, 0]],
        y: [[0, 0, 0, 0, 0], [0, 0.02, 0.005, -0.001, -0.0025], [0, 0.04, 0.01, -0.002, -0.005], [0, 0.2466, 0.4795, 0.5708, 0.6758], [0, 0.2877, 0.6347, 0.8174, 1.0000]]
      }, {
        x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0, 0.2831, 0.6256, 0.8082, 0.9909], [0, 0.2603, 0.5936, 0.7763, 0.9589], [0.000, 0.233, 0.563, 0.746, 0.927], [0.000, 0.144, 0.433, 0.613, 0.796], [0.000, 0.070, 0.288, 0.455, 0.626], [0, 0, 0, 0, 0]],
        y: [[0, 0, 0, 0, 0], [0, 0.02, 0.005, -0.001, -0.0025], [0, 0.04, 0.01, -0.002, -0.005], [0.000, 0.168, 0.269, 0.270, 0.255], [0.000, 0.245, 0.435, 0.458, 0.460], [0.000, 0.278, 0.544, 0.614, 0.673], [0, 0.2877, 0.6347, 0.8174, 1.0000]]
      }];
      return {
        interpolationPoints: interpolationPoints,
        openedInterpolationIndeces: openedInterpolationIndeces,
        closedInterpolationIndeces: closedInterpolationIndeces
      };
    };

    return Cover;
  }(_SheetBlock3.default);

  exports.default = Cover;

  /***/
},
/* 32 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _SheetCssLayer = __webpack_require__(37);

  var _SheetCssLayer2 = _interopRequireDefault(_SheetCssLayer);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var CssLayersManager = function () {
    function CssLayersManager(book) {
      _classCallCheck(this, CssLayersManager);

      this.book = book;
      this.props = book.p.cssLayerProps;
      this.visual = book.visual;
      this.pageManager = book.pageManager;
      this.wrappers = {};
    }

    CssLayersManager.prototype.getActives = function getActives() {
      var page = this.book.getPage(),
          pages = this.book.getPages();
      return page === 0 || page === pages - 1 ? [page] : [page, page + 1];
    };

    CssLayersManager.prototype.dispose = function dispose() {
      for (var _iterator = Object.values(this.wrappers), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var w = _ref;

        w.layers.forEach(function (l) {
          return l.dispose();
        });
      }
      delete this.wrappers;
    };

    CssLayersManager.prototype.show = function show() {
      var _this = this;

      this.hidden = false;

      var _loop = function _loop() {
        if (_isArray2) {
          if (_i2 >= _iterator2.length) return 'break';
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) return 'break';
          _ref2 = _i2.value;
        }

        var n = _ref2;

        var w = _this.wrappers[n];
        if (w) {
          if (w.state === 'ready' && w.layers.length) {
            (function () {
              var block = _this.book.getBlockByPage(n);
              w.layers.forEach(function (l) {
                if (l.isHidden()) {
                  l.update(block);
                  l.show();
                }
              });
            })();
          }
        } else {
          (function () {
            var w = _this.wrappers[n] = {
              state: 'loading',
              layers: []
            };
            Promise.resolve().then(function () {
              _this.pageManager.getLayers(n, function (layers) {
                if (layers.length && _this.wrappers) {
                  var block = _this.book.getBlockByPage(n);
                  for (var _iterator3 = layers, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
                    var _ref3;

                    if (_isArray3) {
                      if (_i3 >= _iterator3.length) break;
                      _ref3 = _iterator3[_i3++];
                    } else {
                      _i3 = _iterator3.next();
                      if (_i3.done) break;
                      _ref3 = _i3.value;
                    }

                    var l = _ref3;

                    var sl = new _SheetCssLayer2.default(_this.visual, block, _this.props);
                    w.layers.push(sl);
                    sl.set(l.css, l.html, l.js);
                  }
                  setTimeout(function () {
                    if (!_this.hidden && ~_this.getActives().indexOf(n)) {
                      w.layers.forEach(function (l) {
                        return l.show();
                      });
                    }
                  }, 10);
                }
                w.state = 'ready';
              });
            });
          })();
        }
      };

      for (var _iterator2 = this.getActives(), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        var _ret = _loop();

        if (_ret === 'break') break;
      }
    };

    CssLayersManager.prototype.hide = function hide() {
      this.hidden = true;
      var wait = [];
      for (var _iterator4 = Object.values(this.wrappers), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i4 >= _iterator4.length) break;
          _ref4 = _iterator4[_i4++];
        } else {
          _i4 = _iterator4.next();
          if (_i4.done) break;
          _ref4 = _i4.value;
        }

        var _w = _ref4;

        _w.layers.forEach(function (l) {
          return wait.push(l.hide());
        });
      }
      return Promise.all(wait);
    };

    return CssLayersManager;
  }();

  exports.default = CssLayersManager;

  /***/
},
/* 33 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _Cache = __webpack_require__(14);

  var _Cache2 = _interopRequireDefault(_Cache);

  var _LoadingAnimation = __webpack_require__(52);

  var _LoadingAnimation2 = _interopRequireDefault(_LoadingAnimation);

  var _ImageFactory = __webpack_require__(8);

  var _ImageFactory2 = _interopRequireDefault(_ImageFactory);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  var _TextureAnimator = __webpack_require__(60);

  var _TextureAnimator2 = _interopRequireDefault(_TextureAnimator);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var PageManager = function () {
    function PageManager(visual, book, p) {
      _classCallCheck(this, PageManager);

      this.visual = visual;
      this.book = book;
      this.pageQuery = '';
      this.p = p;
      this.pageCache = new _Cache2.default(p.cachedPages);
      this.resourcesCache = new _Cache2.default();
      this.canvas = (0, _libs.$)('<canvas>')[0];
      this.imageFactory = new _ImageFactory2.default(_extends({}, visual, { dispatchEvent: book.dispatchEvent.bind(book), renderCanvas: this.canvas, renderCanvasCtx: this.canvas.getContext('2d') }), this.resourcesCache);

      this.loadings = [];
      this.renderQueue = [];
      this.pageRequests = [];
      this.predictedRequests = [];

      this.tmpMaterial = new _libs.THREE.MeshBasicMaterial();
      visual.addObject(new _libs.THREE.Mesh(new _libs.THREE.PlaneGeometry(0, 0), this.tmpMaterial));

      this.loadingAnimation = true;
      this.loading = {};
      this.loading[p.cover.color] = this.createLoadingTexture(p.cover);
      if (p.page.color !== p.cover.color) {
        this.loading[p.page.color] = this.createLoadingTexture(p.page);
      }

      this.turnOnEvents();

      visual.addRenderCallback(this.update.bind(this));

      setTimeout(this.updateRenderQueue.bind(this), 250);
    }

    PageManager.prototype.createLoadingTexture = function createLoadingTexture(p) {
      var spriteTiles = 6,
          scale = Math.sqrt(4.5 * 210 * 4.5 * 297 / (p.widthTexels * p.heightTexels)),
          animation = new _LoadingAnimation2.default(scale * p.widthTexels, scale * p.heightTexels, p.color),
          animator = new _TextureAnimator2.default(animation.createSprite(spriteTiles), spriteTiles, 1, spriteTiles, 0.2);
      animation.dispose();
      return animator;
    };

    PageManager.prototype.dispose = function dispose() {
      this.turnOffEvents();
      for (var _iterator = Object.keys(this.loading), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var color = _ref;

        this.loading[color].dispose();
      }
      delete this.loading;
      this.resourcesCache.dispose();
      this.pageCache.dispose();
      this.canvas.height = this.canvas.width = 0;
      delete this.canvas;
    };

    PageManager.prototype.isCover = function isCover(n) {
      return n < 2 || n >= 2 * (this.p.sheets + 1);
    };

    PageManager.prototype.isMobile = function isMobile() {
      return (this.visual.wnd.devicePixelRatio || 1) > 1;
    };

    PageManager.prototype.getPageState = function getPageState(n) {
      var object = this.pageCache.get(n);
      return object ? object.state : undefined;
    };

    PageManager.prototype.enableLoadingAnimation = function enableLoadingAnimation(enable) {
      this.loadingAnimation = enable;
      for (var _iterator2 = this.loadings, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i2 >= _iterator2.length) break;
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) break;
          _ref2 = _i2.value;
        }

        var o = _ref2;

        this.setupMaterial(o);
      }
    };

    PageManager.prototype.update = function update(dt) {
      if (this.loadingAnimation) {
        var loading = {};
        for (var _iterator3 = this.loadings, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          if (_isArray3) {
            if (_i3 >= _iterator3.length) break;
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) break;
            _ref3 = _i3.value;
          }

          var o = _ref3;

          if (o.isActive()) {
            loading[o.color] = true;;
          }
        }
        for (var _iterator4 = Object.keys(loading), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
          var _ref4;

          if (_isArray4) {
            if (_i4 >= _iterator4.length) break;
            _ref4 = _iterator4[_i4++];
          } else {
            _i4 = _iterator4.next();
            if (_i4.done) break;
            _ref4 = _i4.value;
          }

          var color = _ref4;

          this.loading[color].update(dt);
        }
      }
    };

    PageManager.prototype.removeFromLoadings = function removeFromLoadings(o) {
      var i = this.loadings.indexOf(o);
      if (~i) {
        this.loadings.splice(i, 1);
      }
    };

    PageManager.prototype.removeFromRenderQueue = function removeFromRenderQueue(o) {
      var i = this.renderQueue.indexOf(o);
      if (~i) {
        this.renderQueue.splice(i, 1);
      }
    };

    PageManager.prototype.refreshPageQuery = function refreshPageQuery(n) {
      var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

      this.pageQuery = query;
      var object = this.pageCache.get(n);
      if (object && object.wrapper && object.wrapper.setQuery) {
        if (!this.pageCache.remove(n)) {
          object.wrapper.setQuery(query);
          this.pushInRenderQueue(object);
        }
      }
    };

    PageManager.prototype.refreshZoom = function refreshZoom() {
      var _this = this;

      if (this.p.autoResolution.enable) {
        (function () {
          var es = [];
          _this.pageCache.forEach(function (e) {
            es.push(e);
          });
          es.forEach(function (e) {
            var object = e[1];
            if (object && object.wrapper) {
              if (!_this.pageCache.remove(e[0])) {
                _this.pushInRenderQueue(object);
              }
            }
          });
        })();
      }
    };

    PageManager.prototype.getLayers = function getLayers(n, clb) {
      var _this2 = this;

      if (this.p.cssLayersLoader) {
        this.p.cssLayersLoader(n, function () {
          for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }

          var object = _this2.pageCache.get(n);
          if (object) {
            if (object.state !== 'active') {
              object.pendings.push({ clb: clb, args: args });
            } else {
              clb.apply(undefined, args);
            }
          }
        });
      } else {
        clb([]);
      }
    };

    PageManager.prototype.resolvePendings = function resolvePendings(pendings) {
      for (var _iterator5 = pendings, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
        var _ref5;

        if (_isArray5) {
          if (_i5 >= _iterator5.length) break;
          _ref5 = _iterator5[_i5++];
        } else {
          _i5 = _iterator5.next();
          if (_i5.done) break;
          _ref5 = _i5.value;
        }

        var p = _ref5;

        try {
          p.clb.apply(p, p.args);
        } catch (e) {
          console.error(e);
        }
      }
      pendings.splice(0, pendings.length);
    };

    PageManager.prototype.rtlPageN = function rtlPageN(n) {
      return this.p.rtl ? 2 * (this.p.sheets + 2) - 1 - n : n;
    };

    PageManager.prototype.load = function load(material, n) {
      var _this3 = this;

      var pi = this.p.pageCallback(this.rtlPageN(n)),
          p = this.isCover(n) ? this.p.cover : this.p.page;
      var o = {
        n: n,
        texture: new _libs.THREE.Texture(),
        wrapper: null,
        state: 'loading',
        locked: function locked(n) {
          return o.state === 'loading' || o.state === 'rendering' || _this3.book.isActivePage(n);
        },
        color: p.color,
        isActive: function isActive() {
          return _this3.book.isActivePage(n);
        },
        isTop: function isTop() {
          return ~_this3.book.getTopPages().indexOf(n);
        },
        dispose: function dispose() {
          _this3.removeFromLoadings(o);
          _this3.removeFromRenderQueue(o);
          if (o.wrapper && o.wrapper.dispose) {
            o.wrapper.dispose();
          }
          o.texture.dispose();
          delete o.texture;
          delete o.wrapper;
        },
        pendings: []
      };
      o.texture.minFilter = _libs.THREE.LinearFilter;
      this.loadings.push(o);
      this.setMaterial(o, material);

      Promise.resolve().then(function () {
        if (o.texture) {
          o.widthTexels = pi.widthTexels || p.widthTexels;
          o.heightTexels = pi.heightTexels || p.heightTexels;
          var res = _this3.calcResolution(o);
          o.wrapper = _this3.imageFactory.build(pi, pi.number === undefined ? n : pi.number, res.width, res.height, p.color, _this3.p.injector);
          if (o.wrapper.setQuery) {
            o.wrapper.setQuery(_this3.pageQuery);
          }
          o.simulate = pi.interactive ? (o.wrapper.simulate || function () {
            return undefined;
          }).bind(o.wrapper) : undefined;
          o.wrapper.onLoad = function () {
            _this3.pushInRenderQueue(o);
            _this3.book.dispatchEvent({
              type: 'loadedPage',
              page: n
            });
          };
          o.wrapper.onChange = function (image) {
            if (o.texture) {
              _this3.removeFromLoadings(o);
              if (o.material) {
                o.material.map = o.texture;
                o.material.color = new _libs.THREE.Color(0xFFFFFF);
                o.material.needsUpdate = true;
              }
              o.texture.image = image;
              o.texture.needsUpdate = true;
              o.texture.onUpdate = function () {
                if (o.state !== 'queuedForRender') {
                  o.state = 'active';
                  _this3.resolvePendings(o.pendings);
                }
                delete _this3.rendering;
                //this.updateRenderQueue();
              };
              _this3.tmpMaterial.map = o.texture;
              _this3.tmpMaterial.needsUpdate = true;
            }
          };
        }
      });
      this.book.dispatchEvent({
        type: 'loadPage',
        page: n
      });
      return this.pageCache.put(n, o);
    };

    PageManager.prototype.isSinglePage = function isSinglePage(o) {
      return this.p.singlePage || !o.n || o.n === this.book.getPages() - 1;
    };

    PageManager.prototype.calcResolution = function calcResolution(o) {
      var res = void 0;
      if (this.p.autoResolution.enable) {
        var k = Math.min((this.isSinglePage(o) ? 1 : 0.5) * this.visual.width() / o.widthTexels, this.visual.height() / o.heightTexels);
        res = {
          width: this.p.autoResolution.k * this.p.zoom * k * o.widthTexels,
          height: this.p.autoResolution.k * this.p.zoom * k * o.heightTexels
        };
      } else {
        res = {
          width: o.widthTexels,
          height: o.heightTexels
        };
      }
      return res;
    };

    PageManager.prototype.pushInRenderQueue = function pushInRenderQueue(o) {
      if (o.state !== 'queuedForRender') {
        o.state = 'queuedForRender';
        this.renderQueue.push(o);
        // this.updateRenderQueue();
      }
    };

    PageManager.prototype.updateRenderQueue = function updateRenderQueue() {
      if (this.canvas) {
        var p = this.p;
        if (!this.rendering && (p.renderWhileFlipping || !this.book.isProcessing())) {
          var active = void 0,
              top = void 0;
          for (var _iterator6 = this.renderQueue, _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
            var _ref6;

            if (_isArray6) {
              if (_i6 >= _iterator6.length) break;
              _ref6 = _iterator6[_i6++];
            } else {
              _i6 = _iterator6.next();
              if (_i6.done) break;
              _ref6 = _i6.value;
            }

            var o = _ref6;

            if (!active && o.isActive()) {
              active = o;
            }
            if (o.isTop()) {
              top = o;
              break;
            }
          }
          this.rendering = top || active;
          if (this.isMobile() && p.renderInactivePagesOnMobile || !this.isMobile() && p.renderInactivePages) {
            this.rendering = this.rendering || this.renderQueue[0];
          }
          if (this.rendering) {
            if (this.rendering.wrapper.startRender) {
              this.removeFromRenderQueue(this.rendering);
              this.rendering.state = 'rendering';
              this.rendering.wrapper.setResolution(this.calcResolution(this.rendering));
              this.rendering.wrapper.startRender();
            } else {
              delete this.rendering;
            }
          }
        }
        setTimeout(this.updateRenderQueue.bind(this), 250);
      }
    };

    PageManager.prototype.turnOnEvents = function turnOnEvents() {
      this.transferEvents = true;
    };

    PageManager.prototype.turnOffEvents = function turnOffEvents() {
      var mouseup = _libs.$.Event('mouseup'),
          mouseout = _libs.$.Event('mouseout');
      this.pageCache.forEach(function (ent) {
        var object = ent[1];
        if (object.simulate) {
          object.simulate(mouseup, undefined, 0, 0);
          object.simulate(mouseout, undefined, 0, 0);
        }
      });
      this.transferEvents = false;
    };

    PageManager.prototype.transferEventToTexture = function transferEventToTexture(n, e, data) {
      var _this4 = this;

      if (this.transferEvents) {
        var toObject = this.getOrLoadTextureObject(undefined, n);
        if (toObject.wrapper) {
          (function () {
            var uv = data.uv,
                toDoc = toObject.wrapper.getSimulatedDoc();
            _this4.pageCache.forEach(function (ent) {
              var object = ent[1];
              if (object.simulate) {
                object.simulate(e, toDoc, uv.x, uv.y);
              }
            });
          })();
        }
      }
    };

    PageManager.prototype.loadPredictedPages = function loadPredictedPages() {
      this.predictedRequests = _BaseMathUtils2.default.predict(this.pageRequests, this.p.preloadPages);
      for (var _iterator7 = this.predictedRequests, _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {
        var _ref7;

        if (_isArray7) {
          if (_i7 >= _iterator7.length) break;
          _ref7 = _iterator7[_i7++];
        } else {
          _i7 = _iterator7.next();
          if (_i7.done) break;
          _ref7 = _i7.value;
        }

        var p = _ref7;

        if (p < this.book.getPages() && !this.pageCache.get(p)) {
          this.load(undefined, p);
        }
      }
    };

    PageManager.prototype.addPageRequest = function addPageRequest(n) {
      this.pageRequests.push(n);
      if (this.pageRequests.length > this.p.pagesForPredicting) {
        this.pageRequests.shift();
      }
      Promise.resolve().then(this.loadPredictedPages.bind(this));
    };

    PageManager.prototype.setMaterial = function setMaterial(o, material) {
      this.pageCache.forEach(function (e) {
        var ob = e[1];
        if (o !== ob && ob.material === material) {
          delete ob.material;
        }
      });
      if (material && material !== o.material) {
        o.material = material;
        this.setupMaterial(o);
      }
    };

    PageManager.prototype.setupMaterial = function setupMaterial(o) {
      o.material.map = o.texture.image ? o.texture : this.loadingAnimation ? this.loading[o.color].texture : null;
      if (!o.material.map) {
        o.material.color = new _libs.THREE.Color(o.color);
      }
      o.material.needsUpdate = true;
    };

    PageManager.prototype.getOrLoadTextureObject = function getOrLoadTextureObject(material, n) {
      var object = this.pageCache.get(n);
      if (!object) {
        object = this.load(material, n);
        this.addPageRequest(n);
      } else {
        this.setMaterial(object, material);
      }

      return object;
    };

    PageManager.prototype.setTexture = function setTexture(material, n) {
      if (~this.predictedRequests.indexOf(n)) {
        this.addPageRequest(n);
      }
      this.getOrLoadTextureObject(material, n);
    };

    return PageManager;
  }();

  exports.default = PageManager;

  /***/
},
/* 34 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _BookPropsBuilder2 = __webpack_require__(9);

  var _BookPropsBuilder3 = _interopRequireDefault(_BookPropsBuilder2);

  var _Pdf = __webpack_require__(18);

  var _Pdf2 = _interopRequireDefault(_Pdf);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var PdfBookPropsBuilder = function (_BookPropsBuilder) {
    _inherits(PdfBookPropsBuilder, _BookPropsBuilder);

    function PdfBookPropsBuilder(src, onReady) {
      _classCallCheck(this, PdfBookPropsBuilder);

      var _this = _possibleConstructorReturn(this, _BookPropsBuilder.call(this, onReady));

      _this.pdf = new _Pdf2.default(src);
      _this.pageDescription = {
        type: 'pdf',
        src: _this.pdf,
        interactive: true
      };
      _this.binds = {
        pageCallback: _this.pageCallback.bind(_this)
      };
      _this.pdf.getHandler(_this.init.bind(_this));
      return _this;
    }

    PdfBookPropsBuilder.prototype.dispose = function dispose() {
      this.pdf.dispose();
      _BookPropsBuilder.prototype.dispose.call(this);
    };

    PdfBookPropsBuilder.prototype.init = function init(handler) {
      var _this2 = this;

      var pages = this.pdf.getPagesNum();
      this.calcSheets(pages);
      if (pages > 0) {
        handler.getPage(1).then(function (page) {
          var size = _Pdf2.default.getPageSize(page);
          _this2.calcProps(size.width, size.height);
          _this2.ready();
        }).catch(function (e) {
          console.error(e);
        });
      } else {
        this.props = this.defaults;
        this.ready();
      }
    };

    PdfBookPropsBuilder.prototype.pageCallback = function pageCallback(n) {
      return this.pageDescription;
    };

    return PdfBookPropsBuilder;
  }(_BookPropsBuilder3.default);

  exports.default = PdfBookPropsBuilder;

  /***/
},
/* 35 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(1);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var PdfLinksHandler = function () {
    function PdfLinksHandler(pdf, ctrl, element) {
      _classCallCheck(this, PdfLinksHandler);

      this.pdf = pdf;
      this.ctrl = ctrl;
      this.element = (0, _libs.$)(element);
      this.cursors = [];
    }

    PdfLinksHandler.prototype.dispose = function dispose() {};

    PdfLinksHandler.prototype.setHandler = function setHandler(handler) {
      this.handler = handler;
    };

    PdfLinksHandler.prototype.defaultHandler = function defaultHandler(type, destination) {
      if (type === 'internal') {
        this.ctrl.goToPage(destination);
      } else if (type === 'external') {
        window.open(destination, '_blank');
      }
    };

    PdfLinksHandler.prototype.callHandlers = function callHandlers(type, destination) {
      if (!this.handler || !this.handler(type, destination)) {
        this.defaultHandler(type, destination);
      }
    };

    PdfLinksHandler.prototype.handleEvent = function handleEvent(data) {
      var _this = this;

      var e = data.event,
          anno = data.annotation;
      switch (e.type) {
        case 'mouseover':
          {
            this.cursors.push(this.element.css('cursor'));
            this.element.css('cursor', 'pointer');
            break;
          }
        case 'mouseout':
          {
            this.element.css('cursor', this.cursors.pop() || '');
            break;
          }
        case 'touchtap':
        case 'click':
          {
            if (anno.url) {
              this.callHandlers('external', anno.url);
            } else if (anno.dest) {
              var destPromise = void 0;
              if (typeof anno.dest === 'string') {
                destPromise = this.pdf.handler.getDestination(anno.dest);
              } else {
                destPromise = Promise.resolve(anno.dest);
              }
              destPromise.then(function (dest) {
                return typeof dest[0] === 'number' ? dest[0] : _this.pdf.handler.getPageIndex(dest[0]);
              }).then(function (number) {
                return _this.callHandlers('internal', number);
              }).catch(function () {
                return console.error('Bad link');
              });
            }
            break;
          }
      }
    };

    return PdfLinksHandler;
  }();

  exports.default = PdfLinksHandler;

  /***/
},
/* 36 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Finder = __webpack_require__(17);

  var _Finder2 = _interopRequireDefault(_Finder);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var SearchEngine = function () {
    function SearchEngine(pageCallback, pages) {
      _classCallCheck(this, SearchEngine);

      this.pageCallback = pageCallback;
      this.pages = pages;
      this.results = [];
    }

    SearchEngine.prototype.setQuery = function setQuery(query) {
      this.query = query;
      this.update = true;
      this.process();
    };

    SearchEngine.prototype.process = function process() {
      var _this = this;

      if (this.update) {
        var results = this.results;
        this.results = [];
        if (this.onPageHitsChanged) {
          for (var _iterator = results, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
            var _ref;

            if (_isArray) {
              if (_i >= _iterator.length) break;
              _ref = _iterator[_i++];
            } else {
              _i = _iterator.next();
              if (_i.done) break;
              _ref = _i.value;
            }

            var res = _ref;

            this.onPageHitsChanged(undefined, '');
          }
        }
        this.update = false;
        this.page = 0;
        this.stamp = Date.now();
        if (this.query.length > 1) {
          this.process();
        }
      } else {
        if (this.page < this.pages) {
          (function () {
            var stamp = _this.stamp;
            _this.find(_this.pageCallback(_this.page)).then(function (contexts) {
              if (stamp === _this.stamp) {
                if (contexts.length) {
                  _this.results.push({
                    page: _this.page,
                    contexts: contexts
                  });
                }
                ++_this.page;
                if (_this.onPageHitsChanged) {
                  _this.onPageHitsChanged(_this.page, _this.query);
                }
                _this.process();
              }
            });
          })();
        }
      }
    };

    SearchEngine.prototype.find = function find(pi) {
      var _this2 = this;

      var next = void 0;
      if (pi.type === 'pdf') {
        next = new Promise(function (resolve) {
          pi.src.getHandler(function () {
            var n = pi.number === undefined ? _this2.page : pi.number;
            if (pi.src.getPageType(n) === 'right') {
              resolve([]);
            } else {
              pi.src.getPage(n).then(function (page) {
                page.getTextContent().then(function (textContent) {
                  resolve(new _Finder2.default(textContent.items.map(function (item) {
                    return item.str;
                  }), _this2.query, { hits: false }).getContexts());
                });
              }).catch(function () {
                return resolve([]);
              });
            }
          });
        });
      } else {
        next = Promise.resolve([]);
      }
      return next;
    };

    return SearchEngine;
  }();

  exports.default = SearchEngine;

  /***/
},
/* 37 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _CSSLayer = __webpack_require__(13);

  var _CSSLayer2 = _interopRequireDefault(_CSSLayer);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var SheetCssLayer = function () {
    function SheetCssLayer(visual, block, props) {
      _classCallCheck(this, SheetCssLayer);

      this.visual = visual;
      var size = block.getTopSize();
      this.layer = new _CSSLayer2.default(size.width, size.height, props);

      this.update(block);
      this.visual.addCssObject(this.layer);
    }

    SheetCssLayer.prototype.dispose = function dispose() {
      this.layer.dispose();
      this.visual.removeCssObject(this.layer);
    };

    SheetCssLayer.prototype.isHidden = function isHidden() {
      return this.layer.isHidden();
    };

    SheetCssLayer.prototype.hide = function hide() {
      return this.layer.hide();
    };

    SheetCssLayer.prototype.show = function show() {
      return this.layer.show();
    };

    SheetCssLayer.prototype.set = function set(css, html, js) {
      this.layer.setData(css, html, js);
    };

    SheetCssLayer.prototype.update = function update(block) {
      this.block = block;
      this.block.getTopWorldRotation(this.layer.rotation);
      this.block.getTopWorldPosition(this.layer.position);
    };

    return SheetCssLayer;
  }();

  exports.default = SheetCssLayer;

  /***/
},
/* 38 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var SheetPhysics = function () {
    SheetPhysics.targetForceClb = function targetForceClb(o, a, v, ch) {
      var l = a * this.r;
      return 100 * this.m * this.g * (2 / (1 + Math.exp(10 * (l - this.tl))) - 1) - this.m * 40 * v;
    };

    SheetPhysics.hoverCornerForceClb = function hoverCornerForceClb(o, v, l, ch) {
      return 5;
    };

    SheetPhysics.prototype.getTargetForceClb = function getTargetForceClb(mass, targetAngle) {
      return SheetPhysics.targetForceClb.bind({
        g: this.p.gravity,
        m: mass,
        tl: targetAngle * this.p.r,
        r: this.p.r
      });
    };

    SheetPhysics.dragForceClb = function dragForceClb(o, a, v, ch) {
      return o.flbt * o.m * (10 * o.g * ch - 50 * v / (1 + Math.exp(3.5 * Math.abs(ch))));
    };

    SheetPhysics.dragCornerForceClb = function dragCornerForceClb(o, a, v, ch) {
      return 15 * (2 / (1 + Math.exp(10 * (a - this.ta) * o.r)) - 1);
    };

    SheetPhysics.getDragCornerForceClb = function getDragCornerForceClb(targetAngle) {
      return SheetPhysics.dragCornerForceClb.bind({
        ta: targetAngle
      });
    };

    function SheetPhysics() {
      var r = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
      var gravity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      var cornerDeviation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.15;
      var fps = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 240;

      _classCallCheck(this, SheetPhysics);

      this.p = {
        r: r,
        cornerDeviation: cornerDeviation,
        l: Math.PI * r,
        startDt: 1 / fps,
        gravity: gravity,
        margin: 0.002 * r,
        infM: 1e4,
        attempts: 16,
        maxIterations: 100
      };
      this.os = [];
    }

    SheetPhysics.prototype.dispose = function dispose() {
      this.os = [];
    };

    SheetPhysics.prototype.getSize = function getSize() {
      return this.os.length;
    };

    SheetPhysics.prototype.addObject = function addObject(mass, angle, velocity, flexibility, cornerHeight, simulateClb, removeClb) {
      var forceClb = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : function () {
        return 0;
      };
      var cornerForceClb = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : function () {
        return 0;
      };

      var no = {
        id: _MathUtils2.default.getUnique(),
        m: mass,
        v: velocity,
        l: angle * this.p.r,
        f: forceClb,
        cf: cornerForceClb,
        ch: cornerHeight,
        flbt: flexibility,
        simulateClb: simulateClb,
        removeClb: removeClb
      };
      var i = this.os.findIndex(function (o) {
        return no.l <= o.l;
      });
      i = ~i ? i : this.os.length;
      this.os.splice(i, 0, no);
      return no.id;
    };

    SheetPhysics.prototype.getParametrMap = function getParametrMap(name) {
      var map = {
        mass: 'm',
        velocity: 'v',
        flexibility: 'flbt',
        cornerHeight: 'ch',
        simulateClb: 'simulateClb',
        removeClb: 'removeClb',
        forceClb: 'f',
        cornerForceClb: 'cf'
      };
      return map[name];
    };

    SheetPhysics.prototype.setParametr = function setParametr(id, name, value) {
      var o = this.os.find(function (o) {
        return o.id === id;
      });
      if (name === 'angle') {
        o.l = value * this.p.r;
      } else {
        o[this.getParametrMap(name)] = value;
      }
    };

    SheetPhysics.prototype.getParametr = function getParametr(id, name) {
      var o = this.os.find(function (o) {
        return o.id === id;
      });
      var value = void 0;
      if (name === 'angle') {
        value = o.l / this.p.r;
      } else {
        value = o[this.getParametrMap(name)];
      }
      return value;
    };

    SheetPhysics.prototype.simulate = function simulate(T) {
      var t = 0,
          dt = this.p.startDt,
          attempt = 0,
          it = 0;

      while (t < T && it < this.p.maxIterations) {
        if (dt > T - t) {
          dt = T - t;
        }
        var nos = this.integrate(this.os, dt),
            ci = this.findCollisions(nos);
        if (ci.num > 1 && attempt < this.p.attempts) {
          dt /= 2;
          ++attempt;
        } else {
          if (ci.num === 1) {
            var scos = this.solveCollision(nos[ci.last - 1], nos[ci.last]);
            nos[ci.last - 1] = scos[0];
            nos[ci.last] = scos[1];
          } else if (ci.num > 1) {
            var gs = [];
            var last = -2;
            for (var _iterator = ci.all, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
              var _ref;

              if (_isArray) {
                if (_i >= _iterator.length) break;
                _ref = _iterator[_i++];
              } else {
                _i = _iterator.next();
                if (_i.done) break;
                _ref = _i.value;
              }

              var i = _ref;

              if (i - last > 1) {
                gs.push([]);
              }
              gs[gs.length - 1].push(i);
              last = i;
            }
            for (var _iterator2 = gs, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
              var _ref2;

              if (_isArray2) {
                if (_i2 >= _iterator2.length) break;
                _ref2 = _iterator2[_i2++];
              } else {
                _i2 = _iterator2.next();
                if (_i2.done) break;
                _ref2 = _i2.value;
              }

              var g = _ref2;

              var sg = void 0,
                  i0 = void 0;
              if (nos[g[0]].l > Math.PI / 2 * this.p.r) {
                sg = -1;
                i0 = g[g.length - 1];
              } else {
                sg = 1;
                i0 = g[0];
              }
              for (var _i3 = i0; _i3 < nos.length && _i3 > -1; _i3 += sg) {
                var o = nos[_i3 + sg];
                if (o && sg * (o.l - nos[_i3].l) <= this.p.margin) {
                  o.l = nos[_i3].l + sg * 2 * this.p.margin;
                  if (o.l > this.p.l || o.l < 0) {
                    o.l = o.l > this.p.l ? this.p.l : 0;
                    o.ch = 0;
                    o.v = 0;
                    console.error('Bad collision');
                  }
                } else {
                  break;
                }
              }
            }
          }
          this.os = nos;
          this.findAndSolveCornerCollisions();
          t += dt;
          dt = this.p.startDt;
          attempt = 0;
        }
        ++it;
      }

      this.removeStatics();
    };

    SheetPhysics.prototype.removeStatics = function removeStatics() {
      var nos = [],
          notify = [[], []];
      for (var _iterator3 = this.os, _isArray3 = Array.isArray(_iterator3), _i4 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i4 >= _iterator3.length) break;
          _ref3 = _iterator3[_i4++];
        } else {
          _i4 = _iterator3.next();
          if (_i4.done) break;
          _ref3 = _i4.value;
        }

        var o = _ref3;

        if (o.simulateClb) {
          o.simulateClb(o.l / this.p.r, o.ch);
        }
        if ((o.l === this.p.l || o.l === 0) && o.v === 0) {
          if (o.removeClb !== undefined) {
            notify[(o.l !== this.p.l) + 0].push(o);
          }
        } else {
          nos.push(o);
        }
      }
      this.os = nos;
      for (var _iterator4 = notify[0].reverse(), _isArray4 = Array.isArray(_iterator4), _i5 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i5 >= _iterator4.length) break;
          _ref4 = _iterator4[_i5++];
        } else {
          _i5 = _iterator4.next();
          if (_i5.done) break;
          _ref4 = _i5.value;
        }

        var _o = _ref4;

        _o.removeClb(Math.PI, _o.ch);
      }
      for (var _iterator5 = notify[1], _isArray5 = Array.isArray(_iterator5), _i6 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
        var _ref5;

        if (_isArray5) {
          if (_i6 >= _iterator5.length) break;
          _ref5 = _iterator5[_i6++];
        } else {
          _i6 = _iterator5.next();
          if (_i6.done) break;
          _ref5 = _i6.value;
        }

        var _o2 = _ref5;

        _o2.removeClb(0, _o2.ch);
      }
    };

    SheetPhysics.prototype.findAndSolveCornerCollisions = function findAndSolveCornerCollisions() {
      if (this.os.length) {
        var os = [_extends({}, this.os[0], {
          l: 0,
          m: this.p.infM,
          ch: 0
        })].concat(this.os, [_extends({}, this.os[0], {
          l: 1.05 * this.p.l,
          m: this.p.infM,
          ch: 0
        })]);

        for (var i = 1; i < os.length; ++i) {
          var a = os[i - 1],
              b = os[i],
              al = a.l + this.p.cornerDeviation * a.ch * this.p.r,
              bl = b.l + this.p.cornerDeviation * b.ch * this.p.r;
          if (1.05 * al > bl && a.ch > b.ch) {
            var dCh = a.ch - b.ch,
                dv = a.m / a.flbt + b.m / b.flbt,
                ka = a.m / a.flbt / dv,
                kb = b.m / b.flbt / dv;
            a.ch = a.ch - kb * dCh;
            b.ch = b.ch + ka * dCh;
          }
        }
      }
    };

    SheetPhysics.prototype.solveCollision = function solveCollision(a, b) {
      var mm = b.m + a.m,
          av = (-a.v * b.m + a.m * a.v + 2 * b.m * b.v) / mm,
          bv = (b.m * b.v - b.v * a.m + 2 * a.m * a.v) / mm;
      return [_extends({}, a, { v: av }), _extends({}, b, { v: bv })];
    };

    SheetPhysics.prototype.findCollisions = function findCollisions(os) {
      var ci = {
        num: 0,
        last: 0,
        all: []
      };
      for (var i = 1; i < os.length && ci.num < 2; ++i) {
        if (os[i - 1].l > os[i].l || this.isCollision(os[i - 1], os[i])) {
          if (os[i - 1].l > os[i].l) {
            ++ci.num;
          }
          ++ci.num;
          ci.last = i;
          if (ci.all.indexOf(i - 1) === -1) {
            ci.all.push(i - 1);
          }
          if (ci.all.indexOf(i) === -1) {
            ci.all.push(i);
          }
        }
      }
      return ci;
    };

    SheetPhysics.prototype.isCollision = function isCollision(a, b) {
      return Math.abs(a.l - b.l) < this.p.margin && a.v > b.v;
    };

    SheetPhysics.prototype.integrate = function integrate(os, dt) {
      var nos = [];
      for (var _iterator6 = os, _isArray6 = Array.isArray(_iterator6), _i7 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
        var _ref6;

        if (_isArray6) {
          if (_i7 >= _iterator6.length) break;
          _ref6 = _iterator6[_i7++];
        } else {
          _i7 = _iterator6.next();
          if (_i7.done) break;
          _ref6 = _i7.value;
        }

        var o = _ref6;

        var vl = _MathUtils2.default.rk4(this.dy.bind({
          g: this.p.gravity,
          r: this.p.r,
          m: o.m,
          f: o.f,
          cf: o.cf,
          ch: o.ch,
          flbt: o.flbt
        }), 0, dt, [o.v, o.l, o.ch]);
        var no = _extends({}, o, {
          v: vl[0],
          l: vl[1],
          ch: vl[2]
        });
        if (no.l <= 0 || no.l >= this.p.l) {
          no.l = no.l <= 0 ? 0 : this.p.l;
          no.v = 0;
          no.ch = 0;
        }
        nos.push(no);
      }
      return nos;
    };

    SheetPhysics.prototype.dy = function dy(t, y) {
      var v = y[0],
          l = y[1],
          ch = y[2],
          f = this.f(this, l / this.r, v, ch),
          cf = this.cf(this, l / this.r, v, ch);
      return [(-this.g * Math.cos(l / this.r) * this.m + f) / this.m, v + 0.01 * (Math.random() - 0.5), this.flbt * ((2 / (1 + Math.exp(-0.2 * cf)) - 1) * (1 - 2 / (1 + Math.exp(-5 * (Math.abs(ch) - 2)))) - ch)];
    };

    return SheetPhysics;
  }();

  exports.default = SheetPhysics;

  /***/
},
/* 39 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var SoundsEnviroment = function () {
    function SoundsEnviroment() {
      var template = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _classCallCheck(this, SoundsEnviroment);

      this.sounds = template.sounds || {};
      this.audio = {};
      if (this.sounds.startFlip) {
        this.audio.startFlip = new Audio(this.sounds.startFlip);
      }
      if (this.sounds.endFlip) {
        this.audio.endFlip = new Audio(this.sounds.endFlip);
      }
    }

    SoundsEnviroment.prototype.setEnabled = function setEnabled(enabled) {
      this.enabled = enabled;
    };

    SoundsEnviroment.prototype.togle = function togle() {
      this.enabled = !this.enabled;
    };

    SoundsEnviroment.prototype.dispose = function dispose() {
      delete this.audio.startFlip;
      delete this.audio.endFlip;
    };

    SoundsEnviroment.prototype.startFlip = function startFlip() {
      if (this.enabled && this.audio.startFlip) {
        this.audio.startFlip.play();
      }
    };

    SoundsEnviroment.prototype.endFlip = function endFlip() {
      if (this.enabled && this.audio.startFlip) {
        this.audio.startFlip.pause();
        this.audio.startFlip.currentTime = 0;
      }
      if (this.enabled && this.audio.endFlip) {
        this.audio.endFlip.play();
      }
    };

    SoundsEnviroment.prototype.subscribeFlips = function subscribeFlips(emitter) {
      emitter.addEventListener('startFlip', this.startFlip.bind(this));
      emitter.addEventListener('endFlip', this.endFlip.bind(this));
    };

    return SoundsEnviroment;
  }();

  exports.default = SoundsEnviroment;

  /***/
},
/* 40 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _WidgetController2 = __webpack_require__(67);

  var _WidgetController3 = _interopRequireDefault(_WidgetController2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var TocController = function (_WidgetController) {
    _inherits(TocController, _WidgetController);

    function TocController(view, bookCtrl) {
      _classCallCheck(this, TocController);

      var _this = _possibleConstructorReturn(this, _WidgetController.call(this, view));

      _this.bookCtrl = bookCtrl;
      _this.tab = 'none';
      return _this;
    }

    TocController.prototype.setThumbnails = function setThumbnails(thumbnails) {
      this.thumbnails = thumbnails;
      thumbnails.onNavigate = this.navigateThumbnails.bind(this);
      if (this.tab === 'none') {
        this.tab = 'thumbnails';
      }
      this.fireChange();
    };

    TocController.prototype.setSearch = function setSearch(search) {
      this.search = search;
      search.onNavigate = this.navigateSearch.bind(this);
      this.fireChange();
    };

    TocController.prototype.setBookmarks = function setBookmarks(bookmarks, pdf) {
      this.bookmarks = bookmarks;
      this.pdf = pdf;
      bookmarks.onNavigate = this.navigateBookmarks.bind(this);
      if (bookmarks.getSize()) {
        this.tab = 'bookmarks';
        this.isBookmarks = true;
      }
      this.fireChange();
    };

    TocController.prototype.cmdBookmarks = function cmdBookmarks() {
      this.tab = 'bookmarks';
      this.fireChange();
    };

    TocController.prototype.cmdThumbnails = function cmdThumbnails() {
      this.tab = 'thumbnails';
      this.fireChange();
    };

    TocController.prototype.cmdSearch = function cmdSearch() {
      this.tab = 'search';
      this.fireChange();
    };

    TocController.prototype.cmdCloseToc = function cmdCloseToc() {
      this.hide();
    };

    TocController.prototype.navigateThumbnails = function navigateThumbnails(number) {
      this.bookCtrl.goToPage(number);
    };

    TocController.prototype.navigateSearch = function navigateSearch(number) {
      this.bookCtrl.goToPage(number);
    };

    TocController.prototype.navigateBookmarks = function navigateBookmarks(item) {
      var _this2 = this;

      if (item.url) {
        window.open(item.url, '_blank');
      } else if (item.dest) {
        var destPromise = void 0;
        if (typeof item.dest === 'string') {
          destPromise = this.pdf.handler.getDestination(item.dest);
        } else {
          destPromise = Promise.resolve(item.dest);
        }
        destPromise.then(function (dest) {
          return _this2.pdf.handler.getPageIndex(dest[0]);
        }).then(function (number) {
          return _this2.bookCtrl.goToPage(number);
        }).catch(function () {
          return console.error('Bad bookmark');
        });
      }
    };

    TocController.prototype.updateView = function updateView() {
      var _this3 = this;

      if (this.view) {
        this.view.setState('widTocMenu', {
          enable: true,
          visible: true,
          active: false
        });
        this.view.setState('widThumbnails', {
          enable: true,
          visible: this.tab === 'thumbnails',
          active: false
        });
        this.view.setState('widSearch', {
          enable: true,
          visible: this.tab === 'search',
          active: false
        });
        this.view.setState('widBookmarks', {
          enable: true,
          visible: this.tab === 'bookmarks',
          active: false
        });
        this.view.setState('cmdBookmarks', {
          enable: true,
          visible: true,
          active: this.tab === 'bookmarks'
        });
        this.view.setState('cmdCloseToc', {
          enable: true,
          visible: true,
          active: false
        });
        this.view.setState('cmdThumbnails', {
          enable: true,
          visible: true,
          active: this.tab === 'thumbnails'
        });
        this.view.setState('cmdSearch', {
          enable: true,
          visible: true,
          active: this.tab === 'search'
        });
        Promise.resolve().then(function () {
          return _this3.thumbnails.setEnable(_this3.visible && _this3.tab === 'thumbnails');
        });
        _WidgetController.prototype.updateView.call(this);
      }
    };

    return TocController;
  }(_WidgetController3.default);

  exports.default = TocController;

  /***/
},
/* 41 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(1);

  var _ThreeUtils = __webpack_require__(20);

  var _ThreeUtils2 = _interopRequireDefault(_ThreeUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  var resX = 11,
      resY = 2,
      resZ = 15,
      scale = 1,
      faces = [];

  var frontGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resX - 1, resY - 1);
  frontGeometry.translate(0.5 * scale, 0.5 * scale, scale);
  var backGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resX - 1, resY - 1);
  backGeometry.rotateY(Math.PI);
  backGeometry.translate(0.5 * scale, 0.5 * scale, 0);
  var leftGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resZ - 1, resY - 1);
  leftGeometry.rotateY(-Math.PI / 2);
  leftGeometry.translate(0, 0.5 * scale, 0.5 * scale);
  var rightGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resZ - 1, resY - 1);
  rightGeometry.rotateY(Math.PI / 2);
  rightGeometry.translate(scale, 0.5 * scale, 0.5 * scale);
  var topGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resX - 1, resZ - 1);
  topGeometry.rotateX(-Math.PI / 2);
  topGeometry.translate(0.5 * scale, scale, 0.5 * scale);
  var bottomGeometry = topGeometry.clone();
  bottomGeometry.translate(0, -scale, 0);
  for (var _iterator = bottomGeometry.faces, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
    var _ref;

    if (_isArray) {
      if (_i >= _iterator.length) break;
      _ref = _iterator[_i++];
    } else {
      _i = _iterator.next();
      if (_i.done) break;
      _ref = _i.value;
    }

    var f = _ref;
    var _ref3 = [f.b, f.a];
    f.a = _ref3[0];
    f.b = _ref3[1];
  }

  var geometry = new _libs.THREE.Geometry();
  geometry.vertices = [].concat(bottomGeometry.vertices, topGeometry.vertices);

  var addFaces = function addFaces(fs, map) {
    for (var _iterator2 = fs, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
      var _ref2;

      if (_isArray2) {
        if (_i2 >= _iterator2.length) break;
        _ref2 = _iterator2[_i2++];
      } else {
        _i2 = _iterator2.next();
        if (_i2.done) break;
        _ref2 = _i2.value;
      }

      var f = _ref2;

      geometry.faces.push(new _libs.THREE.Face3(map(f.a), map(f.b), map(f.c)));
    }
    faces.push(geometry.faces.length);
  };

  var mapVertices = function mapVertices(src, dst) {
    var map = [];
    var eq = function eq(a, b) {
      return Math.abs(a.x - b.x) + Math.abs(a.y - b.y) + Math.abs(a.z - b.z) < 1e-4;
    };
    for (var i = 0; i < src.length; ++i) {
      for (var j = 0; j < dst.length; ++j) {
        if (eq(src[i], dst[j])) {
          map[i] = j;
          break;
        }
      }
    }
    return map;
  };

  var frontMap = mapVertices(frontGeometry.vertices, geometry.vertices);
  var backMap = mapVertices(backGeometry.vertices, geometry.vertices);
  var leftMap = mapVertices(leftGeometry.vertices, geometry.vertices);
  var rightMap = mapVertices(rightGeometry.vertices, geometry.vertices);

  addFaces(topGeometry.faces, function (i) {
    return i + bottomGeometry.vertices.length;
  });
  addFaces(bottomGeometry.faces, function (i) {
    return i;
  });
  addFaces(frontGeometry.faces, function (i) {
    return frontMap[i];
  });
  addFaces(backGeometry.faces, function (i) {
    return backMap[i];
  });
  addFaces(leftGeometry.faces, function (i) {
    return leftMap[i];
  });
  addFaces(rightGeometry.faces, function (i) {
    return rightMap[i];
  });
  faces.pop();

  _ThreeUtils2.default.computeFaceVertexUvs(geometry, faces);

  geometry.computeVertexNormals();
  //geometry.computeFaceNormals();
  geometry.computeBoundingSphere();
  //geometry.computeBoundingBox();
  geometry.verticesNeedUpdate = true;

  exports.default = {
    resX: resX,
    resY: resY,
    resZ: resZ,
    faces: faces,
    geometry: geometry
  };

  /***/
},
/* 42 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;
  exports.props = props;
  var mouseButtons = {
    Left: 0,
    Middle: 1,
    Right: 2
  };

  function props() {
    return {
      eps: 1e-4,
      skin: {
        default: 'short-white-book-view'
      },
      scale: {
        default: 0.9,
        min: 0.9,
        max: 2.5,
        levels: 7
      },
      lighting: {
        default: 0.7,
        min: 0,
        max: 1,
        levels: 7
      },
      pan: {
        speed: 50
      },
      loadingAnimation: {
        skin: false,
        book: true
      },
      autoResolution: {
        enabled: true,
        coefficient: 1.5
      },
      actions: {
        cmdZoomIn: {
          enabled: true
        },
        cmdZoomOut: {
          enabled: true
        },
        cmdDefaultZoom: {
          enabled: true,
          type: 'dblclick',
          code: 0
        },
        cmdToc: {
          enabled: true
        },
        cmdFastBackward: {
          enabled: false
        },
        cmdBackward: {
          enabled: true
        },
        cmdForward: {
          enabled: true
        },
        cmdFastForward: {
          enabled: false
        },
        cmdSave: {
          enabled: true
        },
        cmdPrint: {
          enabled: true
        },
        cmdFullScreen: {
          enabled: true
        },
        widSettings: {
          enabled: true
        },
        cmdSmartPan: {
          enabled: true,
          active: true
        },
        cmdSinglePage: {
          enabled: true,
          active: false,
          activeForMobile: false
        },
        cmdSounds: {
          enabled: true,
          active: true
        },
        cmdStats: {
          enabled: true,
          active: false
        },
        cmdLightingUp: {
          enabled: true
        },
        cmdLightingDown: {
          enabled: true
        },
        cmdPanLeft: {
          enabled: false
        },
        cmdPanRight: {
          enabled: false
        },
        cmdPanUp: {
          enabled: false
        },
        cmdPanDown: {
          enabled: false
        },
        mouseCmdRotate: {
          enabled: true,
          type: 'mousedrag',
          code: mouseButtons.Right
        },
        mouseCmdDragZoom: {
          enabled: true,
          type: 'mousedrag',
          code: mouseButtons.Middle
        },
        mouseCmdPan: {
          enabled: true,
          type: 'mousedrag',
          code: mouseButtons.Left
        },
        mouseCmdWheelZoom: {
          enabled: true,
          type: 'mousewheel',
          code: 0
        },
        touchCmdRotate: {
          enabled: true,
          type: 'touchdrag',
          code: 3
        },
        touchCmdZoom: {
          enabled: true,
          type: 'touchdrag',
          code: 2
        },
        touchCmdPan: {
          enabled: true,
          type: 'touchdrag',
          code: 1
        },
        touchCmdSwipe: {
          enabled: true,
          type: 'touchdrag',
          code: 1
        }
      }
    };
  };

  /***/
},
/* 43 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _ImageBase2 = __webpack_require__(5);

  var _ImageBase3 = _interopRequireDefault(_ImageBase2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var BlankImage = function (_ImageBase) {
    _inherits(BlankImage, _ImageBase);

    function BlankImage(context, width, height, color) {
      _classCallCheck(this, BlankImage);

      var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));

      Promise.resolve().then(function () {
        _this.startRender = function () {
          _this.renderBlankPage();
          _this.finishRender();
        };
        _this.finishLoad();
      });
      return _this;
    }

    return BlankImage;
  }(_ImageBase3.default);

  exports.default = BlankImage;

  /***/
},
/* 44 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Bookmarks = function () {
    function Bookmarks(container, items) {
      var _this = this;

      var getTitle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (i) {
        return i.title;
      };
      var getItems = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function (i) {
        return i.items;
      };

      _classCallCheck(this, Bookmarks);

      this.container = container;
      this.map = [];
      this.getTitle = getTitle;
      this.getItems = getItems;
      this.nodes = this.mapNodes(items, this.map);

      this.binds = {
        togle: function togle(e) {
          e.preventDefault();
          var li = (0, _libs.$)(e.target);
          while (li[0] && li[0] !== container[0] && !li.hasClass('item')) {
            li = (0, _libs.$)(li[0].parentNode);
          }
          if (li.hasClass('item')) {
            var cmd = (0, _libs.$)(e.target);
            while (cmd[0] && cmd[0] !== li[0] && !cmd.hasClass('cmd')) {
              cmd = (0, _libs.$)(cmd[0].parentNode);
            }
            if (cmd.hasClass('cmd')) {
              var node = _this.map[li.attr('data-id')];
              if (cmd.hasClass('togle')) {
                node.minimized = !node.minimized;
                if (node.minimized) {
                  li.find('ul').remove();
                  li.find('.togle').addClass('minimized');
                } else {
                  li.find('.togle').removeClass('minimized');
                  li.append((_this.renderNode(node).match(/<ul.*<\/ul>/) || [''])[0]);
                }
              } else {
                if (_this.onNavigate) {
                  _this.onNavigate(node.item);
                }
              }
            }
          }
        }
      };

      container.on('click', this.binds.togle);
      this.update();
    }

    Bookmarks.prototype.getSize = function getSize() {
      return this.map.length;
    };

    Bookmarks.prototype.dispose = function dispose() {
      this.container.off('click', this.binds.togle);
      this.container.html('');
    };

    Bookmarks.prototype.update = function update() {
      this.container.html(this.renderNodes(this.nodes));
    };

    Bookmarks.prototype.forEach = function forEach(f) {
      var nodes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.nodes;

      for (var _iterator = nodes || [], _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var node = _ref;

        f(node);
        this.forEach(f, node.children);
      }
    };

    Bookmarks.prototype.expand = function expand() {
      this.forEach(function (n) {
        return n.minimized = false;
      });
      this.update();
    };

    Bookmarks.prototype.minimize = function minimize() {
      this.forEach(function (n) {
        return n.minimized = true;
      });
      this.update();
    };

    Bookmarks.prototype.renderNode = function renderNode(node) {
      return ['<div class="area">', node.children ? '<a href="#" class="cmd togle' + (node.minimized ? ' minimized' : '') + '"><i class="fa fa-angle-right"></i></a> ' : '<i class="white-space"></i> ', '<a class="cmd" title="', node.title, '" href="#">', node.title, '</a></div>', node.minimized ? '' : this.renderNodes(node.children)].join('');
    };

    Bookmarks.prototype.renderNodes = function renderNodes(nodes) {
      var res = ['<div class="bookmarks">'];
      if (nodes && nodes.length) {
        res.push('<ul class="level-', nodes[0].level, '">');
        for (var _iterator2 = nodes, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var node = _ref2;

          res.push(['<li class="item" data-id="', node.id, '">', this.renderNode(node), '</li>'].join(''));
        }
        res.push('</ul>');
      }
      res.push('</div>');
      return res.join('');
    };

    Bookmarks.prototype.mapNodes = function mapNodes(items) {
      var map = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

      var nodes = null;
      if (items && items.length) {
        nodes = [];
        for (var _iterator3 = items, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          if (_isArray3) {
            if (_i3 >= _iterator3.length) break;
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) break;
            _ref3 = _i3.value;
          }

          var item = _ref3;

          var id = map.length;
          map.push(undefined);
          var node = {
            id: id,
            title: this.getTitle(item),
            level: level,
            item: item,
            minimized: true,
            children: this.mapNodes(this.getItems(item), map, level + 1)
          };
          nodes.push(node);
          map[id] = node;
        }
      }
      return nodes;
    };

    return Bookmarks;
  }();

  exports.default = Bookmarks;

  /***/
},
/* 45 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Detector = function () {
    function Detector() {
      _classCallCheck(this, Detector);
    }

    Detector.getWebGLErrorMessage = function getWebGLErrorMessage() {
      var element = document.createElement('div');
      element.id = 'webgl-error-message';
      element.style.fontFamily = 'monospace';
      element.style.fontSize = '13px';
      element.style.fontWeight = 'normal';
      element.style.textAlign = 'center';
      element.style.background = '#fff';
      element.style.color = '#000';
      element.style.padding = '1.5em';
      element.style.width = '400px';
      element.style.margin = '5em auto 0';

      if (!Detector.webgl) {
        element.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join('\n') : ['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join('\n');
      }
      return element;
    };

    Detector.addGetWebGLMessage = function addGetWebGLMessage(parameters) {
      var parent = void 0,
          id = void 0,
          element = void 0;
      parameters = parameters || {};

      parent = parameters.parent || (0, _libs.$)(document.body);
      id = parameters.id || 'oldie';

      element = Detector.getWebGLErrorMessage();
      //element.id = id;

      parent.append(element);
    };

    return Detector;
  }();

  Detector.canvas = !!window.CanvasRenderingContext2D;

  Detector.webgl = function () {
    try {
      var canvas = document.createElement('canvas');
      return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
    } catch (e) {
      return false;
    }
  }();

  Detector.workers = !!window.Worker;
  Detector.fileapi = window.File && window.FileReader && window.FileList && window.Blob;
  exports.default = Detector;

  /***/
},
/* 46 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var DocMouseSimulator = function () {
    function DocMouseSimulator(jFrame, element) {
      var bElement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document.body;

      _classCallCheck(this, DocMouseSimulator);

      this.jFrame = jFrame;
      this.wnd = jFrame[0].contentWindow;
      this.doc = jFrame[0].contentDocument;
      this.element = element || doc.body;
      this.bElement = bElement;
      this.resendProperties = this.getDefaultResendProperties();
      this.undefinedProperties = this.getDefaultUndefinedProperties();
      this.cursors = [];
      this.onDocChangeClbs = [];
      var terms = [{
        find: ':hover',
        replace: '.' + DocMouseSimulator.HOVER
      }, {
        find: ':active',
        replace: '.' + DocMouseSimulator.ACTIVE
      }];
      var style = ['<style type="text/css">'];
      for (var i = 0; i < this.doc.styleSheets.length; ++i) {
        var ss = this.doc.styleSheets[i];
        for (var j = 0; j < ss.cssRules.length; ++j) {
          var r = ss.cssRules[j],
              cssText = void 0;
          for (var _iterator = terms, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
            var _ref;

            if (_isArray) {
              if (_i >= _iterator.length) break;
              _ref = _iterator[_i++];
            } else {
              _i = _iterator.next();
              if (_i.done) break;
              _ref = _i.value;
            }

            var term = _ref;

            if (~r.selectorText.indexOf(term.find)) {
              cssText = (cssText || r.cssText).replace(new RegExp(term.find, 'g'), term.replace);
            }
          }
          if (cssText) {
            style.push(cssText);
          }
        }
      }
      style.push('</style>');
      (0, _libs.$)(this.doc.head).append((0, _libs.$)(style.join('')));
    }

    DocMouseSimulator.prototype.convertCoords = function convertCoords(x, y) {
      var jElement = (0, _libs.$)(this.element);
      var offset = jElement.offset();
      return {
        x: offset.left + jElement.width() * x,
        y: offset.top + jElement.height() * (1 - y)
      };
    };

    DocMouseSimulator.prototype.triggerEvent = function triggerEvent(element, e, p, type, advancedProps) {
      var props = {};
      for (var _iterator2 = this.resendProperties, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i2 >= _iterator2.length) break;
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) break;
          _ref2 = _i2.value;
        }

        var _n = _ref2;

        props[_n] = e[_n];
      }
      for (var _iterator3 = this.undefinedProperties, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i3 >= _iterator3.length) break;
          _ref3 = _iterator3[_i3++];
        } else {
          _i3 = _iterator3.next();
          if (_i3.done) break;
          _ref3 = _i3.value;
        }

        var _n2 = _ref3;

        props[_n2] = undefined;
      }
      for (var n in advancedProps) {
        if (advancedProps.hasOwnProperty(n)) {
          props[n] = advancedProps[n];
        }
      }
      props.view = this.wnd;
      props.pageX = p.x;
      props.pageY = p.y;
      var jE = _libs.$.Event(type, props);
      jE.timeStamp = e.timeStamp;
      (0, _libs.$)(element).trigger(jE);
    };

    DocMouseSimulator.prototype.addClass = function addClass(element, name) {
      (0, _libs.$)(element).addClass(name);
      var style = this.wnd.getComputedStyle(element);
      this.cursors.push((0, _libs.$)(this.bElement).css('cursor'));
      (0, _libs.$)(this.bElement).css('cursor', style.getPropertyValue('cursor'));
    };

    DocMouseSimulator.prototype.removeClass = function removeClass(element, name) {
      (0, _libs.$)(element).removeClass(name);
      (0, _libs.$)(this.bElement).css('cursor', this.cursors.pop());
    };

    DocMouseSimulator.prototype.enterElement = function enterElement(element) {
      this.addClass(element, DocMouseSimulator.HOVER);
    };

    DocMouseSimulator.prototype.leaveElement = function leaveElement(element) {
      this.removeClass(element, DocMouseSimulator.HOVER);
    };

    DocMouseSimulator.prototype.activateElement = function activateElement(element) {
      this.addClass(element, DocMouseSimulator.ACTIVE);
    };

    DocMouseSimulator.prototype.deactivateElement = function deactivateElement(element) {
      this.removeClass(element, DocMouseSimulator.ACTIVE);
    };

    DocMouseSimulator.prototype.addDocChangeClb = function addDocChangeClb(clb) {
      this.onDocChangeClbs.push(clb);
    };

    DocMouseSimulator.prototype.notify = function notify() {
      for (var _iterator4 = this.onDocChangeClbs, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i4 >= _iterator4.length) break;
          _ref4 = _iterator4[_i4++];
        } else {
          _i4 = _iterator4.next();
          if (_i4.done) break;
          _ref4 = _i4.value;
        }

        var clb = _ref4;

        clb(this.wnd, this.doc);
      }
    };

    DocMouseSimulator.prototype.elementFromPoint = function elementFromPoint(p) {
      var node = this.doc.body,
          next = true;
      while (next) {
        next = false;
        for (var i = 0; i < node.childNodes.length; ++i) {
          var child = node.childNodes[i];
          if (child instanceof this.wnd.Element) {
            var jC = (0, _libs.$)(child),
                offset = jC.offset(),
                height = jC.height(),
                width = jC.width();
            if (p.x > offset.left && p.x < offset.left + width && p.y > offset.top && p.y < offset.top + height) {
              node = child;
              next = true;
              break;
            }
          }
        }
      }
      return node;
    };

    DocMouseSimulator.prototype.getElement = function getElement(p) {
      var off0 = this.jFrame.offset();
      this.jFrame.offset({ left: 0.5 * window.innerWidth - p.x, top: 0.5 * window.innerHeight - p.y });
      var element = this.doc.elementFromPoint(p.x, p.y);
      if (!element) {
        // it isn't a joke it's IE
        element = this.doc.elementFromPoint(p.x, p.y);
      }
      this.jFrame.offset(off0);
      return element ? element : this.elementFromPoint(p);
    };

    DocMouseSimulator.prototype.simulate = function simulate(e, doc, x, y) {
      var p = this.convertCoords(x, y),
          element = doc === this.doc ? this.getElement(p) : undefined;
      var trigger = element !== undefined,
          notify = false;

      switch (e.type) {
        case 'mousedown':
          {
            if (this.capElement) {
              this.deactivateElement(this.capElement);
              notify = true;
            }
            this.capElement = element;
            if (this.capElement) {
              this.activateElement(this.capElement);
              notify = true;
            }
            break;
          }
        case 'mouseup':
          {
            if (this.capElement) {
              this.deactivateElement(this.capElement);
              notify = true;
            }
            this.timeStamp = e.timeStamp;
            break;
          }
        case 'click':
          {
            trigger = element && this.capElement === element && e.timeStamp === this.timeStamp;
            this.capElement = undefined;
            break;
          }
        case 'mouseenter':
        case 'mouseover':
        case 'mousemove':
          {
            var leaved = null;
            if (this.hovElement !== element && this.hovElement) {
              this.triggerEvent(this.hovElement, e, p, 'mouseout', { relatedTarget: element ? element : null });
              this.leaveElement(this.hovElement);
              leaved = this.hovElement;
              this.hovElement = undefined;
              notify = true;
            }
            if (!this.hovElement && element) {
              this.triggerEvent(element, e, p, 'mouseover', { relatedTarget: leaved });
              this.enterElement(element);
              this.hovElement = element;
              notify = true;
            }
            trigger = element && e.type === 'mousemove';
            break;
          }
        case 'mouseleave':
        case 'mouseout':
          {
            if (this.hovElement) {
              this.triggerEvent(this.hovElement, e, p, 'mouseout', { relatedTarget: e.relatedTarget });
              this.leaveElement(this.hovElement);
              this.hovElement = undefined;
              notify = true;
            }
            trigger = false;
            break;
          }
      }
      if (trigger) {
        this.triggerEvent(element, e, p, e.type);
      }
      if (notify) {
        this.notify();
      }
    };

    DocMouseSimulator.prototype.getDefaultUndefinedProperties = function getDefaultUndefinedProperties() {
      return ['clientX', 'clientY', 'offsetX', 'offsetY', 'screenX', 'screenY'];
    };

    DocMouseSimulator.prototype.getDefaultResendProperties = function getDefaultResendProperties() {
      return ['altKey', 'bubbles', 'button', 'buttons', 'cancelable', 'changedTouches', 'char', 'charCode', 'ctrlKey', 'data', 'detail', 'eventPhase', 'isDefaultPrevented', 'key', 'keyCode', 'metaKey', 'pointerId', 'pointerType', 'shiftKey', 'targetTouches', 'touches', 'which'];
    };

    return DocMouseSimulator;
  }();

  /*
  altKey,
  bubbles,
  button,
  buttons,
  cancelable,
  changedTouches,
  char,
  charCode,
  clientX,
  clientY,
  ctrlKey,
  currentTarget,
  data,
  delegateTarget,
  detail,
  eventPhase,
  handleObj,
  isDefaultPrevented,
  key,
  keyCode,
  metaKey,
  offsetX,
  offsetY,
  originalEvent,
  pageX,
  pageY,
  pointerId,
  pointerType,
  relatedTarget,
  screenX,
  screenY,
  shiftKey,
  target,
  targetTouches,
  timeStamp,
  toElement,
  touches,
  type,
  view,
  which
  */

  DocMouseSimulator.HOVER = 'SIMULATED-HOVER';
  DocMouseSimulator.ACTIVE = 'SIMULATED-ACTIVE';
  exports.default = DocMouseSimulator;

  /***/
},
/* 47 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Dom2Image = function Dom2Image(wnd, doc, cache) {
    _classCallCheck(this, Dom2Image);

    var self = this;
    this.window = wnd;
    this.document = doc;
    this.cache = cache;

    var util = newUtil();
    var inliner = newInliner();
    var fontFaces = newFontFaces();
    var images = newImages();

    this.toSvg = toSvg;
    this.toPng = toPng;
    this.toJpeg = toJpeg;
    this.toBlob = toBlob;
    this.toPixelData = toPixelData;
    this.impl = {
      fontFaces: fontFaces,
      images: images,
      util: util,
      inliner: inliner
    };

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options
     * @param {Function} options.filter - Should return true if passed node should be included in the output
     *          (excluding node means excluding it's children as well). Not called on the root node.
     * @param {String} options.bgcolor - color for the background, any valid CSS color value.
     * @param {Number} options.width - width to be applied to node before rendering.
     * @param {Number} options.height - height to be applied to node before rendering.
     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.
     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),
                defaults to 1.0.
     * @return {Promise} - A promise that is fulfilled with a SVG image data URL
     * */

    function toSvg(node, options) {
      options = options || {};
      return Promise.resolve(node).then(function (node) {
        return cloneNode(node, options.filter, true);
      }).then(embedFonts).then(inlineImages).then(applyOptions).then(function (clone) {
        return makeSvgDataUri(clone, options.width || util.width(node), options.height || util.height(node));
      });

      function applyOptions(clone) {
        if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;

        if (options.width) clone.style.width = options.width + 'px';
        if (options.height) clone.style.height = options.height + 'px';

        if (options.style) self.window.Object.keys(options.style).forEach(function (property) {
          clone.style[property] = options.style[property];
        });

        return clone;
      }
    }

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options, @see {@link toSvg}
     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.
     * */
    function toPixelData(node, options) {
      return draw(node, options || {}).then(function (canvas) {
        return canvas.getContext('2d').getImageData(0, 0, util.width(node), util.height(node)).data;
      });
    }

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options, @see {@link toSvg}
     * @return {Promise} - A promise that is fulfilled with a PNG image data URL
     * */
    function toPng(node, options) {
      return draw(node, options || {}).then(function (canvas) {
        return canvas.toDataURL();
      });
    }

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options, @see {@link toSvg}
     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL
     * */
    function toJpeg(node, options) {
      options = options || {};
      return draw(node, options).then(function (canvas) {
        return canvas.toDataURL('image/jpeg', options.quality || 1.0);
      });
    }

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options, @see {@link toSvg}
     * @return {Promise} - A promise that is fulfilled with a PNG image blob
     * */
    function toBlob(node, options) {
      return draw(node, options || {}).then(util.canvasToBlob);
    }

    function draw(domNode, options) {
      return toSvg(domNode, options).then(util.makeImage).then(util.delay(100)).then(function (image) {
        var canvas = newCanvas(domNode);
        canvas.getContext('2d').drawImage(image, 0, 0);
        return canvas;
      });

      function newCanvas(domNode) {
        var canvas = self.document.createElement('canvas');
        canvas.width = options.width || util.width(domNode);
        canvas.height = options.height || util.height(domNode);

        if (options.bgcolor) {
          var ctx = canvas.getContext('2d');
          ctx.fillStyle = options.bgcolor;
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        return canvas;
      }
    }

    function cloneNode(node, filter, root) {
      if (!root && filter && !filter(node)) return Promise.resolve();

      return Promise.resolve(node).then(makeNodeCopy).then(function (clone) {
        return cloneChildren(node, clone, filter);
      }).then(function (clone) {
        return processClone(node, clone);
      });

      function makeNodeCopy(node) {
        if (util.isCanvas(node)) return util.makeImage(node.toDataURL());
        return node.cloneNode(false);
      }

      function cloneChildren(original, clone, filter) {
        var children = original.childNodes;
        if (children.length === 0) return Promise.resolve(clone);

        return cloneChildrenInOrder(clone, util.asArray(children), filter).then(function () {
          return clone;
        });

        function cloneChildrenInOrder(parent, children, filter) {
          var done = Promise.resolve();
          children.forEach(function (child) {
            done = done.then(function () {
              return cloneNode(child, filter);
            }).then(function (childClone) {
              if (childClone) parent.appendChild(childClone);
            });
          });
          return done;
        }
      }

      function processClone(original, clone) {
        if (!util.isElement(clone)) return clone;

        return Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function () {
          return clone;
        });

        function cloneStyle() {
          copyStyle(self.window.getComputedStyle(original), clone.style);

          function copyStyle(source, target) {
            if (source.cssText) target.cssText = source.cssText;else copyProperties(source, target);

            function copyProperties(source, target) {
              util.asArray(source).forEach(function (name) {
                target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));
              });
            }
          }
        }

        function clonePseudoElements() {
          [':before', ':after'].forEach(function (element) {
            clonePseudoElement(element);
          });

          function clonePseudoElement(element) {
            var style = self.window.getComputedStyle(original, element);
            var content = style.getPropertyValue('content');

            if (content === '' || content === 'none') return;

            var className = util.uid();
            clone.className = clone.className + ' ' + className;
            var styleElement = self.document.createElement('style');
            styleElement.appendChild(formatPseudoElementStyle(className, element, style));
            clone.appendChild(styleElement);

            function formatPseudoElementStyle(className, element, style) {
              var selector = '.' + className + ':' + element;
              var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);
              return self.document.createTextNode(selector + '{' + cssText + '}');

              function formatCssText(style) {
                var content = style.getPropertyValue('content');
                return style.cssText + ' content: ' + content + ';';
              }

              function formatCssProperties(style) {

                return util.asArray(style).map(formatProperty).join('; ') + ';';

                function formatProperty(name) {
                  return name + ': ' + style.getPropertyValue(name) + (style.getPropertyPriority(name) ? ' !important' : '');
                }
              }
            }
          }
        }

        function copyUserInput() {
          if (util.isTextArea(original)) clone.innerHTML = original.value;
          if (util.isInput(original)) clone.setAttribute("value", original.value);
        }

        function fixSvg() {
          if (!util.isSVG(clone)) return;
          clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');

          if (!util.isSVGRect(clone)) return;
          ['width', 'height'].forEach(function (attribute) {
            var value = clone.getAttribute(attribute);
            if (!value) return;

            clone.style.setProperty(attribute, value);
          });
        }
      }
    }

    function embedFonts(node) {
      return fontFaces.resolveAll().then(function (cssText) {
        var styleNode = self.document.createElement('style');
        node.appendChild(styleNode);
        styleNode.appendChild(self.document.createTextNode(cssText));
        return node;
      });
    }

    function inlineImages(node) {
      return images.inlineAll(node).then(function () {
        return node;
      });
    }

    function makeSvgDataUri(node, width, height) {
      return Promise.resolve(node).then(function (node) {
        node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');
        return new self.window.XMLSerializer().serializeToString(node);
      }).then(util.escapeXhtml).then(function (xhtml) {
        return ['data:image/svg+xml;charset=utf-8,', '<svg xmlns="http://www.w3.org/2000/svg" width="', width, '" height="', height, '">', '<foreignObject x="0" y="0" width="100%" height="100%">', xhtml, '</foreignObject>', '</svg>'].join('');
      });
    }

    function newUtil() {
      return {
        escape: escape,
        parseExtension: parseExtension,
        mimeType: mimeType,
        dataAsUrl: dataAsUrl,
        isDataUrl: isDataUrl,
        canvasToBlob: canvasToBlob,
        resolveUrl: resolveUrl,
        getAndEncode: getAndEncode,
        uid: uid(),
        delay: delay,
        asArray: asArray,
        escapeXhtml: escapeXhtml,
        makeImage: makeImage,
        width: width,
        height: height,

        isElement: isElement,
        isCanvas: isCanvas,
        isTextArea: isTextArea,
        isInput: isInput,
        isSVG: isSVG,
        isSVGRect: isSVGRect,
        isImage: isImage
      };

      function mimes() {
        /*
         * Only WOFF and EOT mime types for fonts are 'real'
         * see http://www.iana.org/assignments/media-types/media-types.xhtml
         */
        var WOFF = 'application/font-woff';
        var JPEG = 'image/jpeg';

        return {
          'woff': WOFF,
          'woff2': WOFF,
          'ttf': 'application/font-truetype',
          'eot': 'application/vnd.ms-fontobject',
          'png': 'image/png',
          'jpg': JPEG,
          'jpeg': JPEG,
          'gif': 'image/gif',
          'tiff': 'image/tiff',
          'svg': 'image/svg+xml'
        };
      }

      function parseExtension(url) {
        var match = /\.([^\.\/]*?)$/g.exec(url);
        if (match) return match[1];else return '';
      }

      function mimeType(url) {
        var extension = parseExtension(url).toLowerCase();
        return mimes()[extension] || '';
      }

      function isDataUrl(url) {
        return url.search(/^(data:)/) !== -1;
      }

      function toBlob(canvas) {
        return new Promise(function (resolve) {
          var binaryString = self.window.atob(canvas.toDataURL().split(',')[1]);
          var length = binaryString.length;
          var binaryArray = new self.window.Uint8Array(length);

          for (var i = 0; i < length; i++) {
            binaryArray[i] = binaryString.charCodeAt(i);
          }resolve(new self.window.Blob([binaryArray], {
            type: 'image/png'
          }));
        });
      }

      function canvasToBlob(canvas) {
        if (canvas.toBlob) return new Promise(function (resolve) {
          canvas.toBlob(resolve);
        });

        return toBlob(canvas);
      }

      function resolveUrl(url, baseUrl) {
        var doc = self.document.implementation.createHTMLDocument();
        var base = doc.createElement('base');
        doc.head.appendChild(base);
        var a = doc.createElement('a');
        doc.body.appendChild(a);
        base.href = baseUrl;
        a.href = url;
        return a.href;
      }

      function uid() {
        var index = 0;

        return function () {
          return 'u' + fourRandomChars() + index++;

          function fourRandomChars() {
            /* see http://stackoverflow.com/a/6248722/2519373 */
            return ('0000' + (self.window.Math.random() * self.window.Math.pow(36, 4) << 0).toString(36)).slice(-4);
          }
        };
      }

      function makeImage(uri) {
        return new Promise(function (resolve, reject) {
          var image = new self.window.Image();
          image.onload = function () {
            resolve(image);
          };
          image.onerror = reject;
          image.src = uri;
        });
      }

      function getAndEncode(url) {
        var data = self.cache.get(url);
        if (data) {
          if (data.content) {
            return data.content;
          } else {
            return new Promise(function (resolve) {
              if (data.content) {
                resolve(data.content);
              } else {
                data.pendings.push(resolve);
              }
            });
          }
        } else {
          data = self.cache.put(url, { pendings: [] });

          var TIMEOUT = 30000;

          return new Promise(function (resolve) {
            var request = new self.window.XMLHttpRequest();

            request.onreadystatechange = done;
            request.ontimeout = timeout;
            request.responseType = 'blob';
            request.timeout = TIMEOUT;
            request.open('GET', url, true);
            request.send();

            function done() {
              if (request.readyState !== 4) return;

              if (request.status !== 200) {
                fail('cannot fetch resource: ' + url + ', status: ' + request.status);
                return;
              }

              var encoder = new self.window.FileReader();
              encoder.onloadend = function () {
                data.content = encoder.result.split(/,/)[1];
                for (var _iterator = data.pendings, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
                  var _ref;

                  if (_isArray) {
                    if (_i >= _iterator.length) break;
                    _ref = _iterator[_i++];
                  } else {
                    _i = _iterator.next();
                    if (_i.done) break;
                    _ref = _i.value;
                  }

                  var _resolve = _ref;

                  _resolve(data.content);
                }
                data.pendings = [];
                resolve(data.content);
              };
              encoder.readAsDataURL(request.response);
            }

            function timeout() {
              fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);
            }

            function fail(message) {
              console.error(message);
              resolve('');
            }
          });
        }
      }

      function dataAsUrl(content, type) {
        return ['data:', type, ';base64,', content].join('');
      }

      function escape(string) {
        return string.replace(/([.*+?^${}()|\[\]\/\\])/g, '\\$1');
      }

      function delay(ms) {
        return function (arg) {
          return new Promise(function (resolve) {
            setTimeout(function () {
              resolve(arg);
            }, ms);
          });
        };
      }

      function asArray(arrayLike) {
        var array = [];
        var length = arrayLike.length;
        for (var i = 0; i < length; i++) {
          array.push(arrayLike[i]);
        }return array;
      }

      function escapeXhtml(string) {
        return string.replace(/(#|\n)/g, function (c) {
          return c === '#' ? '%23' : '%0A';
        });
      }

      function width(node) {
        var leftBorder = px(node, 'border-left-width');
        var rightBorder = px(node, 'border-right-width');
        return node.scrollWidth + leftBorder + rightBorder;
      }

      function height(node) {
        var topBorder = px(node, 'border-top-width');
        var bottomBorder = px(node, 'border-bottom-width');
        return node.scrollHeight + topBorder + bottomBorder;
      }

      function px(node, styleProperty) {
        var value = self.window.getComputedStyle(node).getPropertyValue(styleProperty);
        return parseFloat(value.replace('px', ''));
      }

      function isElement(node) {
        return node instanceof self.window.Element;
      }

      function isCanvas(node) {
        return node instanceof self.window.HTMLCanvasElement;
      }

      function isTextArea(node) {
        return node instanceof self.window.HTMLTextAreaElement;
      }

      function isInput(node) {
        return node instanceof self.window.HTMLInputElement;
      }

      function isSVG(node) {
        return node instanceof self.window.SVGElement;
      }

      function isSVGRect(node) {
        return node instanceof self.window.SVGRectElement;
      }

      function isImage(node) {
        return node instanceof self.window.HTMLImageElement;
      }
    }

    function newInliner() {
      var URL_REGEX = /url\(['"]?([^'"]+?)['"]?\)/g;

      return {
        inlineAll: inlineAll,
        shouldProcess: shouldProcess,
        impl: {
          readUrls: readUrls,
          inline: inline
        }
      };

      function shouldProcess(string) {
        return string.search(URL_REGEX) !== -1;
      }

      function readUrls(string) {
        var result = [];
        var match = void 0;
        while ((match = URL_REGEX.exec(string)) !== null) {
          result.push(match[1]);
        }
        return result.filter(function (url) {
          return !util.isDataUrl(url);
        });
      }

      function inline(string, url, baseUrl, get) {
        return Promise.resolve(url).then(function (url) {
          return baseUrl ? util.resolveUrl(url, baseUrl) : url;
        }).then(get || util.getAndEncode).then(function (data) {
          return util.dataAsUrl(data, util.mimeType(url));
        }).then(function (dataUrl) {
          return string.replace(urlAsRegex(url), ['$1', dataUrl, '$3'].join(''));
        });

        function urlAsRegex(url) {
          return new self.window.RegExp(['(url\\([\'"]?)(', util.escape(url), ')([\'"]?\\))'].join(''), 'g');
        }
      }

      function inlineAll(string, baseUrl, get) {
        if (nothingToInline()) return Promise.resolve(string);

        return Promise.resolve(string).then(readUrls).then(function (urls) {
          var done = Promise.resolve(string);
          urls.forEach(function (url) {
            done = done.then(function (string) {
              return inline(string, url, baseUrl, get);
            });
          });
          return done;
        });

        function nothingToInline() {
          return !shouldProcess(string);
        }
      }
    }

    function newFontFaces() {
      return {
        resolveAll: resolveAll,
        impl: {
          readAll: readAll
        }
      };

      function resolveAll() {
        return readAll(self.document).then(function (webFonts) {
          return Promise.all(webFonts.map(function (webFont) {
            return webFont.resolve();
          }));
        }).then(function (cssStrings) {
          return cssStrings.join('\n');
        });
      }

      function readAll() {
        return Promise.resolve(util.asArray(self.document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function (rules) {
          return rules.map(newWebFont);
        });

        function selectWebFontRules(cssRules) {
          return cssRules.filter(function (rule) {
            return rule.type === CSSRule.FONT_FACE_RULE;
          }).filter(function (rule) {
            return inliner.shouldProcess(rule.style.getPropertyValue('src'));
          });
        }

        function getCssRules(styleSheets) {
          var cssRules = [];
          styleSheets.forEach(function (sheet) {
            try {
              util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));
            } catch (e) {
              console.log('Error while reading CSS rules from ' + sheet.href, e.toString());
            }
          });
          return cssRules;
        }

        function newWebFont(webFontRule) {
          return {
            resolve: function resolve() {
              var baseUrl = (webFontRule.parentStyleSheet || {}).href;
              return inliner.inlineAll(webFontRule.cssText, baseUrl);
            },
            src: function src() {
              return webFontRule.style.getPropertyValue('src');
            }
          };
        }
      }
    }

    function newImages() {
      return {
        inlineAll: inlineAll,
        impl: {
          newImage: newImage
        }
      };

      function newImage(element) {
        return {
          inline: inline
        };

        function inline(get) {
          if (util.isDataUrl(element.src)) return Promise.resolve();

          return Promise.resolve(element.src).then(get || util.getAndEncode).then(function (data) {
            return util.dataAsUrl(data, util.mimeType(element.src));
          }).then(function (dataUrl) {
            return new Promise(function (resolve, reject) {
              element.onload = resolve;
              element.onerror = reject;
              element.src = dataUrl;
            });
          });
        }
      }

      function inlineAll(node) {
        if (!util.isElement(node)) return Promise.resolve(node);

        return inlineBackground(node).then(function () {
          if (util.isImage(node)) return newImage(node).inline();else return Promise.all(util.asArray(node.childNodes).map(function (child) {
            return inlineAll(child);
          }));
        });

        function inlineBackground(node) {
          var background = node.style.getPropertyValue('background');

          if (!background) return Promise.resolve(node);

          return inliner.inlineAll(background).then(function (inlined) {
            node.style.setProperty('background', inlined, node.style.getPropertyPriority('background'));
          }).then(function () {
            return node;
          });
        }
      }
    }
  };

  exports.default = Dom2Image;

  /***/
},
/* 48 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Drag = function () {
    function Drag(wnd, doc, visualWorld) {
      _classCallCheck(this, Drag);

      this.wnd = wnd;
      this.doc = doc;
      this.visual = visualWorld;
      this.coords = new _libs.THREE.Vector2();
      this.intersection = new _libs.THREE.Vector3();
      this.raycaster = this.visual.raycaster;
      this.camera = this.visual.camera;
      this.plane = new _libs.THREE.Plane();
      this.threes = [];
      this.selected = null;
      this.enabled = true;
      this.controlsState = this.visual.getControlsState();

      this.element = this.visual.element;
      this.binds = {
        onMouseMove: this.onMouseMove.bind(this),
        onMouseDown: this.onMouseDown.bind(this),
        onMouseUp: this.onMouseUp.bind(this)
      };
      (0, _libs.$)(this.element).on('mousemove', this.binds.onMouseMove);
      (0, _libs.$)(this.element).on('mousedown', this.binds.onMouseDown);
      (0, _libs.$)(this.doc).on('mouseup', this.binds.onMouseUp);
    }

    Drag.prototype.addThree = function addThree(three) {
      this.threes.push(three);
    };

    Drag.prototype.removeThree = function removeThree(three) {
      var i = this.threes.indexOf(three);
      if (~i) {
        this.threes.splice(i, 1);
      }
    };

    Drag.prototype.onPickCallback = function onPickCallback() {
      return true;
    };

    Drag.prototype.onDragCallback = function onDragCallback() {
      return true;
    };

    Drag.prototype.onReleaseCallback = function onReleaseCallback() {};

    Drag.prototype.dispose = function dispose() {
      (0, _libs.$)(this.element).off('mousemove', this.binds.onMouseMove);
      (0, _libs.$)(this.element).off('mousedown', this.binds.onMouseDown);
      (0, _libs.$)(this.doc).off('mouseup', this.binds.onMouseUp);
    };

    Drag.prototype.setCoordsFromEvent = function setCoordsFromEvent(e) {
      var jElement = (0, _libs.$)(this.element);
      var offset = jElement.offset();
      this.coords.x = (e.pageX - offset.left) / jElement.width() * 2 - 1;
      this.coords.y = -((e.pageY - offset.top) / jElement.height()) * 2 + 1;
      return this.coords;
    };

    Drag.prototype.onMouseDown = function onMouseDown(e) {
      if (!this.enabled) return;

      if (this.selected) this.onMouseUp(e);

      this.setCoordsFromEvent(e);
      this.raycaster.setFromCamera(this.coords, this.camera);

      var intersects = this.raycaster.intersectObjects(this.threes);
      if (intersects.length > 0) {
        var selected = intersects[0].object;
        if (!this.onPickCallback(intersects[0])) return;
        var v = intersects[0].point.clone();
        this.distance = v.sub(this.raycaster.ray.origin).length();;
        this.controlsState = this.visual.getControlsState();
        this.visual.setControlsState(false);
        this.plane.setFromNormalAndCoplanarPoint(this.visual.camera.getWorldDirection(this.plane.normal), intersects[0].point);
        //this.plane.setFromNormalAndCoplanarPoint(this.plane.normal.set(0,0,1), new THREE.Vector3(0,0,0));
        this.selected = selected;
      }
    };

    Drag.prototype.onMouseMove = function onMouseMove(e) {
      if (!this.enabled) return;
      e.preventDefault();

      if (this.selected) {
        this.setCoordsFromEvent(e);
        this.raycaster.setFromCamera(this.coords, this.camera);
        if (this.raycaster.ray.intersectPlane(this.plane, this.intersection)) {
          if (!this.onDragCallback(this.intersection)) this.onMouseUp(e);
        } /**/
        //this.intersection.copy(this.raycaster.ray.direction).normalize().multiplyScalar(this.distance).add(this.raycaster.ray.origin);/**/
        //if(!this.onDragCallback(this.selected, this.intersection)) this.onMouseUp(e);
      }
    };

    Drag.prototype.onMouseUp = function onMouseUp(e) {
      if (this.selected) {
        this.onReleaseCallback();
        this.selected = null;
        this.visual.setControlsState(this.controlsState);
      }
      if (!this.enabled) return;
      e.preventDefault();
    };

    return Drag;
  }();

  exports.default = Drag;

  /***/
},
/* 49 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  __webpack_require__(71)(_libs.$);

  var EventsToActions = function () {
    EventsToActions.getEventFlags = function getEventFlags(e) {
      return e.ctrlKey << 0 | e.shiftKey << 1 | e.altKey << 2;
    };

    EventsToActions.getPosition = function getPosition(touches) {
      var x = void 0,
          y = void 0;
      if (touches.length === 2) {
        x = touches[1].pageX - touches[0].pageX;
        y = touches[1].pageY - touches[0].pageY;
        y = -Math.sqrt(x * x + y * y);
        x = 0;
      } else {
        x = touches[0].pageX;
        y = touches[0].pageY;
      }
      return {
        x: x,
        y: y
      };
    };

    function EventsToActions(element, actions) {
      _classCallCheck(this, EventsToActions);

      this.actions = actions || {};
      this.element = element;
      this.doc = element[0].ownerDocument;
      this.wnd = this.doc.defaultView;
      this.enabled = true;

      this.binds = {
        contextMenu: this.contextMenu.bind(this),

        mouseDown: this.mouseDown.bind(this),
        mouseMove: this.mouseMove.bind(this),
        mouseUp: this.mouseUp.bind(this),
        mouseWheel: this.mouseWheel.bind(this),

        mouseMoveDoc: this.mouseMoveDoc.bind(this),
        mouseUpDoc: this.mouseUpDoc.bind(this),

        click: this.click.bind(this),
        dblclick: this.dblclick.bind(this),

        touchStart: this.touchStart.bind(this),
        touchMove: this.touchMove.bind(this),
        touchEnd: this.touchEnd.bind(this),

        keyDown: this.keyDown.bind(this),
        keyPress: this.keyPress.bind(this),
        keyUp: this.keyUp.bind(this)
      };

      this.element.on('contextmenu', this.binds.contextMenu);

      this.element.on('mousedown', this.binds.mouseDown);
      this.element.on('mousemove', this.binds.mouseMove);
      this.element.on('mouseup', this.binds.mouseUp);
      this.element.on('mousewheel', this.binds.mouseWheel);

      (0, _libs.$)(this.doc).on('mousemove', this.binds.mouseMoveDoc);
      (0, _libs.$)(this.doc).on('mouseup', this.binds.mouseUpDoc);

      this.element.on('click', this.binds.click);
      this.element.on('dblclick', this.binds.dblclick);

      this.element.on('touchstart', this.binds.touchStart);
      this.element.on('touchmove', this.binds.touchMove);
      this.element.on('touchend', this.binds.touchEnd);

      (0, _libs.$)(this.wnd).on('keydown', this.binds.keyDown);
      (0, _libs.$)(this.wnd).on('keypress', this.binds.keyPress);
      (0, _libs.$)(this.wnd).on('keyup', this.binds.keyUp);
    }

    EventsToActions.prototype.addAction = function addAction(action, type, code, flags) {
      type = type.toLowerCase();
      if (!this.actions[type]) {
        this.actions[type] = {};
      }
      if (!this.actions[type][code]) {
        this.actions[type][code] = {};
      }
      if (!this.actions[type][code][flags]) {
        this.actions[type][code][flags] = [];
      }
      this.actions[type][code][flags].push(action);
    };

    EventsToActions.prototype.getActions = function getActions(type, code, flags) {
      return ((this.actions[type] || {})[code] || {})[flags] || [];
    };

    EventsToActions.prototype.fireActions = function fireActions(actions, e, data) {
      for (var _iterator = actions, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var action = _ref;

        action(e, data);
      }
    };

    EventsToActions.prototype.contextMenu = function contextMenu(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('contextmenu', e.button, flags), e);
      }
    };

    EventsToActions.prototype.mouseDown = function mouseDown(e) {
      if (this.picked) {
        this.mouseUpDoc();
      }
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('mousedown', e.button, flags), e);
        this.picked = {
          x: e.pageX,
          y: e.pageY,
          actions: this.getActions('mousedrag', e.button, flags)
        };
        this.fireActions(this.picked.actions, e, {
          state: 'start'
        });
      }
    };

    EventsToActions.prototype.mouseMove = function mouseMove(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('mousemove', e.button, flags), e);
      }
    };

    EventsToActions.prototype.mouseMoveDoc = function mouseMoveDoc(e) {
      if (this.enabled && this.picked) {
        this.fireActions(this.picked.actions, e, {
          state: 'move',
          dx: e.pageX - this.picked.x,
          dy: e.pageY - this.picked.y
        });
        this.picked = {
          x: e.pageX,
          y: e.pageY,
          actions: this.picked.actions
        };
      }
    };

    EventsToActions.prototype.mouseUp = function mouseUp(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('mouseup', e.button, flags), e);
      }
    };

    EventsToActions.prototype.mouseUpDoc = function mouseUpDoc(e) {
      if (this.picked) {
        this.fireActions(this.picked.actions, e, {
          state: 'end'
        });
        delete this.picked;
      }
    };

    EventsToActions.prototype.mouseWheel = function mouseWheel(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('mousewheel', 0, flags), e);
      }
    };

    EventsToActions.prototype.clicks = function clicks(e, type) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions(type, e.button, flags), e);
      }
    };

    EventsToActions.prototype.click = function click(e) {
      this.clicks(e, 'click');
    };

    EventsToActions.prototype.dblclick = function dblclick(e) {
      this.clicks(e, 'dblclick');
    };

    EventsToActions.prototype.touchPick = function touchPick(e, flags, touches) {
      this.touchPicked = _extends({}, EventsToActions.getPosition(touches), {
        actions: this.getActions('touchdrag', touches.length, flags),
        code: touches.length,
        flags: flags
      });
      this.fireActions(this.touchPicked.actions, e, {
        state: 'start'
      });
    };

    EventsToActions.prototype.touchStart = function touchStart(e) {
      if (this.touchPicked) {
        this.touchEnd(e);
      }
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e),
            touches = e.touches || e.originalEvent.touches;
        this.fireActions(this.getActions('touchstart', touches.length, flags), e);
        this.touchPick(e, flags, touches);
      }
    };

    EventsToActions.prototype.touchMove = function touchMove(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e),
            touches = e.touches || e.originalEvent.touches;
        this.fireActions(this.getActions('touchmove', touches.length, flags), e);
        if (this.touchPicked) {
          if (this.touchPicked.code === touches.length && this.touchPicked.flags === flags) {
            var pos = EventsToActions.getPosition(touches);
            this.fireActions(this.touchPicked.actions, e, {
              state: 'move',
              dx: pos.x - this.touchPicked.x,
              dy: pos.y - this.touchPicked.y
            });
            this.touchPicked = _extends({}, this.touchPicked, pos);
          } else {
            this.touchEnd(e);
            this.touchPick(e, flags, touches);
          }
        }
      }
    };

    EventsToActions.prototype.touchEnd = function touchEnd(e) {
      if (this.touchPicked) {
        this.fireActions(this.touchPicked.actions, e, {
          state: 'end'
        });
        delete this.touchPicked;
      }
    };

    EventsToActions.prototype.key = function key(e, type) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions(type, e.keyCode, flags), e);
      }
    };

    EventsToActions.prototype.keyDown = function keyDown(e) {
      this.key(e, 'keydown');
    };

    EventsToActions.prototype.keyPress = function keyPress(e) {
      this.key(e, 'keypress');
    };

    EventsToActions.prototype.keyUp = function keyUp(e) {
      this.key(e, 'keyup');
    };

    EventsToActions.prototype.dispose = function dispose() {
      this.element.off('contextmenu', this.binds.contextMenu);

      this.element.off('mousedown', this.binds.mouseDown);
      this.element.off('mousemove', this.binds.mouseMove);
      this.element.off('mouseup', this.binds.mouseUp);
      this.element.off('mousewheel', this.binds.mouseWheel);

      (0, _libs.$)(this.doc).off('mousemove', this.binds.mouseMoveDoc);
      (0, _libs.$)(this.doc).off('mouseup', this.binds.mouseUpDoc);

      this.element.off('click', this.binds.click);
      this.element.off('dblclick', this.binds.dblclick);

      this.element.off('touchstart', this.binds.touchStart);
      this.element.off('touchmove', this.binds.touchMove);
      this.element.off('touchend', this.binds.touchEnd);

      (0, _libs.$)(this.wnd).off('keydown', this.binds.keyDown);
      (0, _libs.$)(this.wnd).off('keypress', this.binds.keyPress);
      (0, _libs.$)(this.wnd).off('keyup', this.binds.keyUp);
    };

    return EventsToActions;
  }();

  EventsToActions.modKeys = {
    Ctrl: 1,
    Shift: 2,
    Alt: 4
  };
  EventsToActions.mouseButtons = {
    Left: 0,
    Middle: 1,
    Right: 2
  };
  exports.default = EventsToActions;

  /***/
},
/* 50 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var FullScreen = function () {
    function FullScreen() {
      _classCallCheck(this, FullScreen);
    }

    FullScreen.available = function available() {
      return FullScreen._hasWebkitFullScreen || FullScreen._hasMozFullScreen || FullScreen._hasMsFullscreen;
    };

    FullScreen.activated = function activated() {
      if (FullScreen._hasWebkitFullScreen) {
        return document.webkitIsFullScreen;
      } else if (FullScreen._hasMozFullScreen) {
        return document.mozFullScreen;
      } else if (FullScreen._hasMsFullscreen) {
        return !!document.msFullscreenElement;
      } else {
        console.assert(false);
      }
    };

    FullScreen.addEventListener = function addEventListener(element, handler) {
      if (element.addEventListener) {
        element.addEventListener('webkitfullscreenchange', handler, false);
        element.addEventListener('mozfullscreenchange', handler, false);
        element.addEventListener('fullscreenchange', handler, false);
        element.addEventListener('MSFullscreenChange', handler, false);
      }
    };

    FullScreen.removeEventListener = function removeEventListener(element, handler) {
      if (element.removeEventListener) {
        element.removeEventListener('webkitfullscreenchange', handler, false);
        element.removeEventListener('mozfullscreenchange', handler, false);
        element.removeEventListener('fullscreenchange', handler, false);
        element.removeEventListener('MSFullscreenChange', handler, false);
      }
    };

    FullScreen.request = function request(element) {
      element = element || document.body;
      if (FullScreen._hasWebkitFullScreen) {
        element.webkitRequestFullScreen();
      } else if (FullScreen._hasMozFullScreen) {
        element.mozRequestFullScreen();
      } else if (FullScreen._hasMsFullscreen) {
        element.msRequestFullscreen();
      } else {
        console.assert(false);
      }
    };

    FullScreen.cancel = function cancel() {
      if (FullScreen._hasWebkitFullScreen) {
        document.webkitCancelFullScreen();
      } else if (FullScreen._hasMozFullScreen) {
        document.mozCancelFullScreen();
      } else if (FullScreen._hasMsFullscreen) {
        document.msExitFullscreen();
      } else {
        console.assert(false);
      }
    };

    return FullScreen;
  }();

  FullScreen._hasWebkitFullScreen = !!document.webkitCancelFullScreen;
  FullScreen._hasMozFullScreen = !!document.mozCancelFullScreen;
  FullScreen._hasMsFullscreen = !!document.documentElement.msRequestFullscreen;
  exports.default = FullScreen;

  /***/
},
/* 51 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _ImageBase2 = __webpack_require__(5);

  var _ImageBase3 = _interopRequireDefault(_ImageBase2);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  var _Dom2Image = __webpack_require__(47);

  var _Dom2Image2 = _interopRequireDefault(_Dom2Image);

  var _DocMouseSimulator = __webpack_require__(46);

  var _DocMouseSimulator2 = _interopRequireDefault(_DocMouseSimulator);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var InteractiveImage = function (_ImageBase) {
    _inherits(InteractiveImage, _ImageBase);

    function InteractiveImage(context, width, height, color, src, cache, injector) {
      _classCallCheck(this, InteractiveImage);

      var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));

      _this.iId = 'i' + _BaseMathUtils2.default.getUnique();
      var jFrame = (0, _libs.$)('<iframe id="' + _this.iId + '" src="' + src + '" style="position: fixed; left: -1000px;"></iframe>');
      (0, _libs.$)(_this.doc.body).append(jFrame);
      _this.frame = jFrame[0];

      _this.binds = {};

      if (injector) {
        injector(_this.frame.contentWindow);
      }

      if (_this.doc.implementation.hasFeature('www.http://w3.org/TR/SVG11/feature#Extensibility', '1.1')) {
        // svg foreignObject renderer
        _this.image = new Image();
        _this.binds.imageLoad = function () {
          _this.renderImage(_this.image);
          _this.finishRender();
        };
        (0, _libs.$)(_this.image).on('load', _this.binds.imageLoad);
        _this.svgRender = new _Dom2Image2.default(_this.frame.contentWindow, _this.frame.contentDocument, cache);
      } // otherwise - html2canvas

      _this.binds.frameLoad = function () {
        if (~_this.frame.contentDocument.title.indexOf('404')) {
          _this.startRender = function () {
            _this.renderNotFoundPage();
            _this.finishRender();
          };
          _this.finishLoad();
        } else {
          setTimeout(function () {
            if (_this.frame) {
              _this.width = (0, _libs.$)(_this.frame.contentDocument.body).width();
              _this.height = (0, _libs.$)(_this.frame.contentDocument.body).height();
              jFrame.css('width', _this.width + 'px').css('height', _this.height + 'px');
              jFrame.offset({ left: -_this.width - 100, top: 0 });
              if (_this.svgRender) {
                _this.simulator = new _DocMouseSimulator2.default(jFrame, _this.frame.contentDocument.body, _this.element);
                _this.simulator.addDocChangeClb(_this.finishLoad.bind(_this));
              }
              _this.startRender = function () {
                _this.render();
              };
              _this.finishLoad();
            }
          }, 500);
        }
      };
      (0, _libs.$)(_this.frame.contentWindow).on('load', _this.binds.frameLoad);
      return _this;
    }

    InteractiveImage.prototype.getSimulatedDoc = function getSimulatedDoc() {
      return this.frame.contentDocument;
    };

    InteractiveImage.prototype.render = function render() {
      var _this2 = this;

      if (this.svgRender) {
        this.svgRender.toSvg(this.simulator.element, { height: this.height + 'px', width: this.width + 'px' }).then(function (dataUrl) {
          _this2.image.src = dataUrl;
        }).catch(function (error) {
          console.error('Dom2Image: ', error);
          _this2.renderBlankPage();
          _this2.finishRender();
        });
      } else {
        (0, _libs.html2canvas)(this.frame.contentDocument.body, { timeout: 30000 }).then(function (canvas) {
          _this2.renderImage(canvas);
          _this2.finishRender();
        });
      }
    };

    InteractiveImage.prototype.dispose = function dispose() {
      (0, _libs.$)(this.image).off('load', this.binds.imageLoad);
      (0, _libs.$)(this.frame.contentWindow).off('load', this.binds.frameLoad);
      (0, _libs.$)(this.doc.body).find('#' + this.iId).remove();
      if (this.image) {
        this.image.src = '';
        delete this.image;
      }
      this.frame.src = '';
      delete this.frame;
      _ImageBase.prototype.dispose.call(this);
    };

    InteractiveImage.prototype.simulate = function simulate(e, doc, x, y) {
      if (this.simulator) {
        this.simulator.simulate(e, doc, x, y);
      }
    };

    return InteractiveImage;
  }(_ImageBase3.default);

  exports.default = InteractiveImage;

  /***/
},
/* 52 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _GraphUtils = __webpack_require__(7);

  var _GraphUtils2 = _interopRequireDefault(_GraphUtils);

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var LoadingAnimation = function () {
    LoadingAnimation.prototype.dy = function dy(t, y) {
      var w = y[0],
          a = y[1];
      return [-this.g * Math.cos(a), w];
    };

    LoadingAnimation.prototype.integrate = function integrate(T) {
      var t = 0,
          dt = this.p.dt,
          os = this.os;
      while (t < T) {
        if (t + dt > T) {
          dt = T - t;
        }
        os = _MathUtils2.default.rk4(this.dy.bind({ g: this.p.g }), 0, dt, os);
        t += dt;
      }
      return os;
    };

    LoadingAnimation.prototype.calcTimeTo = function calcTimeTo(target) {
      var t = 0,
          dt = this.p.dt,
          os = this.os;
      while (Math.abs(os[1] - target) > 1e-4) {
        var nos = _MathUtils2.default.rk4(this.dy.bind({ g: this.p.g }), 0, dt, os);
        if (nos[0] < 0 && nos[1] < target || nos[0] > 0 && nos[1] > target) {
          dt /= 2;
        } else {
          os = nos;
          t += dt;
        }
      }
      return t;
    };

    LoadingAnimation.prototype.update = function update(T) {
      this.os = this.integrate(T);

      this.t += T;
      if (this.t >= this.p.updateInterval) {
        this.t = 0;
        var r = 0.06 * Math.min(this.c.width, this.c.height),
            a = this.os[1],
            x0 = 0.5 * this.c.width,
            y0 = 0.5 * this.c.height,
            ctx = this.ctx;

        ctx.clearRect(0, 0, this.c.width, this.c.height);
        ctx.beginPath();
        ctx.fillStyle = _GraphUtils2.default.color2Rgba(this.p.color, 1);
        ctx.rect(0, 0, this.c.width, this.c.height);
        ctx.fill();

        ctx.beginPath();
        ctx.shadowBlur = 50;
        ctx.fillStyle = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, 0.9), Math.abs(this.os[0] / 6.36));
        ctx.shadowColor = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, 1), 0.9);
        ctx.shadowOffsetX = 0;
        ctx.shadowOffsetY = 0;
        ctx.font = 'bold ' + Math.round(0.25 * r) + 'px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText((0, _libs.tr)('Loading...'), x0, y0);

        var ps = 10,
            da = 2 * Math.PI / ps; //2.5*_r/r
        ctx.shadowColor = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, 1), 0.7);
        for (var i = 0, _a = a, _r = 0.2 * r; i < ps; ++i, _r *= 0.9, _a += da) {
          ctx.beginPath();
          ctx.fillStyle = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, (ps - i) / ps), 0.7 * (ps - i) / ps);
          var cx = x0 + r * Math.cos(_a),
              cy = y0 - r * Math.sin(_a),
              nx = x0 + r * Math.cos(_a + da),
              ny = y0 - r * Math.sin(_a + da);
          ctx.shadowOffsetX = 0.2 * (nx - cx);
          ctx.shadowOffsetY = 0.2 * (ny - cy);
          ctx.arc(cx, cy, _r, 0, Math.PI * 2, 1);
          ctx.fill();
        }
        if (this.onChange) {
          this.onChange(this.c, this.p.color);
        }
      }
    };

    LoadingAnimation.prototype.getImage = function getImage() {
      return this.c;
    };

    LoadingAnimation.prototype.dispose = function dispose() {
      this.c.width = 0;
      this.c.height = 0;
      delete this.ctx;
      delete this.c;
    };

    LoadingAnimation.prototype.createSprite = function createSprite(n) {
      var c = (0, _libs.$)('<canvas width="' + this.c.width * n + '" height="' + this.c.height + '"></canvas>')[0],
          ctx = c.getContext('2d'),
          t = this.calcTimeTo(this.os[1] + Math.sign(this.os[0]) * 2 * Math.PI),
          dt = t / (n + 1);
      var updateInterval = this.p.updateInterval;

      this.p.updateInterval = 0;
      for (var i = 0; i < n; ++i) {
        this.update(dt);
        ctx.drawImage(this.c, i * this.c.width, 0);
      }
      this.p.updateInterval = updateInterval;
      return c;
    };

    function LoadingAnimation(width, height, color) {
      _classCallCheck(this, LoadingAnimation);

      var jC = (0, _libs.$)('<canvas width="' + width + '" height="' + height + '"></canvas>');
      this.c = jC[0];
      this.p = {
        g: 9.8,
        dt: 1 / 60,
        color: color,
        updateInterval: 0.25
      };
      this.ctx = this.c.getContext('2d');
      this.os = [-2, Math.PI / 2];
      this.t = this.p.updateInterval;
    }

    return LoadingAnimation;
  }();

  exports.default = LoadingAnimation;

  /***/
},
/* 53 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var LoadingController = function () {
    function LoadingController(view) {
      var showProgress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var loadingMsg = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;

      _classCallCheck(this, LoadingController);

      this.view = view;
      this.progress = 0;
      this.showProgress = showProgress;
      this.getLoadingMsg = loadingMsg || LoadingController.defaultLoadingMsg;
      this.updateView();
    }

    LoadingController.defaultLoadingMsg = function defaultLoadingMsg(progress) {
      return ['Please wait... the Application is Loading: ', progress, '%'].join('');
    };

    LoadingController.prototype.dispose = function dispose() {
      this.showProgress = false;
      this.updateView();
      delete this.view;
    };

    LoadingController.prototype.setProgress = function setProgress(v) {
      this.progress = v;
      this.updateView();
    };

    LoadingController.prototype.updateView = function updateView() {
      if (this.view) {

        this.view.setState('widLoadingProgress', {
          enable: true,
          visible: this.showProgress,
          active: false
        });

        this.view.setState('txtLoadingProgress', {
          value: this.getLoadingMsg(this.progress),
          visible: true
        });

        for (var _iterator = this.view.getLinks(), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i >= _iterator.length) break;
            _ref = _iterator[_i++];
          } else {
            _i = _iterator.next();
            if (_i.done) break;
            _ref = _i.value;
          }

          var name = _ref;

          this.view.setState(name, {
            enable: false,
            visible: true,
            active: false
          });
        }

        this.view.setState('inpPages', {
          visible: true,
          value: ''
        });

        this.view.setState('inpPage', {
          visible: true,
          enable: false,
          value: ''
        });
      }
    };

    return LoadingController;
  }();

  exports.default = LoadingController;

  /***/
},
/* 54 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _EventConverter2 = __webpack_require__(6);

  var _EventConverter3 = _interopRequireDefault(_EventConverter2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var MouseEventConverter = function (_EventConverter) {
    _inherits(MouseEventConverter, _EventConverter);

    function MouseEventConverter(wnd, doc, element) {
      _classCallCheck(this, MouseEventConverter);

      var _this = _possibleConstructorReturn(this, _EventConverter.call(this, wnd, doc));

      _this.element = element;
      _this.binds = {
        convert: _this.convert.bind(_this)
      };
      (0, _libs.$)(_this.element).on('mousemove mousedown mouseover mouseout click', _this.binds.convert);
      (0, _libs.$)(_this.doc).on('mouseup', _this.binds.convert);
      return _this;
    }

    MouseEventConverter.prototype.dispose = function dispose() {
      (0, _libs.$)(this.element).off('mousemove mousedown mouseover mouseout click', this.binds.convert);
      (0, _libs.$)(this.doc).off('mouseup', this.binds.convert);
    };

    return MouseEventConverter;
  }(_EventConverter3.default);

  exports.default = MouseEventConverter;

  /***/
},
/* 55 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Object3DWatcher = function () {
    function Object3DWatcher(visual, boundBoxClb) {
      var testScale = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.testScale;

      _classCallCheck(this, Object3DWatcher);

      this.visual = visual;
      this.boundBoxClb = boundBoxClb;
      this.testScale = testScale;
      this.camera = visual.camera;
      this.element = this.visual.element;
      this.elementSize = { w: 1, h: 1 };
      this.devicePixelRatio = this.visual.wnd.devicePixelRatio || 1;
      this.orbit = visual.getOrbit();
      this.scale = 1;

      this.eps = 1e-4;
      this.v = new _libs.THREE.Vector3();
      this.dv = new _libs.THREE.Vector2();

      this.enabled = false;

      visual.addRenderCallback(this.update.bind(this));

      this.os = {
        vx: 0,
        vy: 0,
        x: 0,
        y: 0
      };
      this.orbit.update();
      this.camera.updateMatrixWorld();
      var box = this.computeClientBoundBox(),
          k = 1.11;
      this.movePan({ x: -k * box.mid.x, y: -k * box.mid.y });
    }

    Object3DWatcher.prototype.movePan = function movePan(dv) {
      this.orbit.pan(dv.x * this.visual.width(), -dv.y * this.visual.height());
    };

    Object3DWatcher.prototype.vToCamera = function vToCamera(v) {
      v.project(this.camera);
      return {
        x: 0.5 * v.x,
        y: 0.5 * v.y
      };
    };

    Object3DWatcher.prototype.computeClientBoundBox = function computeClientBoundBox() {
      var box = this.boundBoxClb(),
          xs = [box.min.x, box.max.x],
          ys = [0, 0],
          zs = [box.min.z, box.max.z];

      var ps = [],
          res = { max: {}, min: {} };
      for (var _iterator = xs, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var x = _ref;

        for (var _iterator2 = ys, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var y = _ref2;

          for (var _iterator3 = zs, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
            var _ref3;

            if (_isArray3) {
              if (_i3 >= _iterator3.length) break;
              _ref3 = _iterator3[_i3++];
            } else {
              _i3 = _iterator3.next();
              if (_i3.done) break;
              _ref3 = _i3.value;
            }

            var z = _ref3;

            ps.push(this.vToCamera(this.v.set(x, y, z)));
          }
        }
      }

      ps.sort(function (p1, p2) {
        return p1.x - p2.x;
      });
      res.min.x = ps[0].x;
      res.max.x = ps[ps.length - 1].x;
      ps.sort(function (p1, p2) {
        return p1.y - p2.y;
      });
      res.min.y = ps[0].y;
      res.max.y = ps[ps.length - 1].y;

      res.width = res.max.x - res.min.x;
      res.height = res.max.y - res.min.y;

      res.mid = {
        x: 0.5 * (res.max.x + res.min.x),
        y: 0.5 * (res.max.y + res.min.y)
      };

      return res;
    };

    Object3DWatcher.prototype.setObject = function setObject(boundBoxClb) {
      this.boundBoxClb = boundBoxClb;
    };

    Object3DWatcher.prototype.testScale = function testScale() {
      return true;
    };

    Object3DWatcher.prototype.computeCorr = function computeCorr(K, min, max) {
      var corr = 0;
      if (K < 1) {
        if (min > -0.5) {
          corr = -0.5 - min;
        } else if (max < 0.5) {
          corr = 0.5 - max;
        }
      } else {
        if (min < -0.5) {
          corr = -0.5 - min;
        } else if (max > 0.5) {
          corr = 0.5 - max;
        }
      }
      return corr;
    };

    Object3DWatcher.prototype.getScale = function getScale() {
      var box = this.computeClientBoundBox(),
          Kx = this.elementSize.w / box.width,
          Ky = this.elementSize.h / box.height;
      return 1 / Math.min(Kx, Ky);
    };

    Object3DWatcher.prototype.centerView = function centerView(T) {
      var _this = this;

      var box = this.computeClientBoundBox(),
          Kx = this.elementSize.w / box.width,
          Ky = this.elementSize.h / box.height,
          K = Math.min(Kx, Ky);

      if (this.testScale() && Math.abs(1 / K - this.scale) > this.eps) {
        var scale = 1 / K + 0.2 * (this.scale - 1 / K);
        this.orbit.setScale(this.orbit.getScale() / (K * scale));
        this.orbit.update();
        this.camera.updateMatrixWorld();
        box = this.computeClientBoundBox();
        Kx = this.elementSize.w / box.width;
        Ky = this.elementSize.h / box.height;
        K = Math.min(Kx, Ky);
      }

      var dv = this.dv;
      if (K > 1 - this.eps) {
        dv.set(-box.mid.x, -box.mid.y);
      } else {
        dv.set(this.computeCorr(Kx, box.min.x, box.max.x), this.computeCorr(Ky, box.min.y, box.max.y));
      }

      if (Math.sqrt(this.os.vx * this.os.vx + this.os.vy * this.os.vy) > 0.003 || dv.length() > 0.003) {
        var dt = 1 / 60,
            t = 0,
            os = _extends({}, this.os, {
          x: 0,
          y: 0
        });
        os.tf = function (vx, vy, x, y) {
          return {
            x: 75 * (dv.x - x) / Math.pow(_this.devicePixelRatio, 1.0),
            y: 75 * (dv.y - y) / Math.pow(_this.devicePixelRatio, 1.0)
          };
        };
        while (t < T) {
          if (t + dt > T) {
            dt = T - t;
          }
          os = this.integrate(os, dt);
          t += dt;
        }
        this.movePan(os);
        this.os = os;
      }
    };

    Object3DWatcher.prototype.integrate = function integrate(os, dt) {
      var _MathUtils$rk = _MathUtils2.default.rk4(this.dy.bind(os), 0, dt, [os.vx, os.vy, os.x, os.y]),
          vx = _MathUtils$rk[0],
          vy = _MathUtils$rk[1],
          x = _MathUtils$rk[2],
          y = _MathUtils$rk[3];

      return _extends({}, os, {
        vx: vx, vy: vy, x: x, y: y
      });
    };

    Object3DWatcher.prototype.dy = function dy(t, Y) {
      var vx = Y[0],
          vy = Y[1],
          x = Y[2],
          y = Y[3],
          vd = 15,
          tf = this.tf(vx, vy, x, y);

      return [tf.x - vd * vx, tf.y - vd * vy, vx, vy];
    };

    Object3DWatcher.prototype.update = function update(dt) {
      if (this.enabled && this.boundBoxClb) {
        this.centerView(dt);
      }
    };

    return Object3DWatcher;
  }();

  exports.default = Object3DWatcher;

  /***/
},
/* 56 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var Orbit = function (_THREE$EventDispatche) {
    _inherits(Orbit, _THREE$EventDispatche);

    function Orbit(object, domElement) {
      _classCallCheck(this, Orbit);

      var _this = _possibleConstructorReturn(this, _THREE$EventDispatche.call(this));

      _this.object = object;
      _this.domElement = domElement || document.body;

      // Set to false to disable this control
      _this.enabled = true;

      // "target" sets the location of focus, where the object orbits around
      _this.target = new _libs.THREE.Vector3();

      // How far you can dolly in and out(PerspectiveCamera only)
      _this.minDistance = 0;
      _this.maxDistance = Infinity;

      // How far you can zoom in and out(OrthographicCamera only)
      _this.minZoom = 0;
      _this.maxZoom = Infinity;

      // How far you can orbit vertically, upper and lower limits.
      // Range is 0 to Math.PI radians.
      _this.minPolarAngle = 0; // radians
      _this.maxPolarAngle = Math.PI; // radians

      // How far you can orbit horizontally, upper and lower limits.
      // If set, must be a sub-interval of the interval [-Math.PI, Math.PI ].
      _this.minAzimuthAngle = -Infinity; // radians
      _this.maxAzimuthAngle = Infinity; // radians

      // Set to true to enable damping (inertia)
      // If damping is enabled, you must call controls.update() in your animation loop
      _this.enableDamping = false;
      _this.dampingFactor = 0.25;

      // This option actually enables dollying in and out; left as "zoom" for backwards compatibility.
      // Set to false to disable zooming
      _this.enableZoom = true;
      _this.zoomSpeed = 1.0;

      // Set to false to disable rotating
      _this.enableRotate = true;
      _this.rotateSpeed = 1.0;

      // Set to false to disable panning
      _this.enablePan = true;

      // Set to true to automatically rotate around the target
      // If auto-rotate is enabled, you must call controls.update() in your animation loop
      _this.autoRotate = false;
      _this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60

      // for reset
      _this.target0 = _this.target.clone();
      _this.position0 = _this.object.position.clone();
      _this.zoom0 = _this.object.zoom;

      //
      // public methods
      //
      _this.getPolarAngle = function () {
        return spherical.phi;
      };

      _this.getAzimuthalAngle = function () {
        return spherical.theta;
      };

      _this.reset = function () {
        scope.target.copy(scope.target0);
        scope.object.position.copy(scope.position0);
        scope.object.zoom = scope.zoom0;

        scope.object.updateProjectionMatrix();
        scope.dispatchEvent(changeEvent);

        scope.update();
      };

      _this.zoomOut = function () {
        var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.zoomSpeed;

        var _speed = this.zoomSpeed;
        this.zoomSpeed = speed;
        dollyIn(getZoomScale());
        this.zoomSpeed = _speed;
      };

      _this.zoomIn = function () {
        var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.zoomSpeed;

        var _speed = this.zoomSpeed;
        this.zoomSpeed = speed;
        dollyOut(getZoomScale());
        this.zoomSpeed = _speed;
      };

      _this.getScale = function () {
        return scale;
      };

      _this.setScale = function (newScale) {
        scale = newScale;
      };

      // this method is exposed, but perhaps it would be better if we can make it private...
      _this.update = function () {
        var offset = new _libs.THREE.Vector3();
        // so camera.up is the orbit axis
        var quat = new _libs.THREE.Quaternion().setFromUnitVectors(object.up, new _libs.THREE.Vector3(0, 1, 0));
        var quatInverse = quat.clone().inverse();
        var lastPosition = new _libs.THREE.Vector3();
        var lastQuaternion = new _libs.THREE.Quaternion();

        return function update() {
          var position = scope.object.position;
          offset.copy(position).sub(scope.target);
          // rotate offset to "y-axis-is-up" space
          offset.applyQuaternion(quat);
          // angle from z-axis around y-axis
          spherical.setFromVector3(offset);
          if (scope.autoRotate) {
            rotateLeft(getAutoRotationAngle());
          }
          spherical.theta += sphericalDelta.theta;
          spherical.phi += sphericalDelta.phi;
          // restrict theta to be between desired limits
          spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));
          // restrict phi to be between desired limits
          spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));
          spherical.makeSafe();
          spherical.radius *= scale;
          // restrict radius to be between desired limits
          spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));
          // move target to panned location
          scope.target.add(panOffset);
          offset.setFromSpherical(spherical);
          // rotate offset back to "camera-up-vector-is-up" space
          offset.applyQuaternion(quatInverse);
          position.copy(scope.target).add(offset);
          scope.object.lookAt(scope.target);

          if (scope.enableDamping === true) {
            sphericalDelta.theta *= 1 - scope.dampingFactor;
            sphericalDelta.phi *= 1 - scope.dampingFactor;
          } else {
            sphericalDelta.set(0, 0, 0);
          }

          scale = 1;
          panOffset.set(0, 0, 0);

          // update condition is:
          // min(camera displacement, camera rotation in radians)^2 > EPS
          // using small-angle approximation cos(x/2) = 1-x^2 / 8

          if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {

            scope.dispatchEvent(changeEvent);

            lastPosition.copy(scope.object.position);
            lastQuaternion.copy(scope.object.quaternion);
            zoomChanged = false;

            return true;
          }
          return false;
        };
      }();

      _this.dispose = function () {};

      //
      // internals
      //
      var scope = _this;
      var changeEvent = { type: 'change' };
      var EPS = 1e-6;
      // current position in spherical coordinates
      var spherical = new _libs.THREE.Spherical();
      var sphericalDelta = new _libs.THREE.Spherical();

      var scale = 1;
      var panOffset = new _libs.THREE.Vector3();
      var zoomChanged = false;

      function getAutoRotationAngle() {
        return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;
      }

      function getZoomScale() {
        return Math.pow(0.95, scope.zoomSpeed);
      }

      function rotateLeft(angle) {
        sphericalDelta.theta -= angle;
      }

      function rotateUp(angle) {
        sphericalDelta.phi -= angle;
      }

      var panLeft = function () {
        var v = new _libs.THREE.Vector3();
        return function panLeft(distance, objectMatrix) {
          v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix
          v.multiplyScalar(-distance);
          panOffset.add(v);
        };
      }();

      var panUp = function () {
        var v = new _libs.THREE.Vector3();
        return function panUp(distance, objectMatrix) {
          v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix
          v.multiplyScalar(distance);
          panOffset.add(v);
        };
      }();

      // deltaX and deltaY are in pixels; right and down are positive
      scope.pan = function () {
        var offset = new _libs.THREE.Vector3();
        return function pan(deltaX, deltaY) {
          var element = scope.domElement;
          if (scope.object instanceof _libs.THREE.PerspectiveCamera) {
            // perspective
            var position = scope.object.position;
            offset.copy(position).sub(scope.target);
            var targetDistance = offset.length();
            // half of the fov is center to top of screen
            targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);
            // we actually don't use screenWidth, since perspective camera is fixed to screen height
            panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);
            panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);
          } else if (scope.object instanceof _libs.THREE.OrthographicCamera) {
            // orthographic
            panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);
            panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);
          } else {
            // camera neither orthographic nor perspective
            console.warn('WARNING: OrbitControls.js encountered an unknown camera type-pan disabled.');
            scope.enablePan = false;
          }
        };
      }();

      function dollyIn(dollyScale) {
        if (scope.object instanceof _libs.THREE.PerspectiveCamera) {
          scale /= dollyScale;
        } else if (scope.object instanceof _libs.THREE.OrthographicCamera) {
          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));
          scope.object.updateProjectionMatrix();
          zoomChanged = true;
        } else {
          console.warn('WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled.');
          scope.enableZoom = false;
        }
      }

      function dollyOut(dollyScale) {
        if (scope.object instanceof _libs.THREE.PerspectiveCamera) {
          scale *= dollyScale;
        } else if (scope.object instanceof _libs.THREE.OrthographicCamera) {
          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));
          scope.object.updateProjectionMatrix();
          zoomChanged = true;
        } else {
          console.warn('WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled.');
          scope.enableZoom = false;
        }
      }

      /* Actions */

      function rotate(event, data) {
        if (scope.enabled && scope.enableRotate && data.state === 'move') {
          var element = scope.domElement;
          // rotating across whole screen goes 360 degrees around
          rotateLeft(2 * Math.PI * data.dx / element.clientWidth * scope.rotateSpeed);
          // rotating up and down along whole screen attempts to go 360, but limited to 180
          rotateUp(2 * Math.PI * data.dy / element.clientHeight * scope.rotateSpeed);
          scope.update();
        }
      }

      function pan(event, data) {
        if (scope.enabled && scope.enablePan && data.state === 'move') {
          scope.pan(data.dx, data.dy);
          scope.update();
        }
      }

      function offsetDolly(event, data) {
        if (scope.enabled && scope.enableZoom && data.state === 'move') {
          if (data.dy > 0) {
            dollyIn(getZoomScale());
          } else if (data.dy < 0) {
            dollyOut(getZoomScale());
          }
          scope.update();
        }
      }

      function wheelDolly(event) {
        if (scope.enabled && scope.enableZoom) {
          if (event.deltaY > 0) {
            dollyOut(getZoomScale());
          } else if (event.deltaY < 0) {
            dollyIn(getZoomScale());
          }
          scope.update();
        }
      }

      _this.actions = {
        rotate: rotate,
        pan: pan,
        offsetDolly: offsetDolly,
        wheelDolly: wheelDolly
      };

      // force an update at start
      _this.update();
      return _this;
    }

    return Orbit;
  }(_libs.THREE.EventDispatcher);

  exports.default = Orbit;

  /***/
},
/* 57 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _ImageBase2 = __webpack_require__(5);

  var _ImageBase3 = _interopRequireDefault(_ImageBase2);

  var _Pdf = __webpack_require__(18);

  var _Pdf2 = _interopRequireDefault(_Pdf);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  var _CustomEventConverter = __webpack_require__(16);

  var _CustomEventConverter2 = _interopRequireDefault(_CustomEventConverter);

  var _PolyTarget = __webpack_require__(69);

  var _PolyTarget2 = _interopRequireDefault(_PolyTarget);

  var _Finder = __webpack_require__(17);

  var _Finder2 = _interopRequireDefault(_Finder);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var PdfImage = function (_ImageBase) {
    _inherits(PdfImage, _ImageBase);

    function PdfImage(context, width, height, color, pdf, n) {
      _classCallCheck(this, PdfImage);

      var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));

      _this.query = '';
      _this.n = n;
      _this.pdf = pdf;
      _this.v = { x: 0, y: 0, z: 0, set: function set(x, y, z) {
          this.x = x;this.y = y;this.z = z;
          return this;
        }, transform: function transform(m) {
          var x = m.m[0][0] * this.x + m.m[1][0] * this.y + m.m[2][0] * this.z,
              y = m.m[0][1] * this.x + m.m[1][1] * this.y + m.m[2][1] * this.z,
              z = m.m[0][2] * this.x + m.m[0][2] * this.y + m.m[2][0] * this.z;
          this.x = x;
          this.y = y;
          this.z = z;
          return this;
        } };
      _this.m = { m: [[1, 0, 0], [0, 1, 0], [0, 0, 1]], set: function set(m00, m01, m02, m10, m11, m12, m20, m21, m22) {
          this.m = [[m00, m01, m02], [m10, m11, m12], [m20, m21, m22]];
          return this;
        } };

      _this.startRender = function () {
        _this.pdf.getHandler(_this.render.bind(_this));
      };
      Promise.resolve().then(function () {
        return _this.pdf.getHandler(_this.init.bind(_this));
      });
      return _this;
    }

    PdfImage.prototype.setQuery = function setQuery(query) {
      this.query = query.trim();
      if (this.textContent) {
        this.setHits(this.textContent);
        // this.finishLoad();
      }
    };

    PdfImage.prototype.rectSize = function rectSize(r) {
      return {
        width: r[2] - r[0],
        height: r[3] - r[1]
      };
    };

    PdfImage.prototype.createPoly = function createPoly(m, p, s) {
      var poly = [],
          v = this.v;
      v.set(p.x, p.y, 1).transform(m);
      poly.push({ x: v.x, y: v.y });
      v.set(p.x, p.y + s.height, 1).transform(m);
      poly.push({ x: v.x, y: v.y });
      v.set(p.x + s.width, p.y + s.height, 1).transform(m);
      poly.push({ x: v.x, y: v.y });
      v.set(p.x + s.width, p.y, 1).transform(m);
      poly.push({ x: v.x, y: v.y });
      return poly;
    };

    PdfImage.prototype.getSimulatedDoc = function getSimulatedDoc() {
      return this.page;
    };

    PdfImage.prototype.simulate = function simulate(e, doc, x, y) {
      if (this.eventConverter) {
        this.eventConverter.convert(e, { doc: doc, x: x, y: y });
      }
    };

    PdfImage.prototype.setAnnotations = function setAnnotations(annos) {
      var _this2 = this;

      var t = this.viewport.transform,
          targets = [];
      this.m.set(t[0], t[1], 0, t[2], t[3], 0, t[4], t[5], 1);

      for (var _iterator = annos, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var anno = _ref;

        if (anno.subtype === 'Link') {
          var rect = anno.rect,
              aPos = {
            x: rect[0],
            y: rect[1]
          },
              aSz = this.rectSize(rect);
          var _target = new _PolyTarget2.default(this.createPoly(this.m, aPos, aSz).map(function (p) {
            return { x: p.x / _this2.viewport.width, y: 1 - p.y / _this2.viewport.height };
          }));
          _target.anno = anno;
          _target.callback = this.annoClb.bind(this);
          targets.push(_target);
        }
      }
      if (targets.length) {
        this.eventConverter = new _CustomEventConverter2.default(this.wnd, this.doc, _PolyTarget2.default.test, this.page);
        for (var _iterator2 = targets, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var target = _ref2;

          this.eventConverter.addCustom(target);
        }
      }
    };

    PdfImage.prototype.setHits = function setHits(textContent) {
      this.textContent = textContent;
      if (this.query !== '') {
        this.finder = new _Finder2.default(textContent.items.map(function (item) {
          return item.str;
        }), this.query, { contexts: false });
      }
    };

    PdfImage.prototype.renderHits = function renderHits() {
      var _this3 = this;

      if (this.finder) {
        var view = this.page.view,
            testSz = (0, _libs.$)('<div style="position: absolute; visibility: hidden;"></div>').appendTo('body'),
            textDiv = testSz[0],
            baseOffset = testSz.offset().left;
        for (var _iterator3 = this.finder.getHits(), _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          if (_isArray3) {
            if (_i3 >= _iterator3.length) break;
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) break;
            _ref3 = _i3.value;
          }

          var hit = _ref3;

          var item = this.textContent.items[hit.index],
              t = PDFJS.Util.transform(this.viewport.transform, item.transform),
              style = this.textContent.styles[item.fontName],
              angle = Math.atan2(t[1], t[0]) + (style.vertical ? Math.PI / 2 : 0),
              fontHeight = Math.sqrt(t[2] * t[2] + t[3] * t[3]),
              fontAscent = style.ascent ? style.ascent * fontHeight : style.descent ? (1 + style.descent) * fontHeight : fontHeight;
          testSz.html(item.str.substr(0, hit.offset) + '<span>' + item.str.substr(hit.offset, hit.length) + '</span>' + item.str.substr(hit.offset + hit.length));

          textDiv.style.fontSize = fontHeight + 'px';
          textDiv.style.fontFamily = style.fontFamily;

          var testSpan = testSz.find('span'),
              iwidth = style.vertical ? item.height * this.viewport.scale : item.width * this.viewport.scale,
              width = testSz.width(),
              relativeOffset = (testSpan.offset().left - baseOffset) / width;
          this.m.set(1, 0, 0, 0, 1, 0, t[4] + fontAscent * Math.sin(angle), t[5] - fontAscent * Math.cos(angle), 1);
          var poly = this.createPoly(this.m, { x: relativeOffset * iwidth, y: 0 }, { width: iwidth * testSpan.width() / width, height: testSpan.height() });
          poly = poly.map(function (p) {
            return { x: p.x / _this3.viewport.width, y: 1 - p.y / _this3.viewport.height };
          });
          this.renderHit(poly);
        }
        testSz.remove();
      }
    };

    PdfImage.prototype.annoClb = function annoClb(e, data) {
      if (this.context.dispatchEvent) {
        this.context.dispatchEvent({
          type: 'pdfAnnotation',
          event: e,
          annotation: data.target.anno
        });
      }
    };

    PdfImage.prototype.calcViewport = function calcViewport() {
      var scale = _BaseMathUtils2.default.calcScale(this.size.width, this.size.height, this.resW, this.resH);
      if (!this.viewport || Math.abs(this.viewport.scale - scale) > 1e-4) {
        this.viewport = this.page.getViewport(scale);
        if (this.type !== 'full') {
          if (this.type === 'right') {
            this.viewport.offsetX += 0.5 * this.viewport.width;
            this.viewport.transform[4] -= 0.5 * this.viewport.width;
          }
          this.viewport.width /= 2;
        }
        this.resW = this.width = this.viewport.width;
        this.resH = this.height = this.viewport.height;
      }
    };

    PdfImage.prototype.init = function init() {
      var _this4 = this;

      this.type = this.pdf.getPageType(this.n);
      this.pdf.getPage(this.n).then(function (page) {
        _this4.page = page;
        _this4.size = _Pdf2.default.getPageSize(page);
        if (_this4.type !== 'full') {
          _this4.size.width /= 2;
        }
        page.getAnnotations().then(_this4.setAnnotations.bind(_this4));
        page.getTextContent().then(_this4.setHits.bind(_this4));
        _this4.calcViewport();
        _this4.finishLoad();
      }).catch(function (e) {
        console.error('Cannot load PDF page: ' + (_this4.n + 1));
        _this4.finishLoad();
      });
    };

    PdfImage.prototype.setResolution = function setResolution(res) {
      _ImageBase.prototype.setResolution.call(this, res);
      if (this.page) {
        this.calcViewport();
      }
    };

    PdfImage.prototype.render = function render(handler) {
      var _this5 = this;

      if (this.page) {
        this.page.render({
          canvasContext: this.pushCtx(),
          viewport: this.viewport
        }).then(function () {
          _this5.renderHits();
          _this5.popCtx();
          _this5.finishRender();
        });
      } else {
        this.renderBlankPage();
        this.finishRender();
      }
    };

    return PdfImage;
  }(_ImageBase3.default);

  exports.default = PdfImage;

  /***/
},
/* 58 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Search = function () {
    function Search(container, pages) {
      _classCallCheck(this, Search);

      this.container = container;
      this.pages = pages;
      this.prevResults = [];
      container.html('\n      <div class="search">\n        <div class="query">\n          <input class="inpQuery" type="text" maxlength="30" value="" />\n        </div>\n        <div class="results">\n        </div>\n        <div class="status">\n\n        </div>\n      </div>\n    ');
      this.query = container.find('.query input');
      this.results = container.find('.results');
      this.status = container.find('.status');

      this.binds = {
        navigate: this.navigate.bind(this),
        doQuery: this.doQuery.bind(this)
      };

      this.query.on('keydown', this.binds.doQuery);
      this.results.on('click', this.binds.navigate);
    }

    Search.prototype.dispose = function dispose() {
      this.results.off('click', this.binds.navigate);
      this.query.off('keydown', this.binds.doQuery);
    };

    Search.prototype.navigate = function navigate(e) {
      e.preventDefault();
      if (this.onNavigate !== undefined) {
        var target = (0, _libs.$)(e.target);
        if (!target.hasClass('result')) {
          var t = target.find('.result');
          if (t.length) {
            target = t;
          } else {
            while (target.length && !target.hasClass('result')) {
              target = (0, _libs.$)(target[0].parentNode);
            }
          }
        }
        var page = target.attr('data');
        if (page !== undefined) {
          this.onNavigate(parseInt(page));
        }
      }
    };

    Search.prototype.doQuery = function doQuery() {
      var _this = this;

      if (this.onQuery) {
        var queryStamp = this.queryStamp = Date.now();
        setTimeout(function () {
          if (queryStamp === _this.queryStamp) {
            _this.onQuery(_this.query[0].value.trim());
          }
        }, 1000);
      }
    };

    Search.prototype.setResults = function setResults(results, lastPage) {
      if (this.prevResults.length && results[0] !== this.prevResults[0]) {
        this.prevResults = [];
        this.results.html('');
      }
      var htmls = [];
      for (var i = this.prevResults.length; i < results.length; ++i) {
        var result = results[i];
        htmls.push('<div class="result" data="' + result.page + '">');
        htmls.push('<a href="#">');
        htmls.push('<div>' + result.contexts.join('</div><div>') + '</div>');
        htmls.push('</a>');
        htmls.push('</div>');
      }
      (0, _libs.$)(htmls.join('')).appendTo(this.results);
      this.prevResults = [].concat(results);
      if (lastPage === undefined) {
        this.status.html('');
      } else {
        this.status.html(lastPage + ' of ' + this.pages);
      }
    };

    return Search;
  }();

  exports.default = Search;

  /***/
},
/* 59 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _ImageBase2 = __webpack_require__(5);

  var _ImageBase3 = _interopRequireDefault(_ImageBase2);

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var StaticImage = function (_ImageBase) {
    _inherits(StaticImage, _ImageBase);

    function StaticImage(context, width, height, color, src) {
      _classCallCheck(this, StaticImage);

      var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));

      _this.binds = {};
      _this.image = new Image();
      _this.image.crossOrigin = 'Anonymous';
      _this.binds.imageLoad = function () {
        _this.width = _this.image.width;
        _this.height = _this.image.height;
        _this.startRender = function () {
          _this.renderImage(_this.image);
          _this.finishRender();
        };
        _this.finishLoad();
      };
      _this.binds.imageError = function () {
        _this.startRender = function () {
          _this.renderNotFoundPage();
          _this.finishRender();
        };
        _this.finishLoad();
      };
      (0, _libs.$)(_this.image).on('load', _this.binds.imageLoad).on('error', _this.binds.imageError);
      _this.image.src = _Utils2.default.normalizeUrl(src);
      return _this;
    }

    StaticImage.prototype.dispose = function dispose() {
      (0, _libs.$)(this.image).off('load', this.binds.imageLoad).off('error', this.binds.imageError);
      this.image.src = '';
      delete this.image;
      _ImageBase.prototype.dispose.call(this);
    };

    return StaticImage;
  }(_ImageBase3.default);

  exports.default = StaticImage;

  /***/
},
/* 60 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var TextureAnimator = function () {
    function TextureAnimator(img, tilesHoriz, tilesVert, numTiles, tileDispDuration) {
      _classCallCheck(this, TextureAnimator);

      var texture = new _libs.THREE.Texture();
      texture.minFilter = _libs.THREE.LinearFilter;
      texture.image = img;
      texture.needsUpdate = true;

      // note: texture passed by reference, will be updated by the update function.
      this.texture = texture;
      this.tilesHorizontal = tilesHoriz;
      this.tilesVertical = tilesVert;
      // how many images does this spritesheet contain?
      //  usually equals tilesHoriz * tilesVert, but not necessarily,
      //  if there at blank tiles at the bottom of the spritesheet.
      this.numberOfTiles = numTiles;
      texture.repeat.set(1 / this.tilesHorizontal, 1 / this.tilesVertical);

      // how long should each image be displayed?
      this.tileDisplayDuration = tileDispDuration;

      // how long has the current image been displayed?
      this.currentDisplayTime = 0;

      // which image is currently being displayed?
      this.currentTile = 0;
    }

    TextureAnimator.prototype.update = function update(milliSec) {
      this.currentDisplayTime += milliSec;
      while (this.currentDisplayTime > this.tileDisplayDuration) {
        this.currentDisplayTime -= this.tileDisplayDuration;
        ++this.currentTile;
        if (this.currentTile == this.numberOfTiles) this.currentTile = 0;
        var currentColumn = this.currentTile % this.tilesHorizontal;
        this.texture.offset.x = currentColumn / this.tilesHorizontal;
        var currentRow = Math.floor(this.currentTile / this.tilesHorizontal);
        this.texture.offset.y = currentRow / this.tilesVertical;
      }
    };

    TextureAnimator.prototype.dispose = function dispose() {
      var img = this.texture.image;
      img.height = img.width = 0;
      this.texture.dispose();
    };

    return TextureAnimator;
  }();

  exports.default = TextureAnimator;

  /***/
},
/* 61 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  var _MouseEventConverter2 = __webpack_require__(54);

  var _MouseEventConverter3 = _interopRequireDefault(_MouseEventConverter2);

  var _ThreeEventConverter = __webpack_require__(19);

  var _ThreeEventConverter2 = _interopRequireDefault(_ThreeEventConverter);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var ThreeMouseEventConverter = function (_MouseEventConverter) {
    _inherits(ThreeMouseEventConverter, _MouseEventConverter);

    function ThreeMouseEventConverter(wnd, doc, visualWorld, test) {
      _classCallCheck(this, ThreeMouseEventConverter);

      var _this = _possibleConstructorReturn(this, _MouseEventConverter.call(this, wnd, doc, visualWorld.element));

      _Utils2.default.extends(_this, new _ThreeEventConverter2.default(visualWorld, test));
      return _this;
    }

    ThreeMouseEventConverter.prototype.getCallback = function getCallback(object) {
      return object.object.userData.mouseCallback;
    };

    ThreeMouseEventConverter.prototype.setCoordsFromEvent = function setCoordsFromEvent(e) {
      var jElement = (0, _libs.$)(this.element);
      var offset = jElement.offset();
      this.coords.x = (e.pageX - offset.left) / jElement.width() * 2 - 1;
      this.coords.y = -((e.pageY - offset.top) / jElement.height()) * 2 + 1;
      return this.coords;
    };

    return ThreeMouseEventConverter;
  }(_MouseEventConverter3.default);

  exports.default = ThreeMouseEventConverter;

  /***/
},
/* 62 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  var _TouchEventConverter2 = __webpack_require__(64);

  var _TouchEventConverter3 = _interopRequireDefault(_TouchEventConverter2);

  var _ThreeEventConverter = __webpack_require__(19);

  var _ThreeEventConverter2 = _interopRequireDefault(_ThreeEventConverter);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var ThreeTouchEventConverter = function (_TouchEventConverter) {
    _inherits(ThreeTouchEventConverter, _TouchEventConverter);

    function ThreeTouchEventConverter(wnd, doc, visualWorld, test) {
      _classCallCheck(this, ThreeTouchEventConverter);

      var _this = _possibleConstructorReturn(this, _TouchEventConverter.call(this, wnd, doc, visualWorld.element));

      _Utils2.default.extends(_this, new _ThreeEventConverter2.default(visualWorld, test));
      return _this;
    }

    ThreeTouchEventConverter.prototype.getCallback = function getCallback(object) {
      return object.object.userData.touchCallback;
    };

    ThreeTouchEventConverter.prototype.setCoordsFromEvent = function setCoordsFromEvent(e) {
      var jElement = (0, _libs.$)(this.element),
          offset = jElement.offset(),
          touches = e.touches || e.originalEvent.touches,
          touch = touches.length ? touches[0] : (this.lastTouches || [{ pageX: 0, pageY: 0 }])[0],
          pageX = touch.pageX,
          pageY = touch.pageY;
      this.lastTouches = touches.length ? touches : this.lastTouches;
      this.coords.x = (pageX - offset.left) / jElement.width() * 2 - 1;
      this.coords.y = -((pageY - offset.top) / jElement.height()) * 2 + 1;
      return this.coords;
    };

    return ThreeTouchEventConverter;
  }(_TouchEventConverter3.default);

  exports.default = ThreeTouchEventConverter;

  /***/
},
/* 63 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  var _ImageFactory = __webpack_require__(8);

  var _ImageFactory2 = _interopRequireDefault(_ImageFactory);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Thumbnails = function () {
    function Thumbnails(context, container, thumbnailsClb, size) {
      var _this = this;

      var props = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : { kWtoH: 210 / 297 };

      _classCallCheck(this, Thumbnails);

      this.container = container;
      this.p = props;
      this.thumbnailsClb = thumbnailsClb;
      this.size = size;
      this.canvas = (0, _libs.$)('<canvas>')[0];
      this.imageFactory = new _ImageFactory2.default(_extends({}, context, {
        renderCanvas: this.canvas,
        renderCanvasCtx: this.canvas.getContext('2d')
      }));
      this.thumbnails = [];
      for (var i = 0; i < size; ++i) {
        var info = this.thumbnailsClb(i);
        this.thumbnails.push(_extends({}, info, {
          index: i,
          loaded: info.type === 'thumbnail-image',
          heading: null,
          thumbnail: null,
          title: info.title || i
        }));
      }

      this.binds = {
        update: this.update.bind(this),
        navigate: function navigate(e) {
          e.preventDefault();
          if (_this.onNavigate) {
            var node = e.target;
            while (node && !node.dataThumbnail) {
              node = node.parentNode;
            }
            _this.onNavigate(node.dataThumbnail.index);
          }
        }
      };
      this.container.on('scroll', this.binds.update);
    }

    Thumbnails.prototype.getSize = function getSize() {
      return this.size;
    };

    Thumbnails.prototype.setEnable = function setEnable(enable) {
      this.enable = enable;
      this.update();
    };

    Thumbnails.prototype.dispose = function dispose() {
      this.container.find('a').off('click', this.binds.navigate);
      this.container.off('scroll', this.binds.update);
      this.container.html('');
      this.canvas.height = this.canvas.width = 0;
      delete this.canvas;
    };

    Thumbnails.prototype.load = function load(thumbnail) {
      var _this2 = this;

      this.loading = true;
      var wrapper = this.imageFactory.build(thumbnail, thumbnail.number === undefined ? thumbnail.index : thumbnail.number, this.p.kWtoH * 300, 300);
      wrapper.onChange = function (canvas) {
        _this2.setImage(thumbnail, canvas.toDataURL('image/png'));
        thumbnail.loaded = true;
        wrapper.dispose();
        _this2.loading = false;
        Promise.resolve().then(function () {
          return _this2.update();
        });
      };
    };

    Thumbnails.prototype.getActive = function getActive() {
      var first = this.container.scrollTop(),
          last = first + this.container.height(),
          res = [];
      for (var _iterator = this.thumbnails, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var thumbnail = _ref;

        if (Math.max(thumbnail.first, first) < Math.min(thumbnail.last, last)) {
          res.push(thumbnail);
        }
      }
      return res;
    };

    Thumbnails.prototype.update = function update() {
      if (!this.loading && this.canvas && this.enable) {
        if (!this.built) {
          this.render();
        }
        var active = this.getActive();
        for (var _iterator2 = active, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var thumbnail = _ref2;

          if (!thumbnail.loaded) {
            this.load(thumbnail);
            break;
          }
        }
      }
    };

    Thumbnails.prototype.setImage = function setImage(thumbnail, img) {
      thumbnail.img = img;
      thumbnail.thumbnail.css('background-image', ['url(\'', img, '\')'].join(''));
      thumbnail.thumbnail.removeClass('loading');
    };

    Thumbnails.prototype.render = function render() {
      var elements = ['<div class="thumbnails">'];
      for (var i = 0; i < this.size; ++i) {
        elements.push(['<div class="item"><a href="#"><div class="thumbnail loading"></div></a><div class="heading"><a href="#" title="', i + 1, '">', i + 1, '</a></div></div>'].join(''));
      }
      elements.push('</div>');
      this.container.append(elements.join(''));
      var items = this.container.find('.item'),
          base = this.container.find('.thumbnails').offset().top;
      for (var _i3 = 0; _i3 < items.length; ++_i3) {
        var item = (0, _libs.$)(items[_i3]);
        this.thumbnails[_i3].heading = item.find('.heading');
        this.thumbnails[_i3].thumbnail = item.find('.thumbnail');
        this.thumbnails[_i3].first = item.offset().top - base;
        this.thumbnails[_i3].last = this.thumbnails[_i3].first + item.height();
        if (this.thumbnails[_i3].loaded) {
          this.setImage(this.thumbnails[_i3], this.thumbnails[_i3].src);
        }
        var as = item.find('a');
        for (var j = 0; j < as.length; ++j) {
          var a = as[j];
          a.dataThumbnail = this.thumbnails[_i3];
        }
      }
      this.container.find('a').on('click', this.binds.navigate);
      this.built = true;
    };

    return Thumbnails;
  }();

  exports.default = Thumbnails;

  /***/
},
/* 64 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _EventConverter2 = __webpack_require__(6);

  var _EventConverter3 = _interopRequireDefault(_EventConverter2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var TouchConverter = function (_EventConverter) {
    _inherits(TouchConverter, _EventConverter);

    function TouchConverter(wnd, doc, element) {
      _classCallCheck(this, TouchConverter);

      var _this = _possibleConstructorReturn(this, _EventConverter.call(this, wnd, doc));

      _this.element = element;
      _this.binds = {
        convert: _this.convert.bind(_this)
      };
      (0, _libs.$)(_this.element).on('touchstart touchmove', _this.binds.convert);
      (0, _libs.$)(_this.doc).on('touchend', _this.binds.convert);
      return _this;
    }

    TouchConverter.prototype.dispose = function dispose() {
      (0, _libs.$)(this.element).off('touchstart touchmove', this.binds.convert);
      (0, _libs.$)(this.doc).off('touchend', this.binds.convert);
    };

    return TouchConverter;
  }(_EventConverter3.default);

  exports.default = TouchConverter;

  /***/
},
/* 65 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var View = function () {
    View.classProperty = function classProperty(ctrl, className, value) {
      if (value) {
        ctrl.addClass(className);
      } else {
        ctrl.removeClass(className);
      }
    };

    View.attributeProperty = function attributeProperty(ctrl, attributeName, value) {
      if (value) {
        ctrl.attr(attributeName, value);
      } else {
        ctrl.removeAttr(attributeName);
      }
    };

    View.callHandlers = function callHandlers(handlers, id, e, data) {
      for (var _iterator = handlers, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var handler = _ref;

        if (handler[id]) {
          handler[id](e, data);
        } else if (handler.handleDefault) {
          handler.handleDefault(id, e, data);
        }
      }
    };

    View.handleEvent = function handleEvent(id, getHandlers, e, data) {
      View.callHandlers(getHandlers(id), id, e, data);
    };

    View.handleLinkEvent = function handleLinkEvent(e) {
      e.preventDefault();
      if (!this.ctrl.hasClass('disabled')) {
        View.handleEvent(this.id, this.getHandlers, e);
      }
    };

    View.handleInputEvent = function handleInputEvent(e) {
      View.handleEvent(this.id, this.getHandlers, e, e.target.value);
    };

    View.handleFormEvent = function handleFormEvent(e) {
      e.preventDefault();
      View.handleEvent(this.id, this.getHandlers, e);
    };

    // virtual functions {


    View.prototype.getLinks = function getLinks() {
      return null;
    };

    View.prototype.getWidgets = function getWidgets() {
      return null;
    };

    View.prototype.getInputs = function getInputs() {
      return null;
    };

    View.prototype.getTexts = function getTexts() {
      return null;
    };

    View.prototype.getTemplate = function getTemplate() {
      return {};
    };

    View.prototype.getHandlers = function getHandlers(id) {
      return this.handlers;
    };
    // }

    View.prototype.callLater = function callLater(handlers, id, e, data, ms) {
      var _this = this;

      this.pendings[id] = {
        timestamp: new Date().getTime()
      };
      setTimeout(function () {
        var timestamp = new Date().getTime(),
            pending = _this.pendings[id];
        if (pending && timestamp - pending.timestamp >= ms) {
          View.callHandlers(handlers, id, e, data);
          delete _this.pendings[id];
        }
      }, ms);
    };

    // loadFiles(urls, ready, failure) {
    //   let done = Promise.resolve();
    //   for(let url of urls) {
    //     done = done.then(()=> {
    //       return new Promise((resolve, reject)=> {
    //         $.get(url, (res)=> {
    //           ready(res, url);
    //           resolve();
    //         }).fail((res)=> {
    //           if(failure && failure(res, url)) {
    //             resolve();
    //           }
    //           else {
    //             reject(res);
    //           }
    //         });
    //       });
    //     });
    //   }
    //   return done;
    // }

    View.prototype.loadFiles = function loadFiles(urls, files) {
      var tasks = [];

      var _loop = function _loop() {
        if (_isArray2) {
          if (_i2 >= _iterator2.length) return 'break';
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) return 'break';
          _ref2 = _i2.value;
        }

        var name = _ref2;

        files[name] = [];

        var _loop2 = function _loop2() {
          if (_isArray3) {
            if (_i3 >= _iterator3.length) return 'break';
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) return 'break';
            _ref3 = _i3.value;
          }

          var url = _ref3;

          tasks.push(new Promise(function (resolve, reject) {
            _libs.$.get(url, function (data) {
              files[name].push({ url: url, data: data });
              resolve();
            }).fail(function (res) {
              reject(res);
            });
          }));
        };

        for (var _iterator3 = urls[name], _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          var _ret2 = _loop2();

          if (_ret2 === 'break') break;
        }
      };

      for (var _iterator2 = Object.keys(urls), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        var _ret = _loop();

        if (_ret === 'break') break;
      }
      return Promise.all(tasks);
    };

    View.prototype.urlResolver = function urlResolver(baseUrl, url) {
      url = url.replace(/\\/g, '/');
      if (url.charAt(0) !== '/') {
        baseUrl = baseUrl.replace(/\\/g, '/');
        var p = baseUrl.lastIndexOf('/');
        url = (~p ? baseUrl.substr(0, p + 1) : '') + url;

        var parts = url.split('/');
        url = [];
        for (var _iterator4 = parts, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
          var _ref4;

          if (_isArray4) {
            if (_i4 >= _iterator4.length) break;
            _ref4 = _iterator4[_i4++];
          } else {
            _i4 = _iterator4.next();
            if (_i4.done) break;
            _ref4 = _i4.value;
          }

          var part = _ref4;

          if (part === '.') {} else if (part === '..') {
            if (url.length && !(url.length === 1 && url[0] === '')) {
              url.pop();
            }
          } else {
            url.push(part);
          }
        }
        url = url.join('/');
      }

      return url;
    };

    View.prototype.objToAttrsStr = function objToAttrsStr(o) {
      var res = [];
      for (var _iterator5 = Object.keys(o), _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
        var _ref5;

        if (_isArray5) {
          if (_i5 >= _iterator5.length) break;
          _ref5 = _iterator5[_i5++];
        } else {
          _i5 = _iterator5.next();
          if (_i5.done) break;
          _ref5 = _i5.value;
        }

        var _name = _ref5;

        res.push([_name, '="', o[_name], '"'].join(''));
      }
      return res.join(' ');
    };

    View.prototype.checkIframeSize = function checkIframeSize() {
      if (this.frame) {
        if (Math.abs(this.frame.width - this.parentContainer.width()) > 1 || Math.abs(this.frame.height - this.parentContainer.height()) > 1) {
          this.onResize();
        }
        setTimeout(this.checkIframeSize.bind(this), 250);
      }
    };

    View.prototype.onResize = function onResize() {
      this.frame.width = this.parentContainer.width();
      this.frame.height = this.parentContainer.height();
    };

    View.prototype.translate = function translate(html) {
      return html.replace(/<\$tr>(.*)<\/\$tr>/gi, function (s0, s1) {
        return (0, _libs.tr)(s1);
      });
    };

    View.prototype.fireLinksOnLoadEvent = function fireLinksOnLoadEvent() {
      var _this2 = this;

      if (this.templateObject && this.templateObject.linkLoaded) {
        var loaded = true;

        var _loop3 = function _loop3() {
          if (_isArray6) {
            if (_i6 >= _iterator6.length) return 'break';
            _ref6 = _iterator6[_i6++];
          } else {
            _i6 = _iterator6.next();
            if (_i6.done) return 'break';
            _ref6 = _i6.value;
          }

          var jLink = _ref6;

          var link = jLink[0];
          var img = new Image();
          img.onerror = function () {
            return _this2.templateObject.linkLoaded(link);
          };
          img.src = link.href;
        };

        for (var _iterator6 = this.jLinks, _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
          var _ref6;

          var _ret3 = _loop3();

          if (_ret3 === 'break') break;
        }
      }
    };

    function View(parentContainer, onLoad) {
      var _this3 = this;

      var template = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

      _classCallCheck(this, View);

      this.pendings = {};
      this.binds = {
        onResize: this.onResize.bind(this)
      };
      this.parentContainer = (0, _libs.$)(parentContainer);
      this.isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
      this.parentContainer.html('<iframe style="border: 0;' + (this.isIOS ? '' : ' width: 100%; height: 100%') + '" scrolling="no"></iframe>');

      this.frame = this.parentContainer.find('iframe')[0];
      if (this.frame.contentWindow.stop) {
        this.frame.contentWindow.stop();
      }
      if (this.isIOS) {
        (0, _libs.$)(this.parentContainer[0].ownerDocument.defaultView).on('resize', this.binds.onResize);
        this.onResize();
        setTimeout(this.checkIframeSize.bind(this), 250);
      }

      this.container = (0, _libs.$)(this.frame.contentDocument.body);
      this.container.css('margin', '0');
      this.head = (0, _libs.$)(this.frame.contentDocument.head);
      this.onLoad = onLoad;
      this.handlers = [];

      var script = template.html ? template.script : this.getTemplate().script;
      var urls = {
        styles: template.styles || this.getTemplate().styles,
        html: [template.html || this.getTemplate().html],
        script: script ? [script] : []
      },
          files = {},
          links = template.links || this.getTemplate().links;

      this.loadFiles(urls, files).then(function () {
        var _loop4 = function _loop4() {
          if (_isArray7) {
            if (_i7 >= _iterator7.length) return 'break';
            _ref7 = _iterator7[_i7++];
          } else {
            _i7 = _iterator7.next();
            if (_i7.done) return 'break';
            _ref7 = _i7.value;
          }

          var style = _ref7;

          var textCss = style.data,
              url = style.url;
          textCss = textCss.replace(/url\(['"](.*?)["']\)/g, function (r, r1) {
            return ['url(', _this3.urlResolver(url, r1), ')'].join('');
          });
          (0, _libs.$)('<style type="text/css">' + textCss + '</style>').appendTo(_this3.head);
        };

        for (var _iterator7 = files.styles, _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {
          var _ref7;

          var _ret4 = _loop4();

          if (_ret4 === 'break') break;
        }

        _this3.container.html(_this3.translate(files.html[0].data));

        _this3.jLinks = [];
        for (var _iterator8 = links, _isArray8 = Array.isArray(_iterator8), _i8 = 0, _iterator8 = _isArray8 ? _iterator8 : _iterator8[Symbol.iterator]();;) {
          var _ref8;

          if (_isArray8) {
            if (_i8 >= _iterator8.length) break;
            _ref8 = _iterator8[_i8++];
          } else {
            _i8 = _iterator8.next();
            if (_i8.done) break;
            _ref8 = _i8.value;
          }

          var _link = _ref8;

          _this3.jLinks.push((0, _libs.$)(['<link ', _this3.objToAttrsStr(_link), '>'].join('')).appendTo(_this3.head));
        }

        if (files.script[0]) {
          var init = eval(files.script[0].data);
          _this3.templateObject = init(_this3.container);
        } else {
          _this3.templateObject = {};
        }

        _this3.linkControls = {};
        for (var _iterator9 = _this3.getLinks(), _isArray9 = Array.isArray(_iterator9), _i9 = 0, _iterator9 = _isArray9 ? _iterator9 : _iterator9[Symbol.iterator]();;) {
          var _ref9;

          if (_isArray9) {
            if (_i9 >= _iterator9.length) break;
            _ref9 = _iterator9[_i9++];
          } else {
            _i9 = _iterator9.next();
            if (_i9.done) break;
            _ref9 = _i9.value;
          }

          var id = _ref9;

          _this3.linkControls[id] = _this3.container.find('.' + id);
          _this3.binds[id] = View.handleLinkEvent.bind({ getHandlers: _this3.getHandlers.bind(_this3), id: id, ctrl: _this3.linkControls[id] });
          _this3.linkControls[id].on('click', _this3.binds[id]);
        }

        _this3.widgetControls = {};
        for (var _iterator10 = _this3.getWidgets(), _isArray10 = Array.isArray(_iterator10), _i10 = 0, _iterator10 = _isArray10 ? _iterator10 : _iterator10[Symbol.iterator]();;) {
          var _ref10;

          if (_isArray10) {
            if (_i10 >= _iterator10.length) break;
            _ref10 = _iterator10[_i10++];
          } else {
            _i10 = _iterator10.next();
            if (_i10.done) break;
            _ref10 = _i10.value;
          }

          var _id = _ref10;

          _this3.widgetControls[_id] = _this3.container.find('.' + _id);
        }

        _this3.inputControls = {};
        for (var _iterator11 = _this3.getInputs(), _isArray11 = Array.isArray(_iterator11), _i11 = 0, _iterator11 = _isArray11 ? _iterator11 : _iterator11[Symbol.iterator]();;) {
          var _ref11;

          if (_isArray11) {
            if (_i11 >= _iterator11.length) break;
            _ref11 = _iterator11[_i11++];
          } else {
            _i11 = _iterator11.next();
            if (_i11.done) break;
            _ref11 = _i11.value;
          }

          var _id2 = _ref11;

          _this3.inputControls[_id2] = _this3.container.find('.' + _id2);
          _this3.binds[_id2] = View.handleInputEvent.bind({ getHandlers: _this3.getHandlers.bind(_this3), id: _id2, ctrl: _this3.inputControls[_id2] });
          _this3.inputControls[_id2].on('keyup', _this3.binds[_id2]);
        }

        _this3.formControls = {};
        for (var _iterator12 = _this3.getForms(), _isArray12 = Array.isArray(_iterator12), _i12 = 0, _iterator12 = _isArray12 ? _iterator12 : _iterator12[Symbol.iterator]();;) {
          var _ref12;

          if (_isArray12) {
            if (_i12 >= _iterator12.length) break;
            _ref12 = _iterator12[_i12++];
          } else {
            _i12 = _iterator12.next();
            if (_i12.done) break;
            _ref12 = _i12.value;
          }

          var _id3 = _ref12;

          _this3.formControls[_id3] = _this3.container.find('.' + _id3);
          _this3.binds[_id3] = View.handleFormEvent.bind({ getHandlers: _this3.getHandlers.bind(_this3), id: _id3, ctrl: _this3.formControls[_id3] });
          _this3.formControls[_id3].on('submit', _this3.binds[_id3]);
        }

        _this3.textControls = {};
        for (var _iterator13 = _this3.getTexts(), _isArray13 = Array.isArray(_iterator13), _i13 = 0, _iterator13 = _isArray13 ? _iterator13 : _iterator13[Symbol.iterator]();;) {
          var _ref13;

          if (_isArray13) {
            if (_i13 >= _iterator13.length) break;
            _ref13 = _iterator13[_i13++];
          } else {
            _i13 = _iterator13.next();
            if (_i13.done) break;
            _ref13 = _i13.value;
          }

          var _id4 = _ref13;

          _this3.textControls[_id4] = _this3.container.find('.' + _id4);
        }

        _this3.stateSetters = [{
          map: _this3.linkControls,
          setter: _this3.setLinkControlState.bind(_this3)
        }, {
          map: _this3.widgetControls,
          setter: _this3.setWidgetControlState.bind(_this3)
        }, {
          map: _this3.inputControls,
          setter: _this3.setInputControlState.bind(_this3)
        }, {
          map: _this3.textControls,
          setter: _this3.setTextControlState.bind(_this3)
        }];

        _this3.initView();

        if (_this3.onLoad) {
          _this3.onLoad();
        }

        _this3.fireLinksOnLoadEvent();
      }).catch(function (res) {
        return console.error(res);
      });
    }

    View.prototype.dispose = function dispose() {
      delete this.textControls;
      for (var _iterator14 = this.getLinks(), _isArray14 = Array.isArray(_iterator14), _i14 = 0, _iterator14 = _isArray14 ? _iterator14 : _iterator14[Symbol.iterator]();;) {
        var _ref14;

        if (_isArray14) {
          if (_i14 >= _iterator14.length) break;
          _ref14 = _iterator14[_i14++];
        } else {
          _i14 = _iterator14.next();
          if (_i14.done) break;
          _ref14 = _i14.value;
        }

        var id = _ref14;

        this.linkControls[id].off('click', this.binds[id]);
      }
      delete this.linkControls;
      delete this.widgetControls;
      for (var _iterator15 = this.getInputs(), _isArray15 = Array.isArray(_iterator15), _i15 = 0, _iterator15 = _isArray15 ? _iterator15 : _iterator15[Symbol.iterator]();;) {
        var _ref15;

        if (_isArray15) {
          if (_i15 >= _iterator15.length) break;
          _ref15 = _iterator15[_i15++];
        } else {
          _i15 = _iterator15.next();
          if (_i15.done) break;
          _ref15 = _i15.value;
        }

        var _id5 = _ref15;

        this.inputControls[_id5].off('keyup', this.binds[_id5]);
      }
      delete this.inputControls;
      for (var _iterator16 = this.getForms(), _isArray16 = Array.isArray(_iterator16), _i16 = 0, _iterator16 = _isArray16 ? _iterator16 : _iterator16[Symbol.iterator]();;) {
        var _ref16;

        if (_isArray16) {
          if (_i16 >= _iterator16.length) break;
          _ref16 = _iterator16[_i16++];
        } else {
          _i16 = _iterator16.next();
          if (_i16.done) break;
          _ref16 = _i16.value;
        }

        var _id6 = _ref16;

        this.formControls[_id6].off('submit', this.binds[_id6]);
      }
      delete this.formControls;

      !this.templateObject.dispose || this.templateObject.dispose();
      delete this.templateObject;

      if (this.isIOS) {
        (0, _libs.$)(this.parentContainer[0].ownerDocument.defaultView).off('resize', this.binds.onResize);
      }
      this.parentContainer.html('');
      delete this.frame;
    };

    View.prototype.getContainer = function getContainer() {
      return this.container[0];
    };

    View.prototype.getParentContainer = function getParentContainer() {
      return this.parentContainer[0];
    };

    View.prototype.addHandler = function addHandler(handler) {
      this.handlers.push(handler);
    };

    View.prototype.initView = function initView() {};

    View.setControlState = function setControlState(ctrl, defaults, state, stateHandlers) {
      if (ctrl) {
        var st = _extends({}, defaults, state);
        for (var _name2 in st) {
          if (st.hasOwnProperty(_name2) && stateHandlers[_name2]) {
            stateHandlers[_name2](ctrl, st[_name2]);
          }
        }
      }
    };

    View.prototype.setLinkControlState = function setLinkControlState(id, state) {
      View.setControlState(this.linkControls[id], {
        visible: true,
        active: false,
        enable: true
      }, state, View.linkStateHandlers);
    };

    View.prototype.setWidgetControlState = function setWidgetControlState(id, state) {
      View.setControlState(this.widgetControls[id], {
        visible: true,
        active: false,
        enable: true
      }, state, View.widgetStateHandlers);
    };

    View.prototype.setInputControlState = function setInputControlState(id, state) {
      View.setControlState(this.inputControls[id], {
        visible: true,
        enable: true,
        value: ''
      }, state, View.inputStateHandlers);
    };

    View.prototype.setTextControlState = function setTextControlState(id, state) {
      View.setControlState(this.textControls[id], {
        visible: true,
        value: ''
      }, state, View.textStateHandlers);
    };

    View.prototype.onItemStateChanged = function onItemStateChanged() {};

    View.prototype.setState = function setState(id, state) {
      for (var _iterator17 = this.stateSetters, _isArray17 = Array.isArray(_iterator17), _i17 = 0, _iterator17 = _isArray17 ? _iterator17 : _iterator17[Symbol.iterator]();;) {
        var _ref17;

        if (_isArray17) {
          if (_i17 >= _iterator17.length) break;
          _ref17 = _iterator17[_i17++];
        } else {
          _i17 = _iterator17.next();
          if (_i17.done) break;
          _ref17 = _i17.value;
        }

        var item = _ref17;

        if (item.map[id]) {
          item.setter(id, state);
          this.onItemStateChanged(id, state);
          break;
        }
      }
    };

    return View;
  }();

  View.linkStateHandlers = {
    visible: function visible(ctrl, value) {
      return View.classProperty(ctrl, 'hidden', !value);
    },
    active: function active(ctrl, value) {
      return View.classProperty(ctrl, 'active', value);
    },
    enable: function enable(ctrl, value) {
      return View.classProperty(ctrl, 'disabled', !value);
    }
  };
  View.widgetStateHandlers = {
    visible: function visible(ctrl, value) {
      return View.classProperty(ctrl, 'hidden', !value);
    },
    active: function active(ctrl, value) {
      return View.classProperty(ctrl, 'active', value);
    },
    enable: function enable(ctrl, value) {
      return View.classProperty(ctrl, 'disabled', !value);
    }
  };
  View.inputStateHandlers = {
    visible: function visible(ctrl, value) {
      return View.classProperty(ctrl, 'hidden', !value);
    },
    value: function value(ctrl, _value) {
      return ctrl[0].value = _value;
    },
    enable: function enable(ctrl, value) {
      return View.attributeProperty(ctrl, 'disabled', !value);
    }
  };
  View.textStateHandlers = {
    visible: function visible(ctrl, value) {
      return View.classProperty(ctrl, 'hidden', !value);
    },
    value: function value(ctrl, _value2) {
      return ctrl.text(_value2);
    }
  };
  exports.default = View;

  /***/
},
/* 66 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  var _Orbit = __webpack_require__(56);

  var _Orbit2 = _interopRequireDefault(_Orbit);

  var _ThreeMouseEventConverter = __webpack_require__(61);

  var _ThreeMouseEventConverter2 = _interopRequireDefault(_ThreeMouseEventConverter);

  var _ThreeTouchEventConverter = __webpack_require__(62);

  var _ThreeTouchEventConverter2 = _interopRequireDefault(_ThreeTouchEventConverter);

  var _Drag = __webpack_require__(48);

  var _Drag2 = _interopRequireDefault(_Drag);

  var _CSS3DRenderer = __webpack_require__(12);

  var _CSS3DRenderer2 = _interopRequireDefault(_CSS3DRenderer);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var VisualWorld = function (_THREE$EventDispatche) {
    _inherits(VisualWorld, _THREE$EventDispatche);

    function VisualWorld(wnd, doc, container) {
      var useHelpers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

      _classCallCheck(this, VisualWorld);

      var _this = _possibleConstructorReturn(this, _THREE$EventDispatche.call(this));

      _this.wnd = wnd;
      _this.doc = doc;
      _this.jContainer = container;
      _this.renderCallbacks = [];

      _this.clock = new _libs.THREE.Clock();

      _this.raycaster = new _libs.THREE.Raycaster();

      _this.scene = new _libs.THREE.Scene();
      _this.cssScene = new _libs.THREE.Scene();

      _this.camera = new _libs.THREE.PerspectiveCamera(30, _this.width() / _this.height(), 0.2, 2000);
      var scale = 1;

      _this.camera.position.x = 0;
      _this.camera.position.y = 5.5 * scale;
      _this.camera.position.z = 0;

      _this.renderer = new _libs.THREE.WebGLRenderer({ alpha: true, antialias: true });
      _this.renderer.setClearColor(0x000000, 0);
      _this.renderer.setPixelRatio(_this.wnd.devicePixelRatio);
      _this.renderer.setSize(_this.width(), _this.height());

      _this.jContainer.append(_this.renderer.domElement);

      _this.cssRenderer = new _CSS3DRenderer2.default();
      _this.cssRenderer.setSize(_this.width(), _this.height());
      (0, _libs.$)(_this.cssRenderer.domElement).css({
        position: 'absolute',
        top: 0,
        margin: 0,
        padding: 0
      });
      _this.jContainer.append(_this.cssRenderer.domElement);

      _this.element = _this.cssRenderer.domElement;

      _this.controls = new _Orbit2.default(_this.camera, _this.element);
      _this.controls.target.y = 0.5;

      var cssScene = (0, _libs.$)(_this.cssRenderer.domElement).find('div'),
          tmpVector = new _libs.THREE.Vector3();
      _this.controls.addEventListener('change', function () {
        _this.camera.getWorldDirection(tmpVector);
        cssScene.css('display', tmpVector.y - _this.camera.position.y > 0 ? 'none' : 'block');
      });

      _this.textureLoader = new _libs.THREE.TextureLoader();

      _this.scene.add(new _libs.THREE.AmbientLight(0xD0D0D0)); //0xC0C0C0

      _this.light = new _libs.THREE.DirectionalLight(0x404040, 1);
      _this.light.position.set(0, 6 * scale, 0);
      _this.light.castShadow = false;
      // const d = 20*scale;
      // this.light.shadow.camera.left = -d;
      // this.light.shadow.camera.right = d;
      // this.light.shadow.camera.top = d;
      // this.light.shadow.camera.bottom = -d;
      // this.light.shadow.camera.near = 1*scale;
      // this.light.shadow.camera.far = 25*scale;
      // this.light.shadow.mapSize.x = 1024;
      // this.light.shadow.mapSize.y = 1024;
      _this.scene.add(_this.light);

      if (useHelpers) {
        _this.scene.add(new _libs.THREE.AxisHelper(5));
      }

      _this.binds = {
        onWindowResize: _this.onWindowResize.bind(_this),
        animate: _this.animate.bind(_this)
      };

      (0, _libs.$)(_this.wnd).on('resize', _this.binds.onWindowResize);

      _this.mouseEvents = new _ThreeMouseEventConverter2.default(_this.wnd, _this.doc, _this);
      _this.touchEvents = new _ThreeTouchEventConverter2.default(_this.wnd, _this.doc, _this);
      var filterData = { type: 'mousemove' };
      _this.mouseEvents.filter = function (element, e) {
        var types = ['mouseenter', 'mouseover', 'mouseleave', 'mouseout'],
            contains = function contains(p, c) {
          return p === c || _libs.$.contains(p, c);
        };
        if (e.type === 'mousemove') {
          filterData.pageX = e.pageX;
          filterData.pageY = e.pageY;
        }
        return e.relatedTarget && ~types.indexOf(e.type) && contains(element, e.target) && contains(element, e.relatedTarget) ? _extends({}, e, filterData) : e;
      };
      _this.drag = new _Drag2.default(_this.wnd, _this.doc, _this);

      _this.animate();
      return _this;
    }

    VisualWorld.prototype.dispose = function dispose() {
      delete this.binds.animate;
      (0, _libs.$)(this.wnd).off('resize', this.binds.onWindowResize);
      this.mouseEvents.dispose();
      this.touchEvents.dispose();
      this.drag.dispose();
      this.controls.dispose();
    };

    VisualWorld.prototype.width = function width() {
      return this.jContainer.width();
    };

    VisualWorld.prototype.height = function height() {
      return this.jContainer.height();
    };

    VisualWorld.prototype.setExtraLighting = function setExtraLighting(v) {
      this.light.intensity = v;
    };

    VisualWorld.prototype.getOrbit = function getOrbit() {
      return this.controls;
    };

    VisualWorld.prototype.setControlsState = function setControlsState(state) {
      this.controls.enabled = state;
    };

    VisualWorld.prototype.getControlsState = function getControlsState() {
      return this.controls.enabled;
    };

    VisualWorld.prototype.onWindowResize = function onWindowResize() {
      var _this2 = this;

      var updateCamera = function updateCamera(camera) {
        camera.aspect = _this2.width() / _this2.height();
        camera.updateProjectionMatrix();
      },
          updateRenderer = function updateRenderer(renderer) {
        renderer.setSize(_this2.width(), _this2.height());
      };

      updateCamera(this.camera);
      updateRenderer(this.renderer);
      updateRenderer(this.cssRenderer);

      this.dispatchEvent({ type: 'resize' });
    };

    VisualWorld.prototype.addObject = function addObject(object) {
      this.scene.add(object);
    };

    VisualWorld.prototype.addCssObject = function addCssObject(object) {
      this.cssScene.add(object);
    };

    VisualWorld.prototype.removeCssObject = function removeCssObject(object) {
      this.cssScene.remove(object);
    };

    VisualWorld.prototype.removeObject = function removeObject(object) {
      this.scene.remove(object);
    };

    VisualWorld.prototype.animate = function animate() {
      if (this.binds.animate) {
        requestAnimationFrame(this.binds.animate);
      }
      this.render();
    };

    VisualWorld.prototype.addRenderCallback = function addRenderCallback(clb) {
      this.renderCallbacks.push(clb);
    };

    VisualWorld.prototype.removeRenderCallback = function removeRenderCallback(clb) {
      var i = this.renderCallbacks.indexOf(clb);
      if (~i) {
        this.renderCallbacks.splice(i, 1);
      }
    };

    VisualWorld.prototype.render = function render() {
      var deltaTime = this.clock.getDelta();
      this.controls.update(deltaTime);
      for (var _iterator = this.renderCallbacks, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var clb = _ref;

        clb(deltaTime);
      }
      this.cssRenderer.render(this.cssScene, this.camera);
      this.renderer.render(this.scene, this.camera);
    };

    VisualWorld.prototype.processGeometry = function processGeometry(bufGeometry, mesh) {
      mesh.geometry = bufGeometry;
      // Obtain a Geometry
      var geometry = new _libs.THREE.Geometry().fromBufferGeometry(bufGeometry);
      // Merge the vertices so the triangle soup is converted to indexed triangles
      geometry.mergeVertices();
      // Convert again to BufferGeometry, indexed
      var indexedBufferGeom = this.createIndexedBufferGeometryFromGeometry(geometry);
      // Create index arrays mapping the indexed vertices to bufGeometry vertices
      return this.mapIndices(bufGeometry, indexedBufferGeom);
    };

    VisualWorld.prototype.createIndexedBufferGeometryFromGeometry = function createIndexedBufferGeometryFromGeometry(geometry) {
      var numVertices = geometry.vertices.length;
      var numFaces = geometry.faces.length;

      var bufferGeom = new _libs.THREE.BufferGeometry();
      var vertices = new Float32Array(numVertices * 3);
      var indices = new (numFaces * 3 > 65535 ? Uint32Array : Uint16Array)(numFaces * 3);

      for (var i = 0; i < numVertices; i++) {
        var p = geometry.vertices[i];
        var i3 = i * 3;
        vertices[i3] = p.x;
        vertices[i3 + 1] = p.y;
        vertices[i3 + 2] = p.z;
      }

      for (var _i2 = 0; _i2 < numFaces; _i2++) {
        var f = geometry.faces[_i2];
        var _i3 = _i2 * 3;
        indices[_i3] = f.a;
        indices[_i3 + 1] = f.b;
        indices[_i3 + 2] = f.c;
      }

      bufferGeom.setIndex(new _libs.THREE.BufferAttribute(indices, 1));
      bufferGeom.addAttribute('position', new _libs.THREE.BufferAttribute(vertices, 3));

      return bufferGeom;
    };

    VisualWorld.prototype.isEqual = function isEqual(x1, y1, z1, x2, y2, z2) {
      var delta = 0.000001;
      return Math.abs(x2 - x1) < delta && Math.abs(y2 - y1) < delta && Math.abs(z2 - z1) < delta;
    };

    VisualWorld.prototype.mapIndices = function mapIndices(bufGeometry, indexedBufferGeom) {
      // Creates mappedVertices, mappedIndices and mappedAssociation in bufGeometry
      var vertices = bufGeometry.attributes.position.array;
      var idxVertices = indexedBufferGeom.attributes.position.array;
      var indices = indexedBufferGeom.index.array;

      var numIdxVertices = idxVertices.length / 3;
      var numVertices = vertices.length / 3;

      bufGeometry.mappedVertices = idxVertices;
      bufGeometry.mappedIndices = indices;
      bufGeometry.mappedAssociation = [];

      for (var i = 0; i < numIdxVertices; i++) {
        var association = [];
        bufGeometry.mappedAssociation.push(association);
        var i3 = i * 3;
        for (var j = 0; j < numVertices; j++) {
          var j3 = j * 3;
          if (this.isEqual(idxVertices[i3], idxVertices[i3 + 1], idxVertices[i3 + 2], vertices[j3], vertices[j3 + 1], vertices[j3 + 2])) {
            association.push(j3);
          }
        }
      }
      return { vertices: bufGeometry.mappedVertices, indices: bufGeometry.mappedIndices };
    };

    VisualWorld.prototype.oneNodePositionCallback = function oneNodePositionCallback(p, q) {
      this.position.set(p.x, p.y, p.z);
      this.quaternion.set(q.x, q.y, q.z, q.w);
    };

    VisualWorld.prototype.multyNodePositionCallback = function multyNodePositionCallback(node, p, n) {
      var geometry = this.geometry;
      var volumePositions = geometry.attributes.position.array;
      var volumeNormals = geometry.attributes.normal.array;
      var assocVertex = geometry.mappedAssociation[node];

      for (var k = 0; k < assocVertex.length; k++) {
        var indexVertex = assocVertex[k];
        volumePositions[indexVertex] = p.x;
        volumeNormals[indexVertex] = n.x;
        ++indexVertex;
        volumePositions[indexVertex] = p.y;
        volumeNormals[indexVertex] = n.y;
        ++indexVertex;
        volumePositions[indexVertex] = p.z;
        volumeNormals[indexVertex] = n.z;
      }
    };

    VisualWorld.prototype.multyNodePositionPostCallback = function multyNodePositionPostCallback() {
      var geometry = this.geometry;
      geometry.attributes.position.needsUpdate = true;
      geometry.attributes.normal.needsUpdate = true;
    };

    VisualWorld.prototype.pathPositionCallback = function pathPositionCallback(node, p) {
      var positions = this.geometry.attributes.position.array;
      var i = 3 * node;
      positions[i++] = p.x;
      positions[i++] = p.y;
      positions[i] = p.z;
    };

    VisualWorld.prototype.pathPositionPostCallback = function pathPositionPostCallback() {
      var geometry = this.geometry;
      geometry.computeVertexNormals();
      geometry.attributes.position.needsUpdate = true;
      geometry.attributes.normal.needsUpdate = true;
    };

    return VisualWorld;
  }(_libs.THREE.EventDispatcher);

  exports.default = VisualWorld;

  /***/
},
/* 67 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Controller2 = __webpack_require__(15);

  var _Controller3 = _interopRequireDefault(_Controller2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var WidgetController = function (_Controller) {
    _inherits(WidgetController, _Controller);

    function WidgetController(view) {
      _classCallCheck(this, WidgetController);

      var _this = _possibleConstructorReturn(this, _Controller.call(this));

      _this.view = view;
      _this.visible = false;
      return _this;
    }

    WidgetController.prototype.togle = function togle() {
      this.visible = !this.visible;
      this.fireChange();
    };

    WidgetController.prototype.hide = function hide() {
      this.visible = false;
      this.fireChange();
    };

    WidgetController.prototype.fireChange = function fireChange() {
      if (this.onChange) {
        this.onChange();
      }
      this.updateView();
    };

    WidgetController.prototype.updateView = function updateView() {
      if (this.view) {
        this.view.setState('widFloatWnd', {
          enable: true,
          visible: this.visible,
          active: false
        });
      }
    };

    return WidgetController;
  }(_Controller3.default);

  exports.default = WidgetController;

  /***/
},
/* 68 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Target2 = __webpack_require__(21);

  var _Target3 = _interopRequireDefault(_Target2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var CircleTarget = function (_Target) {
    _inherits(CircleTarget, _Target);

    function CircleTarget(x, y, r) {
      _classCallCheck(this, CircleTarget);

      var _this = _possibleConstructorReturn(this, _Target.call(this));

      _this.p = {
        x: x,
        y: y,
        r: r
      };
      return _this;
    }

    CircleTarget.prototype.testIntersection = function testIntersection(e, data) {
      var res = void 0;
      var x = data.x,
          y = data.y,
          p = this.p;

      if ((x - p.x) * (x - p.x) + (y - p.y) * (y - p.y) <= p.r * p.r) {
        res = {
          target: this,
          data: data
        };
      }
      return res;
    };

    return CircleTarget;
  }(_Target3.default);

  exports.default = CircleTarget;

  /***/
},
/* 69 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Target2 = __webpack_require__(21);

  var _Target3 = _interopRequireDefault(_Target2);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var PolyTarget = function (_Target) {
    _inherits(PolyTarget, _Target);

    function PolyTarget(poly) {
      _classCallCheck(this, PolyTarget);

      var _this = _possibleConstructorReturn(this, _Target.call(this));

      _this.poly = poly;
      return _this;
    }

    PolyTarget.prototype.testIntersection = function testIntersection(e, p) {
      return _BaseMathUtils2.default.isInsidePoly(this.poly, p) ? {
        target: this,
        data: p
      } : undefined;
    };

    return PolyTarget;
  }(_Target3.default);

  exports.default = PolyTarget;

  /***/
},
/* 70 */
/***/function (module, exports, __webpack_require__) {

  // stats.js - http://github.com/mrdoob/stats.js
  (function (f, e) {
    true ? module.exports = e() : "function" === typeof define && define.amd ? define(e) : f.Stats = e();
  })(this, function () {
    var f = function f() {
      function e(a) {
        c.appendChild(a.dom);return a;
      }function u(a) {
        for (var d = 0; d < c.children.length; d++) {
          c.children[d].style.display = d === a ? "block" : "none";
        }l = a;
      }var l = 0,
          c = document.createElement("div");c.style.cssText = "position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";c.addEventListener("click", function (a) {
        a.preventDefault();
        u(++l % c.children.length);
      }, !1);var k = (performance || Date).now(),
          g = k,
          a = 0,
          r = e(new f.Panel("FPS", "#0ff", "#002")),
          h = e(new f.Panel("MS", "#0f0", "#020"));if (self.performance && self.performance.memory) var t = e(new f.Panel("MB", "#f08", "#201"));u(0);return { REVISION: 16, dom: c, addPanel: e, showPanel: u, begin: function begin() {
          k = (performance || Date).now();
        }, end: function end() {
          a++;var c = (performance || Date).now();h.update(c - k, 200);if (c > g + 1E3 && (r.update(1E3 * a / (c - g), 100), g = c, a = 0, t)) {
            var d = performance.memory;t.update(d.usedJSHeapSize / 1048576, d.jsHeapSizeLimit / 1048576);
          }return c;
        }, update: function update() {
          k = this.end();
        }, domElement: c, setMode: u };
    };f.Panel = function (e, f, l) {
      var c = Infinity,
          k = 0,
          g = Math.round,
          a = g(window.devicePixelRatio || 1),
          r = 80 * a,
          h = 48 * a,
          t = 3 * a,
          v = 2 * a,
          d = 3 * a,
          m = 15 * a,
          n = 74 * a,
          p = 30 * a,
          q = document.createElement("canvas");q.width = r;q.height = h;q.style.cssText = "width:80px;height:48px";var b = q.getContext("2d");b.font = "bold " + 9 * a + "px Helvetica,Arial,sans-serif";b.textBaseline = "top";b.fillStyle = l;b.fillRect(0, 0, r, h);b.fillStyle = f;b.fillText(e, t, v);
      b.fillRect(d, m, n, p);b.fillStyle = l;b.globalAlpha = .9;b.fillRect(d, m, n, p);return { dom: q, update: function update(h, w) {
          c = Math.min(c, h);k = Math.max(k, h);b.fillStyle = l;b.globalAlpha = 1;b.fillRect(0, 0, r, m);b.fillStyle = f;b.fillText(g(h) + " " + e + " (" + g(c) + "-" + g(k) + ")", t, v);b.drawImage(q, d + a, m, n - a, p, d, m, n - a, p);b.fillRect(d + n - a, m, a, p);b.fillStyle = l;b.globalAlpha = .9;b.fillRect(d + n - a, m, a, g((1 - h / w) * p));
        } };
    };return f;
  });

  /***/
},
/* 71 */
/***/function (module, exports, __webpack_require__) {

  /*** IMPORTS FROM imports-loader ***/
  var define = false;

  /*!
   * jQuery Mousewheel 3.1.13
   *
   * Copyright jQuery Foundation and other contributors
   * Released under the MIT license
   * http://jquery.org/license
   */

  (function (factory) {
    if (typeof define === 'function' && define.amd) {
      // AMD. Register as an anonymous module.
      define(['jquery'], factory);
    } else if (true) {
      // Node/CommonJS style for Browserify
      module.exports = factory;
    } else {
      // Browser globals
      factory(jQuery);
    }
  })(function ($) {

    var toFix = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],
        toBind = 'onwheel' in document || document.documentMode >= 9 ? ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],
        slice = Array.prototype.slice,
        nullLowestDeltaTimeout,
        lowestDelta;

    if ($.event.fixHooks) {
      for (var i = toFix.length; i;) {
        $.event.fixHooks[toFix[--i]] = $.event.mouseHooks;
      }
    }

    var special = $.event.special.mousewheel = {
      version: '3.1.12',

      setup: function setup() {
        if (this.addEventListener) {
          for (var i = toBind.length; i;) {
            this.addEventListener(toBind[--i], handler, false);
          }
        } else {
          this.onmousewheel = handler;
        }
        // Store the line height and page height for this particular element
        $.data(this, 'mousewheel-line-height', special.getLineHeight(this));
        $.data(this, 'mousewheel-page-height', special.getPageHeight(this));
      },

      teardown: function teardown() {
        if (this.removeEventListener) {
          for (var i = toBind.length; i;) {
            this.removeEventListener(toBind[--i], handler, false);
          }
        } else {
          this.onmousewheel = null;
        }
        // Clean up the data we added to the element
        $.removeData(this, 'mousewheel-line-height');
        $.removeData(this, 'mousewheel-page-height');
      },

      getLineHeight: function getLineHeight(elem) {
        var $elem = $(elem),
            $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();
        if (!$parent.length) {
          $parent = $('body');
        }
        return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;
      },

      getPageHeight: function getPageHeight(elem) {
        return $(elem).height();
      },

      settings: {
        adjustOldDeltas: true, // see shouldAdjustOldDeltas() below
        normalizeOffset: true // calls getBoundingClientRect for each event
      }
    };

    $.fn.extend({
      mousewheel: function mousewheel(fn) {
        return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');
      },

      unmousewheel: function unmousewheel(fn) {
        return this.unbind('mousewheel', fn);
      }
    });

    function handler(event) {
      var orgEvent = event || window.event,
          args = slice.call(arguments, 1),
          delta = 0,
          deltaX = 0,
          deltaY = 0,
          absDelta = 0,
          offsetX = 0,
          offsetY = 0;
      event = $.event.fix(orgEvent);
      event.type = 'mousewheel';

      // Old school scrollwheel delta
      if ('detail' in orgEvent) {
        deltaY = orgEvent.detail * -1;
      }
      if ('wheelDelta' in orgEvent) {
        deltaY = orgEvent.wheelDelta;
      }
      if ('wheelDeltaY' in orgEvent) {
        deltaY = orgEvent.wheelDeltaY;
      }
      if ('wheelDeltaX' in orgEvent) {
        deltaX = orgEvent.wheelDeltaX * -1;
      }

      // Firefox < 17 horizontal scrolling related to DOMMouseScroll event
      if ('axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS) {
        deltaX = deltaY * -1;
        deltaY = 0;
      }

      // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
      delta = deltaY === 0 ? deltaX : deltaY;

      // New school wheel delta (wheel event)
      if ('deltaY' in orgEvent) {
        deltaY = orgEvent.deltaY * -1;
        delta = deltaY;
      }
      if ('deltaX' in orgEvent) {
        deltaX = orgEvent.deltaX;
        if (deltaY === 0) {
          delta = deltaX * -1;
        }
      }

      // No change actually happened, no reason to go any further
      if (deltaY === 0 && deltaX === 0) {
        return;
      }

      // Need to convert lines and pages to pixels if we aren't already in pixels
      // There are three delta modes:
      //   * deltaMode 0 is by pixels, nothing to do
      //   * deltaMode 1 is by lines
      //   * deltaMode 2 is by pages
      if (orgEvent.deltaMode === 1) {
        var lineHeight = $.data(this, 'mousewheel-line-height');
        delta *= lineHeight;
        deltaY *= lineHeight;
        deltaX *= lineHeight;
      } else if (orgEvent.deltaMode === 2) {
        var pageHeight = $.data(this, 'mousewheel-page-height');
        delta *= pageHeight;
        deltaY *= pageHeight;
        deltaX *= pageHeight;
      }

      // Store lowest absolute delta to normalize the delta values
      absDelta = Math.max(Math.abs(deltaY), Math.abs(deltaX));

      if (!lowestDelta || absDelta < lowestDelta) {
        lowestDelta = absDelta;

        // Adjust older deltas if necessary
        if (shouldAdjustOldDeltas(orgEvent, absDelta)) {
          lowestDelta /= 40;
        }
      }

      // Adjust older deltas if necessary
      if (shouldAdjustOldDeltas(orgEvent, absDelta)) {
        // Divide all the things by 40!
        delta /= 40;
        deltaX /= 40;
        deltaY /= 40;
      }

      // Get a whole, normalized value for the deltas
      delta = Math[delta >= 1 ? 'floor' : 'ceil'](delta / lowestDelta);
      deltaX = Math[deltaX >= 1 ? 'floor' : 'ceil'](deltaX / lowestDelta);
      deltaY = Math[deltaY >= 1 ? 'floor' : 'ceil'](deltaY / lowestDelta);

      // Normalise offsetX and offsetY properties
      if (special.settings.normalizeOffset && this.getBoundingClientRect) {
        var boundingRect = this.getBoundingClientRect();
        offsetX = event.clientX - boundingRect.left;
        offsetY = event.clientY - boundingRect.top;
      }

      // Add information to the event object
      event.deltaX = deltaX;
      event.deltaY = deltaY;
      event.deltaFactor = lowestDelta;
      event.offsetX = offsetX;
      event.offsetY = offsetY;
      // Go ahead and set deltaMode to 0 since we converted to pixels
      // Although this is a little odd since we overwrite the deltaX/Y
      // properties with normalized deltas.
      event.deltaMode = 0;

      // Add event and delta to the front of the arguments
      args.unshift(event, delta, deltaX, deltaY);

      // Clearout lowestDelta after sometime to better
      // handle multiple device types that give different
      // a different lowestDelta
      // Ex: trackpad = 3 and mouse wheel = 120
      if (nullLowestDeltaTimeout) {
        clearTimeout(nullLowestDeltaTimeout);
      }
      nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);

      return ($.event.dispatch || $.event.handle).apply(this, args);
    }

    function nullLowestDelta() {
      lowestDelta = null;
    }

    function shouldAdjustOldDeltas(orgEvent, absDelta) {
      // If this is an older event and the delta is divisable by 120,
      // then we are assuming that the browser is treating this as an
      // older mouse wheel event and that we should divide the deltas
      // by 40 to try and get a more usable deltaFactor.
      // Side note, this actually impacts the reported scroll distance
      // in older browsers and can cause scrolling to be slower than native.
      // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
      return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;
    }
  });

  /***/
},
/* 72 */
/***/function (module, exports, __webpack_require__) {

  __webpack_require__(23);
  module.exports = __webpack_require__(22);

  /***/
}
/******/]);

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;
var _$ =  true ? window.jQuery : require('jquery'),
    _html2canvas =  true ? window.html2canvas : require('html2canvas'),
    _THREE =  true ? window.THREE : require('three'),
    _PDFJS =  true ? window.PDFJS : require('pdfjs');

exports.$ = _$;
exports.html2canvas = _html2canvas;
exports.THREE = _THREE;
exports.PDFJS = _PDFJS;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(0);


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMDZiZWQ1N2ExNGRlYzY5MGI0YWMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6L3dlYnBhY2svYm9vdHN0cmFwIDcyNGU1OGRmNThjNjVjNDgwOGI0Iiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9saWJzLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2xpYnMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQmFzZU1hdGhVdGlscy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9NYXRoVXRpbHMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVXRpbHMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvSW1hZ2VCYXNlLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0V2ZW50Q29udmVydGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0dyYXBoVXRpbHMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvSW1hZ2VGYWN0b3J5LmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQm9va1Byb3BzQnVpbGRlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL1NoZWV0QmxvY2suanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvcHJvcHMvYm9vay5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9DU1MzRFJlbmRlcmVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0NTU0xheWVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0NhY2hlLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQ3VzdG9tRXZlbnRDb252ZXJ0ZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRmluZGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1BkZi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9UaHJlZUV2ZW50Q29udmVydGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1RocmVlVXRpbHMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvdGFyZ2V0cy9UYXJnZXQuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL3BvbHlmaWxsLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQXV0b05hdmlnYXRvci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL0JpbmRlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL0Jvb2suanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9Cb29rQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL0Jvb2tQcmludGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQm9va1ZpZXcuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9DbGJCb29rUHJvcHNCdWlsZGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQ292ZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9Dc3NMYXllcnNNYW5hZ2VyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvUGFnZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9QZGZCb29rUHJvcHNCdWlsZGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvUGRmTGlua3NIYW5kbGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvU2VhcmNoRW5naW5lLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvU2hlZXRDc3NMYXllci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL1NoZWV0UGh5c2ljcy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL1NvdW5kc0Vudmlyb21lbnQuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9Ub2NDb250cm9sbGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL21vZGVscy9zaGVldEJsb2NrLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL3Byb3BzL2Jvb2tDb250cm9sbGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0JsYW5rSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQm9va21hcmtzLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0RldGVjdG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0RvY01vdXNlU2ltdWxhdG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0RvbTJJbWFnZS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9EcmFnLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0V2ZW50c1RvQWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9GdWxsU2NyZWVuLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0ludGVyYWN0aXZlSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvTG9hZGluZ0FuaW1hdGlvbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Mb2FkaW5nQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Nb3VzZUV2ZW50Q29udmVydGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL09iamVjdDNEV2F0Y2hlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9PcmJpdC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9QZGZJbWFnZS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9TZWFyY2guanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvU3RhdGljSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVGV4dHVyZUFuaW1hdG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1RocmVlTW91c2VFdmVudENvbnZlcnRlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9UaHJlZVRvdWNoRXZlbnRDb252ZXJ0ZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVGh1bWJuYWlscy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Ub3VjaEV2ZW50Q29udmVydGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1ZpZXcuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVmlzdWFsV29ybGQuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvV2lkZ2V0Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy90YXJnZXRzL0NpcmNsZVRhcmdldC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy90YXJnZXRzL1BvbHlUYXJnZXQuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vfi9zdGF0cy5qcy9idWlsZC9zdGF0cy5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vfi9qcXVlcnktbW91c2V3aGVlbC9qcXVlcnkubW91c2V3aGVlbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGlicy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiJCIsIl8kIiwid2luZG93IiwiX2h0bWwyY2FudmFzIiwiX1RIUkVFIiwiX1JlYWN0IiwiX1JlYWN0RE9NIiwiX1BERkpTIiwiX3RyIiwiaHRtbDJjYW52YXMiLCJUSFJFRSIsIlJlYWN0IiwiUmVhY3RET00iLCJQREZKUyIsInRyIiwiRkIzRF9MT0NBTEUiLCJCYXNlTWF0aFV0aWxzIiwic3VtMSIsImthIiwiYSIsImtiIiwiYiIsInN1bTIiLCJzdW0zIiwic3VtNCIsInJrNCIsImR5IiwidCIsImR0IiwieSIsInN1bSIsImsxIiwiazIiLCJrMyIsIms0IiwiZXh0cmFwb2xhdGVMaW5lYXIiLCJ4IiwieGkiLCJpbnRlcnBvbGF0ZUxpbmVhciIsInlpIiwiY2FsY1NjYWxlIiwic3JjVyIsInNyY0giLCJkc3RXIiwiZHN0SCIsIk1hdGgiLCJtdWxNIiwiciIsImkiLCJqIiwiayIsInRyYW5zTSIsIm0iLCJtYXQiLCJkYXRhIiwicyIsImRpc3AiLCJNIiwicHJlZGljdCIsIm51bSIsImwiLCJEIiwiYW0iLCJibSIsInRhIiwiZCIsInAiLCJ2IiwiZ2V0VW5pcXVlIiwic2V0U3BsaW5lUG9pbnRzIiwic3BsaW5lIiwicHMiLCJjb25zb2xlIiwibWFwbDJMIiwibHMiLCJsZW4iLCJuIiwiZiIsImRMIiwiTCIsImRldDIiLCJjIiwic29sdmUyTGluIiwiYTEiLCJiMSIsImEyIiwiYjIiLCJyZXMiLCJkeCIsImlzSW5zaWRlUG9seSIsImRvbmUiLCJjdCIsIm5wIiwicm4iLCJwMCIsInAxIiwiaXAiLCJ0biIsImlzSW5zaWRlQ29udlBvbHkiLCJzZyIsInYybGVuIiwidjIiLCJ2MmRpc3QiLCJ2MjEiLCJ2MjIiLCJjb21wdXRlU3F1YXJlIiwiY29tcHV0ZUludGVycENvZWZzIiwidHJpIiwiY29lZnMiLCJlcHMiLCJNYXRoVXRpbHMiLCJzcGxpdFNwbGluZSIsIk4iLCJvIiwiZGwiLCJnZXRMaW5lYXJJbmRlY2VzIiwiZGVsIiwiZERlbCIsInJlZmluZVBvbHkiLCJwb2x5IiwibWF4RGwiLCJ2MSIsIlV0aWxzIiwibm9ybWFsaXplVXJsIiwidXJsIiwiYmFzZSIsInNwbGl0IiwiZXh0ZW5kcyIsImRlciIsImRlZmF1bHRDbXAiLCJsb3dlckJvdW5kIiwiY21wIiwiaCIsIm1pZCIsIkltYWdlQmFzZSIsImNvbnRleHQiLCJzZXRSZXNvbHV0aW9uIiwiZGlzcG9zZSIsInJlbmRlckJsYW5rUGFnZSIsInJlbmRlckltYWdlIiwiaW1hZ2UiLCJub3JtVG9Db252IiwiaGVpZ2h0IiwicmVuZGVySGl0IiwiY3R4IiwicHVzaEN0eCIsInBvcEN0eCIsInJlbmRlck5vdEZvdW5kUGFnZSIsImZpbmlzaFJlbmRlciIsImZpbmlzaExvYWQiLCJnZXRTaW11bGF0ZWREb2MiLCJyZW5kZXJDYW52YXMiLCJyZW5kZXJDYW52YXNDdHgiLCJFdmVudENvbnZlcnRlciIsInNldEVuYWJsZSIsInZsIiwiZ2V0Q2FsbGJhY2siLCJvYmplY3QiLCJub3RpZnkiLCJlIiwidHlwZSIsImNhbGxiYWNrIiwidmlldyIsInduZCIsImpFIiwiY29udmVydCIsImNvbnZlcnRUb3VjaCIsImNvbnZlcnRNb3VzZSIsIkdyYXBoVXRpbHMiLCJpbnRlcnBvbGF0ZTAxIiwieTEiLCJ5MiIsImdldENvbG9yQnl0ZXMiLCJjb2xvciIsImludmVyc2VDb2xvciIsImJzIiwiaWJzIiwibmJzIiwiY29sb3IyUmdiYSIsImJ5dGVzMlJnYmEiLCJieXRlczJDb2xvciIsIkltYWdlRmFjdG9yeSIsImNhY2hlIiwiYnVpbGQiLCJpbmZvIiwid2lkdGhUZXhlbHMiLCJoZWlnaHRUZXhlbHMiLCJpbmplY3RvciIsInVuZGVmaW5lZCIsIkJvb2tQcm9wc0J1aWxkZXIiLCJjYWxjU2l6ZSIsIndpZHRoIiwic2NhbGUiLCJjYWxjVGV4ZWxzIiwic2hlZXQiLCJjYWxjUHJvcHMiLCJjb3ZlciIsInBhZ2UiLCJjYWxjU2hlZXRzIiwicGFnZXMiLCJnZXRTaGVldHMiLCJnZXRQcm9wcyIsImdldFBhZ2VDYWxsYmFjayIsInJlYWR5IiwiU2hlZXRCbG9jayIsImFuZ2xlIiwic3RhdGUiLCJmaXJzdCIsImxhc3QiLCJwcm9wcyIsImxvYWRlZFBvaW50cyIsIk9iamVjdCIsIm1hcCIsImlzIiwiQXJyYXkiLCJtYXJrZXIiLCJ2ZXJ0ZXgiLCJ1c2UiLCJtYXhEaXN0YW5jZSIsInBvaW50cyIsIk9aIiwiYXhpcyIsImdldFNpemUiLCJzaGVldHMiLCJnZXRUb3BDZXJuZXJzIiwib2ZmIiwiZ2V0VG9wU2l6ZSIsInZzIiwiZ2V0VG9wV29ybGRSb3RhdGlvbiIsInEiLCJnZXRUb3BXb3JsZFBvc2l0aW9uIiwidmkiLCJnZXRJbnRlcnBvbGF0aW9uUG9pbnRzIiwiaW5kcyIsIm1vZCIsIksiLCJzZXQiLCJQSSIsImNsb3NlZEFuZ2xlIiwiYmluZGVyVHVybiIsImhsIiwiaHIiLCJvZmZzZXQiLCJpbkFuZ2xlIiwiaEFuZ2xlIiwic2V0UG9pbnRzIiwibGVmdCIsInJpZ2h0IiwieXMiLCJ6IiwicGxhbmUiLCJub3JtYWwiLCJwbGFuZU9mZnNldCIsInByb2oiLCJkaXN0YW5jZSIsImQyQW5nbGUiLCJwb2ludCIsImludmVyc2UiLCJnZXRQb2ludHNBdEhzIiwiaHMiLCJibCIsInAyIiwiZHAiLCJsbiIsInNwIiwibnBzIiwiZ2V0UG9pbnRzQXRBbmdsZUFuZEhzIiwiZ2V0UG9pbnRzQXRBbmdsZSIsImFuZ2xlcyIsInhwcyIsInlwcyIsImludGVycG9sYXRlIiwibG9hZFBvaW50cyIsIm9wZW5lZEludGVycG9sYXRpb25JbmRlY2VzIiwiY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMiLCJmbGF0SW50ZXJwb2xhdGlvbkluZGVjZXMiLCJpbnRlcnBvbGF0aW9uUG9pbnRzIiwiZ3Jhdml0eSIsImNhY2hlZFBhZ2VzIiwicmVuZGVySW5hY3RpdmVQYWdlcyIsInJlbmRlckluYWN0aXZlUGFnZXNPbk1vYmlsZSIsInJlbmRlcldoaWxlRmxpcHBpbmciLCJwYWdlc0ZvclByZWRpY3RpbmciLCJwcmVsb2FkUGFnZXMiLCJydGwiLCJzdGFydFZlbG9jaXR5IiwiY29ybmVyRGV2aWF0aW9uIiwiZmxleGliaWxpdHkiLCJmbGV4aWJsZUNvcm5lciIsImJlbmRpbmciLCJ3YXZlIiwic2hhcGUiLCJiaW5kZXJUZXh0dXJlIiwiZGVwdGgiLCJwYWRkaW5nIiwibWFzcyIsImNzc0xheWVyUHJvcHMiLCJlbGVtZW50IiwibWF0cml4IiwiY2FtZXJhIiwiZm92Iiwic3R5bGUiLCJvYmplY3RzIiwiZG9tRWxlbWVudCIsImRvY3VtZW50IiwiY2FtZXJhRWxlbWVudCIsImlzSUUiLCJuYXZpZ2F0b3IiLCJfaGVpZ2h0IiwiX3dpZHRoIiwiX3dpZHRoSGFsZiIsIl9oZWlnaHRIYWxmIiwiZWxlbWVudHMiLCJlcHNpbG9uIiwibWF0cml4M2QiLCJnZXRPYmplY3RDU1NNYXRyaXgiLCJjYWNoZWRTdHlsZSIsImdldERpc3RhbmNlVG9TcXVhcmVkIiwicmVuZGVyT2JqZWN0Iiwib2JqZWN0MSIsIm9iamVjdDIiLCJvcmRlciIsInpNYXgiLCJzY2VuZSIsImluZGV4IiwiY2FtZXJhQ1NTTWF0cml4IiwiZ2V0Q2FtZXJhQ1NTTWF0cml4Iiwiek9yZGVyIiwiQ1NTM0RSZW5kZXJlciIsIl9DU1MzRE9iamVjdCIsIl9DU1MzRFNwcml0ZSIsIkNTUzNET2JqZWN0IiwiQ1NTM0RTcHJpdGUiLCJDU1NMYXllciIsImluaXQiLCJkb2MiLCJkZWxheSIsIndpZHRoUHhzIiwiaGVpZ2h0UHhzIiwiY2FsbEludGVybmFsIiwibmFtZSIsImNsZWFySW50ZXJuYWxzIiwic2V0RGF0YSIsImNzcyIsImh0bWwiLCJqcyIsImV2YWwiLCJwZW5kZWRDYWxsIiwiY2xiIiwidGltZXN0YW1wIiwiRGF0ZSIsInNldFRpbWVvdXQiLCJpc0hpZGRlbiIsImhpZGUiLCJyZXNvbHZlIiwiUHJvbWlzZSIsInNob3ciLCJDYWNoZSIsIm1heFNpemUiLCJJbmZpbml0eSIsInNpemVvZiIsImNvdW50U2l6ZW9mIiwiZm9yRWFjaCIsInZhbHVlIiwicmVtb3ZlIiwiZnJlZVNwYWNlIiwiYXJyIiwia2V5IiwicmVjdXJzaW9uU2l6ZW9mIiwic2l6ZSIsImdldFRpbWVzdGFtcCIsImdldCIsInB1dCIsIkNvbnRyb2xsZXIiLCJoYW5kbGVEZWZhdWx0IiwiaWQiLCJkaXNwYXRjaEFzeW5jIiwiRXZlbnREaXNwYXRjaGVyIiwiQ3VzdG9tRXZlbnRDb252ZXJ0ZXIiLCJjdXN0b21UZXN0IiwiZURvYyIsInRlc3QiLCJhZGRDdXN0b20iLCJjdXN0b20iLCJnZXRPYmplY3QiLCJGaW5kZXIiLCJpc0RlbGltZXRyIiwibWVyZ2UiLCJhcyIsInN0cnMiLCJhZGRIaXRzIiwiY2hhcnMiLCJkZWxpbWV0ZXIiLCJsZW5ndGgiLCJhZGRDb250ZXh0IiwiZGVscyIsInByZXZEZWxzIiwiZ2V0SGl0cyIsImdldENvbnRleHRzIiwicGF0dGVybiIsIkRFTElNSVRFUiIsImRlZmF1bHRzIiwiY29udGV4dExlbmd0aCIsImhpdHMiLCJjb250ZXh0cyIsIlBkZiIsImxvYWRlZCIsInRvdGFsIiwicmFuZ2VDaHVua1NpemUiLCJjdXIiLCJvbGQiLCJpc05hTiIsImhhbmRsZXIiLCJnZXRQYWdlVHlwZSIsImdldFBhZ2UiLCJzZXRMb2FkaW5nUHJvZ3Jlc3NDbGIiLCJnZXRQYWdlc051bSIsImdldFBhZ2VTaXplIiwiZ2V0SGFuZGxlciIsIlRocmVlRXZlbnRDb252ZXJ0ZXJGcyIsIm9iamVjdHNUZXN0Iiwib2JqZWN0c0FuZEZhY2VzVGVzdCIsImFkZFRocmVlIiwidGhyZWUiLCJyZW1vdmVUaHJlZSIsImludGVyc2VjdHMiLCJUaHJlZVV0aWxzIiwidmVydGljZXMyVVZzIiwidmVydGljZXMiLCJpbmRlY2VzIiwiY29udmVyQ2xiIiwidmlzIiwiY29tcHV0ZUZhY2VWZXJ0ZXhVdnMiLCJnZW9tZXRyeSIsImZhY2VzIiwidXZzIiwidXZzaSIsImNyZWF0ZU1hcmtlciIsImZpbmRVdlRyaXMiLCJmb3VuZCIsImZpbmRJbnRlcm5hbFZlcnRpY2VzIiwiVGFyZ2V0Iiwib3B0aW9ucyIsInBhcmVudCIsInByb2dyZXNzIiwidyIsInBhZ2VDYWxsYmFjayIsImtXdG9IIiwiY29udGFpbmVycyIsImpDb250YWluZXIiLCJzcmMiLCJwZGYiLCJPIiwic3RhcnQiLCJhcmd1bWVudHMiLCJyZWxhdGl2ZVN0YXJ0IiwiZW5kIiwicmVsYXRpdmVFbmQiLCJmaW5hbCIsImxpc3QiLCJ0aGlzQXJnIiwicHJlZGljYXRlIiwiQXV0b05hdmlnYXRvciIsInVybFBhcmFtIiwibmF2aWdhdGVzIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwicmVnZXgiLCJyZXN1bHRzIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZ2V0UGFnZU51bWJlciIsIm51bWJlciIsInBhcnNlSW50IiwiQmluZGVyIiwiYmFja1NpemUiLCJiYWNrTSIsInRleHR1cmUiLCJ0cjEiLCJ0cjIiLCJzZXRMZWZ0Iiwic2V0UmlnaHQiLCJqb2luTGVmdENvdmVyIiwiZGlzY29ubmVjdExlZnRDb3ZlciIsImpvaW5SaWdodENvdmVyIiwiZGlzY29ubmVjdFJpZ2h0Q292ZXIiLCJCb29rIiwidmlzdWFsIiwiem9vbSIsInNpbmdsZVBhZ2UiLCJhdXRvUmVzb2x1dGlvbiIsImVuYWJsZSIsImxhc3RQYWdlIiwicXVlcnkiLCJzZXRUZXh0dXJlIiwidXBkYXRlIiwibGFzdE1vdXNlUG9zIiwicGFnZVgiLCJwYWdlWSIsImJveHMiLCJzZXRBdXRvUmVzb2x1dGlvbiIsInNldFpvb20iLCJzZXRRdWVyeSIsImlzUHJvY2Vzc2luZyIsImdldFBhZ2VzIiwic2V0RmxpcFByb2dyZXNzQ2xiIiwic2V0SW5qZWN0b3IiLCJpc0FjdGl2ZVBhZ2UiLCJnZXRCbG9ja0J5UGFnZSIsImJsb2NrIiwiZ2V0QmxvY2tQYWdlcyIsInJhbmdlIiwiZ2V0VG9wUGFnZXMiLCJnZXRQYWdlU3RhdGUiLCJlbmFibGVMb2FkaW5nQW5pbWF0aW9uIiwiZ2V0TGVmdEZsaXBwaW5nIiwiZ2V0UmlnaHRGbGlwcGluZyIsImdldENsb3NlZEJsb2NrQW5nbGUiLCJvcGVuZWRBbmdsZSIsImZsaXBMZWZ0IiwicHJvZ3Jlc3NDbGIiLCJmbGlwUHJvZ3Jlc3NDbGIiLCJib29rIiwiZmxpcFJpZ2h0IiwiY2xlYXJIb3ZlckluZm8iLCJ4U2VnbWVudCIsImNvbXB1dGVUYXJnZXQiLCJzZWciLCJvblBpY2tDYWxsYmFjayIsIm9uRHJhZ0NhbGxiYWNrIiwib25SZWxlYXNlQ2FsbGJhY2siLCJnZXRGbGlwcGluZyIsImZsaXAiLCJlbmFibGVNb3VzZSIsImNvcm5lckNhbGxiYWNrIiwiaG92ZXJBbmdsZSIsImhvdmVyIiwicG9zc2libGUiLCJzaGVldEJsb2NrcyIsIm5leHRCbG9jayIsInBlbmRpbmdzIiwiYWRkU2hlZXRCbG9jayIsInN1YnNjcmliZVNoZWV0QmxvY2siLCJldmVudENvbnZlcnRlciIsInRhcmdldCIsInJlbW92ZVNoZWV0QmxvY2siLCJyZW1vdmVTaGVldEJsb2NrcyIsImJsb2NrcyIsIm1hdGVyaWFsIiwic2V0UGFnZVRleHR1cmUiLCJzZXRMZWZ0Q292ZXJUZXh0dXJlIiwic2V0UmlnaHRDb3ZlclRleHR1cmUiLCJmaW5pc2hBbmltYXRpb25DbGIiLCJjYWxjQmxvY2tGb3JjZSIsInZlbG9jaXR5IiwiY29ybmVySGVpZ2h0IiwiY2FsY0Jsb2NrQ29ybmVyRm9yY2UiLCJub3RpZnlCZWZvcmVBbmltYXRpb24iLCJub3RpZnlBZnRlckFuaW1hdGlvbiIsImNvbm5lY3RQaHlzaWNzIiwiY292ZXJIZWlnaHQiLCJzaW11bGF0ZUNsYiIsInJlbW92ZUNsYiIsInNwbGl0U2hlZXRCbG9jayIsImxlZnRTaXplIiwibmV3QmxvY2siLCJtZXJnZVNoZWV0QmxvY2tzIiwiZmlyc3RCbG9jayIsImxhc3RCbG9jayIsInNldFNoZWV0QmxvY2tzIiwiY3JlYXRlU2lkZVRleHR1cmUiLCJqQyIsInByZXBhcmVQcm9wcyIsIm1lcmdlUHJvcHMiLCJzZWNvbmQiLCJzaWRlVGV4dHVyZSIsIkJvb2tDb250cm9sbGVyIiwic21hcnRQYW4iLCJzdGF0cyIsImxpZ2h0aW5nIiwiYWN0aXZlU2lkZSIsIm9uU2NyZWVuTW9kZUNoYW5nZWQiLCJvblVwZGF0ZVZpZXciLCJpbml0TG9hZGluZ0FuaW1hdGlvbiIsInZpc2libGUiLCJlbmFibGVOYXZpZ2F0aW9uIiwic2V0VG9jQ3RybCIsInRvY0N0cmwiLCJzZXRQcmludGVyIiwicHJpbnRlciIsInNldFNvdW5kcyIsInNvdW5kcyIsImNhblpvb21JbiIsImNhblpvb21PdXQiLCJjYW5EZWZhdWx0Wm9vbSIsInNldEJvb2tab29tIiwiY21kWm9vbUluIiwiY21kWm9vbU91dCIsImNtZERlZmF1bHRab29tIiwiY21kVG9jIiwiY21kRmFzdEJhY2t3YXJkIiwiY21kQmFja3dhcmQiLCJjbWRGb3J3YXJkIiwiY21kRmFzdEZvcndhcmQiLCJjbWRTYXZlIiwiY21kUHJpbnQiLCJjbWRGdWxsU2NyZWVuIiwiY21kU21hcnRQYW4iLCJjbWRTaW5nbGVQYWdlIiwiY21kU291bmRzIiwiY21kU3RhdHMiLCJjbWRMaWdodGluZ1VwIiwiY21kTGlnaHRpbmdEb3duIiwiZ29Ub1BhZ2UiLCJwYWdlTnVtIiwiY3VycmVudCIsImZsaXBzIiwiY292cyIsImN2Iiwic2V0Q2xiIiwiZmwiLCJ0aW1lIiwic3RhcnRGbGlwIiwiZmxpcFJlcyIsImVuZEZsaXAiLCJnZXRQYWdlRm9yR1VJIiwiaW5wUGFnZSIsInVwZGF0ZVZpZXdJZlN0YXRlIiwidXBkYXRlVmlld1N0YXRlIiwiYWN0aXZlIiwiZW5hYmxlZCIsImZsaXBwZXJzRW5hYmxlIiwibmF2aWdhdGlvbkNvbnRyb2xzIiwidXBkYXRlVmlldyIsImdldEFjdGlvbnMiLCJpc1N3aXBwaW5nIiwiY21kcyIsImFjdGl2YXRlIiwiY21kUGFuTGVmdCIsImNtZFBhblJpZ2h0IiwiY21kUGFuVXAiLCJzcGVlZCIsImNtZFBhbkRvd24iLCJtb3VzZUNtZFJvdGF0ZSIsInJvdGF0ZSIsIm1vdXNlQ21kRHJhZ1pvb20iLCJtb3VzZUNtZFBhbiIsInBhbiIsIm1vdXNlQ21kV2hlZWxab29tIiwidG91Y2hDbWRSb3RhdGUiLCJ0b3VjaENtZFpvb20iLCJ0b3VjaENtZFBhbiIsInRvdWNoQ21kU3dpcGUiLCJ0b3VjaCIsImhhbmRsZWQiLCJ4MCIsInkwIiwid2lkU2V0dGluZ3MiLCJiaW5kQWN0aW9ucyIsImFjdGlvbiIsImZsYWdzIiwic2V0QWN0aW9ucyIsImFjdGlvbnMiLCJCb29rUHJpbnRlciIsImNhbmNlbCIsInByaW50IiwicHJpbnRXbmQiLCJjYWxsTWFudWFsbHkiLCJwcmludERvYyIsImNvbnRlbnQiLCJyZW5kZXJDb250ZW50IiwiaGVhZCIsImJvZHkiLCJ3cmFwIiwicmVuZGVySHRtbCIsImxpbmtzIiwibGluayIsImhyZWYiLCJyZWplY3QiLCJyZW5kZXJIZWFkIiwidXNlSUZyYW1lIiwiaXNDaHJvbWl1bSIsIndpbk5hdiIsInZlbmRvck5hbWUiLCJpc0lFZWRnZSIsImlzSU9TQ2hyb21lIiwiZGVmYXVsdFN0eWxlU2hlZXQiLCJCb29rVmlldyIsImluaXRWaWV3IiwiZ2V0SGFuZGxlcnMiLCJoYW5kbGVycyIsIm9uSXRlbVN0YXRlQ2hhbmdlZCIsImdldFZpZXciLCJnZXRCb29rbWFya3NWaWV3IiwiZ2V0VGh1bWJuYWlsc1ZpZXciLCJnZXRTZWFyY2hWaWV3IiwiZ2V0Rm9ybXMiLCJnZXRMaW5rcyIsImdldFdpZGdldHMiLCJnZXRJbnB1dHMiLCJnZXRUZXh0cyIsImdldFRlbXBsYXRlIiwic3R5bGVzIiwicmVsIiwic2NyaXB0IiwiUEFHRV9IQU5ETEVSX0RFTEFZIiwiQ2xiQm9va1Byb3BzQnVpbGRlciIsIkNvdmVyIiwiQ3NzTGF5ZXJzTWFuYWdlciIsImdldEFjdGl2ZXMiLCJsYXllcnMiLCJzbCIsIndhaXQiLCJQYWdlTWFuYWdlciIsImRpc3BhdGNoRXZlbnQiLCJjcmVhdGVMb2FkaW5nVGV4dHVyZSIsInNwcml0ZVRpbGVzIiwiYW5pbWF0aW9uIiwiYW5pbWF0b3IiLCJpc0NvdmVyIiwiaXNNb2JpbGUiLCJsb2FkaW5nIiwicmVtb3ZlRnJvbUxvYWRpbmdzIiwicmVtb3ZlRnJvbVJlbmRlclF1ZXVlIiwicmVmcmVzaFBhZ2VRdWVyeSIsInJlZnJlc2hab29tIiwiZXMiLCJnZXRMYXllcnMiLCJhcmdzIiwicmVzb2x2ZVBlbmRpbmdzIiwicnRsUGFnZU4iLCJsb2FkIiwicGkiLCJ3cmFwcGVyIiwibG9ja2VkIiwiaXNBY3RpdmUiLCJpc1RvcCIsImlzU2luZ2xlUGFnZSIsImNhbGNSZXNvbHV0aW9uIiwicHVzaEluUmVuZGVyUXVldWUiLCJ1cGRhdGVSZW5kZXJRdWV1ZSIsInRvcCIsInR1cm5PbkV2ZW50cyIsInR1cm5PZmZFdmVudHMiLCJtb3VzZXVwIiwibW91c2VvdXQiLCJlbnQiLCJ0cmFuc2ZlckV2ZW50VG9UZXh0dXJlIiwidG9PYmplY3QiLCJ1diIsImxvYWRQcmVkaWN0ZWRQYWdlcyIsImFkZFBhZ2VSZXF1ZXN0Iiwic2V0TWF0ZXJpYWwiLCJvYiIsInNldHVwTWF0ZXJpYWwiLCJnZXRPckxvYWRUZXh0dXJlT2JqZWN0IiwiUGRmQm9va1Byb3BzQnVpbGRlciIsImludGVyYWN0aXZlIiwiUGRmTGlua3NIYW5kbGVyIiwic2V0SGFuZGxlciIsImRlZmF1bHRIYW5kbGVyIiwiZGVzdGluYXRpb24iLCJjYWxsSGFuZGxlcnMiLCJoYW5kbGVFdmVudCIsImFubm8iLCJkZXN0UHJvbWlzZSIsImRlc3QiLCJTZWFyY2hFbmdpbmUiLCJwcm9jZXNzIiwic3RhbXAiLCJmaW5kIiwibmV4dCIsIml0ZW0iLCJTaGVldENzc0xheWVyIiwiU2hlZXRQaHlzaWNzIiwidGFyZ2V0Rm9yY2VDbGIiLCJjaCIsImhvdmVyQ29ybmVyRm9yY2VDbGIiLCJnZXRUYXJnZXRGb3JjZUNsYiIsInRhcmdldEFuZ2xlIiwiZyIsInRsIiwiZHJhZ0ZvcmNlQ2xiIiwiZHJhZ0Nvcm5lckZvcmNlQ2xiIiwiZ2V0RHJhZ0Nvcm5lckZvcmNlQ2xiIiwiZnBzIiwic3RhcnREdCIsIm1hcmdpbiIsImluZk0iLCJhdHRlbXB0cyIsIm1heEl0ZXJhdGlvbnMiLCJhZGRPYmplY3QiLCJmb3JjZUNsYiIsImNvcm5lckZvcmNlQ2xiIiwibm8iLCJjZiIsImZsYnQiLCJnZXRQYXJhbWV0ck1hcCIsInNldFBhcmFtZXRyIiwiZ2V0UGFyYW1ldHIiLCJzaW11bGF0ZSIsIlQiLCJhdHRlbXB0IiwiaXQiLCJub3MiLCJjaSIsInNjb3MiLCJncyIsImkwIiwicmVtb3ZlU3RhdGljcyIsImZpbmRBbmRTb2x2ZUNvcm5lckNvbGxpc2lvbnMiLCJvcyIsImFsIiwiZENoIiwiZHYiLCJzb2x2ZUNvbGxpc2lvbiIsIm1tIiwiYXYiLCJidiIsImZpbmRDb2xsaXNpb25zIiwiYWxsIiwiaXNDb2xsaXNpb24iLCJpbnRlZ3JhdGUiLCJTb3VuZHNFbnZpcm9tZW50IiwidGVtcGxhdGUiLCJzZXRFbmFibGVkIiwidG9nbGUiLCJzdWJzY3JpYmVGbGlwcyIsImVtaXR0ZXIiLCJUb2NDb250cm9sbGVyIiwic2V0VGh1bWJuYWlscyIsInRodW1ibmFpbHMiLCJzZXRTZWFyY2giLCJzZWFyY2giLCJzZXRCb29rbWFya3MiLCJib29rbWFya3MiLCJjbWRCb29rbWFya3MiLCJjbWRUaHVtYm5haWxzIiwiY21kU2VhcmNoIiwiY21kQ2xvc2VUb2MiLCJuYXZpZ2F0ZVRodW1ibmFpbHMiLCJuYXZpZ2F0ZVNlYXJjaCIsIm5hdmlnYXRlQm9va21hcmtzIiwicmVzWCIsInJlc1kiLCJyZXNaIiwiZnJvbnRHZW9tZXRyeSIsImJhY2tHZW9tZXRyeSIsImxlZnRHZW9tZXRyeSIsInJpZ2h0R2VvbWV0cnkiLCJ0b3BHZW9tZXRyeSIsImJvdHRvbUdlb21ldHJ5IiwiYWRkRmFjZXMiLCJtYXBWZXJ0aWNlcyIsImVxIiwiZHN0IiwiZnJvbnRNYXAiLCJiYWNrTWFwIiwibGVmdE1hcCIsInJpZ2h0TWFwIiwibW91c2VCdXR0b25zIiwiTGVmdCIsIk1pZGRsZSIsIlJpZ2h0Iiwic2tpbiIsImRlZmF1bHQiLCJtaW4iLCJtYXgiLCJsZXZlbHMiLCJsb2FkaW5nQW5pbWF0aW9uIiwiY29lZmZpY2llbnQiLCJjb2RlIiwiYWN0aXZlRm9yTW9iaWxlIiwiQmxhbmtJbWFnZSIsIkJvb2ttYXJrcyIsImdldFRpdGxlIiwiZ2V0SXRlbXMiLCJsaSIsImNvbnRhaW5lciIsImNtZCIsIm5vZGUiLCJub2RlcyIsImV4cGFuZCIsIm1pbmltaXplIiwicmVuZGVyTm9kZSIsInJlbmRlck5vZGVzIiwibWFwTm9kZXMiLCJpdGVtcyIsImxldmVsIiwidGl0bGUiLCJtaW5pbWl6ZWQiLCJjaGlsZHJlbiIsIkRldGVjdG9yIiwiZ2V0V2ViR0xFcnJvck1lc3NhZ2UiLCJhZGRHZXRXZWJHTE1lc3NhZ2UiLCJwYXJhbWV0ZXJzIiwiY2FudmFzIiwiQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIiwid2ViZ2wiLCJ3b3JrZXJzIiwiV29ya2VyIiwiZmlsZWFwaSIsIkJsb2IiLCJEb2NNb3VzZVNpbXVsYXRvciIsImJFbGVtZW50IiwiakZyYW1lIiwidGVybXMiLCJyZXBsYWNlIiwiSE9WRVIiLCJBQ1RJVkUiLCJzcyIsImNzc1RleHQiLCJ0ZXJtIiwiY29udmVydENvb3JkcyIsImpFbGVtZW50IiwidHJpZ2dlckV2ZW50IiwiYWR2YW5jZWRQcm9wcyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJlbnRlckVsZW1lbnQiLCJsZWF2ZUVsZW1lbnQiLCJhY3RpdmF0ZUVsZW1lbnQiLCJkZWFjdGl2YXRlRWxlbWVudCIsImFkZERvY0NoYW5nZUNsYiIsImVsZW1lbnRGcm9tUG9pbnQiLCJjaGlsZCIsImdldEVsZW1lbnQiLCJvZmYwIiwidHJpZ2dlciIsImxlYXZlZCIsInJlbGF0ZWRUYXJnZXQiLCJnZXREZWZhdWx0VW5kZWZpbmVkUHJvcGVydGllcyIsImdldERlZmF1bHRSZXNlbmRQcm9wZXJ0aWVzIiwiRG9tMkltYWdlIiwic2VsZiIsInV0aWwiLCJpbmxpbmVyIiwiZm9udEZhY2VzIiwiaW1hZ2VzIiwiY2xvbmVOb2RlIiwibWFrZVN2Z0RhdGFVcmkiLCJjbG9uZSIsImRyYXciLCJuZXdDYW52YXMiLCJmaWx0ZXIiLCJjbG9uZUNoaWxkcmVuIiwicHJvY2Vzc0Nsb25lIiwib3JpZ2luYWwiLCJjb3B5U3R5bGUiLCJzb3VyY2UiLCJjb3B5UHJvcGVydGllcyIsImNsb25lUHNldWRvRWxlbWVudCIsImNsYXNzTmFtZSIsInN0eWxlRWxlbWVudCIsImZvcm1hdFBzZXVkb0VsZW1lbnRTdHlsZSIsInNlbGVjdG9yIiwiZm9ybWF0Q3NzVGV4dCIsImZvcm1hdENzc1Byb3BlcnRpZXMiLCJzdHlsZU5vZGUiLCJlc2NhcGUiLCJwYXJzZUV4dGVuc2lvbiIsIm1pbWVUeXBlIiwiZGF0YUFzVXJsIiwiaXNEYXRhVXJsIiwiY2FudmFzVG9CbG9iIiwicmVzb2x2ZVVybCIsImdldEFuZEVuY29kZSIsInVpZCIsImFzQXJyYXkiLCJlc2NhcGVYaHRtbCIsIm1ha2VJbWFnZSIsImlzRWxlbWVudCIsImlzQ2FudmFzIiwiaXNUZXh0QXJlYSIsImlzSW5wdXQiLCJpc1NWRyIsImlzU1ZHUmVjdCIsImlzSW1hZ2UiLCJXT0ZGIiwiSlBFRyIsIm1hdGNoIiwiZXh0ZW5zaW9uIiwibWltZXMiLCJiaW5hcnlTdHJpbmciLCJiaW5hcnlBcnJheSIsInRvQmxvYiIsIlRJTUVPVVQiLCJyZXF1ZXN0IiwiZmFpbCIsImVuY29kZXIiLCJzdHJpbmciLCJhcnJheSIsImFycmF5TGlrZSIsImxlZnRCb3JkZXIiLCJweCIsInJpZ2h0Qm9yZGVyIiwidG9wQm9yZGVyIiwiYm90dG9tQm9yZGVyIiwicGFyc2VGbG9hdCIsIlVSTF9SRUdFWCIsImlubGluZUFsbCIsInNob3VsZFByb2Nlc3MiLCJpbXBsIiwicmVhZFVybHMiLCJpbmxpbmUiLCJyZXN1bHQiLCJiYXNlVXJsIiwidXJsQXNSZWdleCIsInVybHMiLCJyZXNvbHZlQWxsIiwicmVhZEFsbCIsIndlYkZvbnQiLCJjc3NTdHJpbmdzIiwicnVsZXMiLCJydWxlIiwiQ1NTUnVsZSIsImNzc1J1bGVzIiwic3R5bGVTaGVldHMiLCJ3ZWJGb250UnVsZSIsIm5ld0ltYWdlIiwiYmFja2dyb3VuZCIsIkRyYWciLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VEb3duIiwib25Nb3VzZVVwIiwic2V0Q29vcmRzRnJvbUV2ZW50Iiwic2VsZWN0ZWQiLCJFdmVudHNUb0FjdGlvbnMiLCJnZXRFdmVudEZsYWdzIiwiZ2V0UG9zaXRpb24iLCJ0b3VjaGVzIiwiY29udGV4dE1lbnUiLCJtb3VzZURvd24iLCJtb3VzZU1vdmUiLCJtb3VzZVVwIiwibW91c2VXaGVlbCIsIm1vdXNlTW92ZURvYyIsIm1vdXNlVXBEb2MiLCJjbGljayIsImRibGNsaWNrIiwidG91Y2hTdGFydCIsInRvdWNoTW92ZSIsInRvdWNoRW5kIiwia2V5RG93biIsImtleVByZXNzIiwia2V5VXAiLCJhZGRBY3Rpb24iLCJmaXJlQWN0aW9ucyIsImNsaWNrcyIsInRvdWNoUGljayIsInBvcyIsIm1vZEtleXMiLCJDdHJsIiwiU2hpZnQiLCJBbHQiLCJGdWxsU2NyZWVuIiwiYXZhaWxhYmxlIiwiYWN0aXZhdGVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFzV2Via2l0RnVsbFNjcmVlbiIsIndlYmtpdENhbmNlbEZ1bGxTY3JlZW4iLCJfaGFzTW96RnVsbFNjcmVlbiIsIm1vekNhbmNlbEZ1bGxTY3JlZW4iLCJfaGFzTXNGdWxsc2NyZWVuIiwibXNSZXF1ZXN0RnVsbHNjcmVlbiIsIkludGVyYWN0aXZlSW1hZ2UiLCJyZW5kZXIiLCJ0aW1lb3V0IiwiTG9hZGluZ0FuaW1hdGlvbiIsImNhbGNUaW1lVG8iLCJkYSIsIl9hIiwiX3IiLCJjeCIsImN5IiwibngiLCJueSIsImdldEltYWdlIiwiY3JlYXRlU3ByaXRlIiwidXBkYXRlSW50ZXJ2YWwiLCJMb2FkaW5nQ29udHJvbGxlciIsInNob3dQcm9ncmVzcyIsImxvYWRpbmdNc2ciLCJkZWZhdWx0TG9hZGluZ01zZyIsInNldFByb2dyZXNzIiwiTW91c2VFdmVudENvbnZlcnRlciIsIk9iamVjdDNEV2F0Y2hlciIsInRlc3RTY2FsZSIsInZ4IiwidnkiLCJib3giLCJtb3ZlUGFuIiwidlRvQ2FtZXJhIiwiY29tcHV0ZUNsaWVudEJvdW5kQm94IiwieHMiLCJ6cyIsInNldE9iamVjdCIsImJvdW5kQm94Q2xiIiwiY29tcHV0ZUNvcnIiLCJjb3JyIiwiZ2V0U2NhbGUiLCJLeCIsIkt5IiwiY2VudGVyVmlldyIsIlkiLCJ0ZiIsInZkIiwiT3JiaXQiLCJzcGhlcmljYWwiLCJzY29wZSIsInpvb21TcGVlZCIsIl9zcGVlZCIsImRvbGx5SW4iLCJkb2xseU91dCIsInF1YXQiLCJxdWF0SW52ZXJzZSIsImxhc3RQb3NpdGlvbiIsImxhc3RRdWF0ZXJuaW9uIiwicG9zaXRpb24iLCJyb3RhdGVMZWZ0Iiwic3BoZXJpY2FsRGVsdGEiLCJwYW5PZmZzZXQiLCJ6b29tQ2hhbmdlZCIsImNoYW5nZUV2ZW50IiwiRVBTIiwicGFuTGVmdCIsInBhblVwIiwidGFyZ2V0RGlzdGFuY2UiLCJkZWx0YVgiLCJkZWx0YVkiLCJyb3RhdGVVcCIsImV2ZW50Iiwib2Zmc2V0RG9sbHkiLCJ3aGVlbERvbGx5IiwiUGRmSW1hZ2UiLCJ0cmFuc2Zvcm0iLCJyZWN0U2l6ZSIsImNyZWF0ZVBvbHkiLCJzZXRBbm5vdGF0aW9ucyIsImFubm9zIiwidGFyZ2V0cyIsInJlY3QiLCJhUG9zIiwiYVN6Iiwic2V0SGl0cyIsInRleHRDb250ZW50IiwicmVuZGVySGl0cyIsInRlc3RTeiIsInRleHREaXYiLCJiYXNlT2Zmc2V0IiwiaGl0IiwiZm9udEhlaWdodCIsImZvbnRBc2NlbnQiLCJ0ZXN0U3BhbiIsIml3aWR0aCIsInJlbGF0aXZlT2Zmc2V0IiwiYW5ub0NsYiIsImFubm90YXRpb24iLCJjYWxjVmlld3BvcnQiLCJjYW52YXNDb250ZXh0Iiwidmlld3BvcnQiLCJTZWFyY2giLCJuYXZpZ2F0ZSIsImRvUXVlcnkiLCJxdWVyeVN0YW1wIiwic2V0UmVzdWx0cyIsImh0bWxzIiwiU3RhdGljSW1hZ2UiLCJUZXh0dXJlQW5pbWF0b3IiLCJtaWxsaVNlYyIsImN1cnJlbnRDb2x1bW4iLCJjdXJyZW50Um93IiwiaW1nIiwiVGhyZWVNb3VzZUV2ZW50Q29udmVydGVyIiwidmlzdWFsV29ybGQiLCJUaHJlZVRvdWNoRXZlbnRDb252ZXJ0ZXIiLCJUaHVtYm5haWxzIiwiaGVhZGluZyIsInRodW1ibmFpbCIsImdldEFjdGl2ZSIsInNldEltYWdlIiwiVG91Y2hDb252ZXJ0ZXIiLCJWaWV3IiwiY2xhc3NQcm9wZXJ0eSIsImN0cmwiLCJhdHRyaWJ1dGVQcm9wZXJ0eSIsImF0dHJpYnV0ZU5hbWUiLCJoYW5kbGVMaW5rRXZlbnQiLCJoYW5kbGVJbnB1dEV2ZW50IiwiaGFuZGxlRm9ybUV2ZW50IiwiY2FsbExhdGVyIiwibXMiLCJwZW5kaW5nIiwibG9hZEZpbGVzIiwiZmlsZXMiLCJ0YXNrcyIsInVybFJlc29sdmVyIiwicGFydHMiLCJwYXJ0Iiwib2JqVG9BdHRyc1N0ciIsImNoZWNrSWZyYW1lU2l6ZSIsIm9uUmVzaXplIiwidHJhbnNsYXRlIiwiZmlyZUxpbmtzT25Mb2FkRXZlbnQiLCJqTGluayIsInRleHRDc3MiLCJzZXR0ZXIiLCJnZXRDb250YWluZXIiLCJnZXRQYXJlbnRDb250YWluZXIiLCJhZGRIYW5kbGVyIiwic2V0Q29udHJvbFN0YXRlIiwic3RhdGVIYW5kbGVycyIsInN0Iiwic2V0TGlua0NvbnRyb2xTdGF0ZSIsInNldFdpZGdldENvbnRyb2xTdGF0ZSIsInNldElucHV0Q29udHJvbFN0YXRlIiwic2V0VGV4dENvbnRyb2xTdGF0ZSIsInNldFN0YXRlIiwibGlua1N0YXRlSGFuZGxlcnMiLCJ3aWRnZXRTdGF0ZUhhbmRsZXJzIiwiaW5wdXRTdGF0ZUhhbmRsZXJzIiwidGV4dFN0YXRlSGFuZGxlcnMiLCJWaXN1YWxXb3JsZCIsInVzZUhlbHBlcnMiLCJhbHBoYSIsImFudGlhbGlhcyIsImNzc1NjZW5lIiwidG1wVmVjdG9yIiwib25XaW5kb3dSZXNpemUiLCJhbmltYXRlIiwiZmlsdGVyRGF0YSIsInR5cGVzIiwiY29udGFpbnMiLCJzZXRFeHRyYUxpZ2h0aW5nIiwiZ2V0T3JiaXQiLCJzZXRDb250cm9sc1N0YXRlIiwiZ2V0Q29udHJvbHNTdGF0ZSIsInVwZGF0ZUNhbWVyYSIsInVwZGF0ZVJlbmRlcmVyIiwicmVuZGVyZXIiLCJhZGRDc3NPYmplY3QiLCJyZW1vdmVDc3NPYmplY3QiLCJyZW1vdmVPYmplY3QiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhZGRSZW5kZXJDYWxsYmFjayIsInJlbW92ZVJlbmRlckNhbGxiYWNrIiwiZGVsdGFUaW1lIiwicHJvY2Vzc0dlb21ldHJ5IiwiYnVmR2VvbWV0cnkiLCJtZXNoIiwiaW5kZXhlZEJ1ZmZlckdlb20iLCJjcmVhdGVJbmRleGVkQnVmZmVyR2VvbWV0cnlGcm9tR2VvbWV0cnkiLCJudW1WZXJ0aWNlcyIsIm51bUZhY2VzIiwiYnVmZmVyR2VvbSIsImluZGljZXMiLCJpMyIsImlzRXF1YWwiLCJ4MSIsInoxIiwieDIiLCJ6MiIsImRlbHRhIiwibWFwSW5kaWNlcyIsImlkeFZlcnRpY2VzIiwibnVtSWR4VmVydGljZXMiLCJhc3NvY2lhdGlvbiIsImozIiwib25lTm9kZVBvc2l0aW9uQ2FsbGJhY2siLCJtdWx0eU5vZGVQb3NpdGlvbkNhbGxiYWNrIiwidm9sdW1lUG9zaXRpb25zIiwidm9sdW1lTm9ybWFscyIsImFzc29jVmVydGV4IiwiaW5kZXhWZXJ0ZXgiLCJtdWx0eU5vZGVQb3NpdGlvblBvc3RDYWxsYmFjayIsInBhdGhQb3NpdGlvbkNhbGxiYWNrIiwicG9zaXRpb25zIiwicGF0aFBvc2l0aW9uUG9zdENhbGxiYWNrIiwiV2lkZ2V0Q29udHJvbGxlciIsImZpcmVDaGFuZ2UiLCJDaXJjbGVUYXJnZXQiLCJ0ZXN0SW50ZXJzZWN0aW9uIiwiUG9seVRhcmdldCIsIkdMT0JBTF9MSUJTIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG1EQUEyQyxjQUFjOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2hFQTs7QUFDQUEsbUJBQU9BLENBQUMsQ0FBUjs7a0JBRWVDLE87Ozs7Ozs7Ozs7Ozs7QUNIZixVLENBQUE7QUFDQTs7QUFFQSxVLENBQUE7QUFDQTs7QUFFQSxZQUZBLENBRUE7QUFDQTtBQUNBOztBQUVBLFlBTkEsQ0FNQTtBQUNBO0FBQ0EseUJBREE7QUFFQSxzQkFGQTtBQUdBO0FBQ0EsY0FKQTs7QUFNQSxZQWJBLENBYUE7QUFDQTs7QUFFQSxZQWhCQSxDQWdCQTtBQUNBOztBQUVBLFlBbkJBLENBbUJBO0FBQ0E7QUFDQTtBQUFBOzs7QUFHQSxVLENBQUE7QUFDQTs7QUFFQSxVLENBQUE7QUFDQTs7QUFFQSxVLENBQUE7QUFDQTtBQUEyQztBQUFjLEdBQXpEOztBQUVBLFUsQ0FBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQURBO0FBRUEs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aHdDLE9BQU9XLEtBQTFCLEdBQWlDZCxRQUFRLE9BQVIsQ0FIaEQ7O1FBTVFDLEMsR0FBTkMsRTtRQUNnQlEsVyxHQUFoQk4sWTtRQUNVTyxLLEdBQVZOLE07UUFDVVMsSyxHQUFWTixNIiwiZmlsZSI6Ii4vZGlzdC9mbGlwLWJvb2suanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDA2YmVkNTdhMTRkZWM2OTBiNGFjIiwiaW1wb3J0IHskLCBodG1sMmNhbnZhcywgVEhSRUUsIFBERkpTfSBmcm9tICcuL3NyYy9saWJzJztcbnJlcXVpcmUoJy4vc3JjLycrKEVOVklST01FTlQuZGVidWc/ICczZGZsaXBib29rLmpzJzogJzNkZmxpcGJvb2subWluLmpzJykpO1xuXG5leHBvcnQgZGVmYXVsdCAkO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaW5kZXguanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA3Mik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNzI0ZTU4ZGY1OGM2NWM0ODA4YjRcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovd2VicGFjay9ib290c3RyYXAgNzI0ZTU4ZGY1OGM2NWM0ODA4YjQiLCJjb25zdCBfJCA9IEdMT0JBTF9MSUJTLmpRdWVyeT8gd2luZG93LmpRdWVyeTogcmVxdWlyZSgnanF1ZXJ5JyksXHJcbiAgICAgIF9odG1sMmNhbnZhcyA9IEdMT0JBTF9MSUJTLmh0bWwyY2FudmFzPyB3aW5kb3cuaHRtbDJjYW52YXM6IHJlcXVpcmUoJ2h0bWwyY2FudmFzJyksXHJcbiAgICAgIF9USFJFRSA9IEdMT0JBTF9MSUJTLlRIUkVFPyB3aW5kb3cuVEhSRUU6IHJlcXVpcmUoJ3RocmVlJyksXHJcbiAgICAgIF9SZWFjdCA9IEdMT0JBTF9MSUJTLlJlYWN0PyB3aW5kb3cuUmVhY3Q6IHJlcXVpcmUoJ3JlYWN0JyksXHJcbiAgICAgIF9SZWFjdERPTSA9IEdMT0JBTF9MSUJTLlJlYWN0PyB3aW5kb3cuUmVhY3RET006IHJlcXVpcmUoJ3JlYWN0LWRvbScpLFxyXG4gICAgICBfUERGSlMgPSBHTE9CQUxfTElCUy5QREZKUz8gd2luZG93LlBERkpTOiByZXF1aXJlKCdwZGZqcycpLFxyXG4gICAgICBfdHIgPSAocyk9PiAod2luZG93LmliZXJlemFuc2t5IHx8IHt9KS50ciAmJiB3aW5kb3cuaWJlcmV6YW5za3kudHIocykgfHwgcztcclxuXHJcbmV4cG9ydCB7XHJcbiAgXyQgYXMgJCxcclxuICBfaHRtbDJjYW52YXMgYXMgaHRtbDJjYW52YXMsXHJcbiAgX1RIUkVFIGFzIFRIUkVFLFxyXG4gIF9SZWFjdCBhcyBSZWFjdCxcclxuICBfUmVhY3RET00gYXMgUmVhY3RET00sXHJcbiAgX1BERkpTIGFzIFBERkpTLFxyXG4gIF90ciBhcyB0clxyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vbGlicy5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9saWJzLmpzIiwiY29uc3QgXyQgPSBHTE9CQUxfTElCUy5qUXVlcnk/IHdpbmRvdy5qUXVlcnk6IHJlcXVpcmUoJ2pxdWVyeScpLFxyXG4gICAgICBfaHRtbDJjYW52YXMgPSBHTE9CQUxfTElCUy5odG1sMmNhbnZhcz8gd2luZG93Lmh0bWwyY2FudmFzOiByZXF1aXJlKCdodG1sMmNhbnZhcycpLFxyXG4gICAgICBfVEhSRUUgPSBHTE9CQUxfTElCUy5USFJFRT8gd2luZG93LlRIUkVFOiByZXF1aXJlKCd0aHJlZScpLFxyXG4gICAgICBfUERGSlMgPSBHTE9CQUxfTElCUy5QREZKUz8gd2luZG93LlBERkpTOiByZXF1aXJlKCdwZGZqcycpLFxyXG4gICAgICBfdHIgPSAocyk9PiAod2luZG93LmliZXJlemFuc2t5IHx8IHt9KS50ciAmJiB3aW5kb3cuaWJlcmV6YW5za3kudHIocykgfHwgcztcclxuXHJcbmlmKHdpbmRvdy5GQjNEX0xPQ0FMRSkge1xyXG4gIHdpbmRvdy5pYmVyZXphbnNreSA9IHtcclxuICAgIC4uLndpbmRvdy5pYmVyZXphbnNreSxcclxuICAgIHRyOiAocyk9PiAoRkIzRF9MT0NBTEUuZGljdGlvbmFyeSB8fCB7fSlbc10gfHwgc1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgXyQgYXMgJCxcclxuICBfaHRtbDJjYW52YXMgYXMgaHRtbDJjYW52YXMsXHJcbiAgX1RIUkVFIGFzIFRIUkVFLFxyXG4gIF9QREZKUyBhcyBQREZKUyxcclxuICBfdHIgYXMgdHJcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbGlicy5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2xpYnMuanMiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlTWF0aFV0aWxzIHtcclxuICBzdGF0aWMgc3VtID0gW0Jhc2VNYXRoVXRpbHMuc3VtMSwgQmFzZU1hdGhVdGlscy5zdW0yLCBCYXNlTWF0aFV0aWxzLnN1bTMsIEJhc2VNYXRoVXRpbHMuc3VtNF07XHJcbiAgc3RhdGljIGVwcyA9IDFlLTQ7XHJcblxyXG4gIHN0YXRpYyBzdW0xKGthLGEsa2IsYikge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAga2EqYVswXStrYipiWzBdXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHN1bTIoa2EsYSxrYixiKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBrYSphWzBdK2tiKmJbMF0sXHJcbiAgICAgIGthKmFbMV0ra2IqYlsxXVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzdW0zKGthLGEsa2IsYikge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAga2EqYVswXStrYipiWzBdLFxyXG4gICAgICBrYSphWzFdK2tiKmJbMV0sXHJcbiAgICAgIGthKmFbMl0ra2IqYlsyXVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzdW00KGthLGEsa2IsYikge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAga2EqYVswXStrYipiWzBdLFxyXG4gICAgICBrYSphWzFdK2tiKmJbMV0sXHJcbiAgICAgIGthKmFbMl0ra2IqYlsyXSxcclxuICAgICAga2EqYVszXStrYipiWzNdXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJrNChkeSwgdCwgZHQsIHksIHN1bT1CYXNlTWF0aFV0aWxzLnN1bVt5Lmxlbmd0aC0xXSkge1xyXG4gICAgY29uc3QgazE9ZHkodCx5KSxcclxuICAgICAgICAgIGsyPWR5KHQrZHQvMixzdW0oMSx5LGR0LzIsazEpKSxcclxuICAgICAgICAgIGszPWR5KHQrZHQvMixzdW0oMSx5LGR0LzIsazIpKSxcclxuICAgICAgICAgIGs0PWR5KHQrZHQsc3VtKDEseSxkdCxrMykpO1xyXG4gICAgcmV0dXJuIHN1bSgxLHksZHQvNixzdW0oMSxzdW0oMSxrMSwyLGsyKSwxLHN1bSgyLGszLDEsazQpKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZXh0cmFwb2xhdGVMaW5lYXIoeCx5LHhpKSB7XHJcbiAgICByZXR1cm4geVswXSsoeVsxXS15WzBdKS8oeFsxXS14WzBdKSooeGkteFswXSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaW50ZXJwb2xhdGVMaW5lYXIoeCx5LHhpKSB7XHJcbiAgICBsZXQgeWk7XHJcbiAgICBpZih4WzBdPnhbMV0pIHtcclxuICAgICAgeD14LnJldmVyc2UoKTtcclxuICAgICAgeT15LnJldmVyc2UoKTtcclxuICAgIH1cclxuICAgIGlmKHhpPHhbMF0pIHtcclxuICAgICAgeWk9eVswXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoeGk+eFsxXSkge1xyXG4gICAgICB5aT15WzFdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHlpPUJhc2VNYXRoVXRpbHMuZXh0cmFwb2xhdGVMaW5lYXIoeCx5LHhpKTtcclxuICAgIH1cclxuICAgIHJldHVybiB5aTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjYWxjU2NhbGUoc3JjVywgc3JjSCwgZHN0VywgZHN0SCkge1xyXG4gICAgcmV0dXJuIE1hdGgubWluKGRzdFcvc3JjVywgZHN0SC9zcmNIKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBtdWxNKGEsIGIpIHtcclxuICAgIGNvbnN0IHI9W107XHJcbiAgICBmb3IobGV0IGk9MDtpPGEubGVuZ3RoOysraSkge1xyXG4gICAgICByLnB1c2goW10pO1xyXG4gICAgICBmb3IobGV0IGo9MDtqPGJbMF0ubGVuZ3RoOysraikge1xyXG4gICAgICAgIHJbaV1bal0gPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaz0wO2s8Yi5sZW5ndGg7KytrKSB7XHJcbiAgICAgICAgICByW2ldW2pdKz1hW2ldW2tdKmJba11bal07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB0cmFuc00obSkge1xyXG4gICAgY29uc3Qgcj1bXTtcclxuICAgIGZvcihsZXQgaT0wO2k8bS5sZW5ndGg7KytpKSB7XHJcbiAgICAgIGZvcihsZXQgaj0wO2o8bVswXS5sZW5ndGg7KytqKSB7XHJcbiAgICAgICAgaWYoIXJbal0pIHtcclxuICAgICAgICAgIHJbal09W107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJbal1baV09bVtpXVtqXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHI7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbWF0KGRhdGEpIHtcclxuICAgIGxldCBzPTA7XHJcbiAgICBmb3IobGV0IHggb2YgZGF0YSkge1xyXG4gICAgICBzKz14O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHMvZGF0YS5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZGlzcChkYXRhKSB7XHJcbiAgICBjb25zdCBNPUJhc2VNYXRoVXRpbHMubWF0KGRhdGEpO1xyXG4gICAgbGV0IHM9MDtcclxuICAgIGZvcihsZXQgeCBvZiBkYXRhKSB7XHJcbiAgICAgIHMrPSh4LU0pKih4LU0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHMvZGF0YS5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcHJlZGljdChkYXRhLCBudW0pIHtcclxuICAgIGNvbnN0IHI9W10sIGw9ZGF0YS5sZW5ndGgsIEQ9QmFzZU1hdGhVdGlscy5kaXNwKGRhdGEpO1xyXG4gICAgaWYoRDxsICYmIGw+MSkge1xyXG4gICAgICBjb25zdCBhbT1bXSwgYm09W107XHJcbiAgICAgIGZvcihsZXQgaT0wO2k8bDsrK2kpIHtcclxuICAgICAgICBhbS5wdXNoKFtpLDFdKTtcclxuICAgICAgICBibS5wdXNoKFtkYXRhW2ldXSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdGE9QmFzZU1hdGhVdGlscy50cmFuc00oYW0pLCBhPUJhc2VNYXRoVXRpbHMubXVsTSh0YSxhbSksIGI9QmFzZU1hdGhVdGlscy5tdWxNKHRhLGJtKSxcclxuICAgICAgZD0oYVswXVswXSphWzFdWzFdLWFbMV1bMF0qYVswXVsxXSksXHJcbiAgICAgIHA9W1xyXG4gICAgICAgIC0oYVswXVsxXSpiWzFdWzBdLWJbMF1bMF0qYVsxXVsxXSkvZCxcclxuICAgICAgICAoYVswXVswXSpiWzFdWzBdLWFbMV1bMF0qYlswXVswXSkvZFxyXG4gICAgICBdO1xyXG4gICAgICBmb3IobGV0IGk9MDtpPG51bTsrK2kpIHtcclxuICAgICAgICBjb25zdCB2ID0gTWF0aC5yb3VuZChwWzBdKihpK2wpK3BbMV0pO1xyXG4gICAgICAgIGlmKHIuaW5kZXhPZih2KT09PS0xKSB7XHJcbiAgICAgICAgICByLnB1c2godik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRVbmlxdWUoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKDFlOSpNYXRoLnJhbmRvbSgpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRTcGxpbmVQb2ludHMoc3BsaW5lLCBwcykge1xyXG4gICAgaWYoc3BsaW5lLnBvaW50cy5sZW5ndGghPT1wcy54Lmxlbmd0aCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ3NldFNwbGluZVBvaW50czogYmFkIHBvaW50cycpO1xyXG4gICAgfVxyXG4gICAgZm9yKGxldCBpPTA7IGk8c3BsaW5lLnBvaW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICBzcGxpbmUucG9pbnRzW2ldLnNldChwcy54W2ldLCBwcy55W2ldLCBwcy56PyBwcy56W2ldOiAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBtYXBsMkwobHMsIGxlbiwgbiwgZikge1xyXG4gICAgY29uc3QgZEwgPSBsZW4vKG4tMSk7XHJcbiAgICBsZXQgTD0wO1xyXG4gICAgZm9yKGxldCBpPTAsIGQ9bHNbMF07IGk8bHMubGVuZ3RoLTEgJiYgTDxsZW4rMC4xKmRMOyArK2ksIGQrPWxzW2ldKSB7XHJcbiAgICAgIGlmKE1hdGguYWJzKEwtZCk8TWF0aC5hYnMoTC1kLWxzW2krMV0pKSB7XHJcbiAgICAgICAgZihpLCBMKTtcclxuICAgICAgICBMKz1kTDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYoTDxsZW4rMC4xKmRMKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignbWFwbDJMOiBscyBpcyBub3QgZW5vdWdodCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGRldDIoYSxiLGMsZCkge1xyXG4gICAgcmV0dXJuIGEqZC1iKmM7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc29sdmUyTGluKGExLGIxLGEyLGIyKSB7XHJcbiAgICBsZXQgcmVzO1xyXG4gICAgY29uc3QgZD1CYXNlTWF0aFV0aWxzLmRldDIoYTFbMF0sYTFbMV0sYTJbMF0sYTJbMV0pO1xyXG4gICAgaWYoTWF0aC5hYnMoZCk+QmFzZU1hdGhVdGlscy5lcHMpIHtcclxuICAgICAgY29uc3QgZHg9QmFzZU1hdGhVdGlscy5kZXQyKGIxLGExWzFdLGIyLGEyWzFdKSwgZHk9QmFzZU1hdGhVdGlscy5kZXQyKGExWzBdLGIxLGEyWzBdLGIyKTtcclxuICAgICAgcmVzID0ge1xyXG4gICAgICAgIHg6IGR4L2QsXHJcbiAgICAgICAgeTogZHkvZFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0luc2lkZVBvbHkocHMsIHApIHtcclxuICAgIGxldCBkb25lID0gZmFsc2UsIGN0O1xyXG4gICAgZm9yKGxldCBpPTA7IGk8cHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgaWYoQmFzZU1hdGhVdGlscy52MmRpc3QocCwgcHNbaV0pPEJhc2VNYXRoVXRpbHMuZXBzKSB7XHJcbiAgICAgICAgY3Q9MTtcclxuICAgICAgICBkb25lID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgd2hpbGUoIWRvbmUpIHtcclxuICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgIGN0ID0gMDtcclxuICAgICAgbGV0IG5wID0ge3g6IHAueCtNYXRoLnJhbmRvbSgpLTAuNSwgeTogcC55K01hdGgucmFuZG9tKCktMC41fSwgcm4gPSB7eDogbnAueC1wLngsIHk6IG5wLnktcC55fSwgYTE9W3JuLnksIC1ybi54XSwgYjE9cC54KnJuLnktcC55KnJuLng7XHJcbiAgICAgIGZvcihsZXQgaT0wOyBpPHBzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgcDA9cHNbaV0sIHAxPXBzWyhpKzEpJXBzLmxlbmd0aF0sIG4gPSB7eDogcDEueC1wMC54LCB5OiBwMS55LXAwLnl9LCBhMj1bbi55LCAtbi54XSwgYjI9cDAueCpuLnktcDAueSpuLngsXHJcbiAgICAgICAgICBpcCA9IEJhc2VNYXRoVXRpbHMuc29sdmUyTGluKGExLGIxLGEyLGIyKTtcclxuICAgICAgICBpZihpcCkge1xyXG4gICAgICAgICAgaWYoQmFzZU1hdGhVdGlscy52MmRpc3QoaXAsIHAwKTxCYXNlTWF0aFV0aWxzLmVwcyB8fCBCYXNlTWF0aFV0aWxzLnYyZGlzdChpcCwgcDEpPEJhc2VNYXRoVXRpbHMuZXBzKSB7XHJcbiAgICAgICAgICAgIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmKGlwLng+TWF0aC5taW4ocDAueCxwMS54KS1CYXNlTWF0aFV0aWxzLmVwcyYmaXAueDxNYXRoLm1heChwMC54LHAxLngpK0Jhc2VNYXRoVXRpbHMuZXBzICYmXHJcbiAgICAgICAgICAgICAgICAgIGlwLnk+TWF0aC5taW4ocDAueSxwMS55KS1CYXNlTWF0aFV0aWxzLmVwcyYmaXAueTxNYXRoLm1heChwMC55LHAxLnkpK0Jhc2VNYXRoVXRpbHMuZXBzKSB7XHJcbiAgICAgICAgICAgIGlmKEJhc2VNYXRoVXRpbHMudjJkaXN0KGlwLCBwKTxCYXNlTWF0aFV0aWxzLmVwcykge1xyXG4gICAgICAgICAgICAgIGN0PTE7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdG49e3g6IGlwLngtcC54LCB5OiBpcC55LXAueX07XHJcbiAgICAgICAgICAgICAgY3QgKz0gdG4ueCpybi54K3RuLnkqcm4ueT4wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3QlMjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0luc2lkZUNvbnZQb2x5KHBzLCBwKSB7XHJcbiAgICBsZXQgc2cgPSBbMCwgMF07XHJcbiAgICBmb3IobGV0IGk9MDsgaTxwcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICBjb25zdCBwMD1wc1tpXSwgcDE9cHNbKGkrMSklcHMubGVuZ3RoXSwgYT17eDogcDAueC1wLngsIHk6IHAwLnktcC55fSwgYj17eDogcDEueC1wLngsIHk6IHAxLnktcC55fTtcclxuICAgICAgKytzZ1soYS54KmIueS1hLnkqYi54PDApKzBdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIH5zZy5pbmRleE9mKHBzLmxlbmd0aCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdjJsZW4odjIpIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQodjIueCp2Mi54K3YyLnkqdjIueSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdjJkaXN0KHYyMSwgdjIyKSB7XHJcbiAgICByZXR1cm4gQmFzZU1hdGhVdGlscy52Mmxlbih7XHJcbiAgICAgIHg6IHYyMi54LXYyMS54LFxyXG4gICAgICB5OiB2MjIueS12MjEueVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY29tcHV0ZVNxdWFyZShwcykge1xyXG4gICAgY29uc3QgYSA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8cHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgYS5wdXNoKEJhc2VNYXRoVXRpbHMudjJkaXN0KHBzW2ldLCBwc1soaSsxKSVwcy5sZW5ndGhdKSk7XHJcbiAgICAgIHAgKz0gMC41KmFbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHAqKHAtYVswXSkqKHAtYVsxXSkqKHAtYVsyXSkpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNvbXB1dGVJbnRlcnBDb2Vmcyh0cmksIHApIHtcclxuICAgIGNvbnN0IHMgPSBCYXNlTWF0aFV0aWxzLmNvbXB1dGVTcXVhcmUodHJpKSwgY29lZnM9W10sIGwgPSB0cmkubGVuZ3RoO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8bDsgKytpKSB7XHJcbiAgICAgIGNvZWZzW2ldID0gQmFzZU1hdGhVdGlscy5jb21wdXRlU3F1YXJlKFtwLCB0cmlbKGkrMSklbF0sIHRyaVsoaSsyKSVsXV0pL3M7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29lZnM7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9CYXNlTWF0aFV0aWxzLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQmFzZU1hdGhVdGlscy5qcyIsImltcG9ydCB7VEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgQmFzZU1hdGhVdGlscyBmcm9tICcuL0Jhc2VNYXRoVXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWF0aFV0aWxzIGV4dGVuZHMgQmFzZU1hdGhVdGlscyB7XHJcbiAgc3RhdGljIHYxID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHJcbiAgc3RhdGljIHNwbGl0U3BsaW5lKHNwbGluZSwgTikge1xyXG4gICAgY29uc3QgbyA9IHtsZW46IDAsIGxzOiBbMF19LCBkbD0xL047XHJcbiAgICBmb3IobGV0IGk9MDsgaTw9TjsgKytpKSB7XHJcbiAgICAgIGNvbnN0IHAgPSBzcGxpbmUuZ2V0UG9pbnQoaSpkbCk7XHJcbiAgICAgIGlmKGkpIHtcclxuICAgICAgICBjb25zdCBkID0gTWF0aFV0aWxzLnYxLmRpc3RhbmNlVG8ocCk7XHJcbiAgICAgICAgby5sZW4gKz0gZDtcclxuICAgICAgICBvLmxzLnB1c2goZCk7XHJcbiAgICAgIH1cclxuICAgICAgTWF0aFV0aWxzLnYxLmNvcHkocCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRMaW5lYXJJbmRlY2VzKHNwbGluZSwgbikge1xyXG4gICAgY29uc3QgZGVsID0gNTAwMCwgZERlbCA9IDEvZGVsO1xyXG4gICAgY29uc3QgbHM9WzBdO1xyXG4gICAgbGV0IGwgPSAwO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8PWRlbDsgKytpKSB7XHJcbiAgICAgIGNvbnN0IHAgPSBzcGxpbmUuZ2V0UG9pbnQoaSpkRGVsKTtcclxuICAgICAgaWYoaSkge1xyXG4gICAgICAgIGNvbnN0IGQ9TWF0aFV0aWxzLnYxLmRpc3RhbmNlVG8ocCk7XHJcbiAgICAgICAgbCArPSBkO1xyXG4gICAgICAgIGxzLnB1c2goZCk7XHJcbiAgICAgIH1cclxuICAgICAgTWF0aFV0aWxzLnYxLmNvcHkocCk7XHJcbiAgICB9XHJcbiAgICBscy5wdXNoKDFlNyk7XHJcblxyXG4gICAgY29uc3QgcmVzID0gW10sIGRsID0gbC8obi0xKTtcclxuICAgIGZvcihsZXQgaT0wLCBMPTAsIGQ9bHNbMF07IGk8bHMubGVuZ3RoLTE7ICsraSwgZCs9bHNbaV0pIHtcclxuICAgICAgaWYoTWF0aC5hYnMoTC1kKTxNYXRoLmFicyhMLWQtbHNbaSsxXSkpIHtcclxuICAgICAgICByZXMucHVzaChpKmREZWwpO1xyXG4gICAgICAgIEwrPWRsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIHN0YXRpYyByZWZpbmVQb2x5KHBvbHksIG1heERsKSB7XHJcbiAgICBjb25zdCByZXMgPSBbXTtcclxuICAgIGZvcihsZXQgaT0wOyBpPHBvbHkubGVuZ3RoOyArK2kpIHtcclxuICAgICAgY29uc3QgcDAgPSBwb2x5W2ldLCBwMSA9IHBvbHlbKGkrMSklcG9seS5sZW5ndGhdLCBsID0gQmFzZU1hdGhVdGlscy52MmRpc3QocDAsIHAxKSwgbiA9IE1hdGguY2VpbChsL21heERsKSwgZGwgPSBsL247XHJcbiAgICAgIHJlcy5wdXNoKHAwKTtcclxuICAgICAgZm9yKGxldCBqPTE7IGo8bjsgKytqKSB7XHJcbiAgICAgICAgcmVzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjIoXHJcbiAgICAgICAgICBwMC54K2oqZGwqKHAxLngtcDAueCkvbCxcclxuICAgICAgICAgIHAwLnkraipkbCoocDEueS1wMC55KS9sXHJcbiAgICAgICAgKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9NYXRoVXRpbHMuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9NYXRoVXRpbHMuanMiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVdGlscyB7XHJcblxyXG4gIHN0YXRpYyBub3JtYWxpemVVcmwodXJsKSB7XHJcbiAgICBmdW5jdGlvbiBzcGxpdChzKSB7XHJcbiAgICAgIHJldHVybiBzLnJlcGxhY2UoL1xcXFwvZywgJy8nKS5zcGxpdCgnLycpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYmFzZSA9IHNwbGl0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuICAgIHVybCA9IHNwbGl0KHVybCk7XHJcbiAgICBpZihiYXNlWzJdPT09dXJsWzJdKSB7XHJcbiAgICAgIHVybFswXSA9IGJhc2VbMF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXJsLmpvaW4oJy8nKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBleHRlbmRzKGRlciwgYmFzZSkge1xyXG4gICAgZm9yKGxldCBuYW1lIGluIGJhc2UpIHtcclxuICAgICAgaWYoIWRlci5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIGRlcltuYW1lXSA9IGJhc2VbbmFtZV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBkZWZhdWx0Q21wKGEsIGIpIHtcclxuICAgIHJldHVybiBhLWI7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbG93ZXJCb3VuZChhLCB4LCBjbXApIHtcclxuICAgIGNtcCA9IGNtcCB8fCBVdGlscy5kZWZhdWx0Q21wO1xyXG4gICAgbGV0IGwgPSAwLCBoID0gYS5sZW5ndGgtMTtcclxuICAgIHdoaWxlKGgtbD4xKSB7XHJcbiAgICAgIGxldCBtaWQgPSBNYXRoLmZsb29yKChsICsgaCkgLyAyKTtcclxuICAgICAgaWYoY21wKHgsIGFbbWlkXSk8MCkge1xyXG4gICAgICAgIGggPSBtaWQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgbCA9IG1pZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNtcCh4LCBhW2hdKT49MD8gaDogbDtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1V0aWxzLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVXRpbHMuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgR3JhcGhVdGlscyBmcm9tICcuL0dyYXBoVXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VCYXNlIHtcclxuXHJcbiAgc3RhdGljIHJlbmRlckNhbnZhcyA9ICAkKCc8Y2FudmFzPicpWzBdO1xyXG4gIHN0YXRpYyByZW5kZXJDYW52YXNDdHggPSBJbWFnZUJhc2UucmVuZGVyQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQsIGNvbG9yKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgdGhpcy53bmQgPSBjb250ZXh0LnduZDtcclxuICAgIHRoaXMuZG9jID0gY29udGV4dC5kb2M7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBjb250ZXh0LmVsZW1lbnQgfHwgY29udGV4dC5kb2MuYm9keTtcclxuICAgIHRoaXMuYyA9IGNvbnRleHQucmVuZGVyQ2FudmFzIHx8IEltYWdlQmFzZS5yZW5kZXJDYW52YXM7XHJcbiAgICB0aGlzLmN0eCA9IGNvbnRleHQucmVuZGVyQ2FudmFzQ3R4IHx8IEltYWdlQmFzZS5yZW5kZXJDYW52YXNDdHg7XHJcbiAgICB0aGlzLnJlc1cgPSB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICB0aGlzLnJlc0ggPSB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcclxuICB9XHJcblxyXG4gIHNldFJlc29sdXRpb24ocmVzKSB7XHJcbiAgICB0aGlzLnJlc1cgPSByZXMud2lkdGg7XHJcbiAgICB0aGlzLnJlc0ggPSByZXMuaGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuXHJcbiAgfVxyXG5cclxuICByZW5kZXJCbGFua1BhZ2UoKSB7XHJcbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IEdyYXBoVXRpbHMuY29sb3IyUmdiYSh0aGlzLmNvbG9yLCAxKTtcclxuICAgIHRoaXMuY3R4LnJlY3QoMCwgMCwgdGhpcy5jLndpZHRoLCB0aGlzLmMuaGVpZ2h0KTtcclxuICAgIHRoaXMuY3R4LmZpbGwoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckltYWdlKGltYWdlKSB7XHJcbiAgICB0aGlzLnB1c2hDdHgoKTtcclxuICAgIHRoaXMuY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XHJcbiAgICB0aGlzLnBvcEN0eCgpO1xyXG4gIH1cclxuXHJcbiAgbm9ybVRvQ29udihwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiBwLngqdGhpcy5jLndpZHRoLFxyXG4gICAgICB5OiAoMS1wLnkpKnRoaXMuYy5oZWlnaHRcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByZW5kZXJIaXQocG9seSkge1xyXG4gICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LDI1NSwwLDAuNCknO1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgbGV0IHAgPSB0aGlzLm5vcm1Ub0NvbnYocG9seVswXSk7XHJcbiAgICBjdHgubW92ZVRvKHAueCwgcC55KTtcclxuICAgIGZvcihsZXQgaT0xOyBpPHBvbHkubGVuZ3RoOyArK2kpIHtcclxuICAgICAgcCA9IHRoaXMubm9ybVRvQ29udihwb2x5W2ldKTtcclxuICAgICAgY3R4LmxpbmVUbyhwLngsIHAueSk7XHJcbiAgICB9XHJcbiAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICBjdHguZmlsbCgpO1xyXG4gIH1cclxuXHJcbiAgcHVzaEN0eCgpIHtcclxuICAgIGlmKHRoaXMucmVzVyE9dGhpcy5jLndpZHRoKSB7XHJcbiAgICAgIHRoaXMuYy53aWR0aCA9IHRoaXMucmVzVztcclxuICAgIH1cclxuICAgIGlmKHRoaXMucmVzSCE9dGhpcy5jLmhlaWdodCkge1xyXG4gICAgICB0aGlzLmMuaGVpZ2h0ID0gdGhpcy5yZXNIO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jdHguc2F2ZSgpO1xyXG4gICAgdGhpcy5jdHguc2NhbGUodGhpcy5jLndpZHRoL3RoaXMud2lkdGgsIHRoaXMuYy5oZWlnaHQvdGhpcy5oZWlnaHQpO1xyXG4gICAgcmV0dXJuIHRoaXMuY3R4O1xyXG4gIH1cclxuXHJcbiAgcG9wQ3R4KCkge1xyXG4gICAgdGhpcy5jdHgucmVzdG9yZSgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTm90Rm91bmRQYWdlKCkge1xyXG4gICAgdGhpcy5yZW5kZXJCbGFua1BhZ2UoKTtcclxuICB9XHJcblxyXG4gIGZpbmlzaFJlbmRlcigpIHtcclxuICAgIGlmKHRoaXMub25DaGFuZ2UpIHtcclxuICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLmMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmluaXNoTG9hZCgpIHtcclxuICAgIGlmKHRoaXMub25Mb2FkKSB7XHJcbiAgICAgIHRoaXMub25Mb2FkKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5zdGFydFJlbmRlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0U2ltdWxhdGVkRG9jKCkge1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0ltYWdlQmFzZS5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0ltYWdlQmFzZS5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFdmVudENvbnZlcnRlciB7XHJcblxyXG4gIC8vIHZpcnR1YWxzXHJcbiAgLy8gZ2V0T2JqZWN0KGUsIGRhdGEpO1xyXG4gIC8vIGdldENhbGxiYWNrKG9iamVjdCk7XHJcbiAgLy8gdGVzdChvYmplY3QxLCBvYmplY3QxKTtcclxuXHJcbiAgY29uc3RydWN0b3Iod25kLCBkb2MpIHtcclxuICAgIHRoaXMud25kID0gd25kO1xyXG4gICAgdGhpcy5kb2MgPSBkb2M7XHJcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgc2V0RW5hYmxlKHZsKSB7XHJcbiAgICBpZighdmwpIHtcclxuICAgICAgaWYodGhpcy5tQ2FwT2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkodGhpcy5tQ2FwT2JqZWN0LCAkLkV2ZW50KCdtb3VzZXVwJyksICdtb3VzZXVwJyk7XHJcbiAgICAgICAgdGhpcy5tQ2FwT2JqZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMubUhvdk9iamVjdCkge1xyXG4gICAgICAgIHRoaXMubm90aWZ5KHRoaXMubUhvdk9iamVjdCwgJC5FdmVudCgnbW91c2VvdXQnKSwgJ21vdXNlb3V0Jyk7XHJcbiAgICAgICAgdGhpcy5tSG92T2JqZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmVuYWJsZWQgPSB2bDtcclxuICB9XHJcblxyXG4gIGdldENhbGxiYWNrKG9iamVjdCkge1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIG5vdGlmeShvYmplY3QsIGUsIHR5cGUpIHtcclxuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5nZXRDYWxsYmFjayhvYmplY3QpO1xyXG4gICAgaWYoY2FsbGJhY2spIHtcclxuICAgICAgY29uc3QgcHJvcHMgPSB7XHJcbiAgICAgICAgLi4uZSxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIHZpZXc6IHRoaXMud25kXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGpFID0gJC5FdmVudCh0eXBlLCBwcm9wcyk7XHJcbiAgICAgIGNhbGxiYWNrKGpFLCBvYmplY3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29udmVydChlLCBkYXRhKSB7XHJcbiAgICBpZighdGhpcy5lbmFibGVkKSByZXR1cm47XHJcblxyXG4gICAgaWYodGhpcy5maWx0ZXIpIHtcclxuICAgICAgZSA9IHRoaXMuZmlsdGVyKHRoaXMuZWxlbWVudCwgZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb2JqZWN0ID0gdGhpcy5nZXRPYmplY3QoZSwgZGF0YSksXHJcbiAgICAgIG5vdGlmeSA9IH5lLnR5cGUuaW5kZXhPZigndG91Y2gnKT8gdGhpcy5jb252ZXJ0VG91Y2goZSwgZGF0YSwgb2JqZWN0KTogdGhpcy5jb252ZXJ0TW91c2UoZSwgZGF0YSwgb2JqZWN0KTtcclxuICAgIGlmKG5vdGlmeSAmJiBvYmplY3QpIHtcclxuICAgICAgdGhpcy5ub3RpZnkob2JqZWN0LCBlLCBlLnR5cGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29udmVydFRvdWNoKGUsIGRhdGEsIG9iamVjdCkge1xyXG4gICAgbGV0IG5vdGlmeSA9IHRydWU7XHJcbiAgICBzd2l0Y2goZS50eXBlKSB7XHJcbiAgICAgIGNhc2UgJ3RvdWNoc3RhcnQnOiB7XHJcbiAgICAgICAgaWYodGhpcy50Q2FwT2JqZWN0KSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeSh0aGlzLnRDYXBPYmplY3QsIGUsICd0b3VjaGVuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRDYXBPYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAndG91Y2hlbmQnOiB7XHJcbiAgICAgICAgaWYodGhpcy50Q2FwT2JqZWN0ICYmICF0aGlzLnRlc3QodGhpcy50Q2FwT2JqZWN0LCBvYmplY3QpKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeSh0aGlzLnRDYXBPYmplY3QsIGUsICd0b3VjaGVuZCcpO1xyXG4gICAgICAgICAgbm90aWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYob2JqZWN0ICYmIHRoaXMudGVzdCh0aGlzLnRDYXBPYmplY3QsIG9iamVjdCkpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5KG9iamVjdCwgZSwgJ3RvdWNodGFwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudENhcE9iamVjdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICd0b3VjaHRhcCc6IHtcclxuICAgICAgICBub3RpZnkgPSBmYWxzZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vdGlmeTtcclxuICB9XHJcblxyXG4gIGNvbnZlcnRNb3VzZShlLCBkYXRhLCBvYmplY3QpIHtcclxuICAgIGxldCBub3RpZnkgPSB0cnVlO1xyXG4gICAgc3dpdGNoKGUudHlwZSkge1xyXG4gICAgICBjYXNlICdtb3VzZWRvd24nOiB7XHJcbiAgICAgICAgaWYodGhpcy5tQ2FwT2JqZWN0KSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeSh0aGlzLm1DYXBPYmplY3QsIGUsICdtb3VzZXVwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubUNhcE9iamVjdCA9IG9iamVjdDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdtb3VzZXVwJzoge1xyXG4gICAgICAgIGlmKHRoaXMubUNhcE9iamVjdCAmJiAhdGhpcy50ZXN0KHRoaXMubUNhcE9iamVjdCwgb2JqZWN0KSkge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkodGhpcy5tQ2FwT2JqZWN0LCBlLCAnbW91c2V1cCcpO1xyXG4gICAgICAgICAgbm90aWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2NsaWNrJzoge1xyXG4gICAgICAgIG5vdGlmeSA9IHRoaXMudGVzdCh0aGlzLm1DYXBPYmplY3QsIG9iamVjdCk7XHJcbiAgICAgICAgdGhpcy5tQ2FwT2JqZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ21vdXNlZW50ZXInOlxyXG4gICAgICBjYXNlICdtb3VzZW92ZXInOlxyXG4gICAgICBjYXNlICdtb3VzZW1vdmUnOiB7XHJcbiAgICAgICAgaWYoIXRoaXMudGVzdCh0aGlzLm1Ib3ZPYmplY3QsIG9iamVjdCkgJiYgdGhpcy5tSG92T2JqZWN0KSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeSh0aGlzLm1Ib3ZPYmplY3QsIGUsICdtb3VzZW91dCcpO1xyXG4gICAgICAgICAgdGhpcy5tSG92T2JqZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighdGhpcy5tSG92T2JqZWN0ICYmIG9iamVjdCkge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkob2JqZWN0LCBlLCAnbW91c2VvdmVyJyk7XHJcbiAgICAgICAgICB0aGlzLm1Ib3ZPYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vdGlmeSA9IGUudHlwZSA9PT0gJ21vdXNlbW92ZSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnbW91c2VsZWF2ZSc6XHJcbiAgICAgIGNhc2UgJ21vdXNlb3V0Jzoge1xyXG4gICAgICAgIGlmKHRoaXMubUhvdk9iamVjdCkge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkodGhpcy5tSG92T2JqZWN0LCBlLCAnbW91c2VvdXQnKTtcclxuICAgICAgICAgIHRoaXMubUhvdk9iamVjdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm90aWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBub3RpZnk7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9FdmVudENvbnZlcnRlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0V2ZW50Q29udmVydGVyLmpzIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JhcGhVdGlscyB7XHJcblxyXG4gIHN0YXRpYyBleHRyYXBvbGF0ZUxpbmVhcih4LHkseGkpIHtcclxuICAgIHJldHVybiB5WzBdKyh5WzFdLXlbMF0pLyh4WzFdLXhbMF0pKih4aS14WzBdKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpbnRlcnBvbGF0ZTAxKHkxLHkyLHQpIHtcclxuICAgIHJldHVybiBHcmFwaFV0aWxzLmV4dHJhcG9sYXRlTGluZWFyKFswLDFdLFt5MSx5Ml0sdCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0Q29sb3JCeXRlcyhjb2xvcikge1xyXG4gICAgcmV0dXJuIFsoY29sb3I+PjE2KSYweEZGLCAoY29sb3I+PjgpJjB4RkYsIGNvbG9yJjB4RkZdO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGludmVyc2VDb2xvcihjb2xvciwgdD0xKSB7XHJcbiAgICBjb25zdCBicz1HcmFwaFV0aWxzLmdldENvbG9yQnl0ZXMoY29sb3IpLFxyXG4gICAgICAgICAgaWJzPVsweEZGLWJzWzBdLDB4RkYtYnNbMV0sMHhGRi1ic1syXV0sXHJcbiAgICAgICAgICBuYnM9W01hdGgucm91bmQoR3JhcGhVdGlscy5pbnRlcnBvbGF0ZTAxKGJzWzBdLGlic1swXSx0KSksTWF0aC5yb3VuZChHcmFwaFV0aWxzLmludGVycG9sYXRlMDEoYnNbMV0saWJzWzFdLHQpKSxNYXRoLnJvdW5kKEdyYXBoVXRpbHMuaW50ZXJwb2xhdGUwMShic1syXSxpYnNbMl0sdCkpXTtcclxuICAgIHJldHVybiBHcmFwaFV0aWxzLmJ5dGVzMkNvbG9yKG5icyk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY29sb3IyUmdiYShjb2xvciwgYSkge1xyXG4gICAgcmV0dXJuIEdyYXBoVXRpbHMuYnl0ZXMyUmdiYShHcmFwaFV0aWxzLmdldENvbG9yQnl0ZXMoY29sb3IpLCBhKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBieXRlczJSZ2JhKGJzLCBhKSB7XHJcbiAgICByZXR1cm4gJ3JnYmEoJyticy5qb2luKCcsJykrJywnK2ErJyknO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGJ5dGVzMkNvbG9yKGJzKSB7XHJcbiAgICByZXR1cm4gYnNbMl18KGJzWzFdPDw4KXwoYnNbMF08PDE2KVxyXG4gIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9HcmFwaFV0aWxzLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvR3JhcGhVdGlscy5qcyIsImltcG9ydCBDYWNoZSBmcm9tICcuL0NhY2hlJztcclxuaW1wb3J0IEJsYW5rSW1hZ2UgZnJvbSAnLi9CbGFua0ltYWdlJztcclxuaW1wb3J0IFN0YXRpY0ltYWdlIGZyb20gJy4vU3RhdGljSW1hZ2UnO1xyXG5pbXBvcnQgUGRmSW1hZ2UgZnJvbSAnLi9QZGZJbWFnZSc7XHJcbmltcG9ydCBJbnRlcmFjdGl2ZUltYWdlIGZyb20gJy4vSW50ZXJhY3RpdmVJbWFnZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZUZhY3Rvcnkge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBjYWNoZSkge1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIHRoaXMuY2FjaGUgPSBjYWNoZSB8fCBuZXcgQ2FjaGUoKTtcclxuICB9XHJcblxyXG4gIGJ1aWxkKGluZm8sIG49MCwgd2lkdGhUZXhlbHM9MjEwLCBoZWlnaHRUZXhlbHM9Mjk3LCBjb2xvcj0weEZGRkZGRiwgaW5qZWN0b3I9dW5kZWZpbmVkKSB7XHJcbiAgICBsZXQgaW1hZ2U7XHJcbiAgICBzd2l0Y2goaW5mby50eXBlKSB7XHJcbiAgICAgIGNhc2UgJ2h0bWwnOiB7XHJcbiAgICAgICAgaW1hZ2UgPSBuZXcgSW50ZXJhY3RpdmVJbWFnZSh0aGlzLmNvbnRleHQsIHdpZHRoVGV4ZWxzLCBoZWlnaHRUZXhlbHMsIGNvbG9yLCBpbmZvLnNyYywgdGhpcy5jYWNoZSwgaW5qZWN0b3IpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2ltYWdlJzoge1xyXG4gICAgICAgIGltYWdlID0gbmV3IFN0YXRpY0ltYWdlKHRoaXMuY29udGV4dCwgd2lkdGhUZXhlbHMsIGhlaWdodFRleGVscywgY29sb3IsIGluZm8uc3JjKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdwZGYnOiB7XHJcbiAgICAgICAgaW1hZ2UgPSBuZXcgUGRmSW1hZ2UodGhpcy5jb250ZXh0LCB3aWR0aFRleGVscywgaGVpZ2h0VGV4ZWxzLCBjb2xvciwgaW5mby5zcmMsIG4pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2JsYW5rJzpcclxuICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgIGltYWdlID0gbmV3IEJsYW5rSW1hZ2UodGhpcy5jb250ZXh0LCB3aWR0aFRleGVscywgaGVpZ2h0VGV4ZWxzLCBjb2xvcik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBpbWFnZTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvSW1hZ2VGYWN0b3J5LmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvSW1hZ2VGYWN0b3J5LmpzIiwiaW1wb3J0IHtwcm9wcyBhcyAgYm9va1Byb3BzfSBmcm9tICcuLi9wcm9wcy9ib29rJztcclxuaW1wb3J0IEJhc2VNYXRoVXRpbHMgZnJvbSAnQmFzZU1hdGhVdGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb29rUHJvcHNCdWlsZGVyIHtcclxuICBjb25zdHJ1Y3RvcihvblJlYWR5KSB7XHJcbiAgICB0aGlzLm9uUmVhZHkgPSBvblJlYWR5O1xyXG4gICAgdGhpcy5kZWZhdWx0cyA9IGJvb2tQcm9wcygpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuXHJcbiAgfVxyXG5cclxuICBjYWxjU2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICBjb25zdCBzY2FsZSA9IEJhc2VNYXRoVXRpbHMuY2FsY1NjYWxlKHdpZHRoLCBoZWlnaHQsIHRoaXMuZGVmYXVsdHMud2lkdGgsIHRoaXMuZGVmYXVsdHMuaGVpZ2h0KTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHdpZHRoOiBzY2FsZSp3aWR0aCxcclxuICAgICAgaGVpZ2h0OiBzY2FsZSpoZWlnaHRcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjYWxjVGV4ZWxzKHdpZHRoLCBoZWlnaHQpIHtcclxuICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5kZWZhdWx0cy5zaGVldCwgc2NhbGUgPSBCYXNlTWF0aFV0aWxzLmNhbGNTY2FsZSh3aWR0aCwgaGVpZ2h0LCBzaGVldC53aWR0aFRleGVscywgc2hlZXQuaGVpZ2h0VGV4ZWxzKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHdpZHRoVGV4ZWxzOiBzY2FsZSp3aWR0aCxcclxuICAgICAgaGVpZ2h0VGV4ZWxzOiBzY2FsZSpoZWlnaHRcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjYWxjUHJvcHMod2lkdGgsIGhlaWdodCkge1xyXG4gICAgdGhpcy5wcm9wcyA9IHtcclxuICAgICAgLi4udGhpcy5kZWZhdWx0cyxcclxuICAgICAgLi4udGhpcy5jYWxjU2l6ZSh3aWR0aCwgaGVpZ2h0KSxcclxuICAgICAgc2hlZXQ6IHtcclxuICAgICAgICAuLi50aGlzLmRlZmF1bHRzLnNoZWV0LFxyXG4gICAgICAgIC4uLnRoaXMuY2FsY1RleGVscyh3aWR0aCwgaGVpZ2h0KVxyXG4gICAgICB9LFxyXG4gICAgICBjb3Zlcjoge1xyXG4gICAgICAgIC4uLnRoaXMuZGVmYXVsdHMuY292ZXIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHBhZ2U6IHtcclxuICAgICAgICAuLi50aGlzLmRlZmF1bHRzLnBhZ2UsXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjYWxjU2hlZXRzKHBhZ2VzKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zaGVldHMgPSBNYXRoLmNlaWwoTWF0aC5tYXgoMCwgcGFnZXMtNCkvMik7XHJcbiAgfVxyXG5cclxuICBnZXRTaGVldHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zaGVldHM7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9wcygpIHtcclxuICAgIHJldHVybiB0aGlzLnByb3BzO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGFnZUNhbGxiYWNrKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYmluZHMucGFnZUNhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgcmVhZHkoKSB7XHJcbiAgICBpZih0aGlzLm9uUmVhZHkpIHtcclxuICAgICAgdGhpcy5vblJlYWR5KHRoaXMuZ2V0UHJvcHMoKSwgdGhpcy5nZXRTaGVldHMoKSwgdGhpcy5nZXRQYWdlQ2FsbGJhY2soKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQm9va1Byb3BzQnVpbGRlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQm9va1Byb3BzQnVpbGRlci5qcyIsImltcG9ydCB7VEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgc2hlZXRCbG9jayBmcm9tICcuLi9tb2RlbHMvc2hlZXRCbG9jayc7XHJcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSAnTWF0aFV0aWxzJztcclxuaW1wb3J0IFRocmVlVXRpbHMgZnJvbSAnVGhyZWVVdGlscyc7XHJcbi8vIGltcG9ydCBUaHJlZU1hcmt1cCBmcm9tICcuL1RocmVlTWFya3VwJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNoZWV0QmxvY2sge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih2aXN1YWwsIHAsIGZpcnN0LCBsYXN0LCBhbmdsZT0wLCBzdGF0ZT0nY2xvc2VkJywgaGVpZ2h0PTApIHtcclxuICAgIHRoaXMudmlzdWFsID0gdmlzdWFsO1xyXG4gICAgdGhpcy5wID0ge1xyXG4gICAgICAuLi5wLFxyXG4gICAgICBmaXJzdCxcclxuICAgICAgbGFzdFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb3BzID0gdGhpcy5nZXRQcm9wcygpO1xyXG5cclxuICAgIGNvbnN0IGxvYWRlZFBvaW50cyA9IHRoaXMubG9hZFBvaW50cygpO1xyXG4gICAgT2JqZWN0LmtleXMobG9hZGVkUG9pbnRzKS5tYXAoKGspPT4ge1xyXG4gICAgICB0aGlzW2tdID0gbG9hZGVkUG9pbnRzW2tdW3Byb3BzLnNoYXBlXSB8fCBsb2FkZWRQb2ludHNba11bMF07XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnBTcGxpbmUgPSBuZXcgVEhSRUUuU3BsaW5lKFtdKTtcclxuICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuaW50ZXJwb2xhdGlvblBvaW50cy54WzBdLmxlbmd0aDsgKytpKSB7XHJcbiAgICBcdHRoaXMucFNwbGluZS5wb2ludHMucHVzaChuZXcgVEhSRUUuVmVjdG9yMygpKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmlTcGxpbmUgPSBuZXcgVEhSRUUuU3BsaW5lKFtdKTtcclxuICAgIGZvcihsZXQgaT0wOyBpPHNoZWV0QmxvY2sucmVzWDsgKytpKSB7XHJcbiAgICBcdHRoaXMuaVNwbGluZS5wb2ludHMucHVzaChuZXcgVEhSRUUuVmVjdG9yMygpKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFTcGxpbmVzID0gW107XHJcblxyXG4gICAgLy90aGlzLnRocmVlID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcblxyXG4gICAgdGhpcy5nZW9tZXRyeSA9IHNoZWV0QmxvY2suZ2VvbWV0cnkuY2xvbmUoKTtcclxuXHJcbiAgICB0aGlzLnAuc2lkZUZhY2VzID0gW3tcclxuICAgICAgICBmaXJzdDogMCxcclxuICAgICAgICBsYXN0OiBzaGVldEJsb2NrLmZhY2VzWzBdXHJcbiAgICAgIH0sIHtcclxuICAgICAgICBmaXJzdDogc2hlZXRCbG9jay5mYWNlc1swXSxcclxuICAgICAgICBsYXN0OiBzaGVldEJsb2NrLmZhY2VzWzFdXHJcbiAgICAgIH1cclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5zaWRlVGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlKCk7XHJcbiAgICB0aGlzLnNpZGVUZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbiAgICB0aGlzLnNpZGVUZXh0dXJlLnJlcGVhdC5zZXQoMCwgbGFzdC1maXJzdCk7XHJcbiAgICB0aGlzLnNpZGVUZXh0dXJlLmltYWdlID0gcHJvcHMuc2lkZVRleHR1cmU7XHJcbiAgICB0aGlzLnNpZGVUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLm1hdGVyaWFscyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe21hcDogdGhpcy5zaWRlVGV4dHVyZX0pLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7bWFwOiB0aGlzLnNpZGVUZXh0dXJlfSksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHttYXA6IHRoaXMuc2lkZVRleHR1cmV9KSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe21hcDogdGhpcy5zaWRlVGV4dHVyZX0pXHJcbiAgICAgICAgICAgICAgICAgIF07XHJcblxyXG4gICAgdGhpcy5wLnNldFRleHR1cmUodGhpcy5tYXRlcmlhbHNbMF0sIDIqZmlyc3QpO1xyXG4gICAgdGhpcy5wLnNldFRleHR1cmUodGhpcy5tYXRlcmlhbHNbMV0sIDIqbGFzdC0xKTtcclxuXHJcbiAgICB0aGlzLm1lc2ggPSBuZXcgVEhSRUUuTWVzaCh0aGlzLmdlb21ldHJ5LCBuZXcgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbCh0aGlzLm1hdGVyaWFscykpO1xyXG4gICAgdGhpcy5tZXNoLmNhc3RTaGFkb3cgPSBmYWxzZTtcclxuICAgIHRoaXMubWVzaC5yZWNlaXZlU2hhZG93ID0gZmFsc2U7XHJcbiAgICAvLyB0aGlzLm1lc2guZnJ1c3R1bUN1bGxlZCA9IHRydWU7XHJcblxyXG4gICAgLy90aGlzLnRocmVlLmFkZCh0aGlzLm1lc2gpO1xyXG4gICAgdGhpcy50aHJlZSA9IHRoaXMubWVzaDtcclxuICAgIHRoaXMudGhyZWUudXNlckRhdGEuc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5tYXJrZXJzID0gW107XHJcbiAgICBpZih0aGlzLnAubWFya2VyLnVzZSkge1xyXG4gICAgICBjb25zdCBsPXRoaXMuZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoO1xyXG4gICAgICBsZXQgaXM7XHJcbiAgICAgIC8vIGlzID0gWzAsIHNoZWV0QmxvY2sucmVzWC0xLCAoc2hlZXRCbG9jay5yZXNaLTEpKnNoZWV0QmxvY2sucmVzWCwgc2hlZXRCbG9jay5yZXNaKnNoZWV0QmxvY2sucmVzWC0xXTtcclxuICAgICAgaXMgPSBBcnJheS5hcHBseSgwLCBBcnJheShsKSkubWFwKChfLCBpKT0+IGkpO1xyXG5cclxuICAgICAgZm9yKGxldCBpIG9mIGlzKSB7XHJcbiAgICAgICAgY29uc3QgbWFya2VyID0gVGhyZWVVdGlscy5jcmVhdGVNYXJrZXIodGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1tpXSwgaTxsLzI/MHhGRjAwMDA6MHgwMEZGMDAsIHRoaXMucC5tYXJrZXIuc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5tYXJrZXJzLnB1c2goe1xyXG4gICAgICAgICAgbWFya2VyLFxyXG4gICAgICAgICAgdmVydGV4OiBpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50aHJlZS5hZGQobWFya2VyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY29ybmVyID0ge1xyXG4gICAgICB1c2U6IHRydWUsXHJcbiAgICAgIGhlaWdodDogMCxcclxuICAgICAgbWF4RGlzdGFuY2U6IDAsXHJcbiAgICAgIHBvaW50czogW10sXHJcbiAgICAgIE9aOiBuZXcgVEhSRUUuVmVjdG9yMygwLDAsMSksXHJcbiAgICAgIGF4aXM6IG5ldyBUSFJFRS5WZWN0b3IzKClcclxuICAgIH07XHJcbiAgICB0aGlzLnNldCgwLCAnY2xvc2VkJywgaGVpZ2h0LCBmaXJzdCwgbGFzdCk7IC8vIGNhbGN1bGF0ZSBjb3JuZXIgcG9pbnRzXHJcblxyXG4gICAgdGhpcy5zZXQoYW5nbGUsIHN0YXRlLCBoZWlnaHQsIGZpcnN0LCBsYXN0KTsgLy8gaW5pdCBwb3NpdGlvblxyXG5cclxuICAgIC8vIGlmKCFTaGVldEJsb2NrLm1hcmt1cCkge1xyXG4gICAgLy8gICBTaGVldEJsb2NrLm1hcmt1cD10cnVlO1xyXG4gICAgLy8gICB0aGlzLm1hcmt1cCA9IG5ldyBUaHJlZU1hcmt1cCh0aGlzLCAwLCBbe1xyXG4gICAgLy8gICAgIHg6IDAsXHJcbiAgICAvLyAgICAgeTogMCxcclxuICAgIC8vICAgfSwge1xyXG4gICAgLy8gICAgIHg6IDAuNSxcclxuICAgIC8vICAgICB5OiAxXHJcbiAgICAvLyAgIH0sIHtcclxuICAgIC8vICAgICB4OiAxLFxyXG4gICAgLy8gICAgIHk6IDBcclxuICAgIC8vICAgfV0ubWFwKChwKT0+bmV3IFRIUkVFLlZlY3RvcjIocC54LCBwLnkpKSwge30pO1xyXG4gICAgLy8gfVxyXG5cclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBmb3IobGV0IG0gb2YgdGhpcy5tYXRlcmlhbHMpIHtcclxuICAgICAgaWYobS5tYXApIHtcclxuICAgICAgICBtLm1hcCA9IG51bGw7XHJcbiAgICAgICAgbS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgbS5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgICBkZWxldGUgdGhpcy5tYXRlcmlhbHM7XHJcbiAgICB0aGlzLmdlb21ldHJ5LmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIGdldFNpemUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wLmxhc3QtdGhpcy5wLmZpcnN0O1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvcHMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi50aGlzLnAucGFnZSxcclxuICAgICAgc2hlZXRzOiB0aGlzLnAuc2hlZXRzXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0VG9wQ2VybmVycygpIHtcclxuICAgIGNvbnN0IG9mZiA9IHRoaXMuYW5nbGU+TWF0aC5QSS8yPyB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aC8yOiAwO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzW29mZl0sXHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1tzaGVldEJsb2NrLnJlc1gtMStvZmZdLFxyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkudmVydGljZXNbKHNoZWV0QmxvY2sucmVzWi0xKSpzaGVldEJsb2NrLnJlc1grb2ZmXSxcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzW3NoZWV0QmxvY2sucmVzWipzaGVldEJsb2NrLnJlc1gtMStvZmZdXHJcbiAgICAgIF07XHJcbiAgfVxyXG5cclxuICBnZXRUb3BTaXplKCkge1xyXG4gICAgLy8gY29uc3QgbD10aGlzLmdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCwgb2ZmID0gdGhpcy5hbmdsZT5NYXRoLlBJLzI/IGwvMjogMCxcclxuICAgIC8vICAgdjAgPSB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzW29mZl0sIHYxID0gdGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1tzaGVldEJsb2NrLnJlc1oqc2hlZXRCbG9jay5yZXNYLTErb2ZmXTtcclxuICAgIC8vIC8vIGlzID0gWzAsIHNoZWV0QmxvY2sucmVzWC0xLCAoc2hlZXRCbG9jay5yZXNaLTEpKnNoZWV0QmxvY2sucmVzWCwgc2hlZXRCbG9jay5yZXNaKnNoZWV0QmxvY2sucmVzWC0xXTtcclxuICAgIC8vIHJldHVybiB7XHJcbiAgICAvLyAgIHdpZHRoOiBNYXRoLmFicyh2MS54LXYwLngpLFxyXG4gICAgLy8gICBoZWlnaHQ6IE1hdGguYWJzKHYxLnotdjAueilcclxuICAgIC8vIH07XHJcbiAgICBjb25zdCB2cyA9IHRoaXMuZ2V0VG9wQ2VybmVycygpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkdGg6IHZzWzBdLmRpc3RhbmNlVG8odnNbMV0pLFxyXG4gICAgICBoZWlnaHQ6IHZzWzBdLmRpc3RhbmNlVG8odnNbMl0pXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0VG9wV29ybGRSb3RhdGlvbihxKSB7XHJcbiAgICBxLnggPSAtTWF0aC5QSS8yO1xyXG4gICAgcmV0dXJuIHE7XHJcbiAgfVxyXG5cclxuICBnZXRUb3BXb3JsZFBvc2l0aW9uKHYpIHtcclxuICAgIGNvbnN0IGw9dGhpcy5nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGgsIG9mZiA9IHRoaXMuYW5nbGU+TWF0aC5QSS8yPyBsLzI6IDAsIHZzID0gW1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkudmVydGljZXNbb2ZmXSxcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzW3NoZWV0QmxvY2sucmVzWC0xK29mZl0sXHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1soc2hlZXRCbG9jay5yZXNaLTEpKnNoZWV0QmxvY2sucmVzWCtvZmZdLFxyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkudmVydGljZXNbc2hlZXRCbG9jay5yZXNaKnNoZWV0QmxvY2sucmVzWC0xK29mZl1cclxuICAgICAgXTtcclxuICAgIHYuc2V0KDAsIDAsIDApO1xyXG4gICAgZm9yKGxldCB2aSBvZiB2cykge1xyXG4gICAgICB2LnggKz0gMC4yNSp2aS54O1xyXG4gICAgICB2LnkgKz0gMC4yNSp2aS55O1xyXG4gICAgICB2LnogKz0gMC4yNSp2aS56O1xyXG4gICAgfVxyXG4gICAgdGhpcy50aHJlZS5sb2NhbFRvV29ybGQodik7XHJcbiAgICByZXR1cm4gdjtcclxuICB9XHJcblxyXG4gIGdldEludGVycG9sYXRpb25Qb2ludHMoaW5kcywgbW9kKSB7XHJcbiAgICBjb25zdCBwcyA9IHt4OiBbXSwgeTogW119LCBLID0gdGhpcy5nZXRQcm9wcygpLndhdmU7XHJcbiAgICBmb3IobGV0IGkgb2YgaW5kcykge1xyXG4gICAgICBwcy54LnB1c2goWy4uLnRoaXMuaW50ZXJwb2xhdGlvblBvaW50cy54W2ldXSk7XHJcbiAgICAgIHBzLnkucHVzaCh+bW9kLmluZGV4T2YoaSk/IHRoaXMuaW50ZXJwb2xhdGlvblBvaW50cy55W2ldLm1hcCgobik9PiBLKm4pOiBbLi4udGhpcy5pbnRlcnBvbGF0aW9uUG9pbnRzLnlbaV1dKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcztcclxuICB9XHJcblxyXG4gIHNldChhbmdsZSwgc3RhdGU9dGhpcy5zdGF0ZSwgaGVpZ2h0PXRoaXMuY29ybmVyLmhlaWdodCwgZmlyc3Q9dGhpcy5wLmZpcnN0LCBsYXN0PXRoaXMucC5sYXN0KSB7XHJcbiAgICBjb25zdCBQSSA9IE1hdGguUEk7XHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICBsZXQgY2xvc2VkQW5nbGUsIGJpbmRlclR1cm47XHJcbiAgICBpZih0eXBlb2YgYW5nbGU9PT0nb2JqZWN0Jykge1xyXG4gICAgICB0aGlzLmFuZ2xlID0gYW5nbGUub3BlbmVkQW5nbGU7XHJcbiAgICAgIGNsb3NlZEFuZ2xlID0gYW5nbGUuY2xvc2VkQW5nbGU7XHJcbiAgICAgIGJpbmRlclR1cm4gPSBhbmdsZS5iaW5kZXJUdXJuPlBJLzI/UEktYW5nbGUuYmluZGVyVHVybjphbmdsZS5iaW5kZXJUdXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuYW5nbGUgPSBhbmdsZTtcclxuICAgIH1cclxuICAgIHRoaXMuY29ybmVyLmhlaWdodCA9IGhlaWdodDtcclxuICAgIGlmKHRoaXMucC5maXJzdCE9PWZpcnN0IHx8IHRoaXMucC5sYXN0IT09bGFzdCkge1xyXG4gICAgICB0aGlzLnNpZGVUZXh0dXJlLnJlcGVhdC5zZXQoMCwgbGFzdC1maXJzdCk7XHJcbiAgICAgIHRoaXMuc2lkZVRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICBpZih0aGlzLnAuZmlyc3QhPT1maXJzdCkge1xyXG4gICAgICAgIHRoaXMucC5zZXRUZXh0dXJlKHRoaXMubWF0ZXJpYWxzWzBdLCAyKmZpcnN0KTtcclxuICAgICAgfVxyXG4gICAgICBpZih0aGlzLnAubGFzdCE9PWxhc3QpIHtcclxuICAgICAgICB0aGlzLnAuc2V0VGV4dHVyZSh0aGlzLm1hdGVyaWFsc1sxXSwgMipsYXN0LTEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnAuZmlyc3QgPSBmaXJzdDtcclxuICAgIHRoaXMucC5sYXN0ID0gbGFzdDtcclxuICAgIGxldCBwb2ludHM7XHJcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMuZ2V0UHJvcHMoKTtcclxuICAgIGlmKHRoaXMuc3RhdGUgPT09ICdjbG9zZWQnKSB7XHJcbiAgICAgIHBvaW50cyA9IHRoaXMuZ2V0SW50ZXJwb2xhdGlvblBvaW50cyh0aGlzLmNsb3NlZEludGVycG9sYXRpb25JbmRlY2VzLCB0aGlzLmNsb3NlZEludGVycG9sYXRpb25JbmRlY2VzKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYodGhpcy5zdGF0ZSA9PT0gJ29wZW5lZCcpIHtcclxuICAgICAgaWYoY2xvc2VkQW5nbGUhPT11bmRlZmluZWQgJiYgTWF0aC5hYnMoY2xvc2VkQW5nbGUtUEkvMik+MWUtMikge1xyXG4gICAgICAgIHBvaW50cyA9IHRoaXMuZ2V0SW50ZXJwb2xhdGlvblBvaW50cyh0aGlzLmZsYXRJbnRlcnBvbGF0aW9uSW5kZWNlcywgW10pO1xyXG4gICAgICAgIGNvbnN0IHBzID0gdGhpcy5nZXRQb2ludHNBdEFuZ2xlKHRoaXMuZ2V0SW50ZXJwb2xhdGlvblBvaW50cyh0aGlzLmNsb3NlZEludGVycG9sYXRpb25JbmRlY2VzLCB0aGlzLmNsb3NlZEludGVycG9sYXRpb25JbmRlY2VzKSwgY2xvc2VkQW5nbGU+UEkvMj9QSS1jbG9zZWRBbmdsZTpjbG9zZWRBbmdsZSk7XHJcbiAgICAgICAgcG9pbnRzLnggPSBbcHMueCwuLi5wb2ludHMueF07XHJcbiAgICAgICAgcG9pbnRzLnkgPSBbcHMueSwuLi5wb2ludHMueV07XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocHMpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHBvaW50cyA9IHRoaXMuZ2V0SW50ZXJwb2xhdGlvblBvaW50cyh0aGlzLm9wZW5lZEludGVycG9sYXRpb25JbmRlY2VzLCB0aGlzLmNsb3NlZEludGVycG9sYXRpb25JbmRlY2VzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGhsLCBociwgb2Zmc2V0ID0gMC41KnByb3BzLnNoZWV0cypwcm9wcy5kZXB0aDtcclxuICAgIGlmKHRoaXMuc3RhdGU9PT0nY2xvc2VkJykge1xyXG4gICAgICBvZmZzZXQgLT0gN2UtNip0aGlzLnAuc2NhbGU7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLmFuZ2xlPD1QSS8yKSB7XHJcbiAgICAgIGhsID0gKHByb3BzLnNoZWV0cy1maXJzdCkqcHJvcHMuZGVwdGg7XHJcbiAgICAgIGhyID0gKHByb3BzLnNoZWV0cy1sYXN0KSpwcm9wcy5kZXB0aDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBobCA9IGZpcnN0KnByb3BzLmRlcHRoO1xyXG4gICAgICBociA9IGxhc3QqcHJvcHMuZGVwdGg7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW5BbmdsZSA9IHRoaXMuYW5nbGU+UEkvMj9QSS10aGlzLmFuZ2xlOnRoaXMuYW5nbGUsIGhBbmdsZSA9IHRoaXMuc3RhdGUgPT09ICdjbG9zZWQnPyBpbkFuZ2xlOiAoYmluZGVyVHVybj09PXVuZGVmaW5lZD8gUEkvMjogYmluZGVyVHVybik7XHJcbiAgICBjb25zdCBbbGVmdCwgcmlnaHRdID0gdGhpcy5nZXRQb2ludHNBdEFuZ2xlQW5kSHMocG9pbnRzLCBpbkFuZ2xlLCBoQW5nbGUsIFtobC9wcm9wcy53aWR0aCwgaHIvcHJvcHMud2lkdGhdKTtcclxuICAgIGlmKHRoaXMuYW5nbGU+UEkvMikge1xyXG4gICAgICB0aGlzLmludmVyc2UobGVmdCk7XHJcbiAgICAgIHRoaXMuaW52ZXJzZShyaWdodCk7XHJcbiAgICAgIG9mZnNldCA9IC1vZmZzZXQ7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFBvaW50cyhsZWZ0LCByaWdodCwgb2Zmc2V0KTtcclxuICB9XHJcblxyXG4gIHNldFBvaW50cyhsZWZ0LCByaWdodCwgb2Zmc2V0KSB7XHJcbiAgICBjb25zdCBwID0gdGhpcy5nZXRQcm9wcygpO1xyXG4gICAgbGV0IGkgPSAwO1xyXG5cclxuICAgIGNvbnN0IHlzID0gW3JpZ2h0LCBsZWZ0XTtcclxuICAgIGZvcihsZXQgeSA9IDA7IHk8c2hlZXRCbG9jay5yZXNZOyArK3kpIHtcclxuICAgICAgZm9yKGxldCB6ID0gMDsgejxzaGVldEJsb2NrLnJlc1o7ICsreikge1xyXG4gICAgICAgIGZvcihsZXQgeCA9IDA7IHg8c2hlZXRCbG9jay5yZXNYOyArK3gpIHtcclxuICAgICAgICAgIHRoaXMuZ2VvbWV0cnkudmVydGljZXNbaSsrXS5zZXQoXHJcbiAgICAgICAgICAgIHlzW3ldLnhbeF0qcC53aWR0aCtvZmZzZXQsXHJcbiAgICAgICAgICAgIHlzW3ldLnlbeF0qcC53aWR0aCxcclxuICAgICAgICAgICAgeipwLmhlaWdodC8oc2hlZXRCbG9jay5yZXNaLTEpLTAuNSpwLmhlaWdodFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKGkhPT10aGlzLmdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ3NldFBvaW50czogYmFkIG1hcHBpbmchJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5jb3JuZXIudXNlICYmICF0aGlzLmNvcm5lci5wb2ludHMubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnN0IHBsYW5lID0gbmV3IFRIUkVFLlBsYW5lKCksIG5vcm1hbCA9IHBsYW5lLm5vcm1hbCwgcGxhbmVPZmZzZXQgPSAoMS10aGlzLmdldFByb3BzKCkuZmxleGlibGVDb3JuZXIpKk1hdGgubWluKHAud2lkdGgsIHAuaGVpZ2h0KSwgcHJvaiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICAgIHBsYW5lLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KG5ldyBUSFJFRS5WZWN0b3IzKC0xLDAsLTEpLm5vcm1hbGl6ZSgpLCBuZXcgVEhSRUUuVmVjdG9yMyhwbGFuZU9mZnNldCtvZmZzZXQsIDAsIDAuNSpwLmhlaWdodCkpO1xyXG4gICAgICBmb3IobGV0IGk9MCwgbD10aGlzLmdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aDtpPGw7KytpKSB7XHJcbiAgICAgICAgcGxhbmUucHJvamVjdFBvaW50KHRoaXMuZ2VvbWV0cnkudmVydGljZXNbaV0sIHByb2opO1xyXG4gICAgICAgIHByb2ouc3ViKHRoaXMuZ2VvbWV0cnkudmVydGljZXNbaV0pO1xyXG4gICAgICAgIGlmKHByb2oueCpub3JtYWwueCtwcm9qLnkqbm9ybWFsLnkrcHJvai56Km5vcm1hbC56PjApIHtcclxuICAgICAgICAgIGNvbnN0IGQgPSBwcm9qLmxlbmd0aCgpL3BsYW5lT2Zmc2V0O1xyXG4gICAgICAgICAgdGhpcy5jb3JuZXIubWF4RGlzdGFuY2UgPSBNYXRoLm1heCh0aGlzLmNvcm5lci5tYXhEaXN0YW5jZSwgZCk7XHJcbiAgICAgICAgICB0aGlzLmNvcm5lci5wb2ludHMucHVzaCh7dmVydGV4OiBpLCBkaXN0YW5jZTogZH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMuY29ybmVyLnVzZSAmJiBNYXRoLmFicyh0aGlzLmNvcm5lci5oZWlnaHQpPjFlLTMpIHtcclxuICAgICAgY29uc3QgZDJBbmdsZSA9IChkKT0+IHAuY29ybmVyRGV2aWF0aW9uKnRoaXMuY29ybmVyLmhlaWdodC8oMStNYXRoLmV4cCgtcC5iZW5kaW5nKihkLTAuNSp0aGlzLmNvcm5lci5tYXhEaXN0YW5jZSkpKTtcclxuICAgICAgdGhpcy5jb3JuZXIuYXhpcy5zZXQoLTEsMCwxKS5ub3JtYWxpemUoKTtcclxuICAgICAgdGhpcy5jb3JuZXIuYXhpcy5hcHBseUF4aXNBbmdsZSh0aGlzLmNvcm5lci5PWiwgdGhpcy5hbmdsZSk7XHJcbiAgICAgIGZvcihsZXQgcG9pbnQgb2YgdGhpcy5jb3JuZXIucG9pbnRzKSB7XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1twb2ludC52ZXJ0ZXhdLmFwcGx5QXhpc0FuZ2xlKHRoaXMuY29ybmVyLmF4aXMsIGQyQW5nbGUocG9pbnQuZGlzdGFuY2UpKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGxldCBtIG9mIHRoaXMubWFya2Vycykge1xyXG4gICAgICBtLm1hcmtlci5wb3NpdGlvbi5jb3B5KHRoaXMuZ2VvbWV0cnkudmVydGljZXNbbS52ZXJ0ZXhdKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdlb21ldHJ5LmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7XHJcbiAgICAvL3RoaXMuZ2VvbWV0cnkuY29tcHV0ZUZhY2VOb3JtYWxzKCk7XHJcbiAgICB0aGlzLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO1xyXG4gICAgLy90aGlzLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xyXG4gICAgdGhpcy5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIGlmKHRoaXMubWFya3VwKSB7XHJcbiAgICAgIHRoaXMubWFya3VwLmNvbXB1dGVWZXJ0aWNlcygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW52ZXJzZShwcykge1xyXG4gICAgZm9yKGxldCBpID0gMDtpPHBzLngubGVuZ3RoOyArK2kpIHtcclxuICAgICAgcHMueFtpXT0tcHMueFtpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcztcclxuICB9XHJcblxyXG4gIGdldFBvaW50c0F0SHMocHMsIGFuZ2xlLCBocykge1xyXG4gICAgY29uc3QgTiA9IDEwMDA7XHJcbiAgICBNYXRoVXRpbHMuc2V0U3BsaW5lUG9pbnRzKHRoaXMucFNwbGluZSwgcHMpO1xyXG4gICAgbGV0IGJsID0gTWF0aFV0aWxzLnNwbGl0U3BsaW5lKHRoaXMucFNwbGluZSwgTiksIHI9W107XHJcbiAgICB7XHJcbiAgICAgIGNvbnN0IHAxID0gey4uLnRoaXMucFNwbGluZS5nZXRQb2ludCgoTi0xKS9OKX0sIHAyID0gey4uLnRoaXMucFNwbGluZS5nZXRQb2ludCgxKX0sXHJcbiAgICAgICAgZHAgPSB7eDogcDIueC1wMS54LCB5OiBwMi55LXAxLnl9LCBsbiA9IE1hdGguc3FydChkcC54KmRwLngrZHAueSpkcC55KSxcclxuICAgICAgICBzcCA9IHRoaXMucFNwbGluZS5wb2ludHNbdGhpcy5wU3BsaW5lLnBvaW50cy5sZW5ndGgtMV07XHJcbiAgICAgIHNwLnNldChzcC54KzAuMSpkcC54L2xuLCBzcC55KzAuMSpkcC55L2xuLCAwKTtcclxuICAgICAgYmwgPSBNYXRoVXRpbHMuc3BsaXRTcGxpbmUodGhpcy5wU3BsaW5lLCBOKTtcclxuICAgIH1cclxuICAgIGJsLmxzLnB1c2goMWU3KTtcclxuICAgIE1hdGhVdGlscy5tYXBsMkwoYmwubHMsIGJsLmxlbiwgc2hlZXRCbG9jay5yZXNYLCAoaSk9PiB7XHJcbiAgICAgIGZvcihsZXQgaj0wOyBqPGhzLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgaWYoIWkpIHtcclxuICAgICAgICAgIHJbal0gPSB7eDogWy1oc1tqXSpNYXRoLnNpbihhbmdsZSldLCB5OiBbaHNbal0qTWF0aC5jb3MoYW5nbGUpXX07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgcDAgPSB7Li4udGhpcy5wU3BsaW5lLmdldFBvaW50KChpLTEpL04pfSxcclxuICAgICAgICAgICAgICAgIHAxID0gdGhpcy5wU3BsaW5lLmdldFBvaW50KGkvTiksXHJcbiAgICAgICAgICAgICAgICB4PS0ocDEueS1wMC55KSwgeT0ocDEueC1wMC54KSwgbD1NYXRoLnNxcnQoeCp4K3kqeSk7XHJcbiAgICAgICAgICByW2pdLngucHVzaChwMS54K3gvbCpoc1tqXSk7XHJcbiAgICAgICAgICByW2pdLnkucHVzaChwMS55K3kvbCpoc1tqXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBucHM9W107XHJcbiAgICBmb3IobGV0IGo9MDsgajxocy5sZW5ndGg7ICsraikge1xyXG4gICAgICBucHNbal09e3g6W10seTpbXX07XHJcbiAgICAgIE1hdGhVdGlscy5zZXRTcGxpbmVQb2ludHModGhpcy5pU3BsaW5lLCByW2pdKTtcclxuICAgICAgY29uc3QgbCA9IE1hdGhVdGlscy5zcGxpdFNwbGluZSh0aGlzLmlTcGxpbmUsIE4pO1xyXG4gICAgICBsLmxzLnB1c2goMWU3KTtcclxuICAgICAgTWF0aFV0aWxzLm1hcGwyTChsLmxzLCAxLCBzaGVldEJsb2NrLnJlc1gsIChpKT0+IHtcclxuICAgICAgICBjb25zdCBwID0gdGhpcy5pU3BsaW5lLmdldFBvaW50KGkvTik7XHJcbiAgICAgICAgbnBzW2pdLngucHVzaChwLngpO1xyXG4gICAgICAgIG5wc1tqXS55LnB1c2gocC55KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnBzO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9pbnRzQXRBbmdsZUFuZEhzKHBvaW50cywgYW5nbGUsIGhBbmdsZSwgaHMpIHtcclxuICAgIGNvbnN0IHBzID0gdGhpcy5nZXRQb2ludHNBdEFuZ2xlKHBvaW50cywgYW5nbGUpO1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0UG9pbnRzQXRIcyhwcywgaEFuZ2xlLCBocyk7XHJcbiAgfVxyXG5cclxuICBnZXRQb2ludHNBdEFuZ2xlKHBvaW50cywgYW5nbGUpIHtcclxuICAgIGNvbnN0IHBzPXt4OiBbXSwgeTpbXX0sIGFuZ2xlcz1bXTtcclxuICAgIGFuZ2xlLz1NYXRoLlBJLzI7XHJcbiAgICBmb3IobGV0IGogPSAwOyBqPHBvaW50cy54Lmxlbmd0aDsgKytqKSB7XHJcbiAgICAgIGFuZ2xlcy5wdXNoKGovKHBvaW50cy54Lmxlbmd0aC0xKSk7XHJcbiAgICB9XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpPHBvaW50cy54WzBdLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIGNvbnN0IHhwcyA9IFtdLCB5cHMgPSBbXTtcclxuICAgICAgZm9yKGxldCBqID0gMDsgajxwb2ludHMueC5sZW5ndGg7ICsraikge1xyXG4gICAgICAgIHhwcy5wdXNoKHBvaW50cy54W2pdW2ldKTtcclxuICAgICAgICB5cHMucHVzaChwb2ludHMueVtqXVtpXSk7XHJcbiAgICAgIH1cclxuICAgICAgcHMueC5wdXNoKHRoaXMuaW50ZXJwb2xhdGUoYW5nbGVzLHhwcyxhbmdsZSkpO1xyXG4gICAgICBwcy55LnB1c2godGhpcy5pbnRlcnBvbGF0ZShhbmdsZXMseXBzLGFuZ2xlKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHM7XHJcbiAgfVxyXG5cclxuICBpbnRlcnBvbGF0ZSh4LHkseGkpIHtcclxuICAgIGlmKCF0aGlzLmFTcGxpbmVzW3gubGVuZ3RoXSkge1xyXG4gICAgICB0aGlzLmFTcGxpbmVzW3gubGVuZ3RoXSA9IG5ldyBUSFJFRS5TcGxpbmUoW10pO1xyXG4gICAgICBjb25zdCBwcyA9IHRoaXMuYVNwbGluZXNbeC5sZW5ndGhdLnBvaW50cztcclxuICAgICAgZm9yKGxldCBpPTA7aTx4Lmxlbmd0aDsrK2kpIHtcclxuICAgICAgICBwcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBzcGxpbmUgPSB0aGlzLmFTcGxpbmVzW3gubGVuZ3RoXTtcclxuICAgIGZvcihsZXQgaT0wO2k8eC5sZW5ndGg7KytpKSB7XHJcbiAgICAgIHNwbGluZS5wb2ludHNbaV0uc2V0KHhbaV0sIHlbaV0sIDApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNwbGluZS5nZXRQb2ludChNYXRoLm1pbigxLCBNYXRoLm1heCh4aSwgMCkpKS55O1xyXG4gIH1cclxuXHJcbiAgbG9hZFBvaW50cygpIHtcclxuICAgIGNvbnN0IHg9W10seT1bXTtcclxuICAgIGZvcihsZXQgciBvZiBbMCwgMC4yODc3LCAwLjYzNDcsIDAuODE3NCwgMS4wMDAwXSkge1xyXG4gICAgICB4LnB1c2gocipNYXRoLmNvcygwLjkqTWF0aC5QSS80KSk7XHJcbiAgICAgIHkucHVzaChyKk1hdGguc2luKDAuOSpNYXRoLlBJLzQpKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9wZW5lZEludGVycG9sYXRpb25JbmRlY2VzID0gW1xyXG4gICAgICBbMiwzLDRdLFxyXG4gICAgICBbMiwzLDQsNSw2XVxyXG4gICAgXSxcclxuICAgIGNsb3NlZEludGVycG9sYXRpb25JbmRlY2VzID0gW1xyXG4gICAgICBbMCwxLDJdLFxyXG4gICAgICBbMCwxLDJdXHJcbiAgICBdLFxyXG4gICAgZmxhdEludGVycG9sYXRpb25JbmRlY2VzID0gW1xyXG4gICAgICBbNSw0XSxcclxuICAgICAgWzcsNl1cclxuICAgIF0sXHJcbiAgICBpbnRlcnBvbGF0aW9uUG9pbnRzID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgeDogW1xyXG4gICAgICAgICAgWzAsMC4yODc3LDAuNjM0NywwLjgxNzQsMS4wMDAwXSxcclxuICAgICAgICAgIFswLjAwMCwwLjI4NiwwLjYzMiwwLjgxNSwwLjk5N10sXHJcbiAgICAgICAgICBbMC4wMDAsMC4yNzksMC42MjMsMC44MDYsMC45ODhdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMTI2LDAuNDExLDAuNTkzLDAuNzc0XSxcclxuICAgICAgICAgIFswLDAsMCwwLDBdLFxyXG4gICAgICAgICAgeFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgeTogW1xyXG4gICAgICAgICAgWzAsMCwwLDAsMF0sXHJcbiAgICAgICAgICBbMC4wMDAsMC4wMzAsMC4wMTAsMC4wMDIsMC4wMDBdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMDYwLDAuMDE3LDAuMDA0LDAuMDAwXSxcclxuICAgICAgICAgIFswLjAwMCwwLjI1OSwwLjQ0MCwwLjQ0NiwwLjQyOV0sXHJcbiAgICAgICAgICBbMCwgMC4yODc3LCAwLjYzNDcsIDAuODE3NCwgMS4wMDAwXSxcclxuICAgICAgICAgIHlcclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB4OiBbXHJcbiAgICAgICAgICBbMCwwLjI4NzcsMC42MzQ3LDAuODE3NCwxLjAwMDBdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMjg2LDAuNjMyLDAuODE1LDAuOTk3XSxcclxuICAgICAgICAgIFswLjAwMCwwLjI3OSwwLjYyMywwLjgwNiwwLjk4OF0sXHJcbiAgICAgICAgICBbMC4wMDAsMC4yMzMsMC41NjMsMC43NDYsMC45MjddLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMTQ0LDAuNDMzLDAuNjEzLDAuNzk2XSxcclxuICAgICAgICAgIFswLjAwMCwwLjA3MCwwLjI4OCwwLjQ1NSwwLjYyNl0sXHJcbiAgICAgICAgICBbMCwwLDAsMCwwXSxcclxuICAgICAgICAgIHhcclxuICAgICAgICBdLFxyXG4gICAgICAgIHk6IFtcclxuICAgICAgICAgIFswLDAsMCwwLDBdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMDMwLDAuMDEwLDAuMDAyLDAuMDAwXSxcclxuICAgICAgICAgIFswLjAwMCwwLjA2MCwwLjAxNywwLjAwNCwwLjAwMF0sXHJcbiAgICAgICAgICBbMC4wMDAsMC4xNjgsMC4yNjksMC4yNzAsMC4yNTVdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMjQ1LDAuNDM1LDAuNDU4LDAuNDYwXSxcclxuICAgICAgICAgIFswLjAwMCwwLjI3OCwwLjU0NCwwLjYxNCwwLjY3M10sXHJcbiAgICAgICAgICBbMCwgMC4yODc3LCAwLjYzNDcsIDAuODE3NCwgMS4wMDAwXSxcclxuICAgICAgICAgIHlcclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuICAgIF07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaW50ZXJwb2xhdGlvblBvaW50cyxcclxuICAgICAgb3BlbmVkSW50ZXJwb2xhdGlvbkluZGVjZXMsXHJcbiAgICAgIGNsb3NlZEludGVycG9sYXRpb25JbmRlY2VzLFxyXG4gICAgICBmbGF0SW50ZXJwb2xhdGlvbkluZGVjZXNcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvU2hlZXRCbG9jay5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvU2hlZXRCbG9jay5qcyIsIlxyXG5leHBvcnQgZnVuY3Rpb24gcHJvcHMoKSB7XHJcbiAgLy8gY29uc3QgcHJvcHMgPSB7XHJcbiAgLy8gICBoZWlnaHQsXHJcbiAgLy8gICB3aWR0aCxcclxuICAvLyAgIGdyYXZpdHksXHJcbiAgLy8gICBpbmplY3RvcixcclxuICAvLyAgIGNhY2hlZFBhZ2VzLFxyXG4gIC8vICAgcmVuZGVySW5hY3RpdmVQYWdlcyxcclxuICAvLyAgIHJlbmRlcldoaWxlRmxpcHBpbmcsXHJcbiAgLy8gICBwYWdlc0ZvclByZWRpY3RpbmcsXHJcbiAgLy8gICBwcmVsb2FkUGFnZXMsXHJcbiAgLy8gICBzaGVldDoge1xyXG4gIC8vICAgICBzdGFydFZlbG9jaXR5LFxyXG4gIC8vICAgICBjb3JuZXJEZXZpYXRpb24sXHJcbiAgLy8gICAgIGZsZXhpYmlsaXR5LFxyXG4gIC8vICAgICBmbGV4aWJsZUNvcm5lcixcclxuICAvLyAgICAgYmVuZGluZyxcclxuICAvLyAgICAgd2F2ZSxcclxuICAvLyAgICAgc2hhcGUsXHJcbiAgLy8gICAgIHdpZHRoVGV4ZWxzLFxyXG4gIC8vICAgICBoZWlnaHRUZXhlbHMsXHJcbiAgLy8gICAgIGNvbG9yLFxyXG4gIC8vICAgICBzaWRlVGV4dHVyZVxyXG4gIC8vICAgfSxcclxuICAvLyAgIGNvdmVyOiB7XHJcbiAgLy8gICAgIC4uLnNoZWV0LFxyXG4gIC8vICAgICBwYWRkaW5nLFxyXG4gIC8vICAgICBiaW5kZXJUZXh0dXJlLFxyXG4gIC8vICAgICBkZXB0aCxcclxuICAvLyAgICAgbWFzc1xyXG4gIC8vICAgfSxcclxuICAvLyAgIHBhZ2U6IHtcclxuICAvLyAgICAgLi4uc2hlZXQsXHJcbiAgLy8gICAgIGRlcHRoLFxyXG4gIC8vICAgICBtYXNzXHJcbiAgLy8gICB9XHJcbiAgLy8gfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGhlaWdodDogMC4yOTcsXHJcbiAgICB3aWR0aDogMC4yMSxcclxuICAgIGdyYXZpdHk6IDEsXHJcbiAgICBjYWNoZWRQYWdlczogNTAsXHJcbiAgICByZW5kZXJJbmFjdGl2ZVBhZ2VzOiB0cnVlLFxyXG4gICAgcmVuZGVySW5hY3RpdmVQYWdlc09uTW9iaWxlOiBmYWxzZSxcclxuICAgIHJlbmRlcldoaWxlRmxpcHBpbmc6IGZhbHNlLFxyXG4gICAgcGFnZXNGb3JQcmVkaWN0aW5nOiA1LFxyXG4gICAgcHJlbG9hZFBhZ2VzOiA1LFxyXG4gICAgcnRsOiBmYWxzZSxcclxuICAgIHNoZWV0OiB7XHJcbiAgICAgIHN0YXJ0VmVsb2NpdHk6IDAuOSxcclxuICAgICAgY29ybmVyRGV2aWF0aW9uOiAwLjI1LFxyXG4gICAgICBmbGV4aWJpbGl0eTogMTAsXHJcbiAgICAgIGZsZXhpYmxlQ29ybmVyOiAwLjUsXHJcbiAgICAgIGJlbmRpbmc6IDExLFxyXG4gICAgICB3YXZlOiAwLjUsXHJcbiAgICAgIHNoYXBlOiAwLFxyXG4gICAgICB3aWR0aFRleGVsczogNSoyMTAsXHJcbiAgICAgIGhlaWdodFRleGVsczogNSoyOTcsXHJcbiAgICAgIGNvbG9yOiAweEZGRkZGRlxyXG4gICAgfSxcclxuICAgIGNvdmVyOiB7XHJcbiAgICAgIGJpbmRlclRleHR1cmU6ICcnLFxyXG4gICAgICBkZXB0aDogMC4wMDAzLFxyXG4gICAgICBwYWRkaW5nOiAwLFxyXG4gICAgICBtYXNzOiAwLjAwM1xyXG4gICAgfSxcclxuICAgIHBhZ2U6IHtcclxuICAgICAgZGVwdGg6IDAuMDAwMSxcclxuICAgICAgbWFzczogMC4wMDFcclxuICAgIH0sXHJcbiAgICBjc3NMYXllclByb3BzOiB7XHJcbiAgICAgIHdpZHRoOiAxMDI0XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcHJvcHMvYm9vay5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL3Byb3BzL2Jvb2suanMiLCJpbXBvcnQge1RIUkVFfSBmcm9tICcuLi9saWJzJztcclxuXHJcblRIUkVFLkNTUzNET2JqZWN0ID0gY2xhc3MgQ1NTM0RPYmplY3QgZXh0ZW5kcyBUSFJFRS5PYmplY3QzRCB7XHJcbiAgY29uc3RydWN0b3IoZWxlbWVudD11bmRlZmluZWQpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICBcclxuICAgIGlmKGVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5zZXQoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXQoZWxlbWVudCkge1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICBcdHRoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcblxyXG4gIFx0dGhpcy5hZGRFdmVudExpc3RlbmVyKCdyZW1vdmVkJywgZnVuY3Rpb24oKSB7XHJcbiAgXHRcdGlmICh0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSAhPT0gbnVsbCkge1xyXG4gIFx0XHRcdHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7XHJcbiAgXHRcdH1cclxuICBcdH0pO1xyXG4gIH1cclxufTtcclxuXHJcblRIUkVFLkNTUzNEU3ByaXRlID0gY2xhc3MgQ1NTM0RTcHJpdGUgZXh0ZW5kcyBUSFJFRS5DU1MzRE9iamVjdCB7XHJcbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xyXG4gICAgc3VwZXIoZWxlbWVudCk7XHJcbiAgfVxyXG59O1xyXG5cclxuVEhSRUUuQ1NTM0RSZW5kZXJlciA9IGNsYXNzIENTUzNEUmVuZGVyZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICBcdHZhciBfd2lkdGgsIF9oZWlnaHQ7XHJcbiAgXHR2YXIgX3dpZHRoSGFsZiwgX2hlaWdodEhhbGY7XHJcblxyXG4gIFx0dmFyIG1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcblxyXG4gIFx0dmFyIGNhY2hlID0ge1xyXG4gIFx0XHRjYW1lcmE6IHsgZm92OiAwLCBzdHlsZTogJycgfSxcclxuICBcdFx0b2JqZWN0czoge31cclxuICBcdH07XHJcblxyXG4gIFx0dmFyIGRvbUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2Jyk7XHJcbiAgXHRkb21FbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcblxyXG4gIFx0dGhpcy5kb21FbGVtZW50ID0gZG9tRWxlbWVudDtcclxuXHJcbiAgXHR2YXIgY2FtZXJhRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKTtcclxuXHJcbiAgXHRjYW1lcmFFbGVtZW50LnN0eWxlLldlYmtpdFRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcclxuICBcdGNhbWVyYUVsZW1lbnQuc3R5bGUuTW96VHJhbnNmb3JtU3R5bGUgPSAncHJlc2VydmUtM2QnO1xyXG4gIFx0Y2FtZXJhRWxlbWVudC5zdHlsZS50cmFuc2Zvcm1TdHlsZSA9ICdwcmVzZXJ2ZS0zZCc7XHJcblxyXG4gIFx0ZG9tRWxlbWVudC5hcHBlbmRDaGlsZCggY2FtZXJhRWxlbWVudCk7XHJcblxyXG4gIFx0dmFyIGlzSUUgPSAvVHJpZGVudC9pLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5cclxuICBcdHRoaXMuc2V0Q2xlYXJDb2xvciA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICBcdHRoaXMuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgXHRcdHJldHVybiB7XHJcbiAgXHRcdFx0d2lkdGg6IF93aWR0aCxcclxuICBcdFx0XHRoZWlnaHQ6IF9oZWlnaHRcclxuICBcdFx0fTtcclxuXHJcbiAgXHR9O1xyXG5cclxuICBcdHRoaXMuc2V0U2l6ZSA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcclxuXHJcbiAgXHRcdF93aWR0aCA9IHdpZHRoO1xyXG4gIFx0XHRfaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gIFx0XHRfd2lkdGhIYWxmID0gX3dpZHRoIC8gMjtcclxuICBcdFx0X2hlaWdodEhhbGYgPSBfaGVpZ2h0IC8gMjtcclxuXHJcbiAgXHRcdGRvbUVsZW1lbnQuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XHJcbiAgXHRcdGRvbUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcclxuXHJcbiAgXHRcdGNhbWVyYUVsZW1lbnQuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XHJcbiAgXHRcdGNhbWVyYUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcclxuXHJcbiAgXHR9O1xyXG5cclxuICBcdGZ1bmN0aW9uIGVwc2lsb24oIHZhbHVlKSB7XHJcblxyXG4gIFx0XHRyZXR1cm4gTWF0aC5hYnMoIHZhbHVlKSA8IDFlLTEwID8gMCA6IHZhbHVlO1xyXG5cclxuICBcdH1cclxuXHJcbiAgXHRmdW5jdGlvbiBnZXRDYW1lcmFDU1NNYXRyaXgoIG1hdHJpeCkge1xyXG5cclxuICBcdFx0dmFyIGVsZW1lbnRzID0gbWF0cml4LmVsZW1lbnRzO1xyXG5cclxuICBcdFx0cmV0dXJuICdtYXRyaXgzZCgnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMCBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggLSBlbGVtZW50c1sgMSBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDIgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAzIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgNCBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggLSBlbGVtZW50c1sgNSBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDYgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyA3IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgOCBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggLSBlbGVtZW50c1sgOSBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDEwIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTEgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxMiBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggLSBlbGVtZW50c1sgMTMgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxNCBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDE1IF0pICtcclxuICBcdFx0JyknO1xyXG5cclxuICBcdH1cclxuXHJcbiAgXHRmdW5jdGlvbiBnZXRPYmplY3RDU1NNYXRyaXgoIG1hdHJpeCwgY2FtZXJhQ1NTTWF0cml4KSB7XHJcblxyXG4gIFx0XHR2YXIgZWxlbWVudHMgPSBtYXRyaXguZWxlbWVudHM7XHJcbiAgXHRcdHZhciBtYXRyaXgzZCA9ICdtYXRyaXgzZCgnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMCBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDEgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAyIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMyBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggLSBlbGVtZW50c1sgNCBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggLSBlbGVtZW50c1sgNSBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggLSBlbGVtZW50c1sgNiBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggLSBlbGVtZW50c1sgNyBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDggXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyA5IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTAgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxMSBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDEyIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTMgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxNCBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDE1IF0pICtcclxuICBcdFx0JyknO1xyXG5cclxuICBcdFx0aWYoaXNJRSkge1xyXG5cclxuICBcdFx0XHRyZXR1cm4gJ3RyYW5zbGF0ZSgtNTAlLC01MCUpJyArXHJcbiAgXHRcdFx0XHQndHJhbnNsYXRlKCcgKyBfd2lkdGhIYWxmICsgJ3B4LCcgKyBfaGVpZ2h0SGFsZiArICdweCknICtcclxuICBcdFx0XHRcdGNhbWVyYUNTU01hdHJpeCArXHJcbiAgXHRcdFx0XHRtYXRyaXgzZDtcclxuXHJcbiAgXHRcdH1cclxuXHJcbiAgXHRcdHJldHVybiAndHJhbnNsYXRlKC01MCUsLTUwJSknICsgbWF0cml4M2Q7XHJcblxyXG4gIFx0fVxyXG5cclxuICBcdGZ1bmN0aW9uIHJlbmRlck9iamVjdCggb2JqZWN0LCBjYW1lcmEsIGNhbWVyYUNTU01hdHJpeCkge1xyXG5cclxuICBcdFx0aWYob2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuQ1NTM0RPYmplY3QpIHtcclxuXHJcbiAgXHRcdFx0dmFyIHN0eWxlO1xyXG5cclxuICBcdFx0XHRpZihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5DU1MzRFNwcml0ZSkge1xyXG4gIFx0XHRcdFx0bWF0cml4LmNvcHkoIGNhbWVyYS5tYXRyaXhXb3JsZEludmVyc2UpO1xyXG4gIFx0XHRcdFx0bWF0cml4LnRyYW5zcG9zZSgpO1xyXG4gIFx0XHRcdFx0bWF0cml4LmNvcHlQb3NpdGlvbiggb2JqZWN0Lm1hdHJpeFdvcmxkKTtcclxuICBcdFx0XHRcdG1hdHJpeC5zY2FsZSggb2JqZWN0LnNjYWxlKTtcclxuXHJcbiAgXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDMgXSA9IDA7XHJcbiAgXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDcgXSA9IDA7XHJcbiAgXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDExIF0gPSAwO1xyXG4gIFx0XHRcdFx0bWF0cml4LmVsZW1lbnRzWyAxNSBdID0gMTtcclxuXHJcbiAgXHRcdFx0XHRzdHlsZSA9IGdldE9iamVjdENTU01hdHJpeCggbWF0cml4LCBjYW1lcmFDU1NNYXRyaXgpO1xyXG5cclxuICBcdFx0XHR9IGVsc2Uge1xyXG5cclxuICBcdFx0XHRcdHN0eWxlID0gZ2V0T2JqZWN0Q1NTTWF0cml4KCBvYmplY3QubWF0cml4V29ybGQsIGNhbWVyYUNTU01hdHJpeCk7XHJcblxyXG4gIFx0XHRcdH1cclxuXHJcbiAgXHRcdFx0dmFyIGVsZW1lbnQgPSBvYmplY3QuZWxlbWVudDtcclxuICBcdFx0XHR2YXIgY2FjaGVkU3R5bGUgPSBjYWNoZS5vYmplY3RzWyBvYmplY3QuaWQgXSAmJiBjYWNoZS5vYmplY3RzWyBvYmplY3QuaWQgXS5zdHlsZTtcclxuXHJcbiAgXHRcdFx0aWYoY2FjaGVkU3R5bGUgPT09IHVuZGVmaW5lZCB8fCBjYWNoZWRTdHlsZSAhPT0gc3R5bGUpIHtcclxuICBcdFx0XHRcdGVsZW1lbnQuc3R5bGUuV2Via2l0VHJhbnNmb3JtID0gc3R5bGU7XHJcbiAgXHRcdFx0XHRlbGVtZW50LnN0eWxlLk1velRyYW5zZm9ybSA9IHN0eWxlO1xyXG4gIFx0XHRcdFx0ZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBzdHlsZTtcclxuXHJcbiAgXHRcdFx0XHRjYWNoZS5vYmplY3RzWyBvYmplY3QuaWQgXSA9IHsgc3R5bGU6IHN0eWxlIH07XHJcbiAgXHRcdFx0XHRpZihpc0lFKSB7XHJcbiAgXHRcdFx0XHRcdGNhY2hlLm9iamVjdHNbIG9iamVjdC5pZCBdLmRpc3RhbmNlVG9DYW1lcmFTcXVhcmVkID0gZ2V0RGlzdGFuY2VUb1NxdWFyZWQoIGNhbWVyYSwgb2JqZWN0KTtcclxuICBcdFx0XHRcdH1cclxuICBcdFx0XHR9XHJcblxyXG4gIFx0XHRcdGlmKGVsZW1lbnQucGFyZW50Tm9kZSAhPT0gY2FtZXJhRWxlbWVudCkge1xyXG4gIFx0XHRcdFx0Y2FtZXJhRWxlbWVudC5hcHBlbmRDaGlsZCggZWxlbWVudCk7XHJcbiAgXHRcdFx0fVxyXG4gIFx0XHR9XHJcblxyXG4gIFx0XHRmb3IodmFyIGkgPSAwLCBsID0gb2JqZWN0LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkgKyspIHtcclxuXHJcbiAgXHRcdFx0cmVuZGVyT2JqZWN0KCBvYmplY3QuY2hpbGRyZW5bIGkgXSwgY2FtZXJhLCBjYW1lcmFDU1NNYXRyaXgpO1xyXG5cclxuICBcdFx0fVxyXG5cclxuICBcdH1cclxuXHJcbiAgXHR2YXIgZ2V0RGlzdGFuY2VUb1NxdWFyZWQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gIFx0XHR2YXIgYSA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgXHRcdHZhciBiID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHJcbiAgXHRcdHJldHVybiBmdW5jdGlvbihvYmplY3QxLCBvYmplY3QyKSB7XHJcblxyXG4gIFx0XHRcdGEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCBvYmplY3QxLm1hdHJpeFdvcmxkKTtcclxuICBcdFx0XHRiLnNldEZyb21NYXRyaXhQb3NpdGlvbiggb2JqZWN0Mi5tYXRyaXhXb3JsZCk7XHJcblxyXG4gIFx0XHRcdHJldHVybiBhLmRpc3RhbmNlVG9TcXVhcmVkKCBiKTtcclxuXHJcbiAgXHRcdH07XHJcblxyXG4gIFx0fSgpO1xyXG5cclxuICBcdGZ1bmN0aW9uIHpPcmRlciggc2NlbmUpIHtcclxuXHJcbiAgXHRcdHZhciBvcmRlciA9IE9iamVjdC5rZXlzKCBjYWNoZS5vYmplY3RzKS5zb3J0KCBmdW5jdGlvbihhLCBiKSB7XHJcblxyXG4gIFx0XHRcdHJldHVybiBjYWNoZS5vYmplY3RzWyBhIF0uZGlzdGFuY2VUb0NhbWVyYVNxdWFyZWQgLSBjYWNoZS5vYmplY3RzWyBiIF0uZGlzdGFuY2VUb0NhbWVyYVNxdWFyZWQ7XHJcblxyXG4gIFx0XHR9KTtcclxuICBcdFx0dmFyIHpNYXggPSBvcmRlci5sZW5ndGg7XHJcblxyXG4gIFx0XHRzY2VuZS50cmF2ZXJzZSggZnVuY3Rpb24ob2JqZWN0KSB7XHJcblxyXG4gIFx0XHRcdHZhciBpbmRleCA9IG9yZGVyLmluZGV4T2YoIG9iamVjdC5pZCArICcnKTtcclxuXHJcbiAgXHRcdFx0aWYoaW5kZXggIT09IC0gMSkge1xyXG5cclxuICBcdFx0XHRcdG9iamVjdC5lbGVtZW50LnN0eWxlLnpJbmRleCA9IHpNYXggLSBpbmRleDtcclxuXHJcbiAgXHRcdFx0fVxyXG5cclxuICBcdFx0fSk7XHJcblxyXG4gIFx0fVxyXG5cclxuICBcdHRoaXMucmVuZGVyID0gZnVuY3Rpb24oc2NlbmUsIGNhbWVyYSkge1xyXG5cclxuICBcdFx0dmFyIGZvdiA9IGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWyA1IF0gKiBfaGVpZ2h0SGFsZjtcclxuXHJcbiAgXHRcdGlmKGNhY2hlLmNhbWVyYS5mb3YgIT09IGZvdikge1xyXG5cclxuICBcdFx0XHRkb21FbGVtZW50LnN0eWxlLldlYmtpdFBlcnNwZWN0aXZlID0gZm92ICsgJ3B4JztcclxuICBcdFx0XHRkb21FbGVtZW50LnN0eWxlLk1velBlcnNwZWN0aXZlID0gZm92ICsgJ3B4JztcclxuICBcdFx0XHRkb21FbGVtZW50LnN0eWxlLnBlcnNwZWN0aXZlID0gZm92ICsgJ3B4JztcclxuXHJcbiAgXHRcdFx0Y2FjaGUuY2FtZXJhLmZvdiA9IGZvdjtcclxuXHJcbiAgXHRcdH1cclxuXHJcbiAgXHRcdHNjZW5lLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XHJcblxyXG4gIFx0XHRpZihjYW1lcmEucGFyZW50ID09PSBudWxsKSBjYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTtcclxuXHJcbiAgXHRcdHZhciBjYW1lcmFDU1NNYXRyaXggPSAndHJhbnNsYXRlWignICsgZm92ICsgJ3B4KScgK1xyXG4gIFx0XHRcdGdldENhbWVyYUNTU01hdHJpeCggY2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSk7XHJcblxyXG4gIFx0XHR2YXIgc3R5bGUgPSBjYW1lcmFDU1NNYXRyaXggK1xyXG4gIFx0XHRcdCd0cmFuc2xhdGUoJyArIF93aWR0aEhhbGYgKyAncHgsJyArIF9oZWlnaHRIYWxmICsgJ3B4KSc7XHJcblxyXG4gIFx0XHRpZihjYWNoZS5jYW1lcmEuc3R5bGUgIT09IHN0eWxlICYmICEgaXNJRSkge1xyXG5cclxuICBcdFx0XHRjYW1lcmFFbGVtZW50LnN0eWxlLldlYmtpdFRyYW5zZm9ybSA9IHN0eWxlO1xyXG4gIFx0XHRcdGNhbWVyYUVsZW1lbnQuc3R5bGUuTW96VHJhbnNmb3JtID0gc3R5bGU7XHJcbiAgXHRcdFx0Y2FtZXJhRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBzdHlsZTtcclxuXHJcbiAgXHRcdFx0Y2FjaGUuY2FtZXJhLnN0eWxlID0gc3R5bGU7XHJcblxyXG4gIFx0XHR9XHJcblxyXG4gIFx0XHRyZW5kZXJPYmplY3QoIHNjZW5lLCBjYW1lcmEsIGNhbWVyYUNTU01hdHJpeCk7XHJcblxyXG4gIFx0XHRpZihpc0lFKSB7XHJcblxyXG4gIFx0XHRcdC8vIElFMTAgYW5kIDExIGRvZXMgbm90IHN1cHBvcnQgJ3ByZXNlcnZlLTNkJy5cclxuICBcdFx0XHQvLyBUaHVzLCB6LW9yZGVyIGluIDNEIHdpbGwgbm90IHdvcmsuXHJcbiAgXHRcdFx0Ly8gV2UgaGF2ZSB0byBjYWxjIHotb3JkZXIgbWFudWFsbHkgYW5kIHNldCBDU1Mgei1pbmRleCBmb3IgSUUuXHJcbiAgXHRcdFx0Ly8gRllJOiB6LWluZGV4IGNhbid0IGhhbmRsZSBvYmplY3QgaW50ZXJzZWN0aW9uXHJcbiAgXHRcdFx0ek9yZGVyKCBzY2VuZSk7XHJcblxyXG4gIFx0XHR9XHJcblxyXG4gIFx0fTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUSFJFRS5DU1MzRFJlbmRlcmVyO1xyXG5cclxuY29uc3QgX0NTUzNET2JqZWN0ID0gVEhSRUUuQ1NTM0RPYmplY3QsIF9DU1MzRFNwcml0ZSA9IFRIUkVFLkNTUzNEU3ByaXRlO1xyXG5leHBvcnQge1xyXG4gIF9DU1MzRE9iamVjdCBhcyBDU1MzRE9iamVjdCxcclxuICBfQ1NTM0RTcHJpdGUgYXMgQ1NTM0RTcHJpdGVcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvQ1NTM0RSZW5kZXJlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0NTUzNEUmVuZGVyZXIuanMiLCJpbXBvcnQge1RIUkVFLCAkfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IHtDU1MzRE9iamVjdH0gZnJvbSAnLi9DU1MzRFJlbmRlcmVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENTU0xheWVyIGV4dGVuZHMgQ1NTM0RPYmplY3Qge1xyXG5cclxuICBzdGF0aWMgZGVsYXk7XHJcbiAgc3RhdGljIHN0eWxlO1xyXG4gIHN0YXRpYyBpbml0KGRvYywgZGVsYXk9MTUwKSB7XHJcbiAgICBDU1NMYXllci5kZWxheSA9IGRlbGF5O1xyXG4gICAgQ1NTTGF5ZXIuc3R5bGUgPSAkKGA8c3R5bGUgdHlwZT10ZXh0L2Nzcz5cclxuICAgICAgLmNzcy1sYXllciB7XHJcbiAgICBcdFx0b3BhY2l0eTogMTtcclxuICAgIFx0XHR0cmFuc2l0aW9uOiBvcGFjaXR5ICR7ZGVsYXl9bXMgZWFzZS1vdXQ7XHJcbiAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcclxuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgXHR9XHJcbiAgICBcdC5jc3MtbGF5ZXIuaGlkZGVuIHtcclxuICAgIFx0XHR0cmFuc2l0aW9uOiBvcGFjaXR5ICR7ZGVsYXl9bXMgZWFzZS1pbiwgdmlzaWJpbGl0eSAke2RlbGF5fW1zIHN0ZXAtZW5kO1xyXG4gICAgXHRcdG9wYWNpdHk6IDA7XHJcbiAgICAgICAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gICAgICB9XHJcbiAgICA8L3N0eWxlPmApLmFwcGVuZFRvKGRvYy5oZWFkKTtcclxuICB9XHJcbiAgc3RhdGljIGRpc3Bvc2UoKSB7XHJcbiAgICBDU1NMYXllci5zdHlsZS5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHdpZHRoLCBoZWlnaHQsIHByb3BzKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5wcm9wcyA9IHByb3BzO1xyXG4gICAgdGhpcy5qQ29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz1cImhpZGRlbiBjc3MtbGF5ZXJcIj48L2Rpdj4nKTtcclxuICBcdGNvbnN0IHdpZHRoUHhzID0gcHJvcHMud2lkdGgsIGhlaWdodFB4cyA9IGhlaWdodC93aWR0aCp3aWR0aFB4cztcclxuICAgIHRoaXMuakNvbnRhaW5lci53aWR0aCh3aWR0aFB4cykuaGVpZ2h0KGhlaWdodFB4cyk7XHJcbiAgXHR0aGlzLnNjYWxlLnggLz0gd2lkdGhQeHMvd2lkdGg7XHJcbiAgXHR0aGlzLnNjYWxlLnkgLz0gd2lkdGhQeHMvd2lkdGg7XHJcblxyXG4gICAgdGhpcy5zZXREYXRhKCk7XHJcbiAgICB0aGlzLnNldCh0aGlzLmpDb250YWluZXJbMF0pO1xyXG4gIH1cclxuXHJcbiAgY2FsbEludGVybmFsKG5hbWUpIHtcclxuICAgIGlmKHRoaXMub2JqZWN0ICYmIHRoaXMub2JqZWN0W25hbWVdKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgdGhpcy5vYmplY3RbbmFtZV0oKTtcclxuICAgICAgfVxyXG4gICAgICBjYXRjaChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMuY2xlYXJJbnRlcm5hbHMoKTtcclxuICB9XHJcblxyXG4gIGNsZWFySW50ZXJuYWxzKCkge1xyXG4gICAgdGhpcy5jYWxsSW50ZXJuYWwoJ2Rpc3Bvc2UnKTtcclxuICAgICF0aGlzLmNzcyB8fCB0aGlzLmNzcy5yZW1vdmUoKTtcclxuICAgICF0aGlzLmh0bWwgfHwgdGhpcy5odG1sLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RGF0YShjc3M9JycsIGh0bWw9JycsIGpzPScnKSB7XHJcbiAgICB0aGlzLmNsZWFySW50ZXJuYWxzKCk7XHJcblxyXG4gICAgdGhpcy5jc3MgPSAkKGA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+JHtjc3N9PC9zdHlsZT5gKS5hcHBlbmRUbyh0aGlzLmpDb250YWluZXIpO1xyXG4gICAgdGhpcy5odG1sID0gJChodG1sKS5hcHBlbmRUbyh0aGlzLmpDb250YWluZXIpO1xyXG4gICAgY29uc3QgaW5pdCA9IGV2YWwoanMpO1xyXG4gICAgaWYoaW5pdCkge1xyXG4gICAgICB0aGlzLm9iamVjdCA9IGluaXQodGhpcy5qQ29udGFpbmVyLCB0aGlzLnByb3BzKSB8fCB7fTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHBlbmRlZENhbGwoY2xiKSB7XHJcbiAgICBjb25zdCB0aW1lc3RhbXAgPSB0aGlzLnRpbWVzdGFtcCA9IERhdGUubm93KCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpPT4ge1xyXG4gICAgICBpZih0aW1lc3RhbXA9PT10aGlzLnRpbWVzdGFtcCkge1xyXG4gICAgICAgIGNsYigpO1xyXG4gICAgICB9XHJcbiAgICB9LCBDU1NMYXllci5kZWxheSk7XHJcbiAgfVxyXG5cclxuICBpc0hpZGRlbigpIHtcclxuICAgIHJldHVybiB0aGlzLmpDb250YWluZXIuaGFzQ2xhc3MoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgaGlkZSgpIHtcclxuICAgIGxldCByZXM7XHJcbiAgICBpZighdGhpcy5pc0hpZGRlbigpKSB7XHJcbiAgICAgIHRoaXMuakNvbnRhaW5lci5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgIHRoaXMuY2FsbEludGVybmFsKCdoaWRlJyk7XHJcbiAgICAgIHJlcyA9IG5ldyBQcm9taXNlKChyZXNvbHZlKT0+IHtcclxuICAgICAgICB0aGlzLnBlbmRlZENhbGwoKCk9PiB7XHJcbiAgICAgICAgICB0aGlzLmNhbGxJbnRlcm5hbCgnaGlkZGVuJyk7XHJcbiAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJlcyA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIHNob3coKSB7XHJcbiAgICBsZXQgcmVzO1xyXG4gICAgaWYodGhpcy5pc0hpZGRlbigpKSB7XHJcbiAgICAgIHRoaXMuakNvbnRhaW5lci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgIHRoaXMuY2FsbEludGVybmFsKCdzaG93Jyk7XHJcbiAgICAgIHJlcyA9IG5ldyBQcm9taXNlKChyZXNvbHZlKT0+IHtcclxuICAgICAgICB0aGlzLnBlbmRlZENhbGwoKCk9PiB7XHJcbiAgICAgICAgICB0aGlzLmNhbGxJbnRlcm5hbCgnc2hvd24nKTtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmVzID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvQ1NTTGF5ZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9DU1NMYXllci5qcyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhY2hlIHtcclxuXHJcbiAgY29uc3RydWN0b3IobWF4U2l6ZT1JbmZpbml0eSwgc2l6ZW9mPUNhY2hlLmNvdW50U2l6ZW9mKSB7XHJcbiAgICB0aGlzLm9zID0gbmV3IE1hcCgpO1xyXG4gICAgdGhpcy5zaXplb2YgPSBzaXplb2Y7XHJcbiAgICB0aGlzLm1heFNpemUgPSBtYXhTaXplO1xyXG4gICAgdGhpcy5zaXplID0gMDtcclxuICB9XHJcblxyXG4gIGZvckVhY2goY2xiKSB7XHJcbiAgICB0aGlzLm9zLmZvckVhY2goKHYsIGspPT4gY2xiKFtrLHZdKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY291bnRTaXplb2YodmFsdWUpIHtcclxuICAgIHJldHVybiAxO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlKGspIHtcclxuICAgIGxldCByZXMgPSBmYWxzZTtcclxuICAgIGNvbnN0IHYgPSB0aGlzLm9zLmdldChrKTtcclxuICAgIGlmKCF2LmxvY2tlZCB8fCAhdi5sb2NrZWQoaykpIHtcclxuICAgICAgdGhpcy5zaXplIC09IHRoaXMuc2l6ZW9mKHYpO1xyXG4gICAgICBpZih2LmRpc3Bvc2UpIHtcclxuICAgICAgICB2LmRpc3Bvc2UoKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLm9zLmRlbGV0ZShrKTtcclxuICAgICAgcmVzID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICBmcmVlU3BhY2UoKSB7XHJcbiAgICBjb25zdCBhcnIgPSBbXTtcclxuICAgIGZvcihsZXQgcCBvZiB0aGlzLm9zKSB7XHJcbiAgICAgIGFyci5wdXNoKHt0aW1lc3RhbXA6IHBbMV0udGltZXN0YW1wLCBrZXk6IHBbMF19KTtcclxuICAgIH1cclxuICAgIGFyci5zb3J0KChhLCBiKT0+IGEudGltZXN0YW1wLWIudGltZXN0YW1wKTtcclxuICAgIGZvcihsZXQgaT0wOyBpPGFyci5sZW5ndGggJiYgdGhpcy5zaXplPjMqdGhpcy5tYXhTaXplLzQ7ICsraSkge1xyXG4gICAgICB0aGlzLnJlbW92ZShhcnJbaV0ua2V5KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBjb25zdCBhcnIgPSBbXTtcclxuICAgIGZvcihsZXQgcCBvZiB0aGlzLm9zKSB7XHJcbiAgICAgIGFyci5wdXNoKHt2OiBwWzFdLCBrOiBwWzBdfSk7XHJcbiAgICB9XHJcbiAgICBmb3IobGV0IG8gb2YgYXJyKSB7XHJcbiAgICAgIGlmKG8udi5kaXNwb3NlKSB7XHJcbiAgICAgICAgby52LmRpc3Bvc2UoKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLm9zLmRlbGV0ZShvLmspO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlY3Vyc2lvblNpemVvZih2YWx1ZSkge1xyXG4gICAgbGV0IHNpemUgPSAwO1xyXG4gICAgaWYodmFsdWUpIHtcclxuICAgICAgKytzaXplO1xyXG4gICAgICBjb25zdCBsZW4gPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgIGlmKGxlbj09PXVuZGVmaW5lZCkge1xyXG4gICAgICAgIGZvciAobGV0IHAgaW4gdmFsdWUpIHtcclxuICAgICAgICAgIGlmKHZhbHVlLmhhc093blByb3BlcnR5KHApKSB7XHJcbiAgICAgICAgICAgIHNpemUrPUNhY2hlLnJlY3Vyc2lvblNpemVvZih2YWx1ZVtwXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNpemUrPWxlblxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2l6ZTtcclxuICB9XHJcblxyXG4gIGdldFRpbWVzdGFtcCgpIHtcclxuICAgIHJldHVybiBEYXRlLm5vdygpO1xyXG4gIH1cclxuXHJcblxyXG4gIGdldChrZXkpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5vcy5nZXQoa2V5KTtcclxuICAgIGlmKHZhbHVlKSB7XHJcbiAgICAgIHZhbHVlLnRpbWVzdGFtcCA9IHRoaXMuZ2V0VGltZXN0YW1wKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBwdXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgdmFsdWUudGltZXN0YW1wID0gdGhpcy5nZXRUaW1lc3RhbXAoKTtcclxuICAgIHRoaXMub3Muc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgdGhpcy5zaXplKz10aGlzLnNpemVvZih2YWx1ZSk7XHJcbiAgICBpZih0aGlzLnNpemU+dGhpcy5tYXhTaXplKSB7XHJcbiAgICAgIHRoaXMuZnJlZVNwYWNlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0NhY2hlLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQ2FjaGUuanMiLCJpbXBvcnQge1RIUkVFfSBmcm9tICcuLi9saWJzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb2xsZXIgZXh0ZW5kcyBUSFJFRS5FdmVudERpc3BhdGNoZXIge1xyXG5cclxuICBoYW5kbGVEZWZhdWx0KGlkLCBlLCBkYXRhKSB7XHJcbiAgICAvL2NvbnNvbGUubG9nKGlkKyctJytlLnR5cGUrJy0nK2RhdGEpO1xyXG4gIH1cclxuXHJcbiAgZGlzcGF0Y2hBc3luYyhlKSB7XHJcbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT4gdGhpcy5kaXNwYXRjaEV2ZW50KGUpKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcblxyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvQ29udHJvbGxlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0NvbnRyb2xsZXIuanMiLCJpbXBvcnQgRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9FdmVudENvbnZlcnRlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDdXN0b21FdmVudENvbnZlcnRlciBleHRlbmRzIEV2ZW50Q29udmVydGVyIHtcclxuXHJcbiAgLy8gY3VzdG9tXHJcbiAgLy8gdGVzdEludGVyc2VjdGlvbihlLCBkYXRhKTtcclxuICAvLyBjdXN0b20ub2JqZWN0XHJcbiAgLy8gdGVzdChvYmplY3QpO1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3bmQsIGRvYywgY3VzdG9tVGVzdD0oKT0+IGZhbHNlLCBlRG9jKSB7XHJcbiAgICBzdXBlcih3bmQsIGRvYyk7XHJcblxyXG4gICAgdGhpcy5lRG9jID0gZURvYztcclxuICAgIHRoaXMuY3VzdG9tVGVzdCA9IGN1c3RvbVRlc3Q7XHJcbiAgICB0aGlzLmN1c3RvbXMgPSBbXTtcclxuICB9XHJcblxyXG4gIHRlc3Qob2JqZWN0MSwgb2JqZWN0Mikge1xyXG4gICAgcmV0dXJuIG9iamVjdDEgJiYgb2JqZWN0Mj8gdGhpcy5jdXN0b21UZXN0KG9iamVjdDEsIG9iamVjdDIpOiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdldENhbGxiYWNrKG9iamVjdCkge1xyXG4gICAgcmV0dXJuIG9iamVjdC50YXJnZXQuY2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICBhZGRDdXN0b20oY3VzdG9tKSB7XHJcbiAgICB0aGlzLmN1c3RvbXMucHVzaChjdXN0b20pO1xyXG4gIH1cclxuXHJcbiAgZ2V0T2JqZWN0KGUsIGRhdGEpIHtcclxuICAgIGxldCBvYmplY3Q7XHJcbiAgICBpZihkYXRhLmRvYz09PXRoaXMuZURvYykge1xyXG4gICAgICBmb3IobGV0IGN1c3RvbSBvZiB0aGlzLmN1c3RvbXMpIHtcclxuICAgICAgICBvYmplY3QgPSBjdXN0b20udGVzdEludGVyc2VjdGlvbihlLCBkYXRhKTtcclxuICAgICAgICBpZihvYmplY3QpIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9iamVjdDtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0N1c3RvbUV2ZW50Q29udmVydGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQ3VzdG9tRXZlbnRDb252ZXJ0ZXIuanMiLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaW5kZXIge1xyXG5cclxuICBzdGF0aWMgREVMSU1JVEVSID0gJyAnO1xyXG5cclxuICBzdGF0aWMgaXNEZWxpbWV0cihzKSB7XHJcbiAgICByZXR1cm4gcz09PUZpbmRlci5ERUxJTUlURVI7XHJcbiAgfVxyXG5cclxuICBtZXJnZSgpIHtcclxuICAgIGNvbnN0IGFzID0gW10sIG1hcCA9IFtdLCBzdHJzID0gdGhpcy5zdHJzO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8c3Rycy5sZW5ndGg7ICsraSkge1xyXG4gICAgICBpZihzdHJzW2ldLmxlbmd0aCkge1xyXG4gICAgICAgIG1hcC5wdXNoKHtcclxuICAgICAgICAgIGJhc2U6IGksXHJcbiAgICAgICAgICBvZmZzZXQ6IHBcclxuICAgICAgICB9KTtcclxuICAgICAgICBhcy5wdXNoKHN0cnNbaV0pO1xyXG4gICAgICAgIHAgKz0gc3Ryc1tpXS5sZW5ndGg7XHJcbiAgICAgICAgaWYoaTxzdHJzLmxlbmd0aC0xICYmICFGaW5kZXIuaXNEZWxpbWV0cihzdHJzW2ldLmNoYXJBdChzdHJzW2ldLmxlbmd0aC0xKSkgJiYgIUZpbmRlci5pc0RlbGltZXRyKHN0cnNbaSsxXS5jaGFyQXQoMCkpKSB7XHJcbiAgICAgICAgICBhcy5wdXNoKEZpbmRlci5ERUxJTUlURVIpO1xyXG4gICAgICAgICAgKytwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5tYXAgPSBtYXA7XHJcbiAgICB0aGlzLnN0ciA9IGFzLmpvaW4oJycpO1xyXG4gIH1cclxuXHJcbiAgYWRkSGl0cyhwKSB7XHJcbiAgICBjb25zdCBpbmZvID0gdGhpcy5tYXBbVXRpbHMubG93ZXJCb3VuZCh0aGlzLm1hcCwge29mZnNldDogcH0sIChhLCBiKT0+IGEub2Zmc2V0LWIub2Zmc2V0KV07XHJcbiAgICBsZXQgY2hhcnMgPSB0aGlzLnBhdHRlcm4ubGVuZ3RoLCBpID0gaW5mby5iYXNlO1xyXG4gICAgcCAtPSBpbmZvLm9mZnNldDtcclxuICAgIHdoaWxlKGNoYXJzKSB7XHJcbiAgICAgIGlmKHRoaXMuc3Ryc1tpXS5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBkZWxpbWV0ZXIgPSBpPHRoaXMuc3Rycy5sZW5ndGgtMSAmJiAhRmluZGVyLmlzRGVsaW1ldHIodGhpcy5zdHJzW2ldLmNoYXJBdCh0aGlzLnN0cnNbaV0ubGVuZ3RoLTEpKSAmJiAhRmluZGVyLmlzRGVsaW1ldHIodGhpcy5zdHJzW2krMV0uY2hhckF0KDApKSxcclxuICAgICAgICAgICAgICBsZW5ndGggPSBNYXRoLm1pbih0aGlzLnN0cnNbaV0ubGVuZ3RoKyhkZWxpbWV0ZXI/IDE6IDApLXAsIGNoYXJzKTtcclxuICAgICAgICBpZihwPHRoaXMuc3Ryc1tpXS5sZW5ndGgpIHtcclxuICAgICAgICAgIHRoaXMuaGl0cy5wdXNoKHtcclxuICAgICAgICAgICAgaW5kZXg6IGksXHJcbiAgICAgICAgICAgIG9mZnNldDogcCxcclxuICAgICAgICAgICAgbGVuZ3RoOiBNYXRoLm1pbihsZW5ndGgsIHRoaXMuc3Ryc1tpXS5sZW5ndGgtcCksXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hhcnMgLT0gbGVuZ3RoO1xyXG4gICAgICAgICsraTtcclxuICAgICAgICBwID0gMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkQ29udGV4dChwKSB7XHJcbiAgICBsZXQgZiA9IHAsIGwgPSBwK3RoaXMucGF0dGVybi5sZW5ndGgtMSwgZGVscyA9IHRoaXMucHJvcHMuY29udGV4dExlbmd0aCwgcHJldkRlbHMgPSBkZWxzKzE7XHJcbiAgICB3aGlsZShkZWxzICYmIHByZXZEZWxzLWRlbHMpIHtcclxuICAgICAgcHJldkRlbHMgPSBkZWxzO1xyXG4gICAgICBpZihkZWxzJTIpIHtcclxuICAgICAgICBmb3IobGV0IGk9Zi0yOyBpPj0wOyAtLWkpIHtcclxuICAgICAgICAgIGlmKEZpbmRlci5pc0RlbGltZXRyKHRoaXMuc3RyW2ldKSB8fCBpPT09MCkge1xyXG4gICAgICAgICAgICBmID0gaT09PTA/IDA6IGkrMTtcclxuICAgICAgICAgICAgLS1kZWxzO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgZm9yKGxldCBpPWwrMjsgaTx0aGlzLnN0ci5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgaWYoRmluZGVyLmlzRGVsaW1ldHIodGhpcy5zdHJbaV0pIHx8IGk9PT10aGlzLnN0ci5sZW5ndGgtMSkge1xyXG4gICAgICAgICAgICBsID0gaT09PXRoaXMuc3RyLmxlbmd0aC0xPyBpPT09dGhpcy5zdHIubGVuZ3RoLTE6IGktMTtcclxuICAgICAgICAgICAgLS1kZWxzO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuY29udGV4dHMucHVzaCh0aGlzLnN0ci5zdWJzdHIoZiwgbC1mKzEpKTtcclxuICB9XHJcblxyXG4gIGdldEhpdHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oaXRzO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q29udGV4dHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0cztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBkZWZhdWx0cyA9IHtcclxuICAgIGNvbnRleHRMZW5ndGg6IDcsXHJcbiAgICBoaXRzOiB0cnVlLFxyXG4gICAgY29udGV4dHM6IHRydWVcclxuICB9O1xyXG5cclxuICBjb25zdHJ1Y3RvcihzdHJzLCBwYXR0ZXJuLCBwcm9wcykge1xyXG4gICAgdGhpcy5wcm9wcyA9IHtcclxuICAgICAgLi4uRmluZGVyLmRlZmF1bHRzLFxyXG4gICAgICAuLi5wcm9wc1xyXG4gICAgfTtcclxuICAgIHRoaXMuc3RycyA9IHN0cnM7XHJcbiAgICBjb25zdCBkYXRhID0gdGhpcy5tZXJnZShzdHJzKTtcclxuICAgIHRoaXMuaGl0cyA9IFtdO1xyXG4gICAgdGhpcy5jb250ZXh0cyA9IFtdO1xyXG4gICAgdGhpcy5wYXR0ZXJuID0gcGF0dGVybi50b0xvd2VyQ2FzZSgpO1xyXG4gICAgdGhpcy5sc3RyID0gdGhpcy5zdHIudG9Mb3dlckNhc2UoKTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIHdoaWxlKHRydWUpIHtcclxuICAgICAgcCA9IHRoaXMubHN0ci5pbmRleE9mKHRoaXMucGF0dGVybiwgcCk7XHJcbiAgICAgIGlmKHA9PT0tMSkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYWRkSGl0cyhwKTtcclxuICAgICAgICB0aGlzLmFkZENvbnRleHQocCk7XHJcbiAgICAgICAgcCArPSB0aGlzLnBhdHRlcm4ubGVuZ3RoO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0ZpbmRlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0ZpbmRlci5qcyIsImltcG9ydCB7UERGSlN9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscyc7XHJcblxyXG5QREZKUy53b3JrZXJTcmMgPSAod2luZG93LlBERkpTX0xPQ0FMRT8gUERGSlNfTE9DQUxFOiBHTE9CQUxfUEFUSFMpLnBkZkpzV29ya2VyO1xyXG5QREZKUy5jTWFwVXJsID0gKHdpbmRvdy5QREZKU19MT0NBTEU/IFBERkpTX0xPQ0FMRTogR0xPQkFMX1BBVEhTKS5wZGZKc0NNYXBVcmw7XHJcblBERkpTLmNNYXBQYWNrZWQgPSB0cnVlO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGRmIHtcclxuXHJcbiAgY29uc3RydWN0b3Ioc3JjLCBsb2FkaW5nUHJvZ3Jlc3MpIHtcclxuICAgIHRoaXMuc3JjID0gVXRpbHMubm9ybWFsaXplVXJsKHNyYyk7XHJcbiAgICB0aGlzLmhhbmRsZXJRdWV1ZSA9IFtdO1xyXG4gICAgdGhpcy5wcm9ncmVzRGF0YSA9IHtsb2FkZWQ6IC0xLCB0b3RhbDogMX07XHJcbiAgICB0aGlzLmxvYWRpbmdQcm9ncmVzcyA9IGxvYWRpbmdQcm9ncmVzcztcclxuXHJcbiAgICBQREZKUy5nZXREb2N1bWVudCh7XHJcbiAgICAgIHVybDogdGhpcy5zcmMsXHJcbiAgICAgIHJhbmdlQ2h1bmtTaXplOiA1MTIqMTAyNFxyXG4gICAgfSwgbnVsbCwgbnVsbCwgKGRhdGEpPT4ge1xyXG4gICAgICBpZih0aGlzLmxvYWRpbmdQcm9ncmVzcykge1xyXG4gICAgICAgIGxldCBjdXIgPSBNYXRoLmZsb29yKDEwMCpkYXRhLmxvYWRlZC9kYXRhLnRvdGFsKSxcclxuICAgICAgICAgICAgICBvbGQgPSBNYXRoLmZsb29yKDEwMCp0aGlzLnByb2dyZXNEYXRhLmxvYWRlZC90aGlzLnByb2dyZXNEYXRhLnRvdGFsKTtcclxuICAgICAgICBpZihjdXIhPT1vbGQpIHtcclxuICAgICAgICAgIGN1ciA9IGlzTmFOKGN1cik/IDA6IGN1cjtcclxuICAgICAgICAgIGN1ciA9IGN1cj4xMDA/IDEwMDogY3VyO1xyXG4gICAgICAgICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3MoY3VyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wcm9ncmVzRGF0YSA9IGRhdGE7XHJcbiAgICB9KS5cclxuICAgIHRoZW4oKGhhbmRsZXIpPT4ge1xyXG4gICAgICBpZihoYW5kbGVyLm51bVBhZ2VzPjEpIHtcclxuICAgICAgICBQcm9taXNlLmFsbChbaGFuZGxlci5nZXRQYWdlKDEpLCBoYW5kbGVyLmdldFBhZ2UoMildKS5cclxuICAgICAgICB0aGVuKChwYWdlcyk9PiB7XHJcbiAgICAgICAgICB0aGlzLmluaXQoaGFuZGxlciwgcGFnZXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaW5pdChoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpbml0KGhhbmRsZXIsIHBhZ2VzKSB7XHJcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xyXG4gICAgdGhpcy5kb3VibGVkUGFnZXMgPSBwYWdlcz8gKE1hdGguYWJzKDIqUGRmLmdldFBhZ2VTaXplKHBhZ2VzWzBdKS53aWR0aC1QZGYuZ2V0UGFnZVNpemUocGFnZXNbMV0pLndpZHRoKS9QZGYuZ2V0UGFnZVNpemUocGFnZXNbMF0pLndpZHRoPDFlLTQpOiBmYWxzZTtcclxuICAgIGxldCBkb25lID0gUHJvbWlzZS5yZXNvbHZlKGhhbmRsZXIpO1xyXG4gICAgZm9yKGxldCBjbGIgb2YgdGhpcy5oYW5kbGVyUXVldWUucmV2ZXJzZSgpKSB7XHJcbiAgICAgIGRvbmUgPSBkb25lLnRoZW4oKGhhbmRsZXIpPT4ge1xyXG4gICAgICAgIGNsYihoYW5kbGVyKTtcclxuICAgICAgICByZXR1cm4gaGFuZGxlcjtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlVHlwZShuKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuZG91YmxlZFBhZ2VzIHx8IG49PT0wIHx8IG49PT10aGlzLmdldFBhZ2VzTnVtKCktMT8gJ2Z1bGwnOiAobiYxPyAnbGVmdCc6ICdyaWdodCcpO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGFnZShuKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVyLmdldFBhZ2UodGhpcy5kb3VibGVkUGFnZXM/IE1hdGguY2VpbChuLzIpKzE6IG4rMSk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5oYW5kbGVyUXVldWUuc3BsaWNlKDAsIHRoaXMuaGFuZGxlclF1ZXVlLmxlbmd0aCk7XHJcbiAgICBkZWxldGUgdGhpcy5oYW5kbGVyO1xyXG4gIH1cclxuXHJcbiAgc2V0TG9hZGluZ1Byb2dyZXNzQ2xiKGNsYikge1xyXG4gICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3MgPSBjbGI7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlc051bSgpIHtcclxuICAgIHJldHVybiB0aGlzLmhhbmRsZXI/ICh0aGlzLmRvdWJsZWRQYWdlcz8gMioodGhpcy5oYW5kbGVyLm51bVBhZ2VzLTEpOiB0aGlzLmhhbmRsZXIubnVtUGFnZXMpOiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0UGFnZVNpemUocGFnZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkdGg6IHBhZ2Uudmlld1syXS1wYWdlLnZpZXdbMF0sXHJcbiAgICAgIGhlaWdodDogcGFnZS52aWV3WzNdLXBhZ2Uudmlld1sxXVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4vLyAgIGlmKHBhZ2VzPjEpIHtcclxuLy8gICBoYW5kbGVyLmdldFBhZ2UoMikuXHJcbi8vICAgdGhlbigocGFnZSk9PiB7XHJcbi8vICAgICBjb25zdCBzaXplMSA9IFBkZi5nZXRQYWdlU2l6ZShwYWdlKTtcclxuLy8gICAgIHRoaXMucHJvcHMuZG91YmxlZFBhZ2VzID0gMipzaXplMC53aWR0aD09PXNpemUxLndpZHRoO1xyXG4vLyAgICAgdGhpcy5yZWFkeSgpO1xyXG4vLyAgIH0pLlxyXG4vLyAgIGNhdGNoKCgpPT4gdGhpcy5yZWFkeSgpKTtcclxuLy8gfVxyXG4vLyBlbHNlIHtcclxuXHJcbiAgZ2V0SGFuZGxlcihjbGIpIHtcclxuICAgIGlmKHRoaXMuaGFuZGxlcikge1xyXG4gICAgICBjbGIodGhpcy5oYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmhhbmRsZXJRdWV1ZS5wdXNoKGNsYik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9QZGYuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9QZGYuanMiLCJpbXBvcnQge1RIUkVFLCAkfSBmcm9tICcuLi9saWJzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRocmVlRXZlbnRDb252ZXJ0ZXJGcyB7XHJcblxyXG4gIHN0YXRpYyBvYmplY3RzVGVzdChvYmplY3QxLCBvYmplY3QyKSB7XHJcbiAgICByZXR1cm4gb2JqZWN0MSAmJiBvYmplY3QyPyBvYmplY3QxLm9iamVjdD09PW9iamVjdDIub2JqZWN0OiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBvYmplY3RzQW5kRmFjZXNUZXN0KG9iamVjdDEsIG9iamVjdDIpIHtcclxuICAgIHJldHVybiBvYmplY3QxICYmIG9iamVjdDI/IG9iamVjdDEub2JqZWN0PT09b2JqZWN0Mi5vYmplY3QgJiYgb2JqZWN0MS5mYWNlLm1hdGVyaWFsSW5kZXg9PT1vYmplY3QyLmZhY2UubWF0ZXJpYWxJbmRleDogZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3Rvcih2aXN1YWxXb3JsZCwgdGVzdD1UaHJlZUV2ZW50Q29udmVydGVyRnMub2JqZWN0c0FuZEZhY2VzVGVzdCkge1xyXG4gICAgdGhpcy52aXN1YWwgPSB2aXN1YWxXb3JsZDtcclxuICAgIHRoaXMuY29vcmRzID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcclxuICAgIHRoaXMucmF5Y2FzdGVyID0gdGhpcy52aXN1YWwucmF5Y2FzdGVyO1xyXG4gICAgdGhpcy5jYW1lcmEgPSB0aGlzLnZpc3VhbC5jYW1lcmE7XHJcbiAgICB0aGlzLnRocmVlcyA9IFtdO1xyXG4gICAgdGhpcy50ZXN0ID0gdGVzdDtcclxuICB9XHJcblxyXG4gIGFkZFRocmVlKHRocmVlKSB7XHJcbiAgICB0aGlzLnRocmVlcy5wdXNoKHRocmVlKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVRocmVlKHRocmVlKSB7XHJcbiAgICBjb25zdCBpID0gdGhpcy50aHJlZXMuaW5kZXhPZih0aHJlZSk7XHJcbiAgICBpZih+aSkge1xyXG4gICAgICB0aGlzLnRocmVlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRPYmplY3QoZSkge1xyXG4gICAgdGhpcy5zZXRDb29yZHNGcm9tRXZlbnQoZSk7XHJcbiAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMuY29vcmRzLCB0aGlzLmNhbWVyYSk7XHJcbiAgICBjb25zdCBpbnRlcnNlY3RzID0gdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyh0aGlzLnRocmVlcyk7XHJcbiAgICByZXR1cm4gaW50ZXJzZWN0c1swXTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1RocmVlRXZlbnRDb252ZXJ0ZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9UaHJlZUV2ZW50Q29udmVydGVyLmpzIiwiaW1wb3J0IEJhc2VNYXRoVXRpbHMgZnJvbSAnLi9CYXNlTWF0aFV0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRocmVlVXRpbHMge1xyXG5cclxuICBzdGF0aWMgdmVydGljZXMyVVZzKHZlcnRpY2VzLCBpbmRlY2VzLCBmaXJzdCwgbGFzdCwgY29udmVyQ2xiKSB7XHJcbiAgICBjb25zdCByID0gW107XHJcbiAgICBmb3IobGV0IGkgPSBmaXJzdDsgaTxsYXN0OyArK2kpIHtcclxuICAgICAgY29uc3QgdmlzID0gW2luZGVjZXNbaV0uYSxpbmRlY2VzW2ldLmIsaW5kZWNlc1tpXS5jXTtcclxuICAgICAgZm9yKGxldCBqID0gMDsgajx2aXMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICBpZighclt2aXNbal1dKSB7XHJcbiAgICAgICAgICByW3Zpc1tqXV0gPSBjb252ZXJDbGIodmVydGljZXNbdmlzW2pdXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjb21wdXRlRmFjZVZlcnRleFV2cyhnZW9tZXRyeSwgZmFjZXMpIHtcclxuICAgIGNvbnN0IHV2cyA9IFtcclxuICAgICAgICAgICAgICAgIFRocmVlVXRpbHMudmVydGljZXMyVVZzKGdlb21ldHJ5LnZlcnRpY2VzLCBnZW9tZXRyeS5mYWNlcywgMCwgZmFjZXNbMF0sIChwKT0+bmV3IFRIUkVFLlZlY3RvcjIocC54LCAxLXAueikpLFxyXG4gICAgICAgICAgICAgICAgVGhyZWVVdGlscy52ZXJ0aWNlczJVVnMoZ2VvbWV0cnkudmVydGljZXMsIGdlb21ldHJ5LmZhY2VzLCBmYWNlc1swXSwgZmFjZXNbMV0sIChwKT0+bmV3IFRIUkVFLlZlY3RvcjIoMS1wLngsIDEtcC56KSksXHJcbiAgICAgICAgICAgICAgICBUaHJlZVV0aWxzLnZlcnRpY2VzMlVWcyhnZW9tZXRyeS52ZXJ0aWNlcywgZ2VvbWV0cnkuZmFjZXMsIGZhY2VzWzFdLCBmYWNlc1syXSwgKHApPT5uZXcgVEhSRUUuVmVjdG9yMihwLngsIHAueSkpLFxyXG4gICAgICAgICAgICAgICAgVGhyZWVVdGlscy52ZXJ0aWNlczJVVnMoZ2VvbWV0cnkudmVydGljZXMsIGdlb21ldHJ5LmZhY2VzLCBmYWNlc1syXSwgZmFjZXNbM10sIChwKT0+bmV3IFRIUkVFLlZlY3RvcjIoMS1wLngsIHAueSkpLFxyXG4gICAgICAgICAgICAgICAgVGhyZWVVdGlscy52ZXJ0aWNlczJVVnMoZ2VvbWV0cnkudmVydGljZXMsIGdlb21ldHJ5LmZhY2VzLCBmYWNlc1szXSwgZmFjZXNbNF0sIChwKT0+bmV3IFRIUkVFLlZlY3RvcjIocC56LCBwLnkpKSxcclxuICAgICAgICAgICAgICAgIFRocmVlVXRpbHMudmVydGljZXMyVVZzKGdlb21ldHJ5LnZlcnRpY2VzLCBnZW9tZXRyeS5mYWNlcywgZmFjZXNbNF0sIGdlb21ldHJ5LmZhY2VzLmxlbmd0aCwgKHApPT5uZXcgVEhSRUUuVmVjdG9yMigxLXAueiwgcC55KSlcclxuICAgIF07XHJcblxyXG4gICAgbGV0IHV2c2kgPSAwO1xyXG4gICAgZm9yKGxldCBpID0gMDsgaTxnZW9tZXRyeS5mYWNlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICB1dnNpICs9IGZhY2VzW3V2c2ldID09PSBpO1xyXG4gICAgICBjb25zdCBmID0gZ2VvbWV0cnkuZmFjZXNbaV07XHJcbiAgICAgIGYubWF0ZXJpYWxJbmRleCA9IHV2c2k7XHJcbiAgICAgIGdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnNbMF1baV0gPSBbdXZzW3V2c2ldW2YuYV0sIHV2c1t1dnNpXVtmLmJdLCB1dnNbdXZzaV1bZi5jXV07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlTWFya2VyKHAsIGMsIHNpemUpIHtcclxuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeShzaXplKSwgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHsgY29sb3I6IGMgfSkpO1xyXG4gICAgbWFya2VyLnBvc2l0aW9uLnNldChwLngscC55LHAueik7XHJcbiAgICByZXR1cm4gbWFya2VyO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGZpbmRVdlRyaXMoZ2VvbWV0cnksIHBzLCBmaXJzdCwgbGFzdCkge1xyXG4gICAgY29uc3QgcmVzID0gW107XHJcbiAgICBmb3IobGV0IHAgb2YgcHMpIHtcclxuICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XHJcbiAgICAgIGZvcihsZXQgaT1maXJzdDsgaTxsYXN0ICYmICFmb3VuZDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgdHJpID0gZ2VvbWV0cnkuZmFjZVZlcnRleFV2c1swXVtpXTtcclxuICAgICAgICBpZihCYXNlTWF0aFV0aWxzLmlzSW5zaWRlQ29udlBvbHkodHJpLCBwKSkge1xyXG4gICAgICAgICAgcmVzLnB1c2goe1xyXG4gICAgICAgICAgICBjb2VmczogQmFzZU1hdGhVdGlscy5jb21wdXRlSW50ZXJwQ29lZnModHJpLCBwKSxcclxuICAgICAgICAgICAgaVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmKCFmb3VuZCkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JhZCBwb2ludCcpO1xyXG4gICAgICAgIHJlcy5wdXNoKHVuZGVmaW5lZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZmluZEludGVybmFsVmVydGljZXMoZ2VvbWV0cnksIHBzLCBmaXJzdCwgbGFzdCkge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IobGV0IGk9Zmlyc3Q7IGk8bGFzdDsgKytpKSB7XHJcbiAgICAgIGNvbnN0IHRyaSA9IGdlb21ldHJ5LmZhY2VWZXJ0ZXhVdnNbMF1baV0sIGYgPSBnZW9tZXRyeS5mYWNlc1tpXSwgdnMgPSBbZi5hLCBmLmIsIGYuY107XHJcbiAgICAgIGZvcihsZXQgaj0wOyBqPHRyaS5sZW5ndGg7ICsraikge1xyXG4gICAgICAgIGlmKHJlc1t2c1tqXV09PT11bmRlZmluZWQgJiYgQmFzZU1hdGhVdGlscy5pc0luc2lkZVBvbHkocHMsIHRyaVtqXSkpIHtcclxuICAgICAgICAgIHJlc1t2c1tqXV0gPSB7XHJcbiAgICAgICAgICAgIHA6IHRyaVtqXSxcclxuICAgICAgICAgICAgaTogdnNbal0sXHJcbiAgICAgICAgICAgIG46IGYudmVydGV4Tm9ybWFsc1tqXVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHJlcyk7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9UaHJlZVV0aWxzLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVGhyZWVVdGlscy5qcyIsIlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYXJnZXQge1xyXG5cclxuICBzdGF0aWMgdGVzdChvYmplY3QxLCBvYmplY3QyKSB7XHJcbiAgICByZXR1cm4gb2JqZWN0MS50YXJnZXQ9PT1vYmplY3QyLnRhcmdldDtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL3RhcmdldHMvVGFyZ2V0LmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvdGFyZ2V0cy9UYXJnZXQuanMiLCJpbXBvcnQgeyQsIHRyfSBmcm9tICcuL2pzL2xpYnMnO1xyXG5pbXBvcnQgRGV0ZWN0b3IgZnJvbSAnRGV0ZWN0b3InO1xyXG5pbXBvcnQgVmlzdWFsV29ybGQgZnJvbSAnVmlzdWFsV29ybGQnO1xyXG5pbXBvcnQgUGRmTGlua3NIYW5kbGVyIGZyb20gJy4vanMvY2xhc3Nlcy9QZGZMaW5rc0hhbmRsZXInO1xyXG5pbXBvcnQgQm9vayBmcm9tICcuL2pzL2NsYXNzZXMvQm9vayc7XHJcbmltcG9ydCBCb29rVmlldyBmcm9tICcuL2pzL2NsYXNzZXMvQm9va1ZpZXcnO1xyXG5pbXBvcnQgQm9va0NvbnRyb2xsZXIgZnJvbSAnLi9qcy9jbGFzc2VzL0Jvb2tDb250cm9sbGVyJztcclxuaW1wb3J0IFBkZkJvb2tQcm9wc0J1aWxkZXIgZnJvbSAnLi9qcy9jbGFzc2VzL1BkZkJvb2tQcm9wc0J1aWxkZXInO1xyXG5pbXBvcnQgQ2xiQm9va1Byb3BzQnVpbGRlciBmcm9tICcuL2pzL2NsYXNzZXMvQ2xiQm9va1Byb3BzQnVpbGRlcic7XHJcbmltcG9ydCBMb2FkaW5nQ29udHJvbGxlciBmcm9tICdMb2FkaW5nQ29udHJvbGxlcic7XHJcbmltcG9ydCBTZWFyY2ggZnJvbSAnU2VhcmNoJztcclxuaW1wb3J0IEJvb2ttYXJrcyBmcm9tICdCb29rbWFya3MnO1xyXG5pbXBvcnQgVGh1bWJuYWlscyBmcm9tICdUaHVtYm5haWxzJztcclxuaW1wb3J0IFRvY0NvbnRyb2xsZXIgZnJvbSAnLi9qcy9jbGFzc2VzL1RvY0NvbnRyb2xsZXInO1xyXG5pbXBvcnQgQm9va1ByaW50ZXIgZnJvbSAnLi9qcy9jbGFzc2VzL0Jvb2tQcmludGVyJztcclxuaW1wb3J0IEF1dG9OYXZpZ2F0b3IgZnJvbSAnLi9qcy9jbGFzc2VzL0F1dG9OYXZpZ2F0b3InO1xyXG5pbXBvcnQgU291bmRzRW52aXJvbWVudCBmcm9tICcuL2pzL2NsYXNzZXMvU291bmRzRW52aXJvbWVudCc7XHJcblxyXG4kLmZuLkZsaXBCb29rID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gIGNvbnN0IHNjZW5lID0ge1xyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgaWYodGhpcy5yZWFkeSkge1xyXG4gICAgICAgICFzY2VuZS5wZGZMaW5rc0hhbmRsZXIgfHwgc2NlbmUucGRmTGlua3NIYW5kbGVyLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUucGRmTGlua3NIYW5kbGVyO1xyXG4gICAgICAgIHNjZW5lLnNvdW5kcy5kaXNwb3NlKCk7XHJcbiAgICAgICAgZGVsZXRlIHNjZW5lLnNvdW5kcztcclxuICAgICAgICBzY2VuZS50b2NDdHJsLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUudG9jQ3RybDtcclxuICAgICAgICBzY2VuZS50aHVtYm5haWxzLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUudGh1bWJuYWlscztcclxuICAgICAgICAhc2NlbmUuYm9va21hcmtzIHx8IHNjZW5lLmJvb2ttYXJrcy5kaXNwb3NlKCk7XHJcbiAgICAgICAgZGVsZXRlIHNjZW5lLmJvb2ttYXJrcztcclxuICAgICAgICBzY2VuZS5jdHJsLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUuY3RybDtcclxuICAgICAgICBzY2VuZS5ib29rUHJpbnRlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgZGVsZXRlIHNjZW5lLmJvb2tQcmludGVyO1xyXG4gICAgICAgIHNjZW5lLmJvb2suZGlzcG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS5ib29rO1xyXG4gICAgICAgIHNjZW5lLnByb3BzQnVpbGRlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgZGVsZXRlIHNjZW5lLnByb3BzQnVpbGRlcjtcclxuICAgICAgICBkZWxldGUgc2NlbmUuYm9va0J1aWxkZXI7XHJcbiAgICAgICAgc2NlbmUudmlzdWFsLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUudmlzdWFsO1xyXG4gICAgICAgIHNjZW5lLnZpZXcuZGlzcG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS52aWV3O1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS5kaXNwb3NlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0Rpc3Bvc2UgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuICBvcHRpb25zID0gey4uLm9wdGlvbnN9O1xyXG4gIHNjZW5lLnZpZXcgPSBuZXcgQm9va1ZpZXcodGhpcy5sZW5ndGg/IHRoaXNbMF06ICQoJzxkaXY+JykuYXBwZW5kVG8oJ2JvZHknKSwgKCk9PiB7XHJcbiAgICBpZighRGV0ZWN0b3Iud2ViZ2wpIHtcclxuICAgICAgRGV0ZWN0b3IuYWRkR2V0V2ViR0xNZXNzYWdlKHtwYXJlbnQ6IHNjZW5lLnZpZXcuZ2V0VmlldygpfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgc2NlbmUubG9hZGluZ0N0cmwgPSBuZXcgTG9hZGluZ0NvbnRyb2xsZXIoc2NlbmUudmlldywgdHJ1ZSwgKHByb2dyZXNzKT0+IHByb2dyZXNzPT09MD8gdHIoJ1BsZWFzZSB3YWl0Li4uIHRoZSBBcHBsaWNhdGlvbiBpcyBMb2FkaW5nJyk6IHRyKCdQREYgaXMgTG9hZGluZzonKSsnICcrcHJvZ3Jlc3MrJyUnKTtcclxuICAgICAgc2NlbmUudmlzdWFsID0gbmV3IFZpc3VhbFdvcmxkKHNjZW5lLnZpZXcuZ2V0Q29udGFpbmVyKCkub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldywgc2NlbmUudmlldy5nZXRDb250YWluZXIoKS5vd25lckRvY3VtZW50LCBzY2VuZS52aWV3LmdldFZpZXcoKSk7XHJcbiAgICAgIHNjZW5lLmJvb2tCdWlsZGVyID0gKHByb3BzLCBzaGVldHMsIHBhZ2VDYWxsYmFjayk9PiB7XHJcbiAgICAgICAgcHJvcHMuY3NzTGF5ZXJQcm9wcyA9IHtcclxuICAgICAgICAgIC4uLnByb3BzLmNzc0xheWVyUHJvcHMsXHJcbiAgICAgICAgICBzY2VuZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYob3B0aW9ucy5wcm9wZXJ0aWVzQ2FsbGJhY2spIHtcclxuICAgICAgICAgIHByb3BzID0gb3B0aW9ucy5wcm9wZXJ0aWVzQ2FsbGJhY2socHJvcHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzY2VuZS5ib29rID0gbmV3IEJvb2soc2NlbmUudmlzdWFsLCBzaGVldHMsIHBhZ2VDYWxsYmFjaywgcHJvcHMpO1xyXG4gICAgICAgIHNjZW5lLmJvb2tQcmludGVyID0gbmV3IEJvb2tQcmludGVyKHNjZW5lLnZpc3VhbCwgc2NlbmUuYm9vaywgKG9wdGlvbnMudGVtcGxhdGUgfHwge30pLnByaW50U3R5bGUpO1xyXG4gICAgICAgIHNjZW5lLmxvYWRpbmdDdHJsLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUubG9hZGluZ0N0cmw7XHJcbiAgICAgICAgc2NlbmUuY3RybCA9IG5ldyBCb29rQ29udHJvbGxlcihzY2VuZS5ib29rLCBzY2VuZS52aWV3LCBvcHRpb25zLmNvbnRyb2xzUHJvcHMpO1xyXG4gICAgICAgIHNjZW5lLmJvb2suc2V0SW5qZWN0b3IoKHcpPT4ge1xyXG4gICAgICAgICAgdy5qUXVlcnkgPSB3LiQgPSAkO1xyXG4gICAgICAgICAgdy5ib29rID0gc2NlbmUuYm9vaztcclxuICAgICAgICAgIHcuYm9va0N0cmwgPSBzY2VuZS5jdHJsO1xyXG4gICAgICAgICAgaWYocHJvcHMuaW5qZWN0b3IpIHtcclxuICAgICAgICAgICAgcHJvcHMuaW5qZWN0b3Iodyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2NlbmUudmlldy5hZGRIYW5kbGVyKHNjZW5lLmN0cmwpO1xyXG4gICAgICAgIHNjZW5lLmN0cmwuc2V0UHJpbnRlcihzY2VuZS5ib29rUHJpbnRlcik7XHJcbiAgICAgICAgY29uc3QgdGVzdCA9IHBhZ2VDYWxsYmFjaygwKTtcclxuXHJcbiAgICAgICAgc2NlbmUuc2VhcmNoID0gbmV3IFNlYXJjaChzY2VuZS52aWV3LmdldFNlYXJjaFZpZXcoKSwgc2NlbmUuYm9vay5nZXRQYWdlcygpKTtcclxuICAgICAgICBzY2VuZS5zZWFyY2gub25RdWVyeSA9IHNjZW5lLmJvb2suc2V0UXVlcnkuYmluZChzY2VuZS5ib29rKTtcclxuICAgICAgICBzY2VuZS5ib29rLmFkZEV2ZW50TGlzdGVuZXIoJ3NlYXJjaFJlc3VsdHMnLCAoZSk9PiB7XHJcbiAgICAgICAgICBzY2VuZS5zZWFyY2guc2V0UmVzdWx0cyhlLnJlc3VsdHMsIGUubGFzdFBhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzY2VuZS50aHVtYm5haWxzID0gbmV3IFRodW1ibmFpbHMoc2NlbmUudmlzdWFsLCBzY2VuZS52aWV3LmdldFRodW1ibmFpbHNWaWV3KCksIHBhZ2VDYWxsYmFjaywgMiooc2hlZXRzKzIpLCB7a1d0b0g6IHByb3BzLndpZHRoL3Byb3BzLmhlaWdodH0pO1xyXG4gICAgICAgIHNjZW5lLnRvY0N0cmwgPSBuZXcgVG9jQ29udHJvbGxlcihzY2VuZS52aWV3LCBzY2VuZS5jdHJsKTtcclxuICAgICAgICBzY2VuZS50b2NDdHJsLnNldFRodW1ibmFpbHMoc2NlbmUudGh1bWJuYWlscyk7XHJcbiAgICAgICAgc2NlbmUudG9jQ3RybC5zZXRTZWFyY2goc2NlbmUuc2VhcmNoKTtcclxuICAgICAgICBzY2VuZS5jdHJsLnNldFRvY0N0cmwoc2NlbmUudG9jQ3RybCk7XHJcbiAgICAgICAgc2NlbmUudmlldy5hZGRIYW5kbGVyKHNjZW5lLnRvY0N0cmwpO1xyXG5cclxuICAgICAgICBpZih0ZXN0LnR5cGU9PT0ncGRmJykge1xyXG4gICAgICAgICAgc2NlbmUucGRmTGlua3NIYW5kbGVyID0gbmV3IFBkZkxpbmtzSGFuZGxlcih0ZXN0LnNyYywgc2NlbmUuY3RybCwgc2NlbmUudmlzdWFsLmVsZW1lbnQpO1xyXG4gICAgICAgICAgc2NlbmUuYm9vay5hZGRFdmVudExpc3RlbmVyKCdwZGZBbm5vdGF0aW9uJywgc2NlbmUucGRmTGlua3NIYW5kbGVyLmhhbmRsZUV2ZW50LmJpbmQoc2NlbmUucGRmTGlua3NIYW5kbGVyKSk7XHJcbiAgICAgICAgICB0ZXN0LnNyYy5nZXRIYW5kbGVyKChoYW5kbGVyKT0+IHtcclxuICAgICAgICAgICAgaGFuZGxlci5nZXRPdXRsaW5lKCkuXHJcbiAgICAgICAgICAgICAgdGhlbigob3V0bGluZSk9PiB7XHJcbiAgICAgICAgICAgICAgICBzY2VuZS5ib29rbWFya3MgPSBuZXcgQm9va21hcmtzKHNjZW5lLnZpZXcuZ2V0Qm9va21hcmtzVmlldygpLCBvdXRsaW5lKTtcclxuICAgICAgICAgICAgICAgIHNjZW5lLnRvY0N0cmwuc2V0Qm9va21hcmtzKHNjZW5lLmJvb2ttYXJrcywgdGVzdC5zcmMpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBpZihvcHRpb25zLnBkZkxpbmtzICYmIG9wdGlvbnMucGRmTGlua3MuaGFuZGxlcikge1xyXG4gICAgICAgICAgICBzY2VuZS5wZGZMaW5rc0hhbmRsZXIuc2V0SGFuZGxlcihvcHRpb25zLnBkZkxpbmtzLmhhbmRsZXIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2NlbmUuc291bmRzID0gbmV3IFNvdW5kc0Vudmlyb21lbnQob3B0aW9ucy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgc2NlbmUuY3RybC5zZXRTb3VuZHMoc2NlbmUuc291bmRzKTtcclxuICAgICAgICBzY2VuZS5zb3VuZHMuc3Vic2NyaWJlRmxpcHMoc2NlbmUuY3RybCk7XHJcblxyXG4gICAgICAgIHNjZW5lLnJlYWR5ID0gdHJ1ZTtcclxuICAgICAgICBuZXcgQXV0b05hdmlnYXRvcihzY2VuZS52aXN1YWwsIHNjZW5lLmN0cmwsIG9wdGlvbnMuYXV0b05hdmlnYXRpb24pLmRpc3Bvc2UoKTtcclxuICAgICAgICBpZihvcHRpb25zLnJlYWR5KSB7XHJcbiAgICAgICAgICBvcHRpb25zLnJlYWR5KHNjZW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoc2NlbmUucGVuZGluZ0Rpc3Bvc2UpIHtcclxuICAgICAgICAgIHNjZW5lLmRpc3Bvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIGlmKG9wdGlvbnMucGRmKSB7XHJcbiAgICAgICAgc2NlbmUucHJvcHNCdWlsZGVyID0gbmV3IFBkZkJvb2tQcm9wc0J1aWxkZXIob3B0aW9ucy5wZGYsIHNjZW5lLmJvb2tCdWlsZGVyKTtcclxuICAgICAgICBzY2VuZS5wcm9wc0J1aWxkZXIucGRmLnNldExvYWRpbmdQcm9ncmVzc0NsYihzY2VuZS5sb2FkaW5nQ3RybC5zZXRQcm9ncmVzcy5iaW5kKHNjZW5lLmxvYWRpbmdDdHJsKSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihvcHRpb25zLnBhZ2VDYWxsYmFjaykge1xyXG4gICAgICAgIHNjZW5lLnByb3BzQnVpbGRlciA9IG5ldyBDbGJCb29rUHJvcHNCdWlsZGVyKHNjZW5lLnZpc3VhbCwgb3B0aW9ucy5wYWdlQ2FsbGJhY2ssIG9wdGlvbnMucGFnZXMsIHNjZW5lLmJvb2tCdWlsZGVyKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzY2VuZS5wcm9wc0J1aWxkZXIgPSBuZXcgQ2xiQm9va1Byb3BzQnVpbGRlcihzY2VuZS52aXN1YWwsIEJvb2sucGFnZUNhbGxiYWNrLCA2LCBzY2VuZS5ib29rQnVpbGRlcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBvcHRpb25zLnRlbXBsYXRlKTtcclxuICByZXR1cm4gc2NlbmU7XHJcbn1cclxuXHJcbiQoKCk9PiB7XHJcbiAgbGV0IGNvbnRhaW5lcnMgPSAkKCcuZmxpcC1ib29rLWNvbnRhaW5lcicpO1xyXG4gIGZvcihsZXQgaSA9IDA7IGk8Y29udGFpbmVycy5sZW5ndGg7ICsraSkge1xyXG4gICAgY29uc3QgakNvbnRhaW5lciA9ICQoY29udGFpbmVyc1tpXSksIHNyYyA9IGpDb250YWluZXIuYXR0cignc3JjJyk7XHJcbiAgICBpZighIXNyYykge1xyXG4gICAgICBqQ29udGFpbmVyLkZsaXBCb29rKHtwZGY6IHNyY30pO1xyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcblxyXG53aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSAkO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9pbmRleC5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2luZGV4LmpzIiwiaWYgKCFBcnJheS5wcm90b3R5cGUuZmlsbCkge1xyXG4gIEFycmF5LnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24odmFsdWUpIHtcclxuXHJcbiAgICAvLyDQqNCw0LPQuCAxLTIuXHJcbiAgICBpZiAodGhpcyA9PSBudWxsKSB7XHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RoaXMgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBPID0gT2JqZWN0KHRoaXMpO1xyXG5cclxuICAgIC8vINCo0LDQs9C4IDMtNS5cclxuICAgIHZhciBsZW4gPSBPLmxlbmd0aCA+Pj4gMDtcclxuXHJcbiAgICAvLyDQqNCw0LPQuCA2LTcuXHJcbiAgICB2YXIgc3RhcnQgPSBhcmd1bWVudHNbMV07XHJcbiAgICB2YXIgcmVsYXRpdmVTdGFydCA9IHN0YXJ0ID4+IDA7XHJcblxyXG4gICAgLy8g0KjQsNCzIDguXHJcbiAgICB2YXIgayA9IHJlbGF0aXZlU3RhcnQgPCAwID9cclxuICAgICAgTWF0aC5tYXgobGVuICsgcmVsYXRpdmVTdGFydCwgMCkgOlxyXG4gICAgICBNYXRoLm1pbihyZWxhdGl2ZVN0YXJ0LCBsZW4pO1xyXG5cclxuICAgIC8vINCo0LDQs9C4IDktMTAuXHJcbiAgICB2YXIgZW5kID0gYXJndW1lbnRzWzJdO1xyXG4gICAgdmFyIHJlbGF0aXZlRW5kID0gZW5kID09PSB1bmRlZmluZWQgP1xyXG4gICAgICBsZW4gOiBlbmQgPj4gMDtcclxuXHJcbiAgICAvLyDQqNCw0LMgMTEuXHJcbiAgICB2YXIgZmluYWwgPSByZWxhdGl2ZUVuZCA8IDAgP1xyXG4gICAgICBNYXRoLm1heChsZW4gKyByZWxhdGl2ZUVuZCwgMCkgOlxyXG4gICAgICBNYXRoLm1pbihyZWxhdGl2ZUVuZCwgbGVuKTtcclxuXHJcbiAgICAvLyDQqNCw0LMgMTIuXHJcbiAgICB3aGlsZSAoayA8IGZpbmFsKSB7XHJcbiAgICAgIE9ba10gPSB2YWx1ZTtcclxuICAgICAgaysrO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCo0LDQsyAxMy5cclxuICAgIHJldHVybiBPO1xyXG4gIH07XHJcbn1cclxuXHJcbmlmICghQXJyYXkucHJvdG90eXBlLmZpbmQpIHtcclxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnZmluZCcsIHtcclxuICAgIHZhbHVlOiBmdW5jdGlvbihwcmVkaWNhdGUpIHtcclxuICAgICAndXNlIHN0cmljdCc7XHJcbiAgICAgaWYgKHRoaXMgPT0gbnVsbCkge1xyXG4gICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkucHJvdG90eXBlLmZpbmQgY2FsbGVkIG9uIG51bGwgb3IgdW5kZWZpbmVkJyk7XHJcbiAgICAgfVxyXG4gICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwcmVkaWNhdGUgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgfVxyXG4gICAgIHZhciBsaXN0ID0gT2JqZWN0KHRoaXMpO1xyXG4gICAgIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aCA+Pj4gMDtcclxuICAgICB2YXIgdGhpc0FyZyA9IGFyZ3VtZW50c1sxXTtcclxuICAgICB2YXIgdmFsdWU7XHJcblxyXG4gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgIHZhbHVlID0gbGlzdFtpXTtcclxuICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaSwgbGlzdCkpIHtcclxuICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgfVxyXG4gICAgIH1cclxuICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5pZiAoIUFycmF5LnByb3RvdHlwZS5maW5kSW5kZXgpIHtcclxuICBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4ID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XHJcbiAgICBpZiAodGhpcyA9PSBudWxsKSB7XHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5LnByb3RvdHlwZS5maW5kSW5kZXggY2FsbGVkIG9uIG51bGwgb3IgdW5kZWZpbmVkJyk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwcmVkaWNhdGUgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICB9XHJcbiAgICB2YXIgbGlzdCA9IE9iamVjdCh0aGlzKTtcclxuICAgIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aCA+Pj4gMDtcclxuICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdO1xyXG4gICAgdmFyIHZhbHVlO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFsdWUgPSBsaXN0W2ldO1xyXG4gICAgICBpZiAocHJlZGljYXRlLmNhbGwodGhpc0FyZywgdmFsdWUsIGksIGxpc3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAtMTtcclxuICB9O1xyXG59XHJcblxyXG5pZiAoIU9iamVjdC52YWx1ZXMpIHtcclxuXHRPYmplY3QudmFsdWVzID0gZnVuY3Rpb24gdmFsdWVzKE8pIHtcclxuXHRcdHJldHVybiBPYmplY3Qua2V5cyhPKS5tYXAoKG5hbWUpPT5PW25hbWVdKSB8fCBbXTtcclxuXHR9O1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9wb2x5ZmlsbC5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9wb2x5ZmlsbC5qcyIsIlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRvTmF2aWdhdG9yIHtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dCwgYm9va0N0cmwsIHByb3BzPXt9KSB7XHJcbiAgICBwcm9wcyA9IHtcclxuICAgICAgLi4ucHJvcHMsXHJcbiAgICAgIHVybFBhcmFtOiBwcm9wcy51cmxQYXJhbSB8fCAnZmIzZC1wYWdlJyxcclxuICAgICAgbmF2aWdhdGVzOiBwcm9wcy5uYXZpZ2F0ZXM9PT11bmRlZmluZWQ/IDE6IHByb3BzLm5hdmlnYXRlc1xyXG4gICAgfTtcclxuICAgIHRoaXMucHJvcHMgPSBwcm9wcztcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB0aGlzLmJvb2tDdHJsID0gYm9va0N0cmw7XHJcbiAgICB0aGlzLnVybFBhcmFtID0gcHJvcHMudXJsUGFyYW07XHJcbiAgICB0aGlzLnduZCA9IGNvbnRleHQud25kO1xyXG5cclxuICAgIHRoaXMud25kLmZiM2QgPSB7XHJcbiAgICAgIC4uLnRoaXMud25kLmZiM2RcclxuICAgIH07XHJcbiAgICB0aGlzLnduZC5mYjNkLm5hdmlnYXRvciA9IHtcclxuICAgICAgLi4udGhpcy53bmQuZmIzZC5uYXZpZ2F0b3JcclxuICAgIH07XHJcbiAgICB0aGlzLm5hdmlnYXRvciA9IHRoaXMud25kLmZiM2QubmF2aWdhdG9yW3RoaXMudXJsUGFyYW1dID0ge1xyXG4gICAgICAuLi50aGlzLnduZC5mYjNkLm5hdmlnYXRvclt0aGlzLnVybFBhcmFtXVxyXG4gICAgfTtcclxuICAgIHRoaXMubmF2aWdhdG9yLmluc3RhbmNlcyA9ICh0aGlzLm5hdmlnYXRvci5pbnN0YW5jZXMgfHwgMCkrMTtcclxuXHJcbiAgICBpZih0aGlzLm5hdmlnYXRvci5pbnN0YW5jZXM8PXRoaXMucHJvcHMubmF2aWdhdGVzKSB7XHJcbiAgICAgIHRoaXMuYm9va0N0cmwuZ29Ub1BhZ2UodGhpcy5nZXRQYWdlTnVtYmVyKCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuXHJcbiAgfVxyXG5cclxuICBnZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSwgdXJsKSB7XHJcbiAgICBpZiAoIXVybCkge1xyXG4gICAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgIH1cclxuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKTtcclxuICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCgnWz8mXScgKyBuYW1lICsgJyg9KFteXSopfCZ8I3wkKScpLFxyXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcclxuICAgIGlmICghcmVzdWx0cykgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJztcclxuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlTnVtYmVyKCkge1xyXG4gICAgbGV0IG51bWJlciA9IHRoaXMuZ2V0UGFyYW1ldGVyQnlOYW1lKHRoaXMudXJsUGFyYW0pO1xyXG4gICAgbnVtYmVyID0gcGFyc2VJbnQobnVtYmVyKTtcclxuICAgIGlmKGlzTmFOKG51bWJlcikpIHtcclxuICAgICAgbnVtYmVyID0gMTtcclxuICAgIH1cclxuICAgIHJldHVybiBudW1iZXItMTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQXV0b05hdmlnYXRvci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQXV0b05hdmlnYXRvci5qcyIsImltcG9ydCB7VEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgTWF0aFV0aWxzIGZyb20gJ01hdGhVdGlscydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpbmRlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpc3VhbCwgcCkge1xyXG4gICAgdGhpcy52aXN1YWwgPSB2aXN1YWw7XHJcbiAgICB0aGlzLnAgPSB7XHJcbiAgICAgIC4uLnAsXHJcbiAgICAgIGJhY2tTaXplOiAyKnAuY292ZXIuZGVwdGgrcC5zaGVldHMqcC5wYWdlLmRlcHRoXHJcbiAgICB9O1xyXG4gICAgdGhpcy5PWiA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKTtcclxuXHJcbiAgICB0aGlzLmJhY2tHID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHAuY292ZXIuZGVwdGgsIHRoaXMucC5iYWNrU2l6ZSwgcC5jb3Zlci5oZWlnaHQpO1xyXG5cclxuICAgIHRoaXMubWF0ZXJpYWxzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogcC5jb3Zlci5jb2xvcn0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogcC5jb3Zlci5jb2xvcn0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogcC5jb3Zlci5jb2xvcn0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogcC5jb3Zlci5jb2xvcn0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogcC5jb3Zlci5jb2xvcn0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogcC5jb3Zlci5jb2xvcn0pXHJcbiAgICAgICAgICAgICAgICAgICAgIF07XHJcblxyXG4gICAgY29uc3QgYmFja00gPSBuZXcgVEhSRUUuTWVzaCh0aGlzLmJhY2tHLCBuZXcgVEhSRUUuTWVzaEZhY2VNYXRlcmlhbCh0aGlzLm1hdGVyaWFscykpO1xyXG5cclxuICAgIGlmKHAuY292ZXIuYmluZGVyVGV4dHVyZSE9PScnKSB7XHJcbiAgICAgIHRoaXMudmlzdWFsLnRleHR1cmVMb2FkZXIubG9hZChwLmNvdmVyLmJpbmRlclRleHR1cmUsICh0ZXh0dXJlKT0+IHtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsc1sxXS5jb2xvci5zZXRIZXgoMHhGRkZGRkYpO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxzWzFdLm1hcCA9IHRleHR1cmU7XHJcbiAgICAgICAgdGV4dHVyZS5taW5GaWx0ZXIgPSBUSFJFRS5MaW5lYXJGaWx0ZXI7XHJcbiAgICAgICAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbHNbMV0ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRocmVlID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcbiAgICB0aGlzLmJhY2sgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICAgIHRoaXMuYmFja1JUID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcbiAgICB0aGlzLmJhY2tSUiA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gICAgdGhpcy5iYWNrTFQgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICAgIHRoaXMuYmFja0xSID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcbiAgICB0aGlzLmxlZnRQaXZvdCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gICAgdGhpcy5yaWdodFBpdm90ID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcblxyXG4gICAgdGhpcy5iYWNrLmFkZChiYWNrTSk7XHJcbiAgICB0aGlzLmJhY2suYWRkKHRoaXMubGVmdFBpdm90KTtcclxuICAgIHRoaXMuYmFjay5hZGQodGhpcy5yaWdodFBpdm90KTtcclxuICAgIHRoaXMuYmFja1JULmFkZCh0aGlzLmJhY2spO1xyXG4gICAgdGhpcy5iYWNrUlIuYWRkKHRoaXMuYmFja1JUKTtcclxuICAgIHRoaXMuYmFja0xULmFkZCh0aGlzLmJhY2tSUik7XHJcbiAgICB0aGlzLmJhY2tMUi5hZGQodGhpcy5iYWNrTFQpO1xyXG4gICAgdGhpcy50aHJlZS5hZGQodGhpcy5iYWNrTFIpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGZvcihsZXQgbSBvZiB0aGlzLm1hdGVyaWFscykge1xyXG4gICAgICBpZihtLm1hcCkge1xyXG4gICAgICAgIG0ubWFwID0gbnVsbDtcclxuICAgICAgICBtLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBtLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSB0aGlzLm1hdGVyaWFscztcclxuICAgIHRoaXMuYmFja0cuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0KGFuZ2xlKSB7XHJcbiAgICBsZXQgcmlnaHQsIGxlZnQ7XHJcbiAgICBpZihhbmdsZT5NYXRoLlBJLzIpIHtcclxuICAgICAgcmlnaHQgPSBNYXRoLlBJLzI7XHJcbiAgICAgIGxlZnQgPSBhbmdsZS1NYXRoLlBJLzI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmlnaHQgPSBhbmdsZTtcclxuICAgICAgbGVmdCA9IDA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwID0gdGhpcy5wLHRyMT17eDotMC41KnAuY292ZXIuZGVwdGgseTowLjUqcC5iYWNrU2l6ZS1wLmNvdmVyLmRlcHRofTtcclxuICAgIHRoaXMuYmFja1JULnBvc2l0aW9uLnNldCh0cjEueCx0cjEueSwwKTtcclxuICAgIHRoaXMuYmFja1JSLnBvc2l0aW9uLnNldCgtdHIxLngsLXRyMS55LDApO1xyXG4gICAgdGhpcy5iYWNrUlIucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKHRoaXMuT1osIHJpZ2h0KTtcclxuXHJcbiAgICBjb25zdCB0cjI9e3g6cC5iYWNrU2l6ZS0yKnAuY292ZXIuZGVwdGgtMC41KnAuY292ZXIuZGVwdGgseTowLjUqcC5iYWNrU2l6ZS1wLmNvdmVyLmRlcHRofTtcclxuICAgIHRoaXMuYmFja0xULnBvc2l0aW9uLnNldCh0cjIueCx0cjIueSwwKTtcclxuICAgIHRoaXMuYmFja0xSLnBvc2l0aW9uLnNldCgtdHIyLngsLXRyMi55LDApO1xyXG4gICAgdGhpcy5iYWNrTFIucXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKHRoaXMuT1osIGxlZnQpO1xyXG4gIH1cclxuXHJcbiAgc2V0TGVmdChhbmdsZSkge1xyXG4gICAgY29uc3QgUEkgPSBNYXRoLlBJO1xyXG4gICAgdGhpcy5sZWZ0UGl2b3QucG9zaXRpb24uc2V0KE1hdGhVdGlscy5pbnRlcnBvbGF0ZUxpbmVhcihbLVBJLC1QSS8yXSxbMCx0aGlzLnAuY292ZXIuZGVwdGhdLGFuZ2xlKSwwLjUqdGhpcy5wLmJhY2tTaXplLTAuNSp0aGlzLnAuY292ZXIuZGVwdGgsMCk7XHJcbiAgICB0aGlzLmxlZnRQaXZvdC5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUodGhpcy5PWiwgYW5nbGUpO1xyXG4gIH1cclxuXHJcbiAgc2V0UmlnaHQoYW5nbGUpIHtcclxuICAgIGNvbnN0IFBJID0gTWF0aC5QSTtcclxuICAgICAgdGhpcy5yaWdodFBpdm90LnBvc2l0aW9uLnNldChNYXRoVXRpbHMuaW50ZXJwb2xhdGVMaW5lYXIoWy1QSS8yLDBdLFt0aGlzLnAuY292ZXIuZGVwdGgsMF0sYW5nbGUpLC0wLjUqdGhpcy5wLmJhY2tTaXplKzAuNSp0aGlzLnAuY292ZXIuZGVwdGgsMCk7XHJcbiAgICAgIHRoaXMucmlnaHRQaXZvdC5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUodGhpcy5PWiwgYW5nbGUpO1xyXG4gIH1cclxuXHJcbiAgam9pbkxlZnRDb3Zlcihjb3Zlcikge1xyXG4gICAgY292ZXIudGhyZWUucG9zaXRpb24uc2V0KDAsLTAuNSp0aGlzLnAuY292ZXIuZGVwdGgsMCk7XHJcbiAgICB0aGlzLmxlZnRQaXZvdC5hZGQoY292ZXIudGhyZWUpO1xyXG4gIH1cclxuXHJcbiAgZGlzY29ubmVjdExlZnRDb3Zlcihjb3Zlcikge1xyXG4gICAgdGhpcy5sZWZ0UGl2b3QucmVtb3ZlKGNvdmVyLnRocmVlKTtcclxuICB9XHJcblxyXG4gIGpvaW5SaWdodENvdmVyKGNvdmVyKSB7XHJcbiAgICBjb3Zlci50aHJlZS5wb3NpdGlvbi5zZXQoMCwtMC41KnRoaXMucC5jb3Zlci5kZXB0aCwwKTtcclxuICAgIHRoaXMucmlnaHRQaXZvdC5hZGQoY292ZXIudGhyZWUpO1xyXG4gIH1cclxuXHJcbiAgZGlzY29ubmVjdFJpZ2h0Q292ZXIoY292ZXIpIHtcclxuICAgIHRoaXMucmlnaHRQaXZvdC5yZW1vdmUoY292ZXIudGhyZWUpO1xyXG4gIH1cclxuXHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQmluZGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9CaW5kZXIuanMiLCJpbXBvcnQgeyQsIFRIUkVFfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IHtwcm9wcyBhcyAgYm9va1Byb3BzfSBmcm9tICcuLi9wcm9wcy9ib29rJztcclxuaW1wb3J0IEdyYXBoVXRpbHMgZnJvbSAnR3JhcGhVdGlscyc7XHJcbmltcG9ydCBCaW5kZXIgZnJvbSAnLi9CaW5kZXInO1xyXG5pbXBvcnQgQ292ZXIgZnJvbSAnLi9Db3Zlcic7XHJcbmltcG9ydCBTaGVldEJsb2NrIGZyb20gJy4vU2hlZXRCbG9jayc7XHJcbmltcG9ydCBTaGVldFBoeXNpY3MgZnJvbSAnLi9TaGVldFBoeXNpY3MnO1xyXG5pbXBvcnQgUGFnZU1hbmFnZXIgZnJvbSAnLi9QYWdlTWFuYWdlcic7XHJcbmltcG9ydCBDU1NMYXllciBmcm9tICdDU1NMYXllcic7XHJcbmltcG9ydCBDc3NMYXllcnNNYW5hZ2VyIGZyb20gJy4vQ3NzTGF5ZXJzTWFuYWdlcic7XHJcbmltcG9ydCBTZWFyY2hFbmdpbmUgZnJvbSAnLi9TZWFyY2hFbmdpbmUnO1xyXG5pbXBvcnQgQ3VzdG9tRXZlbnRDb252ZXJ0ZXIgZnJvbSAnQ3VzdG9tRXZlbnRDb252ZXJ0ZXInO1xyXG5pbXBvcnQgQ2lyY2xlVGFyZ2V0IGZyb20gJ3RhcmdldHMvQ2lyY2xlVGFyZ2V0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvb2sgZXh0ZW5kcyBUSFJFRS5FdmVudERpc3BhdGNoZXIge1xyXG4gIC8vIHBhZ2VDYWxsYmFjayBzYW1wbGVzXHJcblxyXG4gIC8vIChuKT0+ICh7XHJcbiAgLy8gICB0eXBlOiAnaW1hZ2UnLFxyXG4gIC8vICAgc3JjOiAnc2FtcGxlLnBuZycsXHJcbiAgLy8gICBpbnRlcmFjdGl2ZTogZmFsc2VcclxuICAvLyB9KTtcclxuICAvL1xyXG4gIC8vIChuKT0+ICh7XHJcbiAgLy8gICB0eXBlOiAnaHRtbCcsXHJcbiAgLy8gICBzcmM6ICdzYW1wbGUuaHRtbCcsXHJcbiAgLy8gICBpbnRlcmFjdGl2ZTogdHJ1ZVxyXG4gIC8vIH0pO1xyXG4gIC8vXHJcbiAgLy8gY29uc3QgcGRmID0gbmV3IFBkZignc2FtcGxlLnBkZicpO1xyXG4gIC8vIChuKT0+ICh7XHJcbiAgLy8gICB0eXBlOiAncGRmJyxcclxuICAvLyAgIHNyYzogcGRmLFxyXG4gIC8vICAgaW50ZXJhY3RpdmU6IGZhbHNlXHJcbiAgLy8gfSk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpc3VhbCwgc2hlZXRzLCBwYWdlQ2FsbGJhY2ssIHByb3BzKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgc2hlZXRzID0gTWF0aC5taW4oMywgc2hlZXRzKTtcclxuICAgIHZpc3VhbC5qQ29udGFpbmVyLmFwcGVuZChgXHJcbiAgICAgIDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5cclxuICAgICAgICAuZGVtby1tc2cge1xyXG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgdG9wOiAxMHB4O1xyXG4gICAgICAgICAgcmlnaHQ6IDEwcHg7XHJcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZTRlMTtcclxuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgICAgICB9XHJcbiAgICAgIDwvc3R5bGU+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJkZW1vLW1zZ1wiPlxyXG4gICAgICAgIFRoaXMgaXMgdGhlIGRlbW8gdmVyc2lvbiwgb25seSAxMCBwYWdlcyBhcmUgYXZhaWxhYmxlLiBVc2UgdGhlIDxhIGhyZWY9XCJodHRwczovL2dvby5nbC9idDNaaGhcIiB0YXJnZXQ9XCJfYmxhbmtcIj5mdWxsIHZlcnNpb248L2E+LlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGApO1xyXG4gICAgdGhpcy52aXN1YWwgPSB2aXN1YWw7XHJcbiAgICB0aGlzLm1vdXNlQ29udHJvbGxlciA9IHRydWU7XHJcbiAgICB0aGlzLnAgPSB7XHJcbiAgICAgIC4uLkJvb2sucHJlcGFyZVByb3BzKHByb3BzKSxcclxuICAgICAgc2hlZXRzLFxyXG4gICAgICBwYWdlQ2FsbGJhY2ssXHJcbiAgICAgIHpvb206IDEsXHJcbiAgICAgIHNpbmdsZVBhZ2U6IGZhbHNlLFxyXG4gICAgICBhdXRvUmVzb2x1dGlvbjoge1xyXG4gICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgazogMS41XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnBhZ2VNYW5hZ2VyID0gbmV3IFBhZ2VNYW5hZ2VyKHZpc3VhbCwgdGhpcywgdGhpcy5wKTtcclxuICAgIENTU0xheWVyLmluaXQodmlzdWFsLmRvYyk7XHJcbiAgICB0aGlzLmxheWVyTWFuYWdlciA9IG5ldyBDc3NMYXllcnNNYW5hZ2VyKHRoaXMpO1xyXG4gICAgdGhpcy5zZWFyY2hFbmdpbmUgPSBuZXcgU2VhcmNoRW5naW5lKHBhZ2VDYWxsYmFjaywgMiooc2hlZXRzKzIpKTtcclxuICAgIHRoaXMuc2VhcmNoRW5naW5lLm9uUGFnZUhpdHNDaGFuZ2VkID0gKHBhZ2UsIHF1ZXJ5KT0+IHtcclxuICAgICAgdGhpcy5wYWdlTWFuYWdlci5yZWZyZXNoUGFnZVF1ZXJ5KHBhZ2UsIHF1ZXJ5KTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHtcclxuICAgICAgICB0eXBlOiAnc2VhcmNoUmVzdWx0cycsXHJcbiAgICAgICAgcmVzdWx0czogdGhpcy5zZWFyY2hFbmdpbmUucmVzdWx0cyxcclxuICAgICAgICBsYXN0UGFnZTogcGFnZSxcclxuICAgICAgICBxdWVyeVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50aHJlZSA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG5cclxuICAgIHRoaXMuYmluZGVyID0gbmV3IEJpbmRlcih2aXN1YWwsIHRoaXMucCk7XHJcbiAgICB0aGlzLnRocmVlLmFkZCh0aGlzLmJpbmRlci50aHJlZSk7XHJcblxyXG4gICAgdGhpcy5sZWZ0Q292ZXIgPSBuZXcgQ292ZXIodmlzdWFsLCB7Li4udGhpcy5wLCBzZXRUZXh0dXJlOiB0aGlzLnNldExlZnRDb3ZlclRleHR1cmUuYmluZCh0aGlzKX0sIE1hdGguUEkvMiwgJ29wZW5lZCcpO1xyXG4gICAgdGhpcy5iaW5kZXIuam9pbkxlZnRDb3Zlcih0aGlzLmxlZnRDb3Zlcik7XHJcbiAgICB0aGlzLnN1YnNjcmliZVNoZWV0QmxvY2sodGhpcy5sZWZ0Q292ZXIsIDApO1xyXG4gICAgdGhpcy5yaWdodENvdmVyID0gbmV3IENvdmVyKHZpc3VhbCwgey4uLnRoaXMucCwgc2V0VGV4dHVyZTogdGhpcy5zZXRSaWdodENvdmVyVGV4dHVyZS5iaW5kKHRoaXMpfSwgMCwgJ2Nsb3NlZCcpO1xyXG4gICAgdGhpcy5iaW5kZXIuam9pblJpZ2h0Q292ZXIodGhpcy5yaWdodENvdmVyKTtcclxuICAgIHRoaXMuc3Vic2NyaWJlU2hlZXRCbG9jayh0aGlzLnJpZ2h0Q292ZXIsIDIqKHRoaXMucC5zaGVldHMrMSkpO1xyXG5cclxuICAgIHRoaXMudGhyZWVTaGVldEJsb2NrcyA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gICAgdGhpcy50aHJlZS5hZGQodGhpcy50aHJlZVNoZWV0QmxvY2tzKTtcclxuICAgIHRoaXMudGhyZWVTaGVldEJsb2Nrcy5wb3NpdGlvbi5zZXQoMC41KnRoaXMucC5jb3Zlci5kZXB0aC0wLjUqc2hlZXRzKnRoaXMucC5wYWdlLmRlcHRoLC0wLjUqc2hlZXRzKnRoaXMucC5wYWdlLmRlcHRoLDApO1xyXG5cclxuICAgIHRoaXMuc2hlZXRCbG9ja3MgPSBbXTtcclxuICAgIGlmKHNoZWV0cz4wKSB7XHJcbiAgICAgIHRoaXMuYWRkU2hlZXRCbG9jaygwLCBuZXcgU2hlZXRCbG9jayh2aXN1YWwsIHsuLi50aGlzLnAsIHNldFRleHR1cmU6IHRoaXMuc2V0UGFnZVRleHR1cmUuYmluZCh0aGlzKX0sIDAsIHNoZWV0cywgMCwgJ2Nsb3NlZCcpKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFuZ2xlID0gdGhpcy5wLnJ0bD8gTWF0aC5QSTogMDtcclxuICAgIHRoaXMuY2xvc2VkQW5nbGUgPSAwO1xyXG4gICAgdGhpcy5zZXQodGhpcy5hbmdsZSwwKTtcclxuICAgIHRoaXMubGFzdE1vdXNlUG9zID0ge1xyXG4gICAgICB0OiAwXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudGhyZWUucG9zaXRpb24uc2V0KC0wLjUqdGhpcy5wLmNvdmVyLmRlcHRoKzAuNSpzaGVldHMqdGhpcy5wLnBhZ2UuZGVwdGgsMCwwKTtcclxuICAgIHRoaXMuc2hlZXRQaHlzaWNzID0gbmV3IFNoZWV0UGh5c2ljcyh0aGlzLnAucGFnZS53aWR0aC90aGlzLnAuc2NhbGUsIHRoaXMucC5ncmF2aXR5LCB0aGlzLnAucGFnZS5jb3JuZXJEZXZpYXRpb24pO1xyXG5cclxuICAgIHRoaXMuYmluZHMgPSB7XHJcbiAgICAgIHVwZGF0ZTogdGhpcy51cGRhdGUuYmluZCh0aGlzKSxcclxuICAgICAgbGFzdE1vdXNlUG9zOiAoZSk9PiB7XHJcbiAgICAgICAgdGhpcy5sYXN0TW91c2VQb3MgPSB7XHJcbiAgICAgICAgICAuLi50aGlzLmxhc3RNb3VzZVBvcyxcclxuICAgICAgICAgIHBhZ2VYOiBlLnBhZ2VYLFxyXG4gICAgICAgICAgcGFnZVk6IGUucGFnZVlcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy52aXN1YWwuYWRkUmVuZGVyQ2FsbGJhY2sodGhpcy5iaW5kcy51cGRhdGUpO1xyXG4gICAgJCh0aGlzLnZpc3VhbC5lbGVtZW50KS5vbignbW91c2Vtb3ZlJywgdGhpcy5iaW5kcy5sYXN0TW91c2VQb3MpO1xyXG5cclxuICAgIHRoaXMuYmluZHMub25QaWNrQ2FsbGJhY2sgPSB0aGlzLm9uUGlja0NhbGxiYWNrLmJpbmQodGhpcylcclxuICAgIHRoaXMudmlzdWFsLmRyYWcub25QaWNrQ2FsbGJhY2sgPSB0aGlzLmJpbmRzLm9uUGlja0NhbGxiYWNrO1xyXG4gICAgdGhpcy5iaW5kcy5vbkRyYWdDYWxsYmFjayA9IHRoaXMub25EcmFnQ2FsbGJhY2suYmluZCh0aGlzKVxyXG4gICAgdGhpcy52aXN1YWwuZHJhZy5vbkRyYWdDYWxsYmFjayA9IHRoaXMuYmluZHMub25EcmFnQ2FsbGJhY2s7XHJcbiAgICB0aGlzLmJpbmRzLm9uUmVsZWFzZUNhbGxiYWNrID0gdGhpcy5vblJlbGVhc2VDYWxsYmFjay5iaW5kKHRoaXMpXHJcbiAgICB0aGlzLnZpc3VhbC5kcmFnLm9uUmVsZWFzZUNhbGxiYWNrID0gdGhpcy5iaW5kcy5vblJlbGVhc2VDYWxsYmFjaztcclxuXHJcbiAgICB0aGlzLmRyYWdBbmdsZSA9IDAuMDU7XHJcbiAgICB0aGlzLnRtcCA9IHtcclxuICAgICAgYm94czogW1xyXG4gICAgICAgIG5ldyBUSFJFRS5Cb3gzKCksXHJcbiAgICAgICAgbmV3IFRIUkVFLkJveDMoKVxyXG4gICAgICBdXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudmlzdWFsLmFkZE9iamVjdCh0aGlzLnRocmVlKTtcclxuICAgIHRoaXMudmlzdWFsLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucGFnZU1hbmFnZXIucmVmcmVzaFpvb20uYmluZCh0aGlzLnBhZ2VNYW5hZ2VyKSk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKT0+IHtcclxuICAgICAgdGhpcy5ub3RpZnlCZWZvcmVBbmltYXRpb24oKTtcclxuICAgICAgdGhpcy5ub3RpZnlBZnRlckFuaW1hdGlvbigpO1xyXG4gICAgfSwgMTAwKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLnZpc3VhbC5yZW1vdmVPYmplY3QodGhpcy50aHJlZSk7XHJcbiAgICB0aGlzLnNoZWV0UGh5c2ljcy5kaXNwb3NlKCk7XHJcbiAgICBkZWxldGUgdGhpcy52aXN1YWwuZHJhZy5vblBpY2tDYWxsYmFjaztcclxuICAgIGRlbGV0ZSB0aGlzLnZpc3VhbC5kcmFnLm9uRHJhZ0NhbGxiYWNrO1xyXG4gICAgZGVsZXRlIHRoaXMudmlzdWFsLmRyYWcub25SZWxlYXNlQ2FsbGJhY2s7XHJcbiAgICAkKHRoaXMudmlzdWFsLmVsZW1lbnQpLm9mZignbW91c2Vtb3ZlJywgdGhpcy5iaW5kcy5sYXN0TW91c2VQb3MpO1xyXG4gICAgdGhpcy52aXN1YWwucmVtb3ZlUmVuZGVyQ2FsbGJhY2sodGhpcy5iaW5kcy51cGRhdGUpO1xyXG4gICAgdGhpcy5yZW1vdmVTaGVldEJsb2NrcygwLCB0aGlzLnNoZWV0QmxvY2tzLmxlbmd0aCk7XHJcbiAgICB0aGlzLmJpbmRlci5kaXNjb25uZWN0TGVmdENvdmVyKHRoaXMubGVmdENvdmVyKTtcclxuICAgIHRoaXMucmVtb3ZlU2hlZXRCbG9jayh0aGlzLmxlZnRDb3Zlcik7XHJcbiAgICB0aGlzLmJpbmRlci5kaXNjb25uZWN0UmlnaHRDb3Zlcih0aGlzLnJpZ2h0Q292ZXIpO1xyXG4gICAgdGhpcy5yZW1vdmVTaGVldEJsb2NrKHRoaXMucmlnaHRDb3Zlcik7XHJcbiAgICB0aGlzLmJpbmRlci5kaXNwb3NlKCk7XHJcbiAgICB0aGlzLmxheWVyTWFuYWdlci5kaXNwb3NlKCk7XHJcbiAgICBDU1NMYXllci5kaXNwb3NlKCk7XHJcbiAgICB0aGlzLnBhZ2VNYW5hZ2VyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIC8vIHB1YmxpY3Mge1xyXG5cclxuICBzZXRBdXRvUmVzb2x1dGlvbihlbmFibGUsIGs9MS41KSB7XHJcbiAgICB0aGlzLnAuYXV0b1Jlc29sdXRpb24gPSB7XHJcbiAgICAgIC4uLnRoaXMucC5hdXRvUmVzb2x1dGlvbixcclxuICAgICAgZW5hYmxlLFxyXG4gICAgICBrXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0Wm9vbSh6b29tLCBzaW5nbGVQYWdlKSB7XHJcbiAgICBpZihNYXRoLmFicyh0aGlzLnAuem9vbS16b29tKT4xZS0zIHx8IHNpbmdsZVBhZ2UhPT10aGlzLnAuc2luZ2xlUGFnZSkge1xyXG4gICAgICB0aGlzLnAuem9vbSA9IHpvb207XHJcbiAgICAgIHRoaXMucC5zaW5nbGVQYWdlID0gc2luZ2xlUGFnZTtcclxuICAgICAgdGhpcy5wYWdlTWFuYWdlci5yZWZyZXNoWm9vbSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UGFnZUNhbGxiYWNrKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucC5wYWdlQ2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICBzZXRRdWVyeShxdWVyeSkge1xyXG4gICAgdGhpcy5zZWFyY2hFbmdpbmUuc2V0UXVlcnkocXVlcnkpO1xyXG4gIH1cclxuXHJcbiAgaXNQcm9jZXNzaW5nKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2hlZXRQaHlzaWNzLmdldFNpemUoKSE9PTA7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlcygpIHtcclxuICAgIHJldHVybiA0KzIqdGhpcy5wLnNoZWV0cztcclxuICB9XHJcblxyXG4gIHNldEZsaXBQcm9ncmVzc0NsYihjbGIpIHtcclxuICAgIHRoaXMucC5mbGlwUHJvZ3Jlc3NDbGIgPSBjbGI7XHJcbiAgfVxyXG5cclxuICBzZXRJbmplY3RvcihpbmplY3Rvcikge1xyXG4gICAgdGhpcy5wLmluamVjdG9yID0gaW5qZWN0b3I7XHJcbiAgfVxyXG5cclxuICBpc0FjdGl2ZVBhZ2Uobikge1xyXG4gICAgbGV0IHJlcyA9IHRydWU7XHJcbiAgICBpZihuPjEgJiYgbjx0aGlzLmdldFBhZ2VzKCktMikge1xyXG4gICAgICBmb3IobGV0IGIgb2YgdGhpcy5zaGVldEJsb2Nrcykge1xyXG4gICAgICAgIGlmKG4tMj4yKmIucC5maXJzdCAmJiBuLTI8MipiLnAubGFzdC0xKSB7XHJcbiAgICAgICAgICByZXMgPSBmYWxzZTtcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgZ2V0QmxvY2tCeVBhZ2Uobikge1xyXG4gICAgbGV0IGJsb2NrO1xyXG4gICAgaWYobjwyKSB7XHJcbiAgICAgIGJsb2NrID0gdGhpcy5sZWZ0Q292ZXI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKG48MioodGhpcy5wLnNoZWV0cysxKSkge1xyXG4gICAgICBmb3IobGV0IGIgb2YgdGhpcy5zaGVldEJsb2Nrcykge1xyXG4gICAgICAgIGlmKG4tMj49MipiLnAuZmlyc3QgJiYgbi0yPDIqYi5wLmxhc3QpIHtcclxuICAgICAgICAgIGJsb2NrID0gYjtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGJsb2NrID0gdGhpcy5yaWdodENvdmVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG4gIH1cclxuXHJcbiAgZ2V0QmxvY2tQYWdlcyhibG9jaykge1xyXG4gICAgbGV0IHJhbmdlO1xyXG4gICAgc3dpdGNoIChibG9jaykge1xyXG4gICAgICBjYXNlIHRoaXMubGVmdENvdmVyOiB7XHJcbiAgICAgICAgICByYW5nZSA9IFswLCAxXTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIHRoaXMucmlnaHRDb3Zlcjoge1xyXG4gICAgICAgIHJhbmdlID0gWzIqKHRoaXMucC5zaGVldHMrMSksIDIqKHRoaXMucC5zaGVldHMrMSkrMV07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgIHJhbmdlID0gYmxvY2s/IFsyKihibG9jay5wLmZpcnN0KzEpLCAyKihibG9jay5wLmxhc3QrMSktMV06IHVuZGVmaW5lZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJhbmdlO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGFnZSgpIHtcclxuICAgIGNvbnN0IFBJID0gTWF0aC5QSTtcclxuICAgIGxldCBwO1xyXG4gICAgaWYodGhpcy5hbmdsZSA9PT0gUEkvMiB8fCB0aGlzLmFuZ2xlID09PSAzKlBJLzIpIHtcclxuICAgICAgZm9yKGxldCBibG9jayBvZiB0aGlzLnNoZWV0QmxvY2tzKSB7XHJcbiAgICAgICAgaWYoYmxvY2suYW5nbGU8PVBJLzIpIHtcclxuICAgICAgICAgIHAgPSB0aGlzLmdldEJsb2NrUGFnZXMoYmxvY2spWzBdLTE7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYoIXApIHtcclxuICAgICAgICBwID0gdGhpcy5nZXRQYWdlcygpLTM7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYodGhpcy5hbmdsZTxQSS8yKSB7XHJcbiAgICAgIHAgPSAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0aGlzLmFuZ2xlPjMqUEkvMikge1xyXG4gICAgICBwID0gMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYodGhpcy5hbmdsZTxQSSkge1xyXG4gICAgICBwID0gdGhpcy5nZXRQYWdlcygpLTM7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRoaXMuYW5nbGU+PVBJKSB7XHJcbiAgICAgIHAgPSB0aGlzLmdldFBhZ2VzKCktMTtcclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG4gIH1cclxuXHJcbiAgZ2V0VG9wUGFnZXMoKSB7XHJcbiAgICBjb25zdCBwID0gdGhpcy5nZXRQYWdlKCk7XHJcbiAgICByZXR1cm4gcD09PTAgfHwgcD09PXRoaXMuZ2V0UGFnZXMoKS0xPyBbcF06IFtwLCBwKzFdO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGFnZVN0YXRlKG4pIHtcclxuICAgIHJldHVybiB0aGlzLnBhZ2VNYW5hZ2VyLmdldFBhZ2VTdGF0ZShuKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZUxvYWRpbmdBbmltYXRpb24oZW5hYmxlKSB7XHJcbiAgICB0aGlzLnBhZ2VNYW5hZ2VyLmVuYWJsZUxvYWRpbmdBbmltYXRpb24oZW5hYmxlKTtcclxuICB9XHJcblxyXG4gIGdldExlZnRGbGlwcGluZygpIHtcclxuICAgIGxldCBibG9jaztcclxuICAgIGNvbnN0IGxlZnQgPSB0aGlzLnNoZWV0QmxvY2tzWzBdLCBQSSA9IE1hdGguUEk7XHJcbiAgICBpZih0aGlzLmFuZ2xlPT09UEkpIHtcclxuICAgICAgYmxvY2sgPSB0aGlzLnJpZ2h0Q292ZXI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaWYobGVmdCAmJiBsZWZ0LnN0YXRlPT09J2Nsb3NlZCcgJiYgbGVmdC5hbmdsZT5QSS8yKSB7XHJcbiAgICAgICAgYmxvY2sgPSBsZWZ0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYodGhpcy5hbmdsZSA9PT0gUEkvMiB8fCB0aGlzLmFuZ2xlID09PSAzKlBJLzIpIHtcclxuICAgICAgICBibG9jayA9IHRoaXMubGVmdENvdmVyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbiAgfVxyXG5cclxuICBnZXRSaWdodEZsaXBwaW5nKCkge1xyXG4gICAgbGV0IGJsb2NrO1xyXG4gICAgY29uc3QgcmlnaHQgPSB0aGlzLnNoZWV0QmxvY2tzW3RoaXMuc2hlZXRCbG9ja3MubGVuZ3RoLTFdLCBQSSA9IE1hdGguUEk7XHJcbiAgICBpZih0aGlzLmFuZ2xlPT09MCkge1xyXG4gICAgICBibG9jayA9IHRoaXMubGVmdENvdmVyO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGlmKHJpZ2h0ICYmIHJpZ2h0LnN0YXRlPT09J2Nsb3NlZCcgJiYgcmlnaHQuYW5nbGU8PVBJLzIpIHtcclxuICAgICAgICBibG9jayA9IHJpZ2h0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYodGhpcy5hbmdsZT09PVBJLzIgfHwgdGhpcy5hbmdsZSA9PT0gMypQSS8yKSB7XHJcbiAgICAgICAgYmxvY2sgPSB0aGlzLnJpZ2h0Q292ZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBibG9jaztcclxuICB9XHJcblxyXG4gIGdldENsb3NlZEJsb2NrQW5nbGUoYW5nbGUpIHtcclxuICAgIGxldCBjbG9zZWRBbmdsZSwge1BJfSA9IE1hdGg7XHJcblxyXG4gICAgaWYodGhpcy5sZWZ0Q292ZXIucGh5c2ljSWQpIHtcclxuICAgICAgbGV0IHRlc3Q7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgdGVzdCA9IE1hdGguYWJzKHRoaXMuc2hlZXRQaHlzaWNzLmdldFBhcmFtZXRyKHRoaXMubGVmdENvdmVyLnBoeXNpY0lkLCAnYW5nbGUnKS1hbmdsZSlcclxuICAgICAgfVxyXG4gICAgICBjYXRjaChlKSB7XHJcbiAgICAgICAgdGVzdCA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgY2xvc2VkQW5nbGUgPSBhbmdsZT5QSS8yIHx8IHRlc3Q+UEkvNj8gUEkvMjogdGhpcy5jbG9zZWRBbmdsZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYodGhpcy5yaWdodENvdmVyLnBoeXNpY0lkKSB7XHJcbiAgICAgIGxldCB0ZXN0O1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHRlc3QgPSBNYXRoLmFicyh0aGlzLnNoZWV0UGh5c2ljcy5nZXRQYXJhbWV0cih0aGlzLnJpZ2h0Q292ZXIucGh5c2ljSWQsICdhbmdsZScpLWFuZ2xlKVxyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoKGUpIHtcclxuICAgICAgICB0ZXN0ID0gMDtcclxuICAgICAgfVxyXG4gICAgICBjbG9zZWRBbmdsZSA9IGFuZ2xlPFBJLzIgfHwgdGVzdD5QSS82PyBQSS8yKzFlLTc6IHRoaXMuY2xvc2VkQW5nbGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY2xvc2VkQW5nbGUgPSBQSS8yKyhhbmdsZSE9PTApKjFlLTc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgb3BlbmVkQW5nbGU6IGFuZ2xlLFxyXG4gICAgICBjbG9zZWRBbmdsZSxcclxuICAgICAgYmluZGVyVHVybjogdGhpcy5jbG9zZWRBbmdsZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZsaXBMZWZ0KHNpemU9MSwgcHJvZ3Jlc3NDbGI9dGhpcy5wLmZsaXBQcm9ncmVzc0NsYikge1xyXG4gICAgbGV0IGJsb2NrLCByZXM7XHJcbiAgICBpZih0aGlzLnNoZWV0UGh5c2ljcy5nZXRTaXplKCk8MjUpIHtcclxuICAgICAgY29uc3QgbGVmdCA9IHRoaXMuc2hlZXRCbG9ja3NbMF0sIFBJID0gTWF0aC5QSTtcclxuICAgICAgaWYodGhpcy5hbmdsZT09PVBJKSB7XHJcbiAgICAgICAgcmVzID0gdGhpcy5jb25uZWN0UGh5c2ljcyhcclxuICAgICAgICAgIGJsb2NrPXRoaXMucmlnaHRDb3ZlcixcclxuICAgICAgICAgIHRoaXMucC5jb3Zlci5tYXNzLFxyXG4gICAgICAgICAgUEksXHJcbiAgICAgICAgICAtdGhpcy5wLmNvdmVyLnN0YXJ0VmVsb2NpdHksXHJcbiAgICAgICAgICB0aGlzLnAuY292ZXIuZmxleGliaWxpdHksXHJcbiAgICAgICAgICAwLFxyXG4gICAgICAgICAgKGFuZ2xlLGhlaWdodCk9PnRoaXMuc2V0KDMqUEkvMi1hbmdsZS8yLGhlaWdodCksXHJcbiAgICAgICAgICAoYW5nbGUsaGVpZ2h0KT0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXQoMypQSS8yLWFuZ2xlLzIsMCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2hlZXRCbG9ja3MoYW5nbGU/IFBJOiBQSS8yKzFlLTcsJ2Nsb3NlZCcpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHByb2dyZXNzQ2xiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBpZihsZWZ0ICYmIGxlZnQuc3RhdGU9PT0nY2xvc2VkJyAmJiBsZWZ0LmFuZ2xlPlBJLzIpIHtcclxuICAgICAgICAgIGJsb2NrID0gc2l6ZTxsZWZ0LmdldFNpemUoKT8gdGhpcy5zcGxpdFNoZWV0QmxvY2soMCwgbGVmdC5nZXRTaXplKCktc2l6ZSlbMV06IGxlZnQ7XHJcbiAgICAgICAgICByZXMgPSB0aGlzLmNvbm5lY3RQaHlzaWNzKFxyXG4gICAgICAgICAgICBibG9jayxcclxuICAgICAgICAgICAgdGhpcy5wLnBhZ2UubWFzcypibG9jay5nZXRTaXplKCksXHJcbiAgICAgICAgICAgIFBJLFxyXG4gICAgICAgICAgICAtdGhpcy5wLnBhZ2Uuc3RhcnRWZWxvY2l0eSxcclxuICAgICAgICAgICAgdGhpcy5wLnBhZ2UuZmxleGliaWxpdHksXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIChhbmdsZSxoZWlnaHQpPT5ibG9jay5zZXQodGhpcy5nZXRDbG9zZWRCbG9ja0FuZ2xlKGFuZ2xlKSwnb3BlbmVkJyxoZWlnaHQpLFxyXG4gICAgICAgICAgICBCb29rLmZpbmlzaEFuaW1hdGlvbkNsYi5iaW5kKHtib29rOiB0aGlzLCBibG9ja30pLFxyXG4gICAgICAgICAgICBwcm9ncmVzc0NsYlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0aGlzLmFuZ2xlID09PSBQSS8yIHx8IHRoaXMuYW5nbGUgPT09IDMqUEkvMikge1xyXG4gICAgICAgICAgcmVzID0gdGhpcy5jb25uZWN0UGh5c2ljcyhcclxuICAgICAgICAgICAgYmxvY2s9dGhpcy5sZWZ0Q292ZXIsXHJcbiAgICAgICAgICAgIHRoaXMucC5jb3Zlci5tYXNzLFxyXG4gICAgICAgICAgICBQSSxcclxuICAgICAgICAgICAgLXRoaXMucC5jb3Zlci5zdGFydFZlbG9jaXR5LFxyXG4gICAgICAgICAgICB0aGlzLnAuY292ZXIuZmxleGliaWxpdHksXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIChhbmdsZSxoZWlnaHQpPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0KDIqUEktYW5nbGUvMixoZWlnaHQpO1xyXG4gICAgICAgICAgICAgIGlmKGFuZ2xlPlBJLzIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2hlZXRCbG9ja3MoYW5nbGU/IFBJLzI6IDAsJ2Nsb3NlZCcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKGFuZ2xlLGhlaWdodCk9PiB0aGlzLnNldChhbmdsZT09PTA/IDA6IDIqUEktYW5nbGUvMiwwKSxcclxuICAgICAgICAgICAgcHJvZ3Jlc3NDbGJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgZmxpcFJpZ2h0KHNpemU9MSwgcHJvZ3Jlc3NDbGI9dGhpcy5wLmZsaXBQcm9ncmVzc0NsYikge1xyXG4gICAgbGV0IGJsb2NrLCByZXM7XHJcbiAgICBpZih0aGlzLnNoZWV0UGh5c2ljcy5nZXRTaXplKCk8MjUpIHtcclxuICAgICAgY29uc3QgcmlnaHQgPSB0aGlzLnNoZWV0QmxvY2tzW3RoaXMuc2hlZXRCbG9ja3MubGVuZ3RoLTFdLCBQSSA9IE1hdGguUEk7XHJcbiAgICAgIGlmKHRoaXMuYW5nbGU9PT0wKSB7XHJcbiAgICAgICAgcmVzID0gdGhpcy5jb25uZWN0UGh5c2ljcyhcclxuICAgICAgICAgIGJsb2NrPXRoaXMubGVmdENvdmVyLFxyXG4gICAgICAgICAgdGhpcy5wLmNvdmVyLm1hc3MsXHJcbiAgICAgICAgICAwLFxyXG4gICAgICAgICAgdGhpcy5wLmNvdmVyLnN0YXJ0VmVsb2NpdHksXHJcbiAgICAgICAgICB0aGlzLnAuY292ZXIuZmxleGliaWxpdHksXHJcbiAgICAgICAgICAwLFxyXG4gICAgICAgICAgKGFuZ2xlLGhlaWdodCk9PnRoaXMuc2V0KGFuZ2xlLzIsaGVpZ2h0KSxcclxuICAgICAgICAgIChhbmdsZSxoZWlnaHQpPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldChhbmdsZS8yLDApO1xyXG4gICAgICAgICAgICB0aGlzLnNldFNoZWV0QmxvY2tzKGFuZ2xlPyBQSS8yOiAwLCdjbG9zZWQnKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBwcm9ncmVzc0NsYlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgaWYocmlnaHQgJiYgcmlnaHQuc3RhdGU9PT0nY2xvc2VkJyAmJiByaWdodC5hbmdsZTw9UEkvMikge1xyXG4gICAgICAgICAgYmxvY2sgPSBzaXplPHJpZ2h0LmdldFNpemUoKT8gdGhpcy5zcGxpdFNoZWV0QmxvY2sodGhpcy5zaGVldEJsb2Nrcy5sZW5ndGgtMSwgc2l6ZSlbMF06IHJpZ2h0O1xyXG4gICAgICAgICAgcmVzID0gdGhpcy5jb25uZWN0UGh5c2ljcyhcclxuICAgICAgICAgICAgYmxvY2ssXHJcbiAgICAgICAgICAgIHRoaXMucC5wYWdlLm1hc3MqYmxvY2suZ2V0U2l6ZSgpLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICB0aGlzLnAucGFnZS5zdGFydFZlbG9jaXR5LFxyXG4gICAgICAgICAgICB0aGlzLnAucGFnZS5mbGV4aWJpbGl0eSxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgKGFuZ2xlLGhlaWdodCk9PmJsb2NrLnNldCh0aGlzLmdldENsb3NlZEJsb2NrQW5nbGUoYW5nbGUpLCdvcGVuZWQnLGhlaWdodCksXHJcbiAgICAgICAgICAgIEJvb2suZmluaXNoQW5pbWF0aW9uQ2xiLmJpbmQoe2Jvb2s6IHRoaXMsIGJsb2NrfSksXHJcbiAgICAgICAgICAgIHByb2dyZXNzQ2xiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRoaXMuYW5nbGU9PT1QSS8yIHx8IHRoaXMuYW5nbGUgPT09IDMqUEkvMikge1xyXG4gICAgICAgICAgcmVzID0gdGhpcy5jb25uZWN0UGh5c2ljcyhcclxuICAgICAgICAgICAgYmxvY2s9dGhpcy5yaWdodENvdmVyLFxyXG4gICAgICAgICAgICB0aGlzLnAuY292ZXIubWFzcyxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgdGhpcy5wLmNvdmVyLnN0YXJ0VmVsb2NpdHksXHJcbiAgICAgICAgICAgIHRoaXMucC5jb3Zlci5mbGV4aWJpbGl0eSxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgKGFuZ2xlLGhlaWdodCk9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXQoUEkvMithbmdsZS8yLGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgaWYoYW5nbGU8UEkvMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTaGVldEJsb2NrcyhQSS8yKzFlLTcsJ2Nsb3NlZCcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKGFuZ2xlLGhlaWdodCk9PnRoaXMuc2V0KFBJLzIrYW5nbGUvMiwwKSxcclxuICAgICAgICAgICAgcHJvZ3Jlc3NDbGJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgLy8gfVxyXG5cclxuICBjbGVhckhvdmVySW5mbygpIHtcclxuICAgIHRoaXMucGFnZU1hbmFnZXIudHVybk9uRXZlbnRzKCk7XHJcbiAgICBkZWxldGUgdGhpcy5ob3ZlckluZm8uYmxvY2suZm9yY2U7XHJcbiAgICBkZWxldGUgdGhpcy5ob3ZlckluZm8uYmxvY2suY29ybmVyRm9yY2U7XHJcbiAgICBkZWxldGUgdGhpcy5ob3ZlckluZm87XHJcbiAgfVxyXG5cclxuICB4U2VnbWVudCgpIHtcclxuICAgIGNvbnN0IGJveHMgPSB0aGlzLnRtcC5ib3hzLCByZXMgPSB7fTtcclxuICAgIGlmKHRoaXMubGVmdENvdmVyLnBoeXNpY0lkKSB7XHJcbiAgICAgIGJveHNbMF0uc2V0RnJvbU9iamVjdCh0aGlzLnJpZ2h0Q292ZXIudGhyZWUpO1xyXG4gICAgICByZXMubWluID0gLShyZXMubWF4ID0gYm94c1swXS5tYXgueCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRoaXMucmlnaHRDb3Zlci5waHlzaWNJZCkge1xyXG4gICAgICBib3hzWzBdLnNldEZyb21PYmplY3QodGhpcy5sZWZ0Q292ZXIudGhyZWUpO1xyXG4gICAgICByZXMubWF4ID0gLShyZXMubWluID0gYm94c1swXS5taW4ueCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgYm94c1swXS5zZXRGcm9tT2JqZWN0KHRoaXMubGVmdENvdmVyLnRocmVlKTtcclxuICAgICAgYm94c1sxXS5zZXRGcm9tT2JqZWN0KHRoaXMucmlnaHRDb3Zlci50aHJlZSk7XHJcbiAgICAgIGJveHNbMF0udW5pb24oYm94c1sxXSk7XHJcbiAgICAgIHJlcy5taW4gPSBib3hzWzBdLm1pbi54O1xyXG4gICAgICByZXMubWF4ID0gYm94c1swXS5tYXgueDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICBjb21wdXRlVGFyZ2V0KHBvaW50KSB7XHJcbiAgICBsZXQge3gsIHl9ID0gcG9pbnQsIHNlZyA9IHRoaXMueFNlZ21lbnQoKSwgYW5nbGU7XHJcbiAgICBhbmdsZSA9IChzZWcubWF4LXgpLyhzZWcubWF4LXNlZy5taW4pKk1hdGguUEk7XHJcbiAgICAvLyBhbmdsZSA9IE1hdGguYWNvcyh4L01hdGguc3FydCh4KngreSp5KSk7XHJcbiAgICByZXR1cm4gTWF0aC5tYXgodGhpcy5kcmFnQW5nbGUsIE1hdGgubWluKE1hdGguUEktdGhpcy5kcmFnQW5nbGUsIGFuZ2xlKSk7XHJcbiAgfVxyXG5cclxuICBvblBpY2tDYWxsYmFjayhvYmplY3QpIHtcclxuICAgIGxldCByZXMgPSBmYWxzZTtcclxuICAgIGNvbnN0IGJsb2NrID0gb2JqZWN0Lm9iamVjdC51c2VyRGF0YS5zZWxmLFxyXG4gICAgICAgICAgcCA9IHsuLi5vYmplY3QudXZ9LCBpID0gb2JqZWN0LmZhY2UubWF0ZXJpYWxJbmRleDtcclxuICAgIGlmKGk8Mikge1xyXG4gICAgICBwLnggPSBpPT09MD8gcC54OiAxLXAueDtcclxuICAgICAgaWYoYmxvY2suY29ybmVyVGFyZ2V0LnRlc3RJbnRlcnNlY3Rpb24obnVsbCwgcCkgJiYgYmxvY2sucGh5c2ljSWQpIHtcclxuICAgICAgICBpZih0aGlzLmhvdmVySW5mbykge1xyXG4gICAgICAgICAgdGhpcy5jbGVhckhvdmVySW5mbygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBibG9jay5mb3JjZSA9IFNoZWV0UGh5c2ljcy5kcmFnRm9yY2VDbGI7XHJcbiAgICAgICAgYmxvY2suY29ybmVyRm9yY2UgPSBTaGVldFBoeXNpY3MuZ2V0RHJhZ0Nvcm5lckZvcmNlQ2xiKHRoaXMuY29tcHV0ZVRhcmdldChvYmplY3QucG9pbnQpKTtcclxuICAgICAgICB0aGlzLmRyYWdJbmZvID0ge1xyXG4gICAgICAgICAgb2JqZWN0LFxyXG4gICAgICAgICAgYmxvY2tcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5wYWdlTWFuYWdlci50dXJuT2ZmRXZlbnRzKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICBvbkRyYWdDYWxsYmFjayhwb2ludCkge1xyXG4gICAgY29uc3QgYmxvY2sgPSB0aGlzLmRyYWdJbmZvLmJsb2NrLCBwID0gYmxvY2suZ2V0UHJvcHMoKTtcclxuICAgIGJsb2NrLmZvcmNlID0gU2hlZXRQaHlzaWNzLmRyYWdGb3JjZUNsYjtcclxuICAgIGJsb2NrLmNvcm5lckZvcmNlID0gU2hlZXRQaHlzaWNzLmdldERyYWdDb3JuZXJGb3JjZUNsYih0aGlzLmNvbXB1dGVUYXJnZXQocG9pbnQpKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgb25SZWxlYXNlQ2FsbGJhY2soKSB7XHJcbiAgICBkZWxldGUgdGhpcy5kcmFnSW5mby5ibG9jay5mb3JjZTtcclxuICAgIGRlbGV0ZSB0aGlzLmRyYWdJbmZvLmJsb2NrLmNvcm5lckZvcmNlO1xyXG4gICAgZGVsZXRlIHRoaXMuZHJhZ0luZm87XHJcbiAgICB0aGlzLnBhZ2VNYW5hZ2VyLnR1cm5PbkV2ZW50cygpO1xyXG4gIH1cclxuXHJcbiAgZ2V0RmxpcHBpbmcoaSkge1xyXG4gICAgcmV0dXJuIGk/IHRoaXMuZ2V0TGVmdEZsaXBwaW5nKCk6IHRoaXMuZ2V0UmlnaHRGbGlwcGluZygpO1xyXG4gIH1cclxuXHJcbiAgZmxpcChpLCBzaXplPTEpIHtcclxuICAgIHJldHVybiBpPyB0aGlzLmZsaXBMZWZ0KHNpemUpOiB0aGlzLmZsaXBSaWdodChzaXplKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZU1vdXNlKGVuYWJsZSkge1xyXG4gICAgdGhpcy5tb3VzZUNvbnRyb2xsZXIgPSBlbmFibGU7XHJcbiAgfVxyXG5cclxuICBjb3JuZXJDYWxsYmFjayhlLCBkYXRhKSB7XHJcbiAgICBpZih0aGlzLm1vdXNlQ29udHJvbGxlcikge1xyXG4gICAgICBjb25zdCB7aSwgbn0gPSBkYXRhLmRhdGE7XHJcbiAgICAgIGlmKGUudHlwZT09PSdtb3VzZW92ZXInKSB7XHJcbiAgICAgICAgaWYodGhpcy5ob3ZlckluZm8gJiYgdGhpcy5ob3ZlckluZm8ucGVuZGluZ3MhPT11bmRlZmluZWQpIHtcclxuICAgICAgICAgICsrdGhpcy5ob3ZlckluZm8ucGVuZGluZ3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgaWYodGhpcy5ob3ZlckluZm8pIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdXcm9uZyBzdGF0ZTogZWxlbWVudCBpcyBhbHJlYWR5IGhvdmVyJyk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuaG92ZXJJbmZvLm4hPT1uKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jbGVhckhvdmVySW5mbygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZighdGhpcy5ob3ZlckluZm8gJiYgIXRoaXMuZHJhZ0luZm8pIHtcclxuICAgICAgICAgICAgbGV0IHJlcyA9IFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICBjb25zdCBob3ZlckFuZ2xlID0gMC4wMixcclxuICAgICAgICAgICAgICAgICAgaG92ZXIgPSB0aGlzLmdldEJsb2NrQnlQYWdlKG4pLFxyXG4gICAgICAgICAgICAgICAgICBwb3NzaWJsZSA9IHRoaXMuZ2V0RmxpcHBpbmcoaSk7XHJcbiAgICAgICAgICAgIGlmKG4+MSAmJiBuPDIqKHRoaXMucC5zaGVldHMrMSkgJiYgaG92ZXIucGh5c2ljSWQgJiYgKGhvdmVyLmFuZ2xlPGhvdmVyQW5nbGUgfHwgaG92ZXIuYW5nbGU+TWF0aC5QSS1ob3ZlckFuZ2xlKSkge1xyXG4gICAgICAgICAgICAgIHJlcyA9IFByb21pc2UucmVzb2x2ZShob3Zlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihob3Zlcj09PXBvc3NpYmxlKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc2hlZXRCbG9ja3MgPSBbXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnRDb3ZlcixcclxuICAgICAgICAgICAgICAgIC4uLnRoaXMuc2hlZXRCbG9ja3MsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0Q292ZXJcclxuICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGogPSBzaGVldEJsb2Nrcy5pbmRleE9mKGhvdmVyKSwgbmV4dEJsb2NrID0gfmo/IHNoZWV0QmxvY2tzW2orMippLTFdOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgaWYoIW5leHRCbG9jayB8fCAhbmV4dEJsb2NrLnBoeXNpY0lkIHx8IG5leHRCbG9jay5hbmdsZT5ob3ZlckFuZ2xlICYmIG5leHRCbG9jay5hbmdsZTxNYXRoLlBJLWhvdmVyQW5nbGUpIHtcclxuICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuZmxpcChpLCAxKS50aGVuKChibG9jayk9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGlmKCFibG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmhvdmVySW5mbztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoZWV0UGh5c2ljcy5zZXRQYXJhbWV0cihibG9jay5waHlzaWNJZCwgJ3ZlbG9jaXR5JywgMCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsb2NrO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVySW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgcGVuZGluZ3M6IDFcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlcy50aGVuKChibG9jayk9PiB7XHJcbiAgICAgICAgICAgICAgaWYodGhpcy5ob3ZlckluZm8gJiYgdGhpcy5ob3ZlckluZm8ucGVuZGluZ3M8MSkge1xyXG4gICAgICAgICAgICAgICAgYmxvY2sgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5ob3ZlckluZm87XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmKGJsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VNYW5hZ2VyLnR1cm5PZmZFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICBwID0gYmxvY2suZ2V0UHJvcHMoKTtcclxuICAgICAgICAgICAgICAgIGJsb2NrLmZvcmNlID0gdGhpcy5zaGVldFBoeXNpY3MuZ2V0VGFyZ2V0Rm9yY2VDbGIocC5tYXNzKmJsb2NrLmdldFNpemUoKSwgaT8gTWF0aC5QSS1ob3ZlckFuZ2xlOiBob3ZlckFuZ2xlKTtcclxuICAgICAgICAgICAgICAgIGJsb2NrLmNvcm5lckZvcmNlID0gKCk9PiAoaT8gLTE6IDEpKlNoZWV0UGh5c2ljcy5ob3ZlckNvcm5lckZvcmNlQ2xiKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0UGh5c2ljcy5zZXRQYXJhbWV0cihibG9jay5waHlzaWNJZCwgJ2FuZ2xlJywgaT8gTWF0aC5QSS0wLjUqaG92ZXJBbmdsZTogMC41KmhvdmVyQW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ob3ZlckluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAgIG4sXHJcbiAgICAgICAgICAgICAgICAgIGJsb2NrXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoMS8zMCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYodGhpcy5ob3ZlckluZm8gJiYgZS50eXBlPT09J21vdXNlb3V0Jykge1xyXG4gICAgICAgIGlmKHRoaXMuaG92ZXJJbmZvLnBlbmRpbmdzIT09dW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAtLXRoaXMuaG92ZXJJbmZvLnBlbmRpbmdzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKG49PT10aGlzLmhvdmVySW5mby5uKSB7XHJcbiAgICAgICAgICB0aGlzLmNsZWFySG92ZXJJbmZvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoZS50eXBlPT09J21vdXNlZG93bicpIHtcclxuICAgICAgICB0aGlzLmNvcm5lckNsaWNrRGF0YSA9IHtcclxuICAgICAgICAgIHg6IGUucGFnZVgsXHJcbiAgICAgICAgICB5OiBlLnBhZ2VZXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGUudHlwZT09PSdjbGljaycpIHtcclxuICAgICAgICBpZihNYXRoLnNxcnQoTWF0aC5wb3codGhpcy5jb3JuZXJDbGlja0RhdGEueC1lLnBhZ2VYLDIpK01hdGgucG93KHRoaXMuY29ybmVyQ2xpY2tEYXRhLnktZS5wYWdlWSwyKSk8NSkge1xyXG4gICAgICAgICAgY29uc3QgaG92ZXIgPSB0aGlzLmdldEJsb2NrQnlQYWdlKG4pO1xyXG4gICAgICAgICAgaWYoaG92ZXIucGh5c2ljSWQpIHtcclxuICAgICAgICAgICAgY29uc3QgaWQgPSBob3Zlci5waHlzaWNJZCxcclxuICAgICAgICAgICAgICAgICAgcHJvcHMgPSBob3Zlci5nZXRQcm9wcygpO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0UGh5c2ljcy5zZXRQYXJhbWV0cihpZCwgJ3ZlbG9jaXR5JywgKGk/IC0xOiAxKSpwcm9wcy5zdGFydFZlbG9jaXR5KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuY29ybmVyQ2xpY2tEYXRhO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRTaGVldEJsb2NrKHAsIGJsb2NrKSB7XHJcbiAgICB0aGlzLnNoZWV0QmxvY2tzLnNwbGljZShwLCAwLCBibG9jayk7XHJcbiAgICB0aGlzLnN1YnNjcmliZVNoZWV0QmxvY2soYmxvY2ssIDIpO1xyXG4gICAgdGhpcy50aHJlZVNoZWV0QmxvY2tzLmFkZChibG9jay50aHJlZSk7XHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmVTaGVldEJsb2NrKGJsb2NrLCBvZmZzZXQpIHtcclxuICAgIGNvbnN0IGV2ZW50Q29udmVydGVyID0gbmV3IEN1c3RvbUV2ZW50Q29udmVydGVyKHRoaXMudmlzdWFsLnduZCwgdGhpcy52aXN1YWwuZG9jLCBDaXJjbGVUYXJnZXQudGVzdCksXHJcbiAgICAgICAgICByID0gMC4xNSxcclxuICAgICAgICAgIHRhcmdldCA9IG5ldyBDaXJjbGVUYXJnZXQoMS0wLjUqciwgMC41KnIsIHIpO1xyXG4gICAgdGFyZ2V0LmJsb2NrID0gYmxvY2s7XHJcbiAgICB0YXJnZXQuY2FsbGJhY2sgPSB0aGlzLmNvcm5lckNhbGxiYWNrLmJpbmQodGhpcyk7XHJcbiAgICBldmVudENvbnZlcnRlci5hZGRDdXN0b20odGFyZ2V0KTtcclxuICAgIGJsb2NrLmNvcm5lclRhcmdldCA9IHRhcmdldDtcclxuICAgIGJsb2NrLnRocmVlLnVzZXJEYXRhLm1vdXNlQ2FsbGJhY2sgPSAoZSwgZGF0YSk9PiB7XHJcbiAgICAgIGNvbnN0IGkgPSBkYXRhLmZhY2UubWF0ZXJpYWxJbmRleDtcclxuICAgICAgaWYoaTwyKSB7XHJcbiAgICAgICAgY29uc3QgbiA9IGk9PT0wPyBvZmZzZXQrMipibG9jay5wLmZpcnN0OiBvZmZzZXQrMipibG9jay5wLmxhc3QtMTtcclxuICAgICAgICBldmVudENvbnZlcnRlci5jb252ZXJ0KGUsIHt4OiBpPT09MD8gZGF0YS51di54OiAxLWRhdGEudXYueCwgeTogZGF0YS51di55LCBpLCBufSk7XHJcbiAgICAgICAgdGhpcy5wYWdlTWFuYWdlci50cmFuc2ZlckV2ZW50VG9UZXh0dXJlKG4sIGUsIGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgYmxvY2sudGhyZWUudXNlckRhdGEudG91Y2hDYWxsYmFjayA9IChlLCBkYXRhKT0+IHtcclxuICAgICAgY29uc3QgaSA9IGRhdGEuZmFjZS5tYXRlcmlhbEluZGV4O1xyXG4gICAgICBpZihpPDIpIHtcclxuICAgICAgICBjb25zdCBuID0gaT09PTA/IG9mZnNldCsyKmJsb2NrLnAuZmlyc3Q6IG9mZnNldCsyKmJsb2NrLnAubGFzdC0xO1xyXG4gICAgICAgIHRoaXMucGFnZU1hbmFnZXIudHJhbnNmZXJFdmVudFRvVGV4dHVyZShuLCBlLCBkYXRhKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMudmlzdWFsLmRyYWcuYWRkVGhyZWUoYmxvY2sudGhyZWUpO1xyXG4gICAgdGhpcy52aXN1YWwubW91c2VFdmVudHMuYWRkVGhyZWUoYmxvY2sudGhyZWUpO1xyXG4gICAgdGhpcy52aXN1YWwudG91Y2hFdmVudHMuYWRkVGhyZWUoYmxvY2sudGhyZWUpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlU2hlZXRCbG9jayhibG9jaykge1xyXG4gICAgdGhpcy52aXN1YWwubW91c2VFdmVudHMucmVtb3ZlVGhyZWUoYmxvY2sudGhyZWUpO1xyXG4gICAgdGhpcy52aXN1YWwudG91Y2hFdmVudHMucmVtb3ZlVGhyZWUoYmxvY2sudGhyZWUpO1xyXG4gICAgdGhpcy52aXN1YWwuZHJhZy5yZW1vdmVUaHJlZShibG9jay50aHJlZSk7XHJcbiAgICB0aGlzLnRocmVlU2hlZXRCbG9ja3MucmVtb3ZlKGJsb2NrLnRocmVlKTtcclxuICAgIGJsb2NrLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVNoZWV0QmxvY2tzKGZpcnN0LCBzaXplKSB7XHJcbiAgICBjb25zdCBibG9ja3MgPSB0aGlzLnNoZWV0QmxvY2tzLnNwbGljZShmaXJzdCwgc2l6ZSk7XHJcbiAgICBmb3IobGV0IGJsb2NrIG9mIGJsb2Nrcykge1xyXG4gICAgICB0aGlzLnJlbW92ZVNoZWV0QmxvY2soYmxvY2spO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VGV4dHVyZShtYXRlcmlhbCwgbikge1xyXG4gICAgdGhpcy5wYWdlTWFuYWdlci5zZXRUZXh0dXJlKG1hdGVyaWFsLCBuKTtcclxuICB9XHJcblxyXG4gIHNldFBhZ2VUZXh0dXJlKG1hdGVyaWFsLCBuKSB7XHJcbiAgICB0aGlzLnNldFRleHR1cmUobWF0ZXJpYWwsIG4rMik7XHJcbiAgfVxyXG5cclxuICBzZXRMZWZ0Q292ZXJUZXh0dXJlKG1hdGVyaWFsLCBuKSB7XHJcbiAgICB0aGlzLnNldFRleHR1cmUobWF0ZXJpYWwsIG4pO1xyXG4gIH1cclxuXHJcbiAgc2V0UmlnaHRDb3ZlclRleHR1cmUobWF0ZXJpYWwsIG4pIHtcclxuICAgIHRoaXMuc2V0VGV4dHVyZShtYXRlcmlhbCwgbisyKih0aGlzLnAuc2hlZXRzKzEpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBmaW5pc2hBbmltYXRpb25DbGIoYW5nbGUpIHtcclxuICAgIHRoaXMuYmxvY2suc2V0KHRoaXMuYm9vay5nZXRDbG9zZWRCbG9ja0FuZ2xlKGFuZ2xlKS5jbG9zZWRBbmdsZSwnY2xvc2VkJywwKTtcclxuICAgIGNvbnN0IGkgPSB0aGlzLmJvb2suc2hlZXRCbG9ja3MuaW5kZXhPZih0aGlzLmJsb2NrKTtcclxuICAgIGlmKH5pKSB7XHJcbiAgICAgIGlmKGFuZ2xlPT09MCkge1xyXG4gICAgICAgIHRoaXMuYm9vay5tZXJnZVNoZWV0QmxvY2tzKGksIHRoaXMuYm9vay5zaGVldEJsb2Nrcy5sZW5ndGgtaSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5ib29rLm1lcmdlU2hlZXRCbG9ja3MoMCwgaSsxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2FsY0Jsb2NrRm9yY2UoYmxvY2ssIG9iamVjdCwgYW5nbGUsIHZlbG9jaXR5LCBjb3JuZXJIZWlnaHQpIHtcclxuICAgIHJldHVybiBibG9jay5mb3JjZT8gYmxvY2suZm9yY2Uob2JqZWN0LCBhbmdsZSwgdmVsb2NpdHksIGNvcm5lckhlaWdodCk6IDA7XHJcbiAgfVxyXG5cclxuICBjYWxjQmxvY2tDb3JuZXJGb3JjZShibG9jaywgb2JqZWN0LCBhbmdsZSwgdmVsb2NpdHksIGNvcm5lckhlaWdodCkge1xyXG4gICAgcmV0dXJuIGJsb2NrLmNvcm5lckZvcmNlPyBibG9jay5jb3JuZXJGb3JjZShvYmplY3QsIGFuZ2xlLCB2ZWxvY2l0eSwgY29ybmVySGVpZ2h0KTogMDtcclxuICB9XHJcblxyXG4gIG5vdGlmeUJlZm9yZUFuaW1hdGlvbigpIHtcclxuICAgIGxldCByZXM7XHJcbiAgICBpZih0aGlzLmFuaW1hdGlvbk5vdGlmaWNhdGlvbikge1xyXG4gICAgICByZXMgPSBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uTm90aWZpY2F0aW9uID0gdHJ1ZTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHtcclxuICAgICAgICB0eXBlOiAnYmVmb3JlQW5pbWF0aW9uJ1xyXG4gICAgICB9KTtcclxuICAgICAgcmVzID0gdGhpcy5sYXllck1hbmFnZXIuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIG5vdGlmeUFmdGVyQW5pbWF0aW9uKCkge1xyXG4gICAgaWYodGhpcy5hbmltYXRpb25Ob3RpZmljYXRpb24pIHtcclxuICAgICAgZGVsZXRlIHRoaXMuYW5pbWF0aW9uTm90aWZpY2F0aW9uO1xyXG4gICAgICB0aGlzLmxheWVyTWFuYWdlci5zaG93KCk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7XHJcbiAgICAgICAgdHlwZTogJ2FmdGVyQW5pbWF0aW9uJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbm5lY3RQaHlzaWNzKGJsb2NrLCBtYXNzLCBhbmdsZSwgdmVsb2NpdHksIGZsZXhpYmlsaXR5LCBjb3ZlckhlaWdodCwgc2ltdWxhdGVDbGIsIHJlbW92ZUNsYiwgcHJvZ3Jlc3NDbGIpIHtcclxuICAgIGNvbnN0IHR5cGUgPSAoKT0+IHRoaXMuaG92ZXJJbmZvPyAnaG92ZXInOiAodGhpcy5kcmFnSW5mbz8gJ2RyYWcnOiAnZnJlZScpLFxyXG4gICAgICByZXMgPSB0aGlzLnNoZWV0UGh5c2ljcy5nZXRTaXplKCk/IFByb21pc2UucmVzb2x2ZSgpOiB0aGlzLm5vdGlmeUJlZm9yZUFuaW1hdGlvbigpO1xyXG4gICAgcmV0dXJuIHJlcy50aGVuKCgpPT4ge1xyXG4gICAgICBibG9jay5waHlzaWNJZCA9IHRoaXMuc2hlZXRQaHlzaWNzLmFkZE9iamVjdChcclxuICAgICAgICBtYXNzLFxyXG4gICAgICAgIGFuZ2xlLFxyXG4gICAgICAgIHZlbG9jaXR5LFxyXG4gICAgICAgIGZsZXhpYmlsaXR5LFxyXG4gICAgICAgIGNvdmVySGVpZ2h0LFxyXG4gICAgICAgIChhbmdsLCBjaCk9PiB7XHJcbiAgICAgICAgICBzaW11bGF0ZUNsYihhbmdsLCBjaCk7XHJcbiAgICAgICAgICBwcm9ncmVzc0NsYihibG9jaywgTWF0aC5hYnMoYW5nbGUtYW5nbCkvTWF0aC5QSSwgJ3Byb2Nlc3MnLCB0eXBlKCkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKGFuZ2wsIGNoKT0+IHtcclxuICAgICAgICAgIHJlbW92ZUNsYihhbmdsLCBjaCk7XHJcbiAgICAgICAgICBkZWxldGUgYmxvY2sucGh5c2ljSWQ7XHJcbiAgICAgICAgICBwcm9ncmVzc0NsYihibG9jaywgTWF0aC5hYnMoYW5nbGUtYW5nbCkvTWF0aC5QSSwgJ2ZpbmlzaCcsIHR5cGUoKSk7XHJcbiAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT4ge1xyXG4gICAgICAgICAgICBpZighdGhpcy5zaGVldFBoeXNpY3MuZ2V0U2l6ZSgpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5ub3RpZnlBZnRlckFuaW1hdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIChvYmplY3QsIGFuZ2xlLCB2ZWxvY2l0eSwgY29ybmVySGVpZ2h0KT0+IHRoaXMuY2FsY0Jsb2NrRm9yY2UoYmxvY2ssIG9iamVjdCwgYW5nbGUsIHZlbG9jaXR5LCBjb3JuZXJIZWlnaHQpLFxyXG4gICAgICAgIChvYmplY3QsIGFuZ2xlLCB2ZWxvY2l0eSwgY29ybmVySGVpZ2h0KT0+IHRoaXMuY2FsY0Jsb2NrQ29ybmVyRm9yY2UoYmxvY2ssIG9iamVjdCwgYW5nbGUsIHZlbG9jaXR5LCBjb3JuZXJIZWlnaHQpXHJcbiAgICAgICk7XHJcbiAgICAgIHByb2dyZXNzQ2xiKGJsb2NrLCAwLCAnaW5pdCcsIHR5cGUoKSk7XHJcbiAgICAgIHJldHVybiBibG9jaztcclxuICAgIH0pLmNhdGNoKCgpPT4gdW5kZWZpbmVkKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkdCkge1xyXG4gICAgdGhpcy5sYXN0TW91c2VQb3MudCs9ZHQ7XHJcbiAgICBpZih0aGlzLmlzUHJvY2Vzc2luZygpICYmIHRoaXMubGFzdE1vdXNlUG9zLnBhZ2VYIT09dW5kZWZpbmVkICYmIHRoaXMubGFzdE1vdXNlUG9zLnQtKHRoaXMubGFzdE1vdXNlUG9zLmxhc3RUIHx8IDApPjAuMjUgJiYgIXRoaXMuaG92ZXJJbmZvICYmICF0aGlzLmRyYWdJbmZvKSB7XHJcbiAgICAgIHRoaXMubGFzdE1vdXNlUG9zLmxhc3RUID0gdGhpcy5sYXN0TW91c2VQb3MudDtcclxuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKT0+IHtcclxuICAgICAgICAkKHRoaXMudmlzdWFsLmVsZW1lbnQpLnRyaWdnZXIoJC5FdmVudCgnbW91c2Vtb3ZlJywgdGhpcy5sYXN0TW91c2VQb3MpKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNoZWV0UGh5c2ljcy5zaW11bGF0ZShkdCk7XHJcbiAgfVxyXG5cclxuICBzcGxpdFNoZWV0QmxvY2soaSwgbGVmdFNpemUpIHtcclxuICAgIGNvbnN0IGJsb2NrID0gdGhpcy5zaGVldEJsb2Nrc1tpXTtcclxuICAgIGlmKGJsb2NrICYmIGxlZnRTaXplPGJsb2NrLmdldFNpemUoKSkge1xyXG4gICAgICBjb25zdCBuZXdCbG9jayA9IG5ldyBTaGVldEJsb2NrKHRoaXMudmlzdWFsLCB7Li4udGhpcy5wLCBzZXRUZXh0dXJlOiB0aGlzLnNldFBhZ2VUZXh0dXJlLmJpbmQodGhpcyl9LCBibG9jay5wLmZpcnN0LCBibG9jay5wLmZpcnN0K2xlZnRTaXplLCBibG9jay5hbmdsZSwgYmxvY2suc3RhdGUpO1xyXG4gICAgICBibG9jay5zZXQoYmxvY2suYW5nbGUsIGJsb2NrLnN0YXRlLCBibG9jay5jb3JuZXIuaGVpZ2h0LCBibG9jay5wLmZpcnN0K2xlZnRTaXplLCBibG9jay5wLmxhc3QpO1xyXG4gICAgICB0aGlzLmFkZFNoZWV0QmxvY2soaSwgbmV3QmxvY2spO1xyXG4gICAgICByZXR1cm4gW25ld0Jsb2NrLCBibG9ja107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtZXJnZVNoZWV0QmxvY2tzKGZpcnN0LCBzaXplKSB7XHJcbiAgICBpZihmaXJzdDx0aGlzLnNoZWV0QmxvY2tzLmxlbmd0aCkge1xyXG4gICAgICBzaXplID0gTWF0aC5taW4odGhpcy5zaGVldEJsb2Nrcy5sZW5ndGgtZmlyc3QsIHNpemUpO1xyXG4gICAgICBjb25zdCBmaXJzdEJsb2NrID0gdGhpcy5zaGVldEJsb2Nrc1tmaXJzdF0sIGxhc3RCbG9jayA9IHRoaXMuc2hlZXRCbG9ja3NbZmlyc3Qrc2l6ZS0xXTtcclxuICAgICAgZmlyc3RCbG9jay5zZXQoZmlyc3RCbG9jay5hbmdsZSwgZmlyc3RCbG9jay5zdGF0ZSwgZmlyc3RCbG9jay5jb3JuZXIuaGVpZ2h0LCBmaXJzdEJsb2NrLnAuZmlyc3QsIGxhc3RCbG9jay5wLmxhc3QpO1xyXG4gICAgICB0aGlzLnJlbW92ZVNoZWV0QmxvY2tzKGZpcnN0KzEsIHNpemUtMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTaGVldEJsb2NrcyhhbmdsZSwgc3RhdGUpIHtcclxuICAgIGlmKHN0YXRlPT09J2Nsb3NlZCcpIHtcclxuICAgICAgdGhpcy5jbG9zZWRBbmdsZSA9IGFuZ2xlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zaGVldEJsb2Nrcy5mb3JFYWNoKChzKT0+IHtcclxuICAgICAgaWYoIXMucGh5c2ljSWQpIHtcclxuICAgICAgICBzLnNldChhbmdsZSwgc3RhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldChhbmdsZSwgaGVpZ2h0PTApIHtcclxuICAgIHRoaXMuYW5nbGUgPSBhbmdsZTtcclxuICAgIGNvbnN0IFBJID0gTWF0aC5QSTtcclxuICAgIGlmKGFuZ2xlPFBJLzQpIHtcclxuICAgICAgdGhpcy5iaW5kZXIuc2V0KDApO1xyXG5cclxuICAgICAgdGhpcy5iaW5kZXIuc2V0TGVmdCgtUEkvMisyKmFuZ2xlKTtcclxuICAgICAgdGhpcy5sZWZ0Q292ZXIuc2V0KFBJLzIsJ29wZW5lZCcsaGVpZ2h0KTtcclxuXHJcbiAgICAgIHRoaXMuc2V0U2hlZXRCbG9ja3MoMCwnY2xvc2VkJyk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRSaWdodCgwKTtcclxuICAgICAgdGhpcy5yaWdodENvdmVyLnNldCgwLCdjbG9zZWQnLDApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihhbmdsZTwyKlBJLzQpIHtcclxuICAgICAgY29uc3QgYT0yKihhbmdsZS1QSS80KTtcclxuICAgICAgdGhpcy5iaW5kZXIuc2V0KGEpO1xyXG5cclxuICAgICAgdGhpcy5iaW5kZXIuc2V0TGVmdCgtYSk7XHJcbiAgICAgIHRoaXMubGVmdENvdmVyLnNldChQSS8yK2EsJ29wZW5lZCcsaGVpZ2h0KTtcclxuXHJcbiAgICAgIHRoaXMuc2V0U2hlZXRCbG9ja3MoYSwnY2xvc2VkJyk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRSaWdodCgtYSk7XHJcbiAgICAgIHRoaXMucmlnaHRDb3Zlci5zZXQoYSwnY2xvc2VkJywwKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoYW5nbGU8MypQSS80KSB7XHJcbiAgICAgIGNvbnN0IGE9MiooYW5nbGUtUEkvMik7XHJcbiAgICAgIHRoaXMuYmluZGVyLnNldChQSS8yKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldExlZnQoLVBJLzIpO1xyXG4gICAgICB0aGlzLmxlZnRDb3Zlci5zZXQoUEksJ29wZW5lZCcsMCk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRSaWdodCgtUEkvMik7XHJcbiAgICAgIHRoaXMucmlnaHRDb3Zlci5zZXQoYSwnb3BlbmVkJyxoZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihhbmdsZTw0KlBJLzQpIHtcclxuICAgICAgY29uc3QgYT0yKihhbmdsZS0zKlBJLzQpK1BJLzI7XHJcbiAgICAgIHRoaXMuYmluZGVyLnNldChhKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldExlZnQoLWEpO1xyXG4gICAgICB0aGlzLmxlZnRDb3Zlci5zZXQoYSwnY2xvc2VkJywwKTtcclxuXHJcbiAgICAgIHRoaXMuc2V0U2hlZXRCbG9ja3MoYSwnY2xvc2VkJyk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRSaWdodCgtUEkvMik7XHJcbiAgICAgIHRoaXMucmlnaHRDb3Zlci5zZXQoUEkvMiwnb3BlbmVkJyxoZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihhbmdsZTw1KlBJLzQpIHtcclxuICAgICAgdGhpcy5iaW5kZXIuc2V0KFBJKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldExlZnQoLVBJKTtcclxuICAgICAgdGhpcy5sZWZ0Q292ZXIuc2V0KFBJLCdjbG9zZWQnLDApO1xyXG5cclxuICAgICAgdGhpcy5zZXRTaGVldEJsb2NrcyhQSSwnY2xvc2VkJyk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRSaWdodCgtUEkvMi0yKihhbmdsZS1QSSkpO1xyXG4gICAgICB0aGlzLnJpZ2h0Q292ZXIuc2V0KFBJLzIsJ29wZW5lZCcsaGVpZ2h0KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoYW5nbGU8NipQSS80KSB7XHJcbiAgICAgIGNvbnN0IGE9MiooYW5nbGUtNSpQSS80KTtcclxuICAgICAgdGhpcy5iaW5kZXIuc2V0KFBJLWEpO1xyXG5cclxuICAgICAgdGhpcy5iaW5kZXIuc2V0TGVmdCgtUEkrYSk7XHJcbiAgICAgIHRoaXMubGVmdENvdmVyLnNldChQSS1hLCdjbG9zZWQnLDApO1xyXG5cclxuICAgICAgdGhpcy5zZXRTaGVldEJsb2NrcyhQSS1hLCdjbG9zZWQnKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldFJpZ2h0KC1QSSthKTtcclxuICAgICAgdGhpcy5yaWdodENvdmVyLnNldChQSS8yLWEsJ29wZW5lZCcsaGVpZ2h0KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoYW5nbGU8NypQSS80KSB7XHJcbiAgICAgIGNvbnN0IGE9MiooYW5nbGUtNipQSS80KTtcclxuICAgICAgdGhpcy5iaW5kZXIuc2V0KFBJLzIpO1xyXG5cclxuICAgICAgdGhpcy5iaW5kZXIuc2V0TGVmdCgtUEkvMik7XHJcbiAgICAgIHRoaXMubGVmdENvdmVyLnNldChQSS1hLCdvcGVuZWQnLGhlaWdodCk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRSaWdodCgtUEkvMik7XHJcbiAgICAgIHRoaXMucmlnaHRDb3Zlci5zZXQoMCwnb3BlbmVkJywwKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoYW5nbGU8OCpQSS80KSB7XHJcbiAgICAgIGNvbnN0IGE9MiooYW5nbGUtNypQSS80KTtcclxuICAgICAgdGhpcy5iaW5kZXIuc2V0KFBJLzItYSk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRMZWZ0KC1QSS8yKTtcclxuICAgICAgdGhpcy5sZWZ0Q292ZXIuc2V0KFBJLzIsJ29wZW5lZCcsaGVpZ2h0KTtcclxuXHJcbiAgICAgIHRoaXMuc2V0U2hlZXRCbG9ja3MoUEkvMi1hLCdjbG9zZWQnKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldFJpZ2h0KC1QSS8yK2EpO1xyXG4gICAgICB0aGlzLnJpZ2h0Q292ZXIuc2V0KFBJLzItYSwnY2xvc2VkJywwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVTaWRlVGV4dHVyZShjb2xvcikge1xyXG4gICAgY29uc3QgakMgPSAkKCc8Y2FudmFzIHdpZHRoPVwiOFwiIGhlaWdodD1cIjhcIj48L2NhbnZhcz4nKTtcclxuICAgIGNvbnN0IGN0eCA9IGpDWzBdLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gR3JhcGhVdGlscy5jb2xvcjJSZ2JhKGNvbG9yLCAxKTtcclxuICAgIGN0eC5yZWN0KDAsIDAsIDgsIDcpO1xyXG4gICAgY3R4LmZpbGwoKTtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5maWxsU3R5bGUgPSBHcmFwaFV0aWxzLmNvbG9yMlJnYmEoR3JhcGhVdGlscy5pbnZlcnNlQ29sb3IoY29sb3IsMC41KSwgMSk7XHJcbiAgICBjdHgucmVjdCgwLCA3LCA4LCAxKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgICByZXR1cm4gakNbMF07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcHJlcGFyZVByb3BzKHByb3BzKSB7XHJcbiAgICByZXR1cm4gQm9vay5jYWxjUHJvcHMoQm9vay5tZXJnZVByb3BzKGJvb2tQcm9wcygpLCBwcm9wcykpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIG1lcmdlUHJvcHMoZmlyc3QsIHNlY29uZCkge1xyXG4gICAgc2Vjb25kID0gc2Vjb25kIHx8IHt9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLi4uZmlyc3QsXHJcbiAgICAgIC4uLnNlY29uZCxcclxuICAgICAgc2hlZXQ6IHtcclxuICAgICAgICAuLi5maXJzdC5zaGVldCxcclxuICAgICAgICAuLi5zZWNvbmQuc2hlZXQsXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvdmVyOiB7XHJcbiAgICAgICAgLi4uZmlyc3QuY292ZXIsXHJcbiAgICAgICAgLi4uc2Vjb25kLmNvdmVyLFxyXG4gICAgICB9LFxyXG4gICAgICBwYWdlOiB7XHJcbiAgICAgICAgLi4uZmlyc3QucGFnZSxcclxuICAgICAgICAuLi5zZWNvbmQucGFnZSxcclxuICAgICAgfSxcclxuICAgICAgY3NzTGF5ZXJQcm9wczoge1xyXG4gICAgICAgIC4uLmZpcnN0LmNzc0xheWVyUHJvcHMsXHJcbiAgICAgICAgLi4uc2Vjb25kLmNzc0xheWVyUHJvcHMsXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY2FsY1Byb3BzKHByb3BzKSB7XHJcbiAgICBjb25zdCBwID0ge1xyXG4gICAgICAuLi5wcm9wcyxcclxuICAgICAgc2hlZXQ6IHtcclxuICAgICAgICAuLi5wcm9wcy5zaGVldFxyXG4gICAgICB9LFxyXG4gICAgICBjb3Zlcjoge1xyXG4gICAgICAgIC4uLnByb3BzLnNoZWV0LFxyXG4gICAgICAgIC4uLnByb3BzLmNvdmVyXHJcbiAgICAgIH0sXHJcbiAgICAgIHBhZ2U6IHtcclxuICAgICAgICAuLi5wcm9wcy5zaGVldCxcclxuICAgICAgICAuLi5wcm9wcy5wYWdlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNzc0xheWVyUHJvcHM6IHtcclxuICAgICAgICAuLi5wcm9wcy5jc3NMYXllclByb3BzLFxyXG4gICAgICAgICRcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNjYWxlID0gMTAsXHJcbiAgICBoZWlnaHQgPSBzY2FsZSpwLmhlaWdodCxcclxuICAgIHdpZHRoID0gc2NhbGUqcC53aWR0aCxcclxuICAgIGZsaXBQcm9ncmVzc0NsYiA9ICgpPT4gdW5kZWZpbmVkLFxyXG4gICAgc2hlZXQgPSB7XHJcbiAgICAgIHNpZGVUZXh0dXJlOiBwLnNoZWV0LnNpZGVUZXh0dXJlIHx8IEJvb2suY3JlYXRlU2lkZVRleHR1cmUocC5zaGVldC5jb2xvciksXHJcbiAgICB9LFxyXG4gICAgY292ZXIgPSB7XHJcbiAgICAgIC4uLnNoZWV0LFxyXG4gICAgICAuLi5wLmNvdmVyLFxyXG4gICAgICBkZXB0aDogc2NhbGUqcC5jb3Zlci5kZXB0aCxcclxuICAgICAgd2lkdGg6IHdpZHRoLFxyXG4gICAgICBoZWlnaHQ6IGhlaWdodCxcclxuICAgICAgcGFkZGluZzogc2NhbGUqcC5jb3Zlci5wYWRkaW5nXHJcbiAgICB9LFxyXG4gICAgcGFnZSA9IHtcclxuICAgICAgLi4uc2hlZXQsXHJcbiAgICAgIC4uLnAucGFnZSxcclxuICAgICAgZGVwdGg6IHNjYWxlKnAucGFnZS5kZXB0aCxcclxuICAgICAgd2lkdGg6IGNvdmVyLndpZHRoIC0gY292ZXIucGFkZGluZyxcclxuICAgICAgaGVpZ2h0OiBjb3Zlci5oZWlnaHQgLSAyKmNvdmVyLnBhZGRpbmdcclxuICAgIH0sXHJcbiAgICBtYXJrZXIgPSB7XHJcbiAgICAgIHVzZTogZmFsc2UsXHJcbiAgICAgIGNvbG9yOiAwWEZGMDAwMCxcclxuICAgICAgc2l6ZTogc2NhbGUqMC4wMDFcclxuICAgIH07XHJcbiAgICBpZihjb3Zlci5jb2xvciE9PXNoZWV0LmNvbG9yICYmICFwLmNvdmVyLnNpZGVUZXh0dXJlKSB7XHJcbiAgICAgIGNvdmVyLnNpZGVUZXh0dXJlID0gQm9vay5jcmVhdGVTaWRlVGV4dHVyZShjb3Zlci5jb2xvcik7XHJcbiAgICB9XHJcbiAgICBpZihwYWdlLmNvbG9yIT09c2hlZXQuY29sb3IgJiYgIXAucGFnZS5zaWRlVGV4dHVyZSkge1xyXG4gICAgICBwYWdlLnNpZGVUZXh0dXJlID0gQm9vay5jcmVhdGVTaWRlVGV4dHVyZShwYWdlLmNvbG9yKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7Li4ucCwgc2NhbGUsIGhlaWdodCwgd2lkdGgsIGZsaXBQcm9ncmVzc0NsYiwgY292ZXIsIHBhZ2UsIG1hcmtlcn07XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL0Jvb2suanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL0Jvb2suanMiLCJpbXBvcnQgeyQsIFRIUkVFfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAnQ29udHJvbGxlcic7XHJcbmltcG9ydCB7cHJvcHMgYXMgIGJvb2tDb250cm9sbGVyUHJvcHN9IGZyb20gJy4uL3Byb3BzL2Jvb2tDb250cm9sbGVyJztcclxuaW1wb3J0IEV2ZW50c1RvQWN0aW9ucyBmcm9tICdFdmVudHNUb0FjdGlvbnMnO1xyXG5pbXBvcnQgU3RhdHMgZnJvbSAnc3RhdHMuanMnO1xyXG5pbXBvcnQgT2JqZWN0M0RXYXRjaGVyIGZyb20gJ09iamVjdDNEV2F0Y2hlcic7XHJcbmltcG9ydCBGdWxsU2NyZWVuIGZyb20gJ0Z1bGxTY3JlZW4nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9va0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IoYm9vaywgdmlldywgcHJvcHMpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLm5hdmlnYXRpb25Db250cm9scyA9IHRydWU7XHJcbiAgICB0aGlzLmJvb2sgPSBib29rO1xyXG4gICAgdGhpcy52aXN1YWwgPSBib29rLnZpc3VhbDtcclxuICAgIHRoaXMucCA9IEJvb2tDb250cm9sbGVyLnByZXBhcmVQcm9wcyhwcm9wcyk7XHJcbiAgICB0aGlzLnAucnRsID0gYm9vay5wLnJ0bDtcclxuICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyA9IHRoaXMudmlzdWFsLnduZC5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XHJcblxyXG4gICAgdGhpcy5vcmJpdCA9IGJvb2sudmlzdWFsLmdldE9yYml0KCk7XHJcbiAgICBib29rLnNldEZsaXBQcm9ncmVzc0NsYih0aGlzLnVwZGF0ZVZpZXdJZlN0YXRlLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgIHRoaXMuYmluZEFjdGlvbnMoKTtcclxuXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBzbWFydFBhbjogIXRoaXMuYWN0aW9uc1snY21kU21hcnRQYW4nXS5hY3RpdmUsXHJcbiAgICAgIHNpbmdsZVBhZ2U6IHRoaXMuYWN0aW9uc1snY21kU2luZ2xlUGFnZSddLmFjdGl2ZSB8fCB0aGlzLmFjdGlvbnNbJ2NtZFNpbmdsZVBhZ2UnXS5hY3RpdmVGb3JNb2JpbGUgJiYgdGhpcy5kZXZpY2VQaXhlbFJhdGlvPjEsXHJcbiAgICAgIHN0YXRzOiB0aGlzLmFjdGlvbnNbJ2NtZFN0YXRzJ10uYWN0aXZlLFxyXG4gICAgICBsaWdodGluZzogdGhpcy5wLmxpZ2h0aW5nLmRlZmF1bHQsXHJcbiAgICAgIGFjdGl2ZVNpZGU6IDFcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5ib3hzID0gW25ldyBUSFJFRS5Cb3gzKCksIG5ldyBUSFJFRS5Cb3gzKCldO1xyXG4gICAgdGhpcy5ib29rV2F0Y2hlciA9IG5ldyBPYmplY3QzRFdhdGNoZXIodGhpcy52aXN1YWwsICgpPT4ge1xyXG4gICAgICBpZih0aGlzLnN0YXRlLnNpbmdsZVBhZ2UpIHtcclxuICAgICAgICBpZih0aGlzLnN0YXRlLmFjdGl2ZVNpZGUpIHtcclxuICAgICAgICAgIHRoaXMuYm94c1swXS5zZXRGcm9tT2JqZWN0KGJvb2sucmlnaHRDb3Zlci50aHJlZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5ib3hzWzBdLnNldEZyb21PYmplY3QoYm9vay5sZWZ0Q292ZXIudGhyZWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLmJveHNbMF0uc2V0RnJvbU9iamVjdChib29rLmxlZnRDb3Zlci50aHJlZSk7XHJcbiAgICAgICAgdGhpcy5ib3hzWzFdLnNldEZyb21PYmplY3QoYm9vay5yaWdodENvdmVyLnRocmVlKTtcclxuICAgICAgICB0aGlzLmJveHNbMF0udW5pb24odGhpcy5ib3hzWzFdKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5ib3hzWzBdO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmJvb2tXYXRjaGVyLnNjYWxlID0gdGhpcy5wLnNjYWxlLmRlZmF1bHQ7XHJcbiAgICB0aGlzLmJvb2suc2V0Wm9vbSh0aGlzLmJvb2tXYXRjaGVyLnNjYWxlLCB0aGlzLnN0YXRlLnNpbmdsZVBhZ2UpO1xyXG5cclxuICAgIHRoaXMuU3RhdHMgPSBuZXcgU3RhdHMoKTtcclxuICAgIHRoaXMuU3RhdHMuZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICB0aGlzLlN0YXRzLmRvbUVsZW1lbnQuc3R5bGUudG9wID0gJzBweCc7XHJcblxyXG4gICAgdGhpcy52aXN1YWwuc2V0RXh0cmFMaWdodGluZyh0aGlzLnN0YXRlLmxpZ2h0aW5nKTtcclxuICAgIHRoaXMuYmluZHMgPSB7XHJcbiAgICAgIG9uU2NyZWVuTW9kZUNoYW5nZWQ6IHRoaXMub25TY3JlZW5Nb2RlQ2hhbmdlZC5iaW5kKHRoaXMpLFxyXG4gICAgICBzdGF0czogdGhpcy5TdGF0cy51cGRhdGUuYmluZCh0aGlzLlN0YXRzKSxcclxuICAgICAgb25VcGRhdGVWaWV3OiB0aGlzLnVwZGF0ZVZpZXcuYmluZCh0aGlzKVxyXG4gICAgfVxyXG4gICAgRnVsbFNjcmVlbi5hZGRFdmVudExpc3RlbmVyKHRoaXMudmlldy5nZXRQYXJlbnRDb250YWluZXIoKS5vd25lckRvY3VtZW50LCB0aGlzLmJpbmRzLm9uU2NyZWVuTW9kZUNoYW5nZWQpO1xyXG5cclxuICAgIHRoaXMuY21kU21hcnRQYW4oKTtcclxuXHJcbiAgICBpZih0aGlzLnZpZXcudGVtcGxhdGVPYmplY3QuYXBwTG9hZGVkKSB7XHJcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4odGhpcy52aWV3LnRlbXBsYXRlT2JqZWN0LmFwcExvYWRlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ib29rLmVuYWJsZUxvYWRpbmdBbmltYXRpb24odGhpcy5wLmxvYWRpbmdBbmltYXRpb24uYm9vayk7XHJcbiAgICBpZih0aGlzLnAubG9hZGluZ0FuaW1hdGlvbi5za2luKSB7XHJcbiAgICAgIHRoaXMuaW5pdExvYWRpbmdBbmltYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJvb2suZW5hYmxlTG9hZGluZ0FuaW1hdGlvbih0aGlzLnAubG9hZGluZ0FuaW1hdGlvbi5ib29rKTtcclxuICAgIHRoaXMuYm9vay5zZXRBdXRvUmVzb2x1dGlvbih0aGlzLnAuYXV0b1Jlc29sdXRpb24uZW5hYmxlZCwgdGhpcy5wLmF1dG9SZXNvbHV0aW9uLmNvZWZmaWNpZW50KTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBGdWxsU2NyZWVuLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy52aWV3LmdldFBhcmVudENvbnRhaW5lcigpLm93bmVyRG9jdW1lbnQsIHRoaXMuYmluZHMub25TY3JlZW5Nb2RlQ2hhbmdlZCk7XHJcbiAgICBkZWxldGUgdGhpcy5ib29rO1xyXG4gICAgZGVsZXRlIHRoaXMudmlldztcclxuICAgIGRlbGV0ZSB0aGlzLnZpc3VhbDtcclxuICB9XHJcblxyXG4gIGluaXRMb2FkaW5nQW5pbWF0aW9uKCkge1xyXG4gICAgY29uc3QgaGFuZGxlciA9ICgpPT4ge1xyXG4gICAgICBjb25zdCBwYWdlcyA9IHRoaXMuYm9vay5nZXRUb3BQYWdlcygpO1xyXG4gICAgICBsZXQgdmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICBmb3IobGV0IG4gb2YgcGFnZXMpIHtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuYm9vay5nZXRQYWdlU3RhdGUobik7XHJcbiAgICAgICAgdmlzaWJsZSA9IHN0YXRlPT09dW5kZWZpbmVkIHx8IHN0YXRlPT09J2xvYWRpbmcnO1xyXG4gICAgICAgIGlmKHZpc2libGUpIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnZpZXcuc2V0U3RhdGUoJ3dpZExvYWRpbmcnLCB7XHJcbiAgICAgICAgdmlzaWJsZVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0aGlzLmJvb2suYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlQW5pbWF0aW9uJywgaGFuZGxlcik7XHJcbiAgICB0aGlzLmJvb2suYWRkRXZlbnRMaXN0ZW5lcignYWZ0ZXJBbmltYXRpb24nLCBoYW5kbGVyKTtcclxuICAgIHRoaXMuYm9vay5hZGRFdmVudExpc3RlbmVyKCdsb2FkUGFnZScsIGhhbmRsZXIpO1xyXG4gICAgdGhpcy5ib29rLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZFBhZ2UnLCBoYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZU5hdmlnYXRpb24oZW5hYmxlKSB7XHJcbiAgICB0aGlzLm5hdmlnYXRpb25Db250cm9scyA9IGVuYWJsZTtcclxuICB9XHJcblxyXG4gIHNldFRvY0N0cmwodG9jQ3RybCkge1xyXG4gICAgdGhpcy50b2NDdHJsID0gdG9jQ3RybDtcclxuICAgIHRoaXMudG9jQ3RybC5vbkNoYW5nZSA9IHRoaXMudXBkYXRlVmlldy5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgfVxyXG5cclxuICBzZXRQcmludGVyKHByaW50ZXIpIHtcclxuICAgIHRoaXMucHJpbnRlciA9IHByaW50ZXI7XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIHNldFNvdW5kcyhzb3VuZHMpIHtcclxuICAgIHRoaXMuc291bmRzID0gc291bmRzO1xyXG4gICAgc291bmRzLnNldEVuYWJsZWQodGhpcy5hY3Rpb25zWydjbWRTb3VuZHMnXS5hY3RpdmUpO1xyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgb25TY3JlZW5Nb2RlQ2hhbmdlZChlKSB7XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIGNhblpvb21JbigpIHtcclxuICAgIHJldHVybiAhdGhpcy5zdGF0ZS5zbWFydFBhbiB8fCBNYXRoLmFicyh0aGlzLmJvb2tXYXRjaGVyLnNjYWxlLXRoaXMucC5zY2FsZS5tYXgpPnRoaXMucC5lcHM7XHJcbiAgfVxyXG5cclxuICBjYW5ab29tT3V0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLnN0YXRlLnNtYXJ0UGFuIHx8IE1hdGguYWJzKHRoaXMuYm9va1dhdGNoZXIuc2NhbGUtdGhpcy5wLnNjYWxlLm1pbik+dGhpcy5wLmVwcztcclxuICB9XHJcblxyXG4gIGNhbkRlZmF1bHRab29tKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuc21hcnRQYW47XHJcbiAgfVxyXG5cclxuICBzZXRCb29rWm9vbShzY2FsZSkge1xyXG4gICAgc2V0VGltZW91dCgoKT0+IHtcclxuICAgICAgaWYodGhpcy5ib29rV2F0Y2hlci5zY2FsZT09PXNjYWxlKSB7XHJcbiAgICAgICAgdGhpcy5ib29rLnNldFpvb20oc2NhbGUsIHRoaXMuc3RhdGUuc2luZ2xlUGFnZSk7XHJcbiAgICAgIH1cclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgY21kWm9vbUluKCkge1xyXG4gICAgaWYodGhpcy5zdGF0ZS5zbWFydFBhbikge1xyXG4gICAgICB0aGlzLmJvb2tXYXRjaGVyLnNjYWxlID0gTWF0aC5taW4odGhpcy5wLnNjYWxlLm1heCwgdGhpcy5ib29rV2F0Y2hlci5zY2FsZSt0aGlzLnAuc2NhbGUuZGVsdGEpO1xyXG4gICAgICB0aGlzLnNldEJvb2tab29tKHRoaXMuYm9va1dhdGNoZXIuc2NhbGUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMub3JiaXQuem9vbUluKDYuNip0aGlzLnAuc2NhbGUuZGVsdGEvMC4zMik7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIGNtZFpvb21PdXQoKSB7XHJcbiAgICBpZih0aGlzLnN0YXRlLnNtYXJ0UGFuKSB7XHJcbiAgICAgIHRoaXMuYm9va1dhdGNoZXIuc2NhbGUgPSBNYXRoLm1heCh0aGlzLnAuc2NhbGUubWluLCB0aGlzLmJvb2tXYXRjaGVyLnNjYWxlLXRoaXMucC5zY2FsZS5kZWx0YSk7XHJcbiAgICAgIHRoaXMuc2V0Qm9va1pvb20odGhpcy5ib29rV2F0Y2hlci5zY2FsZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5vcmJpdC56b29tT3V0KDYuNip0aGlzLnAuc2NhbGUuZGVsdGEvMC4zMik7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIGNtZERlZmF1bHRab29tKCkge1xyXG4gICAgaWYodGhpcy5zdGF0ZS5zbWFydFBhbikge1xyXG4gICAgICB0aGlzLmJvb2tXYXRjaGVyLnNjYWxlID0gdGhpcy5wLnNjYWxlLmRlZmF1bHQ7XHJcbiAgICAgIHRoaXMuc2V0Qm9va1pvb20odGhpcy5ib29rV2F0Y2hlci5zY2FsZSk7XHJcbiAgICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY21kVG9jKCkge1xyXG4gICAgaWYodGhpcy50b2NDdHJsKSB7XHJcbiAgICAgIHRoaXMudG9jQ3RybC50b2dsZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY21kRmFzdEJhY2t3YXJkKCkge1xyXG4gICAgdGhpcy5zdGFydEZsaXAodGhpcy5ib29rLmZsaXBMZWZ0KDUpKTtcclxuICB9XHJcblxyXG4gIGNtZEJhY2t3YXJkKCkge1xyXG4gICAgaWYodGhpcy5zdGF0ZS5zaW5nbGVQYWdlKSB7XHJcbiAgICAgIHRoaXMuc3RhdGUuYWN0aXZlU2lkZSA9ICh0aGlzLmdldFBhZ2UoKSsxKSUyO1xyXG4gICAgICBpZih0aGlzLnN0YXRlLmFjdGl2ZVNpZGUpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLmFjdGl2ZVNpZGUgPSAwO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc3RhcnRGbGlwKHRoaXMuYm9vay5mbGlwTGVmdCgxKSkudGhlbigoYmxvY2spPT4ge1xyXG4gICAgICAgICAgaWYoYmxvY2spIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVTaWRlID0gMTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuc3RhcnRGbGlwKHRoaXMuYm9vay5mbGlwTGVmdCgxKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbWRGb3J3YXJkKCkge1xyXG4gICAgaWYodGhpcy5zdGF0ZS5zaW5nbGVQYWdlKSB7XHJcbiAgICAgIHRoaXMuc3RhdGUuYWN0aXZlU2lkZSA9ICh0aGlzLmdldFBhZ2UoKSsxKSUyO1xyXG4gICAgICBpZighdGhpcy5zdGF0ZS5hY3RpdmVTaWRlKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVTaWRlID0gMTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLnN0YXJ0RmxpcCh0aGlzLmJvb2suZmxpcFJpZ2h0KDEpKS50aGVuKChibG9jayk9PiB7XHJcbiAgICAgICAgICBpZihibG9jaykge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFjdGl2ZVNpZGUgPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5zdGFydEZsaXAodGhpcy5ib29rLmZsaXBSaWdodCgxKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbWRGYXN0Rm9yd2FyZCgpIHtcclxuICAgIHRoaXMuc3RhcnRGbGlwKHRoaXMuYm9vay5mbGlwUmlnaHQoNSkpO1xyXG4gIH1cclxuXHJcbiAgY21kU2F2ZSgpIHtcclxuICAgIHdpbmRvdy5vcGVuKHRoaXMucC5kb3dubG9hZFVSTCwgJ19ibGFuaycpO1xyXG4gIH1cclxuXHJcbiAgY21kUHJpbnQoKSB7XHJcbiAgICB0aGlzLnByaW50ZXIucHJpbnQoKTtcclxuICB9XHJcblxyXG4gIGNtZEZ1bGxTY3JlZW4oKSB7XHJcbiAgICBpZighRnVsbFNjcmVlbi5hY3RpdmF0ZWQoKSkge1xyXG4gICAgICBGdWxsU2NyZWVuLnJlcXVlc3QodGhpcy52aWV3LmdldFBhcmVudENvbnRhaW5lcigpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBGdWxsU2NyZWVuLmNhbmNlbCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY21kU21hcnRQYW4oKSB7XHJcbiAgICB0aGlzLnN0YXRlLnNtYXJ0UGFuID0gIXRoaXMuc3RhdGUuc21hcnRQYW47XHJcbiAgICBpZih0aGlzLnN0YXRlLnNtYXJ0UGFuKSB7XHJcbiAgICAgIHRoaXMub3JiaXQubWluQXppbXV0aEFuZ2xlID0gMDtcclxuICAgICAgdGhpcy5vcmJpdC5tYXhBemltdXRoQW5nbGUgPSAwO1xyXG4gICAgICB0aGlzLm9yYml0Lm1pblBvbGFyQW5nbGUgPSAwO1xyXG4gICAgXHR0aGlzLm9yYml0Lm1heFBvbGFyQW5nbGUgPSBNYXRoLlBJLzQ7XHJcbiAgICAgIHRoaXMuYm9va1dhdGNoZXIuZW5hYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5vcmJpdC5taW5BemltdXRoQW5nbGUgPSAtSW5maW5pdHk7XHJcbiAgICAgIHRoaXMub3JiaXQubWF4QXppbXV0aEFuZ2xlID0gSW5maW5pdHk7XHJcbiAgICAgIHRoaXMub3JiaXQubWluUG9sYXJBbmdsZSA9IDA7XHJcbiAgICBcdHRoaXMub3JiaXQubWF4UG9sYXJBbmdsZSA9IE1hdGguUEk7XHJcbiAgICAgIHRoaXMuYm9va1dhdGNoZXIuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgfVxyXG5cclxuICBjbWRTaW5nbGVQYWdlKCkge1xyXG4gICAgdGhpcy5zdGF0ZS5zaW5nbGVQYWdlID0gIXRoaXMuc3RhdGUuc2luZ2xlUGFnZTtcclxuICAgIHRoaXMuc2V0Qm9va1pvb20odGhpcy5ib29rV2F0Y2hlci5zY2FsZSk7XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIGNtZFNvdW5kcygpIHtcclxuICAgIGlmKHRoaXMuc291bmRzKSB7XHJcbiAgICAgIHRoaXMuc291bmRzLnRvZ2xlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIGNtZFN0YXRzKCkge1xyXG4gICAgdGhpcy5zdGF0ZS5zdGF0cyA9ICF0aGlzLnN0YXRlLnN0YXRzO1xyXG4gICAgaWYodGhpcy5zdGF0ZS5zdGF0cykge1xyXG4gICAgICAkKHRoaXMudmlldy5nZXRDb250YWluZXIoKSkuYXBwZW5kKHRoaXMuU3RhdHMuZG9tRWxlbWVudCk7XHJcbiAgICAgIHRoaXMudmlzdWFsLmFkZFJlbmRlckNhbGxiYWNrKHRoaXMuYmluZHMuc3RhdHMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICQodGhpcy52aWV3LmdldENvbnRhaW5lcigpKS5maW5kKHRoaXMuU3RhdHMuZG9tRWxlbWVudCkucmVtb3ZlKCk7XHJcbiAgICAgIHRoaXMudmlzdWFsLnJlbW92ZVJlbmRlckNhbGxiYWNrKHRoaXMuYmluZHMuc3RhdHMpO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgfVxyXG5cclxuICBjbWRMaWdodGluZ1VwKCkge1xyXG4gICAgdGhpcy5zdGF0ZS5saWdodGluZyA9IE1hdGgubWluKHRoaXMuc3RhdGUubGlnaHRpbmcrdGhpcy5wLmxpZ2h0aW5nLmRlbHRhLCB0aGlzLnAubGlnaHRpbmcubWF4KTtcclxuICAgIHRoaXMudmlzdWFsLnNldEV4dHJhTGlnaHRpbmcodGhpcy5zdGF0ZS5saWdodGluZyk7XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIGNtZExpZ2h0aW5nRG93bigpIHtcclxuICAgIHRoaXMuc3RhdGUubGlnaHRpbmcgPSBNYXRoLm1heCh0aGlzLnN0YXRlLmxpZ2h0aW5nLXRoaXMucC5saWdodGluZy5kZWx0YSwgdGhpcy5wLmxpZ2h0aW5nLm1pbik7XHJcbiAgICB0aGlzLnZpc3VhbC5zZXRFeHRyYUxpZ2h0aW5nKHRoaXMuc3RhdGUubGlnaHRpbmcpO1xyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgfVxyXG5cclxuICBnb1RvUGFnZShwYWdlKSB7XHJcbiAgICBpZih0aGlzLnAucnRsKSB7XHJcbiAgICAgIHBhZ2UgPSB0aGlzLmJvb2suZ2V0UGFnZXMoKS0xLXBhZ2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYWdlTnVtID0gTWF0aC5tYXgoTWF0aC5taW4ocGFnZSwgdGhpcy5ib29rLmdldFBhZ2VzKCktMSksMCk7XHJcbiAgICB0aGlzLnN0YXRlLmFjdGl2ZVNpZGUgPSAocGFnZU51bSsxKSUyO1xyXG4gICAgbGV0IHRhcmdldCA9IE1hdGgubWF4KE1hdGgubWluKHBhZ2UtMStwYWdlJTIsIHRoaXMuYm9vay5nZXRQYWdlcygpLTEpLDApLCBjdXJyZW50ID0gdGhpcy5ib29rLmdldFBhZ2UoKSwgZmxpcHMgPSBbXSwgY292cyA9IDA7O1xyXG4gICAgaWYodGFyZ2V0IT1jdXJyZW50KSB7XHJcbiAgICAgIGlmKGN1cnJlbnQ9PT0wKSB7XHJcbiAgICAgICAgZmxpcHMucHVzaCgxKTtcclxuICAgICAgICBjdXJyZW50Kz0xO1xyXG4gICAgICAgICsrY292cztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGN1cnJlbnQ9PT10aGlzLmJvb2suZ2V0UGFnZXMoKS0xKSB7XHJcbiAgICAgICAgZmxpcHMucHVzaCgtMSk7XHJcbiAgICAgICAgY3VycmVudC09MjtcclxuICAgICAgICArK2NvdnM7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGN2ID0gMDtcclxuICAgICAgaWYodGFyZ2V0PT09MCkge1xyXG4gICAgICAgIGN2ID0gLTE7XHJcbiAgICAgICAgdGFyZ2V0Kz0xO1xyXG4gICAgICAgICsrY292cztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKHRhcmdldD09PXRoaXMuYm9vay5nZXRQYWdlcygpLTEpIHtcclxuICAgICAgICBjdiA9IDE7XHJcbiAgICAgICAgdGFyZ2V0LT0yO1xyXG4gICAgICAgICsrY292cztcclxuICAgICAgfVxyXG4gICAgICBpZih0YXJnZXQtY3VycmVudCkge1xyXG4gICAgICAgIGZsaXBzLnB1c2goTWF0aC5jZWlsKCh0YXJnZXQtY3VycmVudCkvMikpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKGN2KSB7XHJcbiAgICAgICAgZmxpcHMucHVzaChjdik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZXRDbGIgPSAoZmwsIHRpbWUsIGNsYik9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCk9PiB7XHJcbiAgICAgICAgaWYoZmw8MCkge1xyXG4gICAgICAgICAgdGhpcy5zdGFydEZsaXAodGhpcy5ib29rLmZsaXBMZWZ0KC1mbCwgY2xiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zdGFydEZsaXAodGhpcy5ib29rLmZsaXBSaWdodChmbCwgY2xiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCB0aW1lKTtcclxuICAgIH07XHJcblxyXG4gICAgaWYoY292cz09PTIpIHtcclxuICAgICAgc2V0Q2xiKGZsaXBzWzBdLCAwLCAoYmxvY2ssIHByb2dyZXNzLCBzdGF0ZSk9PiB7XHJcbiAgICAgICAgaWYoc3RhdGU9PSdmaW5pc2gnICYmIHByb2dyZXNzPT0xKSB7XHJcbiAgICAgICAgICBzZXRDbGIoZmxpcHNbZmxpcHMubGVuZ3RoLTFdLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBzZXRDbGIoZmxpcHNbMV0sIDUwMCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgbGV0IHRpbWUgPSAwO1xyXG4gICAgICBmb3IobGV0IGZsIG9mIGZsaXBzKSB7XHJcbiAgICAgICAgc2V0Q2xiKGZsLCB0aW1lKTtcclxuICAgICAgICB0aW1lKz0yNTA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXJ0RmxpcChmbGlwUmVzKSB7XHJcbiAgICByZXR1cm4gZmxpcFJlcz8gZmxpcFJlcy50aGVuKChibG9jayk9PiB7XHJcbiAgICAgIGlmKGJsb2NrKSB7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEFzeW5jKHtcclxuICAgICAgICAgIHR5cGU6ICdzdGFydEZsaXAnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGJsb2NrO1xyXG4gICAgfSk6IFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xyXG4gIH1cclxuXHJcbiAgZW5kRmxpcChibG9jaykge1xyXG4gICAgdGhpcy5kaXNwYXRjaEFzeW5jKHtcclxuICAgICAgdHlwZTogJ2VuZEZsaXAnXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBibG9jaztcclxuICB9XHJcblxyXG4gIGdldFBhZ2UoKSB7XHJcbiAgICBjb25zdCBwYWdlID0gdGhpcy5ib29rLmdldFBhZ2UoKTtcclxuICAgIHJldHVybiBwYWdlPyBNYXRoLm1pbih0aGlzLmJvb2suZ2V0UGFnZSgpK3RoaXMuc3RhdGUuYWN0aXZlU2lkZSwgdGhpcy5ib29rLmdldFBhZ2VzKCktMSk6IDA7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlRm9yR1VJKCkge1xyXG4gICAgbGV0IG4gPSAodGhpcy5zdGF0ZS5zaW5nbGVQYWdlPyB0aGlzLmdldFBhZ2UoKTogdGhpcy5ib29rLmdldFBhZ2UoKSkrMTtcclxuICAgIGlmKHRoaXMucC5ydGwpIHtcclxuICAgICAgbiA9IHRoaXMuYm9vay5nZXRQYWdlcygpLW4rMTtcclxuICAgIH1cclxuICAgIHJldHVybiBuO1xyXG4gIH1cclxuXHJcbiAgaW5wUGFnZShlLCBkYXRhKSB7XHJcbiAgICB0aGlzLmdvVG9QYWdlKGRhdGEtMSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVWaWV3SWZTdGF0ZShibG9jaywgcHJvZ3Jlc3MsIHN0YXRlLCB0eXBlKSB7XHJcbiAgICBpZihzdGF0ZT09PSdpbml0JyB8fCBzdGF0ZT09PSdmaW5pc2gnKSB7XHJcbiAgICAgIHNldFRpbWVvdXQodGhpcy51cGRhdGVWaWV3LmJpbmQodGhpcyksIDEwMCk7XHJcbiAgICB9XHJcbiAgICBpZihzdGF0ZT09PSdmaW5pc2gnKSB7XHJcbiAgICAgIHRoaXMuZW5kRmxpcChibG9jayk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVWaWV3U3RhdGUoKSB7XHJcbiAgICB0aGlzLnZpZXdTdGF0ZSA9IHtcclxuICAgICAgJ2NtZFpvb21Jbic6IHtcclxuICAgICAgICBlbmFibGU6IHRoaXMuY2FuWm9vbUluKCksXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWRab29tSW4nXS5lbmFibGVkLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgJ2NtZFpvb21PdXQnOiB7XHJcbiAgICAgICAgZW5hYmxlOiB0aGlzLmNhblpvb21PdXQoKSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLmFjdGlvbnNbJ2NtZFpvb21PdXQnXS5lbmFibGVkLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgJ2NtZERlZmF1bHRab29tJzoge1xyXG4gICAgICAgIGVuYWJsZTogdGhpcy5jYW5EZWZhdWx0Wm9vbSgpLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMuYWN0aW9uc1snY21kRGVmYXVsdFpvb20nXS5lbmFibGVkLFxyXG4gICAgICAgIGFjdGl2ZTogdGhpcy5jYW5EZWZhdWx0Wm9vbSgpICYmIE1hdGguYWJzKHRoaXMuYm9va1dhdGNoZXIuc2NhbGUtdGhpcy5wLnNjYWxlLmRlZmF1bHQpPHRoaXMucC5lcHNcclxuICAgICAgfSxcclxuICAgICAgJ2NtZFRvYyc6IHtcclxuICAgICAgICBlbmFibGU6ICEhdGhpcy50b2NDdHJsLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMuYWN0aW9uc1snY21kVG9jJ10uZW5hYmxlZCAmJiB0aGlzLnRvY0N0cmwsXHJcbiAgICAgICAgYWN0aXZlOiB0aGlzLnRvY0N0cmwgJiYgdGhpcy50b2NDdHJsLnZpc2libGVcclxuICAgICAgfSxcclxuICAgICAgJ2lucFBhZ2VzJzoge1xyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgdmFsdWU6IHRoaXMuYm9vay5nZXRQYWdlcygpXHJcbiAgICAgIH0sXHJcbiAgICAgICdpbnBQYWdlJzoge1xyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgZW5hYmxlOiAhdGhpcy5ib29rLmlzUHJvY2Vzc2luZygpICYmIHRoaXMubmF2aWdhdGlvbkNvbnRyb2xzLFxyXG4gICAgICAgIHZhbHVlOiB0aGlzLmdldFBhZ2VGb3JHVUkoKVxyXG4gICAgICB9LFxyXG4gICAgICAnY21kU2F2ZSc6IHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWRTYXZlJ10uZW5hYmxlZCAmJiAhIXRoaXMucC5kb3dubG9hZFVSTCxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgICdjbWRQcmludCc6IHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWRQcmludCddLmVuYWJsZWQgJiYgISF0aGlzLnByaW50ZXIsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICAnY21kRnVsbFNjcmVlbic6IHtcclxuICAgICAgICBlbmFibGU6IEZ1bGxTY3JlZW4uYXZhaWxhYmxlKCksXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWRGdWxsU2NyZWVuJ10uZW5hYmxlZCxcclxuICAgICAgICBhY3RpdmU6IEZ1bGxTY3JlZW4uYXZhaWxhYmxlKCkgJiYgRnVsbFNjcmVlbi5hY3RpdmF0ZWQoKVxyXG4gICAgICB9LFxyXG4gICAgICAnd2lkU2V0dGluZ3MnOiB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMuYWN0aW9uc1snd2lkU2V0dGluZ3MnXS5lbmFibGVkLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgJ2NtZFNtYXJ0UGFuJzoge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLmFjdGlvbnNbJ2NtZFNtYXJ0UGFuJ10uZW5hYmxlZCxcclxuICAgICAgICBhY3RpdmU6IHRoaXMuc3RhdGUuc21hcnRQYW5cclxuICAgICAgfSxcclxuICAgICAgJ2NtZFNpbmdsZVBhZ2UnOiB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMuYWN0aW9uc1snY21kU2luZ2xlUGFnZSddLmVuYWJsZWQsXHJcbiAgICAgICAgYWN0aXZlOiB0aGlzLnN0YXRlLnNpbmdsZVBhZ2VcclxuICAgICAgfSxcclxuICAgICAgJ2NtZFNvdW5kcyc6IHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogIHRoaXMuYWN0aW9uc1snY21kU291bmRzJ10uZW5hYmxlZCAmJiAhIXRoaXMuc291bmRzLFxyXG4gICAgICAgIGFjdGl2ZTogISF0aGlzLnNvdW5kcyAmJiB0aGlzLnNvdW5kcy5lbmFibGVkXHJcbiAgICAgIH0sXHJcbiAgICAgICdjbWRTdGF0cyc6IHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWRTdGF0cyddLmVuYWJsZWQsXHJcbiAgICAgICAgYWN0aXZlOiB0aGlzLnN0YXRlLnN0YXRzXHJcbiAgICAgIH0sXHJcbiAgICAgICdjbWRMaWdodGluZ1VwJzoge1xyXG4gICAgICAgIGVuYWJsZTogTWF0aC5hYnModGhpcy5zdGF0ZS5saWdodGluZy10aGlzLnAubGlnaHRpbmcubWF4KT50aGlzLnAuZXBzLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMuYWN0aW9uc1snY21kTGlnaHRpbmdVcCddLmVuYWJsZWQsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICAnY21kTGlnaHRpbmdEb3duJzoge1xyXG4gICAgICAgIGVuYWJsZTogTWF0aC5hYnModGhpcy5zdGF0ZS5saWdodGluZy10aGlzLnAubGlnaHRpbmcubWluKT50aGlzLnAuZXBzLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMuYWN0aW9uc1snY21kTGlnaHRpbmdEb3duJ10uZW5hYmxlZCxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgbGVmdCA9IHRoaXMuYm9vay5nZXRMZWZ0RmxpcHBpbmcoKSxcclxuICAgICAgICAgIHJpZ2h0ID0gdGhpcy5ib29rLmdldFJpZ2h0RmxpcHBpbmcoKTtcclxuICAgIGNvbnN0IGZsaXBwZXJzRW5hYmxlID0ge1xyXG4gICAgICBjbWRGYXN0QmFja3dhcmQ6ICEhbGVmdCAmJiB0aGlzLm5hdmlnYXRpb25Db250cm9scyxcclxuICAgICAgY21kQmFja3dhcmQ6ICEhbGVmdCAmJiB0aGlzLm5hdmlnYXRpb25Db250cm9scyxcclxuICAgICAgY21kRm9yd2FyZDogISFyaWdodCAmJiB0aGlzLm5hdmlnYXRpb25Db250cm9scyxcclxuICAgICAgY21kRmFzdEZvcndhcmQ6ICEhcmlnaHQgJiYgdGhpcy5uYXZpZ2F0aW9uQ29udHJvbHNcclxuICAgIH07XHJcbiAgICBmb3IobGV0IG5hbWUgb2YgT2JqZWN0LmtleXMoZmxpcHBlcnNFbmFibGUpKSB7XHJcbiAgICAgIHRoaXMudmlld1N0YXRlW25hbWVdID0ge1xyXG4gICAgICAgIGVuYWJsZTogZmxpcHBlcnNFbmFibGVbbmFtZV0sXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zW25hbWVdLmVuYWJsZWQsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVZpZXcoKSB7XHJcbiAgICBpZih0aGlzLnZpZXcpIHtcclxuICAgICAgdGhpcy51cGRhdGVWaWV3U3RhdGUoKTtcclxuICAgICAgZm9yKGxldCBuYW1lIG9mIE9iamVjdC5rZXlzKHRoaXMudmlld1N0YXRlKSkge1xyXG4gICAgICAgIHRoaXMudmlldy5zZXRTdGF0ZShuYW1lLCB0aGlzLnZpZXdTdGF0ZVtuYW1lXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEFjdGlvbnMoKSB7XHJcbiAgICBjb25zdCBpc1N3aXBwaW5nID0gKG5hbWUpPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5hY3Rpb25zLnRvdWNoQ21kU3dpcGUuZW5hYmxlZCAmJiB0aGlzLmFjdGlvbnMudG91Y2hDbWRTd2lwZS5jb2RlPT09dGhpcy5hY3Rpb25zW25hbWVdLmNvZGUgJiYgdGhpcy5zdGF0ZS5zbWFydFBhbiAmJiB0aGlzLmJvb2tXYXRjaGVyLnNjYWxlPD0xO1xyXG4gICAgfSwgY21kcyA9IHt9O1xyXG5cclxuICAgIGZvcihsZXQgbmFtZSBpbiB0aGlzKSB7XHJcbiAgICAgIGlmKG5hbWUuaW5kZXhPZignY21kJyk9PT0wKSB7XHJcbiAgICAgICAgY21kc1tuYW1lXSA9IHtcclxuICAgICAgICAgIGFjdGl2YXRlOiAoLi4uYXJncyk9PiB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMudmlld1N0YXRlICYmIHRoaXMudmlld1N0YXRlW25hbWVdLmVuYWJsZSkge1xyXG4gICAgICAgICAgICAgIHRoaXNbbmFtZV0oLi4uYXJncyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLi4uY21kcyxcclxuICAgICAgY21kUGFuTGVmdDoge1xyXG4gICAgICAgIGFjdGl2YXRlOiAoZSk9PiB0aGlzLm9yYml0LmFjdGlvbnMucGFuKGUsIHtcclxuICAgICAgICAgIHN0YXRlOiAnbW92ZScsXHJcbiAgICAgICAgICBkeDogLXRoaXMucC5wYW4uc3BlZWQsXHJcbiAgICAgICAgICBkeTogMFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFBhblJpZ2h0OiB7XHJcbiAgICAgICAgYWN0aXZhdGU6IChlKT0+IHRoaXMub3JiaXQuYWN0aW9ucy5wYW4oZSwge1xyXG4gICAgICAgICAgc3RhdGU6ICdtb3ZlJyxcclxuICAgICAgICAgIGR4OiB0aGlzLnAucGFuLnNwZWVkLFxyXG4gICAgICAgICAgZHk6IDBcclxuICAgICAgICB9KVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRQYW5VcDoge1xyXG4gICAgICAgIGFjdGl2YXRlOiAoZSk9PiB0aGlzLm9yYml0LmFjdGlvbnMucGFuKGUsIHtcclxuICAgICAgICAgIHN0YXRlOiAnbW92ZScsXHJcbiAgICAgICAgICBkeDogMCxcclxuICAgICAgICAgIGR5OiAtdGhpcy5wLnBhbi5zcGVlZFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFBhbkRvd246IHtcclxuICAgICAgICBhY3RpdmF0ZTogKGUpPT4gdGhpcy5vcmJpdC5hY3Rpb25zLnBhbihlLCB7XHJcbiAgICAgICAgICBzdGF0ZTogJ21vdmUnLFxyXG4gICAgICAgICAgZHg6IDAsXHJcbiAgICAgICAgICBkeTogdGhpcy5wLnBhbi5zcGVlZFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0sXHJcbiAgICAgIG1vdXNlQ21kUm90YXRlOiB7XHJcbiAgICAgICAgYWN0aXZhdGU6IHRoaXMub3JiaXQuYWN0aW9ucy5yb3RhdGVcclxuICAgICAgfSxcclxuICAgICAgbW91c2VDbWREcmFnWm9vbToge1xyXG4gICAgICAgIGFjdGl2YXRlOiAoZSwgZGF0YSk9PiB7XHJcbiAgICAgICAgICBpZihkYXRhLmR5PjApIHtcclxuICAgICAgICAgICAgdGhpcy5jbWRab29tT3V0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmKGRhdGEuZHk8MCkge1xyXG4gICAgICAgICAgICB0aGlzLmNtZFpvb21JbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgbW91c2VDbWRQYW46IHtcclxuICAgICAgICBhY3RpdmF0ZTogdGhpcy5vcmJpdC5hY3Rpb25zLnBhblxyXG4gICAgICB9LFxyXG4gICAgICBtb3VzZUNtZFdoZWVsWm9vbToge1xyXG4gICAgICAgIGFjdGl2YXRlOiAoZSk9PiB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBpZihlLmRlbHRhWTwwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY21kWm9vbU91dCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZihlLmRlbHRhWT4wKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY21kWm9vbUluKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0b3VjaENtZFJvdGF0ZToge1xyXG4gICAgICAgIGFjdGl2YXRlOiAoZSwgZGF0YSk9PiB7XHJcbiAgICAgICAgICBpZighaXNTd2lwcGluZygndG91Y2hDbWRSb3RhdGUnKSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMub3JiaXQuYWN0aW9ucy5yb3RhdGUoZSwgZGF0YSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0b3VjaENtZFpvb206IHtcclxuICAgICAgICBhY3RpdmF0ZTogKGUsIGRhdGEpPT4ge1xyXG4gICAgICAgICAgaWYoIWlzU3dpcHBpbmcoJ3RvdWNoQ21kWm9vbScpKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYoZGF0YS5keT4wKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jbWRab29tT3V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihkYXRhLmR5PDApIHtcclxuICAgICAgICAgICAgICB0aGlzLmNtZFpvb21JbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0b3VjaENtZFBhbjoge1xyXG4gICAgICAgIGFjdGl2YXRlOiAoZSwgZGF0YSk9PiB7XHJcbiAgICAgICAgICBpZighaXNTd2lwcGluZygndG91Y2hDbWRQYW4nKSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMub3JiaXQuYWN0aW9ucy5wYW4oZSwgZGF0YSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0b3VjaENtZFN3aXBlOiB7XHJcbiAgICAgICAgYWN0aXZhdGU6IChlLCBkYXRhKT0+IHtcclxuICAgICAgICAgIGlmKGlzU3dpcHBpbmcoJ3RvdWNoQ21kU3dpcGUnKSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuc3RhdGU9PT0nc3RhcnQnKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdG91Y2ggPSAoZS50b3VjaGVzIHx8IGUub3JpZ2luYWxFdmVudC50b3VjaGVzKVt0aGlzLmFjdGlvbnMudG91Y2hDbWRTd2lwZS5jb2RlLTFdO1xyXG4gICAgICAgICAgICAgIHRoaXMuc3dpcGVEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB4MDogdG91Y2gucGFnZVgsXHJcbiAgICAgICAgICAgICAgICB5MDogdG91Y2gucGFnZVksXHJcbiAgICAgICAgICAgICAgICB4OiB0b3VjaC5wYWdlWCxcclxuICAgICAgICAgICAgICAgIHk6IHRvdWNoLnBhZ2VZXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGRhdGEuc3RhdGU9PT0nbW92ZScpIHtcclxuICAgICAgICAgICAgICBpZighdGhpcy5zd2lwZURhdGEuaGFuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2lwZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgIC4uLnRoaXMuc3dpcGVEYXRhLFxyXG4gICAgICAgICAgICAgICAgICB4OiB0aGlzLnN3aXBlRGF0YS54K2RhdGEuZHgsXHJcbiAgICAgICAgICAgICAgICAgIHk6IHRoaXMuc3dpcGVEYXRhLnkrZGF0YS5keVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoTWF0aC5hYnModGhpcy5zd2lwZURhdGEueDAtdGhpcy5zd2lwZURhdGEueCk+MTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc3dpcGVEYXRhLngwPnRoaXMuc3dpcGVEYXRhLng/IHRoaXMuY21kRm9yd2FyZCgpOiB0aGlzLmNtZEJhY2t3YXJkKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc3dpcGVEYXRhLmhhbmRsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBkZWxldGUgdGhpcy5zd2lwZURhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHdpZFNldHRpbmdzOiB7XHJcbiAgICAgICAgYWN0aXZhdGU6ICgpPT4gdW5kZWZpbmVkXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBiaW5kQWN0aW9ucygpIHtcclxuICAgIHRoaXMuZVRvQSA9IG5ldyBFdmVudHNUb0FjdGlvbnMoJCh0aGlzLnZpc3VhbC5lbGVtZW50KSk7XHJcbiAgICB0aGlzLmVUb0EuYWRkQWN0aW9uKChlKT0+IGUucHJldmVudERlZmF1bHQoKSwgJ2NvbnRleHRtZW51JywgRXZlbnRzVG9BY3Rpb25zLm1vdXNlQnV0dG9ucy5SaWdodCwgMCk7XHJcblxyXG4gICAgdGhpcy5hY3Rpb25zID0gdGhpcy5nZXRBY3Rpb25zKCk7XHJcbiAgICBmb3IobGV0IG5hbWUgb2YgT2JqZWN0LmtleXModGhpcy5hY3Rpb25zKSkge1xyXG4gICAgICBjb25zdCBhY3Rpb24gPSB7XHJcbiAgICAgICAgLi4udGhpcy5hY3Rpb25zW25hbWVdLFxyXG4gICAgICAgIC4uLnRoaXMucC5hY3Rpb25zW25hbWVdXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuYWN0aW9uc1tuYW1lXSA9IGFjdGlvbjtcclxuICAgICAgaWYoYWN0aW9uLmVuYWJsZWQpIHtcclxuICAgICAgICBjb25zdCBmbGFncyA9IGFjdGlvbi5mbGFncyB8fCAwO1xyXG4gICAgICAgIGlmKGFjdGlvbi50eXBlKSB7XHJcbiAgICAgICAgICB0aGlzLmVUb0EuYWRkQWN0aW9uKGFjdGlvbi5hY3RpdmF0ZSwgYWN0aW9uLnR5cGUsIGFjdGlvbi5jb2RlLCBmbGFncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYWN0aW9uLmNvZGUhPT11bmRlZmluZWQpIHtcclxuICAgICAgICAgIHRoaXMuZVRvQS5hZGRBY3Rpb24oYWN0aW9uLmFjdGl2YXRlLCAna2V5ZG93bicsIGFjdGlvbi5jb2RlLCBmbGFncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcHJlcGFyZVByb3BzKHByb3BzKSB7XHJcbiAgICByZXR1cm4gQm9va0NvbnRyb2xsZXIuY2FsY1Byb3BzKEJvb2tDb250cm9sbGVyLm1lcmdlUHJvcHMoYm9va0NvbnRyb2xsZXJQcm9wcygpLCBwcm9wcykpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldEFjdGlvbnMocHJvcHMsIGFjdGlvbnMpIHtcclxuICAgIGZvcihsZXQgbmFtZSBvZiBPYmplY3Qua2V5cyhhY3Rpb25zIHx8IHt9KSkge1xyXG4gICAgICBwcm9wcy5hY3Rpb25zW25hbWVdID0ge1xyXG4gICAgICAgIC4uLnByb3BzLmFjdGlvbnNbbmFtZV0sXHJcbiAgICAgICAgLi4uYWN0aW9uc1tuYW1lXVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIG1lcmdlUHJvcHMoZmlyc3QsIHNlY29uZCkge1xyXG4gICAgc2Vjb25kID0gc2Vjb25kIHx8IHt9O1xyXG4gICAgZnVuY3Rpb24gbWVyZ2UoZmlyc3QsIHNlY29uZCkge1xyXG4gICAgICBzZWNvbmQgPSBzZWNvbmQgfHwge307XHJcbiAgICAgIGNvbnN0IHByb3BzID0ge1xyXG4gICAgICAgIC4uLmZpcnN0LFxyXG4gICAgICAgIC4uLnNlY29uZFxyXG4gICAgICB9O1xyXG4gICAgICBmb3IobGV0IG5hbWUgb2YgT2JqZWN0LmtleXMoZmlyc3QpKSB7XHJcbiAgICAgICAgaWYodHlwZW9mIGZpcnN0W25hbWVdPT09J29iamVjdCcpIHtcclxuICAgICAgICAgIHByb3BzW25hbWVdID0gbWVyZ2UoZmlyc3RbbmFtZV0sIHNlY29uZFtuYW1lXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBwcm9wcztcclxuICAgIH1cclxuICAgIGNvbnN0IHByb3BzID0gbWVyZ2UoZmlyc3QsIHNlY29uZCk7XHJcbiAgICBCb29rQ29udHJvbGxlci5zZXRBY3Rpb25zKHByb3BzLCBmaXJzdC5hY3Rpb25zKTtcclxuICAgIEJvb2tDb250cm9sbGVyLnNldEFjdGlvbnMocHJvcHMsIHNlY29uZC5hY3Rpb25zKTtcclxuICAgIHJldHVybiBwcm9wcztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjYWxjUHJvcHMocHJvcHMpIHtcclxuICAgIHByb3BzLnNjYWxlLmRlbHRhID0gKHByb3BzLnNjYWxlLm1heC1wcm9wcy5zY2FsZS5taW4pL3Byb3BzLnNjYWxlLmxldmVscztcclxuICAgIHByb3BzLmxpZ2h0aW5nLmRlbHRhID0gKHByb3BzLmxpZ2h0aW5nLm1heC1wcm9wcy5saWdodGluZy5taW4pL3Byb3BzLmxpZ2h0aW5nLmxldmVscztcclxuICAgIHJldHVybiBwcm9wcztcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQm9va0NvbnRyb2xsZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL0Jvb2tDb250cm9sbGVyLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvb2tQcmludGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dCwgYm9vaywgc3R5bGVTaGVldCkge1xyXG4gICAgdGhpcy5ib29rID0gYm9vaztcclxuICAgIHRoaXMuc3R5bGVTaGVldCA9IHN0eWxlU2hlZXQ7XHJcbiAgICB0aGlzLnduZCA9IGNvbnRleHQud25kO1xyXG4gICAgdGhpcy5kb2MgPSBjb250ZXh0LmRvYztcclxuICAgIHRoaXMucGFnZUNhbGxiYWNrID0gYm9vay5nZXRQYWdlQ2FsbGJhY2soKTtcclxuICAgIGNvbnN0IHRlc3QgPSB0aGlzLnBhZ2VDYWxsYmFjaygwKTtcclxuICAgIHRoaXMudHlwZSA9IHRlc3QudHlwZTtcclxuICAgIGlmKHRoaXMudHlwZT09PSdwZGYnKSB7XHJcbiAgICAgIHRoaXMucGRmU3JjID0gdGVzdC5zcmMuc3JjO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2FuY2VsKCkge1xyXG4gICAgdGhpcy5jYW5jZWxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgaWYodGhpcy5mcmFtZSkge1xyXG4gICAgICB0aGlzLmZyYW1lLnJlbW92ZSgpO1xyXG4gICAgICBkZWxldGUgdGhpcy5mcmFtZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaW50KCkge1xyXG4gICAgZGVsZXRlIHRoaXMuY2FuY2VsZWQ7XHJcbiAgICBpZih0aGlzLnR5cGU9PT0ncGRmJykge1xyXG4gICAgICBsZXQgcHJpbnRXbmQsIGNhbGxNYW51YWxseSA9IGZhbHNlO1xyXG4gICAgICBpZih0aGlzLnVzZUlGcmFtZSgpKSB7XHJcbiAgICAgICAgY2FsbE1hbnVhbGx5ID0gISF0aGlzLmZyYW1lO1xyXG4gICAgICAgIGlmKCF0aGlzLmZyYW1lKSB7XHJcbiAgICAgICAgICB0aGlzLmZyYW1lID0gJCgnPGlmcmFtZSBzcmM9XCInK3RoaXMucGRmU3JjKydcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+PC9pZnJhbWU+JykuYXBwZW5kVG8odGhpcy5kb2MuYm9keSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByaW50V25kID0gdGhpcy5mcmFtZVswXS5jb250ZW50V2luZG93O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHByaW50V25kID0gdGhpcy53bmQub3Blbih0aGlzLnBkZlNyYyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYoY2FsbE1hbnVhbGx5KSB7XHJcbiAgICAgICAgcHJpbnRXbmQucHJpbnQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAkKHByaW50V25kKS5vbignbG9hZCcsICgpPT4ge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcHJpbnRXbmQucHJpbnQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMucmVuZGVyQ29udGVudCgpLlxyXG4gICAgICAgIHRoZW4oKGNvbnRlbnQpPT4ge1xyXG4gICAgICAgICAgY29uc3QgcHJpbnRXbmQgPSB0aGlzLnduZC5vcGVuKCksXHJcbiAgICAgICAgICBwcmludERvYyA9IHByaW50V25kLmRvY3VtZW50LFxyXG4gICAgICAgICAgaHRtbCA9IGBcclxuICAgICAgICAgICAgPCFET0NUWVBFIGh0bWw+XHJcbiAgICAgICAgICAgIDxodG1sPlxyXG4gICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XHJcbiAgICAgICAgICAgICAgICA8dGl0bGU+M0QgRmxpcEJvb2sgLSBQcmludGluZzwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAke2NvbnRlbnQuaGVhZH1cclxuICAgICAgICAgICAgICAgIDxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiPlxyXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcmludERvY3VtZW50KCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChwcmludERvY3VtZW50LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgPGJvZHkgb25sb2FkPVwiaW5pdCgpXCI+XHJcbiAgICAgICAgICAgICAgICAke2NvbnRlbnQuYm9keX1cclxuICAgICAgICAgICAgICA8L2JvZHk+XHJcbiAgICAgICAgICAgIDwvaHRtbD5cclxuICAgICAgICAgIGA7XHJcbiAgICAgICAgICBwcmludERvYy5vcGVuKCk7XHJcbiAgICAgICAgICBwcmludERvYy53cml0ZShodG1sKTtcclxuICAgICAgICAgIHByaW50RG9jLmNsb3NlKCk7XHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgY2F0Y2goKGUpPT4gY29uc29sZS53YXJuKCczRCBGbGlwQm9vayAtIFByaW50aW5nIHdhcyBjYW5jZWxlZCcpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb2dyZXNzKHYpIHtcclxuICAgIGlmKHRoaXMuY2FuY2VsZWQpIHtcclxuICAgICAgdGhyb3cgJ0NhbmNlbCBQcmludGluZyc7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLm9uUHJvZ3Jlc3MpIHtcclxuICAgICAgdGhpcy5vblByb2dyZXNzKE1hdGguZmxvb3IodioxMDApKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlckNvbnRlbnQoKSB7XHJcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMuYm9vay5nZXRQYWdlcygpLCBoZWFkID0gbmV3IFNldCgpLCBib2R5ID0gW107XHJcbiAgICBsZXQgZG9uZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgZm9yKGxldCBwYWdlPTA7IHBhZ2U8cGFnZXM7ICsrcGFnZSkge1xyXG4gICAgICBjb25zdCBpbmZvID0gdGhpcy5wYWdlQ2FsbGJhY2socGFnZSk7XHJcbiAgICAgIGlmKGluZm8udHlwZT09PSdpbWFnZScpIHtcclxuICAgICAgICBkb25lID0gZG9uZS50aGVuKCgpPT4ge1xyXG4gICAgICAgICAgdGhpcy5wcm9ncmVzcyhwYWdlL3BhZ2VzKTtcclxuICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlckltYWdlKGhlYWQsIGJvZHksIGluZm8uc3JjKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGluZm8udHlwZT09PSdodG1sJykge1xyXG4gICAgICAgIGRvbmUgPSBkb25lLnRoZW4oKCk9PiB7XHJcbiAgICAgICAgICB0aGlzLnByb2dyZXNzKHBhZ2UvcGFnZXMpO1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVySHRtbChoZWFkLCBib2R5LCBpbmZvLnNyYyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBkb25lLnRoZW4oKCk9PiB7XHJcbiAgICAgIHRoaXMucHJvZ3Jlc3MoMSk7XHJcbiAgICAgIHJldHVybiB7aGVhZDogdGhpcy5yZW5kZXJIZWFkKGhlYWQpLCBib2R5OiBib2R5LmpvaW4oJ1xcbicpfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgd3JhcChjb250ZW50KSB7XHJcbiAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJmYjNkLXByaW50ZXItcGFnZVwiPiR7Y29udGVudH08L2Rpdj5gO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySW1hZ2UoaGVhZCwgYm9keSwgc3JjKSB7XHJcbiAgICBib2R5LnB1c2goQm9va1ByaW50ZXIud3JhcChgPGltZyBzcmM9XCIke3NyY31cIiAvPmApKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckh0bWwoaGVhZCwgYm9keSwgc3JjKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PiB7XHJcbiAgICAgICQuZ2V0KHNyYywgKGh0bWwpPT4ge1xyXG4gICAgICAgIGNvbnN0IGxpbmtzID0gaHRtbC5tYXRjaCgvPGxpbmsuKj8+L2lnKSB8fCBbXTtcclxuICAgICAgICBmb3IobGV0IGxpbmsgb2YgbGlua3MpIHtcclxuICAgICAgICAgIGlmKGxpbmsubWF0Y2goL3N0eWxlc2hlZXQvaSkpIHtcclxuICAgICAgICAgICAgY29uc3QgaHJlZiA9IGxpbmsubWF0Y2goL2hyZWZcXHMqPVxccypbJ1wiXSguKilbJ1wiXS9pKTtcclxuICAgICAgICAgICAgaWYoaHJlZikge1xyXG4gICAgICAgICAgICAgIGhlYWQuYWRkKGhyZWZbMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBodG1sLm1hdGNoKC88Ym9keS4qPz4oW1xcU1xcc10qKTxcXC9ib2R5Pi9pKTtcclxuICAgICAgICBpZihjb250ZW50KSB7XHJcbiAgICAgICAgICBib2R5LnB1c2goQm9va1ByaW50ZXIud3JhcChjb250ZW50WzFdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfSkuZmFpbCgoZSk9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHJlbmRlckhlYWQoaGVhZCkge1xyXG4gICAgY29uc3QgY29udGVudCA9IFtdO1xyXG4gICAgaGVhZC5mb3JFYWNoKChrKT0+IGNvbnRlbnQucHVzaChgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIke2t9XCI+YCkpO1xyXG4gICAgY29udGVudC5wdXNoKHRoaXMuc3R5bGVTaGVldD8gYDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiJHt0aGlzLnN0eWxlU2hlZXR9XCI+YDogQm9va1ByaW50ZXIuZGVmYXVsdFN0eWxlU2hlZXQoKSk7XHJcbiAgICByZXR1cm4gY29udGVudC5qb2luKCdcXG4nKTtcclxuICB9XHJcblxyXG4gIHVzZUlGcmFtZSgpIHtcclxuICAgIGNvbnN0IGlzQ2hyb21pdW0gPSB0aGlzLnduZC5jaHJvbWUsXHJcbiAgICAgIHdpbk5hdiA9IHRoaXMud25kLm5hdmlnYXRvcixcclxuICAgICAgdmVuZG9yTmFtZSA9IHdpbk5hdi52ZW5kb3IsXHJcbiAgICAgIGlzSUVlZGdlID0gd2luTmF2LnVzZXJBZ2VudC5pbmRleE9mKFwiRWRnZVwiKT4tMSxcclxuICAgICAgaXNJT1NDaHJvbWUgPSB3aW5OYXYudXNlckFnZW50Lm1hdGNoKFwiQ3JpT1NcIik7XHJcbiAgICBsZXQgdXNlO1xyXG4gICAgaWYoaXNJT1NDaHJvbWUpe1xyXG4gICAgICB1c2UgPSB0cnVlO1xyXG4gICAgfSBlbHNlIGlmKGlzQ2hyb21pdW0gJiYgdmVuZG9yTmFtZT09PSdHb29nbGUgSW5jLicgJiYgIWlzSUVlZGdlKSB7XHJcbiAgICAgIHVzZSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1c2UgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2U7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZGVmYXVsdFN0eWxlU2hlZXQoKSB7XHJcbiAgICByZXR1cm4gYFxyXG4gICAgICA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+XHJcbiAgICAgICAgYm9keSB7XHJcbiAgICAgICAgICBtYXJnaW46IDA7XHJcbiAgICAgICAgICBwYWRkaW5nOiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAuZmIzZC1wcmludGVyLXBhZ2Uge1xyXG4gICAgICAgICAgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzO1xyXG4gICAgICAgIH1cclxuICAgICAgPC9zdHlsZT5cclxuICAgIGA7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL0Jvb2tQcmludGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9Cb29rUHJpbnRlci5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBWaWV3IGZyb20gJ1ZpZXcnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9va1ZpZXcgZXh0ZW5kcyBWaWV3IHtcclxuXHJcbiAgc3RhdGljIFBBR0VfSEFORExFUl9ERUxBWSA9IDEwMDA7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgb25Mb2FkLCB0ZW1wbGF0ZSwgaGFuZGxlcikge1xyXG4gICAgc3VwZXIoY29udGFpbmVyLCBvbkxvYWQsIHRlbXBsYXRlLCBoYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIGluaXRWaWV3KCkge1xyXG4gICAgdGhpcy52aWV3ID0gdGhpcy5jb250YWluZXIuZmluZCgnLnZpZXcnKTtcclxuICAgIHRoaXMuYm9va21hcmtzVmlldyA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy53aWRCb29rbWFya3MnKTtcclxuICAgIHRoaXMudGh1bWJuYWlsc1ZpZXcgPSB0aGlzLmNvbnRhaW5lci5maW5kKCcud2lkVGh1bWJuYWlscycpO1xyXG4gICAgdGhpcy5zZWFyY2hWaWV3ID0gdGhpcy5jb250YWluZXIuZmluZCgnLndpZFNlYXJjaCcpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SGFuZGxlcnMoaWQpIHtcclxuICAgIGxldCBoYW5kbGVycztcclxuICAgIGlmKGlkPT09J2lucFBhZ2UnKSB7XHJcbiAgICAgIGhhbmRsZXJzID0gW3tcclxuICAgICAgICBpbnBQYWdlOiAoZSwgZGF0YSk9PiB0aGlzLmNhbGxMYXRlcihzdXBlci5nZXRIYW5kbGVycyhpZCksIGlkLCBlLCBkYXRhLCBCb29rVmlldy5QQUdFX0hBTkRMRVJfREVMQVkpXHJcbiAgICAgIH1dO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGhhbmRsZXJzID0gc3VwZXIuZ2V0SGFuZGxlcnMoaWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhbmRsZXJzO1xyXG4gIH1cclxuXHJcbiAgb25JdGVtU3RhdGVDaGFuZ2VkKGlkLCBzdGF0ZSkge1xyXG4gICAgaWYoaWQ9PT0nY21kRnVsbFNjcmVlbicpIHtcclxuICAgICAgaWYoc3RhdGUuYWN0aXZlKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRDb250YWluZXIuYWRkQ2xhc3MoJ2Z1bGxzY3JlZW4nKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLnBhcmVudENvbnRhaW5lci5yZW1vdmVDbGFzcygnZnVsbHNjcmVlbicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlldztcclxuICB9XHJcblxyXG4gIGdldEJvb2ttYXJrc1ZpZXcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5ib29rbWFya3NWaWV3O1xyXG4gIH1cclxuXHJcbiAgZ2V0VGh1bWJuYWlsc1ZpZXcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy50aHVtYm5haWxzVmlldztcclxuICB9XHJcblxyXG4gIGdldFNlYXJjaFZpZXcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zZWFyY2hWaWV3O1xyXG4gIH1cclxuXHJcbiAgZ2V0Rm9ybXMoKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIGdldExpbmtzKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgJ2NtZFpvb21JbicsXHJcbiAgICAgICdjbWRab29tT3V0JyxcclxuICAgICAgJ2NtZERlZmF1bHRab29tJyxcclxuICAgICAgJ2NtZFRvYycsXHJcbiAgICAgICdjbWRGYXN0QmFja3dhcmQnLFxyXG4gICAgICAnY21kQmFja3dhcmQnLFxyXG4gICAgICAnY21kRm9yd2FyZCcsXHJcbiAgICAgICdjbWRGYXN0Rm9yd2FyZCcsXHJcbiAgICAgICdjbWRTYXZlJyxcclxuICAgICAgJ2NtZFByaW50JyxcclxuICAgICAgJ2NtZEZ1bGxTY3JlZW4nLFxyXG4gICAgICAnY21kU21hcnRQYW4nLFxyXG4gICAgICAnY21kU2luZ2xlUGFnZScsXHJcbiAgICAgICdjbWRTb3VuZHMnLFxyXG4gICAgICAnY21kU3RhdHMnLFxyXG4gICAgICAnY21kTGlnaHRpbmdVcCcsXHJcbiAgICAgICdjbWRMaWdodGluZ0Rvd24nLFxyXG4gICAgICAnY21kQ2xvc2VUb2MnLFxyXG4gICAgICAnY21kQm9va21hcmtzJyxcclxuICAgICAgJ2NtZFNlYXJjaCcsXHJcbiAgICAgICdjbWRUaHVtYm5haWxzJ1xyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIGdldFdpZGdldHMoKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAnd2lkTG9hZGluZ1Byb2dyZXNzJyxcclxuICAgICAgJ3dpZEZsb2F0V25kJyxcclxuICAgICAgJ3dpZFRvY01lbnUnLFxyXG4gICAgICAnd2lkQm9va21hcmtzJyxcclxuICAgICAgJ3dpZFRodW1ibmFpbHMnLFxyXG4gICAgICAnd2lkU2VhcmNoJyxcclxuICAgICAgJ3dpZFNldHRpbmdzJyxcclxuICAgICAgJ3dpZExvYWRpbmcnXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXRzKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgJ2lucFBhZ2UnLFxyXG4gICAgICAnaW5wUGFnZXMnXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGV4dHMoKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAndHh0TG9hZGluZ1Byb2dyZXNzJ1xyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIGdldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaHRtbDogJ3RlbXBsYXRlcy9kZWZhdWx0LWJvb2stdmlldy5odG1sJyxcclxuICAgICAgc3R5bGVzOiBbXHJcbiAgICAgICAgJ2Nzcy9ibGFjay1ib29rLXZpZXcuY3NzJ1xyXG4gICAgICBdLFxyXG4gICAgICBsaW5rczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJlbDogJ3N0eWxlc2hlZXQnLFxyXG4gICAgICAgICAgaHJlZjogJ2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcydcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIHNjcmlwdDogJ2pzL2RlZmF1bHQtYm9vay12aWV3LmpzJ1xyXG4gICAgfTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQm9va1ZpZXcuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL0Jvb2tWaWV3LmpzIiwiaW1wb3J0IEJvb2tQcm9wc0J1aWxkZXIgZnJvbSAnLi9Cb29rUHJvcHNCdWlsZGVyJztcclxuaW1wb3J0IEltYWdlRmFjdG9yeSBmcm9tICdJbWFnZUZhY3RvcnknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2xiQm9va1Byb3BzQnVpbGRlciBleHRlbmRzIEJvb2tQcm9wc0J1aWxkZXIge1xyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQsIHBhZ2VDYWxsYmFjaywgcGFnZXMsIG9uUmVhZHkpIHtcclxuICAgIHN1cGVyKG9uUmVhZHkpO1xyXG4gICAgdGhpcy5jYWxjU2hlZXRzKHBhZ2VzKTtcclxuICAgIHRoaXMucGFnZUNhbGxiYWNrID0gcGFnZUNhbGxiYWNrO1xyXG4gICAgdGhpcy5iaW5kcyA9IHtcclxuICAgICAgcGFnZUNhbGxiYWNrOiBwYWdlQ2FsbGJhY2suYmluZCh0aGlzKVxyXG4gICAgfTtcclxuICAgIHRoaXMuaW1hZ2VGYWN0b3J5ID0gbmV3IEltYWdlRmFjdG9yeShjb250ZXh0KTtcclxuXHJcbiAgICBpZihwYWdlcz4wKSB7XHJcbiAgICAgIGNvbnN0IHRlc3QgPSB0aGlzLmltYWdlRmFjdG9yeS5idWlsZChwYWdlQ2FsbGJhY2soMCksIDAsIHRoaXMuZGVmYXVsdHMuc2hlZXQud2lkdGhUZXhlbHMsIHRoaXMuZGVmYXVsdHMuc2hlZXQuaGVpZ2h0VGV4ZWxzLCB0aGlzLmRlZmF1bHRzLnNoZWV0LmNvbG9yKTtcclxuICAgICAgdGVzdC5vbkxvYWQgPSAoKT0+IHtcclxuICAgICAgICB0aGlzLmNhbGNQcm9wcyh0ZXN0LndpZHRoLCB0ZXN0LmhlaWdodCk7XHJcbiAgICAgICAgdGVzdC5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5yZWFkeSgpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMucHJvcHMgPSB0aGlzLmRlZmF1bHRzO1xyXG4gICAgICB0aGlzLnJlYWR5KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL0NsYkJvb2tQcm9wc0J1aWxkZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL0NsYkJvb2tQcm9wc0J1aWxkZXIuanMiLCJpbXBvcnQgU2hlZXRCbG9jayBmcm9tICcuL1NoZWV0QmxvY2snO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ292ZXIgZXh0ZW5kcyBTaGVldEJsb2NrIHtcclxuXHJcbiAgY29uc3RydWN0b3IodmlzdWFsLCBwLCBhbmdsZSwgc3RhdGUpIHtcclxuICAgIHN1cGVyKHZpc3VhbCwgcCwgMCwgMSwgYW5nbGUsIHN0YXRlKTtcclxuICB9XHJcblxyXG4gIGdldFByb3BzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLi4udGhpcy5wLmNvdmVyLFxyXG4gICAgICBzaGVldHM6IDFcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBsb2FkUG9pbnRzKCkge1xyXG4gICAgY29uc3Qgb3BlbmVkSW50ZXJwb2xhdGlvbkluZGVjZXMgPSBbXHJcbiAgICAgIFsyLDMsNF0sXHJcbiAgICAgIFsyLDMsNCw1LDZdXHJcbiAgICBdLFxyXG4gICAgY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMgPSBbXHJcbiAgICAgIFswLDEsMl0sXHJcbiAgICAgIFswLDEsMl1cclxuICAgIF0sXHJcbiAgICBpbnRlcnBvbGF0aW9uUG9pbnRzID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgeDogW1xyXG4gICAgICAgICAgICAgWzAsMC4yODc3LDAuNjM0NywwLjgxNzQsMS4wMDAwXSxcclxuICAgICAgICAgICAgIFswLDAuMjgzMSwwLjYyNTYsMC44MDgyLDAuOTkwOV0sXHJcbiAgICAgICAgICAgICBbMCwwLjI2MDMsMC41OTM2LDAuNzc2MywwLjk1ODldLFxyXG4gICAgICAgICAgICAgWzAsMC4xMzcwLDAuMzg4MSwwLjUzNDIsMC42NzU4XSxcclxuICAgICAgICAgICAgIFswLDAsMCwwLDBdXHJcbiAgICAgICAgXSxcclxuICAgICAgICB5OiBbXHJcbiAgICAgICAgICAgICBbMCwwLDAsMCwwXSxcclxuICAgICAgICAgICAgIFswLDAuMDIsMC4wMDUsLTAuMDAxLC0wLjAwMjVdLFxyXG4gICAgICAgICAgICAgWzAsMC4wNCwwLjAxLC0wLjAwMiwtMC4wMDVdLFxyXG4gICAgICAgICAgICAgWzAsIDAuMjQ2NiwgMC40Nzk1LCAwLjU3MDgsIDAuNjc1OF0sXHJcbiAgICAgICAgICAgICBbMCwgMC4yODc3LCAwLjYzNDcsIDAuODE3NCwgMS4wMDAwXVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHg6IFtcclxuICAgICAgICAgICAgIFswLDAuMjg3NywwLjYzNDcsMC44MTc0LDEuMDAwMF0sXHJcbiAgICAgICAgICAgICBbMCwwLjI4MzEsMC42MjU2LDAuODA4MiwwLjk5MDldLFxyXG4gICAgICAgICAgICAgWzAsMC4yNjAzLDAuNTkzNiwwLjc3NjMsMC45NTg5XSxcclxuICAgICAgICAgICAgIFswLjAwMCwwLjIzMywwLjU2MywwLjc0NiwwLjkyN10sXHJcbiAgICAgICAgICAgICBbMC4wMDAsMC4xNDQsMC40MzMsMC42MTMsMC43OTZdLFxyXG4gICAgICAgICAgICAgWzAuMDAwLDAuMDcwLDAuMjg4LDAuNDU1LDAuNjI2XSxcclxuICAgICAgICAgICAgIFswLDAsMCwwLDBdXHJcbiAgICAgICAgXSxcclxuICAgICAgICB5OiBbXHJcbiAgICAgICAgICAgICBbMCwwLDAsMCwwXSxcclxuICAgICAgICAgICAgIFswLDAuMDIsMC4wMDUsLTAuMDAxLC0wLjAwMjVdLFxyXG4gICAgICAgICAgICAgWzAsMC4wNCwwLjAxLC0wLjAwMiwtMC4wMDVdLFxyXG4gICAgICAgICAgICAgWzAuMDAwLDAuMTY4LDAuMjY5LDAuMjcwLDAuMjU1XSxcclxuICAgICAgICAgICAgIFswLjAwMCwwLjI0NSwwLjQzNSwwLjQ1OCwwLjQ2MF0sXHJcbiAgICAgICAgICAgICBbMC4wMDAsMC4yNzgsMC41NDQsMC42MTQsMC42NzNdLFxyXG4gICAgICAgICAgICAgWzAsIDAuMjg3NywgMC42MzQ3LCAwLjgxNzQsIDEuMDAwMF1cclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuICAgIF07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpbnRlcnBvbGF0aW9uUG9pbnRzLFxyXG4gICAgICBvcGVuZWRJbnRlcnBvbGF0aW9uSW5kZWNlcyxcclxuICAgICAgY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXNcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQ292ZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL0NvdmVyLmpzIiwiaW1wb3J0IFNoZWV0Q3NzTGF5ZXIgZnJvbSAnLi9TaGVldENzc0xheWVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENzc0xheWVyc01hbmFnZXIge1xyXG4gIGNvbnN0cnVjdG9yKGJvb2spIHtcclxuICAgIHRoaXMuYm9vayA9IGJvb2s7XHJcbiAgICB0aGlzLnByb3BzID0gYm9vay5wLmNzc0xheWVyUHJvcHM7XHJcbiAgICB0aGlzLnZpc3VhbCA9IGJvb2sudmlzdWFsO1xyXG4gICAgdGhpcy5wYWdlTWFuYWdlciA9IGJvb2sucGFnZU1hbmFnZXI7XHJcbiAgICB0aGlzLndyYXBwZXJzID0ge307XHJcbiAgfVxyXG5cclxuICBnZXRBY3RpdmVzKCkge1xyXG4gICAgY29uc3QgcGFnZSA9IHRoaXMuYm9vay5nZXRQYWdlKCksIHBhZ2VzID0gdGhpcy5ib29rLmdldFBhZ2VzKCk7XHJcbiAgICByZXR1cm4gcGFnZT09PTAgfHwgcGFnZT09PXBhZ2VzLTE/IFtwYWdlXTogW3BhZ2UsIHBhZ2UrMV07XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgZm9yKGxldCB3IG9mIE9iamVjdC52YWx1ZXModGhpcy53cmFwcGVycykpIHtcclxuICAgICAgdy5sYXllcnMuZm9yRWFjaCgobCk9PiBsLmRpc3Bvc2UoKSk7XHJcbiAgICB9XHJcbiAgICBkZWxldGUgdGhpcy53cmFwcGVycztcclxuICB9XHJcblxyXG4gIHNob3coKSB7XHJcbiAgICB0aGlzLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgZm9yKGxldCBuIG9mIHRoaXMuZ2V0QWN0aXZlcygpKSB7XHJcbiAgICAgIGNvbnN0IHcgPSB0aGlzLndyYXBwZXJzW25dO1xyXG4gICAgICBpZih3KSB7XHJcbiAgICAgICAgaWYody5zdGF0ZT09PSdyZWFkeScgJiYgdy5sYXllcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICBjb25zdCBibG9jayA9IHRoaXMuYm9vay5nZXRCbG9ja0J5UGFnZShuKTtcclxuICAgICAgICAgIHcubGF5ZXJzLmZvckVhY2goKGwpPT4ge1xyXG4gICAgICAgICAgICBpZihsLmlzSGlkZGVuKCkpIHtcclxuICAgICAgICAgICAgICBsLnVwZGF0ZShibG9jayk7XHJcbiAgICAgICAgICAgICAgbC5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCB3ID0gdGhpcy53cmFwcGVyc1tuXSA9IHtcclxuICAgICAgICAgIHN0YXRlOiAnbG9hZGluZycsXHJcbiAgICAgICAgICBsYXllcnM6IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT4ge1xyXG4gICAgICAgICAgdGhpcy5wYWdlTWFuYWdlci5nZXRMYXllcnMobiwgKGxheWVycyk9PiB7XHJcbiAgICAgICAgICAgIGlmKGxheWVycy5sZW5ndGggJiYgdGhpcy53cmFwcGVycykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gdGhpcy5ib29rLmdldEJsb2NrQnlQYWdlKG4pO1xyXG4gICAgICAgICAgICAgIGZvcihsZXQgbCBvZiBsYXllcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNsID0gbmV3IFNoZWV0Q3NzTGF5ZXIodGhpcy52aXN1YWwsIGJsb2NrLCB0aGlzLnByb3BzKTtcclxuICAgICAgICAgICAgICAgIHcubGF5ZXJzLnB1c2goc2wpO1xyXG4gICAgICAgICAgICAgICAgc2wuc2V0KGwuY3NzLCBsLmh0bWwsIGwuanMpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuaGlkZGVuICYmIH50aGlzLmdldEFjdGl2ZXMoKS5pbmRleE9mKG4pKSB7XHJcbiAgICAgICAgICAgICAgICAgIHcubGF5ZXJzLmZvckVhY2goKGwpPT4gbC5zaG93KCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3LnN0YXRlID0gJ3JlYWR5JztcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIGhpZGUoKSB7XHJcbiAgICB0aGlzLmhpZGRlbiA9IHRydWU7XHJcbiAgICBjb25zdCB3YWl0ID0gW107XHJcbiAgICBmb3IobGV0IHcgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLndyYXBwZXJzKSkge1xyXG4gICAgICB3LmxheWVycy5mb3JFYWNoKChsKT0+IHdhaXQucHVzaChsLmhpZGUoKSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHdhaXQpO1xyXG4gIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL0Nzc0xheWVyc01hbmFnZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL0Nzc0xheWVyc01hbmFnZXIuanMiLCJpbXBvcnQgeyQsIFRIUkVFfSBmcm9tICcuLi9saWJzJ1xyXG5pbXBvcnQgQ2FjaGUgZnJvbSAnQ2FjaGUnO1xyXG5pbXBvcnQgTG9hZGluZ0FuaW1hdGlvbiBmcm9tICdMb2FkaW5nQW5pbWF0aW9uJztcclxuaW1wb3J0IEltYWdlRmFjdG9yeSBmcm9tICdJbWFnZUZhY3RvcnknO1xyXG5pbXBvcnQgQmFzZU1hdGhVdGlscyBmcm9tICdCYXNlTWF0aFV0aWxzJztcclxuaW1wb3J0IFRleHR1cmVBbmltYXRvciBmcm9tICdUZXh0dXJlQW5pbWF0b3InO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnZU1hbmFnZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih2aXN1YWwsIGJvb2ssIHApIHtcclxuICAgIHRoaXMudmlzdWFsID0gdmlzdWFsO1xyXG4gICAgdGhpcy5ib29rID0gYm9vaztcclxuICAgIHRoaXMucGFnZVF1ZXJ5ID0gJyc7XHJcbiAgICB0aGlzLnAgPSBwO1xyXG4gICAgdGhpcy5wYWdlQ2FjaGUgPSBuZXcgQ2FjaGUocC5jYWNoZWRQYWdlcyk7XHJcbiAgICB0aGlzLnJlc291cmNlc0NhY2hlID0gbmV3IENhY2hlKCk7XHJcbiAgICB0aGlzLmNhbnZhcyA9ICQoJzxjYW52YXM+JylbMF07XHJcbiAgICB0aGlzLmltYWdlRmFjdG9yeSA9IG5ldyBJbWFnZUZhY3Rvcnkoey4uLnZpc3VhbCwgZGlzcGF0Y2hFdmVudDogYm9vay5kaXNwYXRjaEV2ZW50LmJpbmQoYm9vayksIHJlbmRlckNhbnZhczogdGhpcy5jYW52YXMsIHJlbmRlckNhbnZhc0N0eDogdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKX0sIHRoaXMucmVzb3VyY2VzQ2FjaGUpO1xyXG5cclxuICAgIHRoaXMubG9hZGluZ3MgPSBbXTtcclxuICAgIHRoaXMucmVuZGVyUXVldWUgPSBbXTtcclxuICAgIHRoaXMucGFnZVJlcXVlc3RzID0gW107XHJcbiAgICB0aGlzLnByZWRpY3RlZFJlcXVlc3RzID0gW107XHJcblxyXG4gICAgdGhpcy50bXBNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgpO1xyXG4gICAgdmlzdWFsLmFkZE9iamVjdChuZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgwLCAwKSwgdGhpcy50bXBNYXRlcmlhbCkpO1xyXG5cclxuICAgIHRoaXMubG9hZGluZ0FuaW1hdGlvbiA9IHRydWU7XHJcbiAgICB0aGlzLmxvYWRpbmcgPSB7fTtcclxuICAgIHRoaXMubG9hZGluZ1twLmNvdmVyLmNvbG9yXSA9IHRoaXMuY3JlYXRlTG9hZGluZ1RleHR1cmUocC5jb3Zlcik7XHJcbiAgICBpZihwLnBhZ2UuY29sb3IhPT1wLmNvdmVyLmNvbG9yKSB7XHJcbiAgICAgIHRoaXMubG9hZGluZ1twLnBhZ2UuY29sb3JdID0gdGhpcy5jcmVhdGVMb2FkaW5nVGV4dHVyZShwLnBhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudHVybk9uRXZlbnRzKCk7XHJcblxyXG4gICAgdmlzdWFsLmFkZFJlbmRlckNhbGxiYWNrKHRoaXMudXBkYXRlLmJpbmQodGhpcykpO1xyXG5cclxuICAgIHNldFRpbWVvdXQodGhpcy51cGRhdGVSZW5kZXJRdWV1ZS5iaW5kKHRoaXMpLCAyNTApO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlTG9hZGluZ1RleHR1cmUocCkge1xyXG4gICAgY29uc3Qgc3ByaXRlVGlsZXMgPSA2LFxyXG4gICAgICBzY2FsZSA9IE1hdGguc3FydCg0LjUqMjEwKjQuNSoyOTcvKHAud2lkdGhUZXhlbHMqcC5oZWlnaHRUZXhlbHMpKSxcclxuICAgICAgYW5pbWF0aW9uID0gbmV3IExvYWRpbmdBbmltYXRpb24oc2NhbGUqcC53aWR0aFRleGVscywgc2NhbGUqcC5oZWlnaHRUZXhlbHMsIHAuY29sb3IpLFxyXG4gICAgICBhbmltYXRvciA9IG5ldyBUZXh0dXJlQW5pbWF0b3IoYW5pbWF0aW9uLmNyZWF0ZVNwcml0ZShzcHJpdGVUaWxlcyksIHNwcml0ZVRpbGVzLCAxLCBzcHJpdGVUaWxlcywgMC4yKTtcclxuICAgIGFuaW1hdGlvbi5kaXNwb3NlKCk7XHJcbiAgICByZXR1cm4gYW5pbWF0b3I7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy50dXJuT2ZmRXZlbnRzKCk7XHJcbiAgICBmb3IobGV0IGNvbG9yIG9mIE9iamVjdC5rZXlzKHRoaXMubG9hZGluZykpIHtcclxuICAgICAgdGhpcy5sb2FkaW5nW2NvbG9yXS5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgICBkZWxldGUgdGhpcy5sb2FkaW5nO1xyXG4gICAgdGhpcy5yZXNvdXJjZXNDYWNoZS5kaXNwb3NlKCk7XHJcbiAgICB0aGlzLnBhZ2VDYWNoZS5kaXNwb3NlKCk7XHJcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy53aWR0aCA9IDA7XHJcbiAgICBkZWxldGUgdGhpcy5jYW52YXM7XHJcbiAgfVxyXG5cclxuICBpc0NvdmVyKG4pIHtcclxuICAgIHJldHVybiBuPDIgfHwgbj49MioodGhpcy5wLnNoZWV0cysxKTtcclxuICB9XHJcblxyXG4gIGlzTW9iaWxlKCkge1xyXG4gICAgcmV0dXJuICh0aGlzLnZpc3VhbC53bmQuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKT4xO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGFnZVN0YXRlKG4pIHtcclxuICAgIGNvbnN0IG9iamVjdCA9IHRoaXMucGFnZUNhY2hlLmdldChuKTtcclxuICAgIHJldHVybiBvYmplY3Q/IG9iamVjdC5zdGF0ZTogdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlTG9hZGluZ0FuaW1hdGlvbihlbmFibGUpIHtcclxuICAgIHRoaXMubG9hZGluZ0FuaW1hdGlvbiA9IGVuYWJsZTtcclxuICAgIGZvcihsZXQgbyBvZiB0aGlzLmxvYWRpbmdzKSB7XHJcbiAgICAgIHRoaXMuc2V0dXBNYXRlcmlhbChvKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZShkdCkge1xyXG4gICAgaWYodGhpcy5sb2FkaW5nQW5pbWF0aW9uKSB7XHJcbiAgICAgIGNvbnN0IGxvYWRpbmcgPSB7fTtcclxuICAgICAgZm9yKGxldCBvIG9mIHRoaXMubG9hZGluZ3MpIHtcclxuICAgICAgICBpZihvLmlzQWN0aXZlKCkpIHtcclxuICAgICAgICAgIGxvYWRpbmdbby5jb2xvcl0gPSB0cnVlOztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZm9yKGxldCBjb2xvciBvZiBPYmplY3Qua2V5cyhsb2FkaW5nKSkge1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1tjb2xvcl0udXBkYXRlKGR0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlRnJvbUxvYWRpbmdzKG8pIHtcclxuICAgIGNvbnN0IGkgPSB0aGlzLmxvYWRpbmdzLmluZGV4T2Yobyk7XHJcbiAgICBpZih+aSkge1xyXG4gICAgICB0aGlzLmxvYWRpbmdzLnNwbGljZShpLCAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZUZyb21SZW5kZXJRdWV1ZShvKSB7XHJcbiAgICBjb25zdCBpID0gdGhpcy5yZW5kZXJRdWV1ZS5pbmRleE9mKG8pO1xyXG4gICAgaWYofmkpIHtcclxuICAgICAgdGhpcy5yZW5kZXJRdWV1ZS5zcGxpY2UoaSwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZWZyZXNoUGFnZVF1ZXJ5KG4sIHF1ZXJ5PScnKSB7XHJcbiAgICB0aGlzLnBhZ2VRdWVyeSA9IHF1ZXJ5O1xyXG4gICAgY29uc3Qgb2JqZWN0ID0gdGhpcy5wYWdlQ2FjaGUuZ2V0KG4pO1xyXG4gICAgaWYob2JqZWN0ICYmIG9iamVjdC53cmFwcGVyICYmIG9iamVjdC53cmFwcGVyLnNldFF1ZXJ5KSB7XHJcbiAgICAgIGlmKCF0aGlzLnBhZ2VDYWNoZS5yZW1vdmUobikpIHtcclxuICAgICAgICBvYmplY3Qud3JhcHBlci5zZXRRdWVyeShxdWVyeSk7XHJcbiAgICAgICAgdGhpcy5wdXNoSW5SZW5kZXJRdWV1ZShvYmplY3QpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZWZyZXNoWm9vbSgpIHtcclxuICAgIGlmKHRoaXMucC5hdXRvUmVzb2x1dGlvbi5lbmFibGUpIHtcclxuICAgICAgY29uc3QgZXMgPSBbXTtcclxuICAgICAgdGhpcy5wYWdlQ2FjaGUuZm9yRWFjaCgoZSk9PiB7XHJcbiAgICAgICAgZXMucHVzaChlKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGVzLmZvckVhY2goKGUpPT4ge1xyXG4gICAgICAgIGNvbnN0IG9iamVjdCA9IGVbMV07XHJcbiAgICAgICAgaWYob2JqZWN0ICYmIG9iamVjdC53cmFwcGVyKSB7XHJcbiAgICAgICAgICBpZighdGhpcy5wYWdlQ2FjaGUucmVtb3ZlKGVbMF0pKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHVzaEluUmVuZGVyUXVldWUob2JqZWN0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TGF5ZXJzKG4sIGNsYikge1xyXG4gICAgaWYodGhpcy5wLmNzc0xheWVyc0xvYWRlcikge1xyXG4gICAgICB0aGlzLnAuY3NzTGF5ZXJzTG9hZGVyKG4sICguLi5hcmdzKT0+IHtcclxuICAgICAgICBjb25zdCBvYmplY3QgPSB0aGlzLnBhZ2VDYWNoZS5nZXQobik7XHJcbiAgICAgICAgaWYob2JqZWN0KSB7XHJcbiAgICAgICAgICBpZihvYmplY3Quc3RhdGUhPT0nYWN0aXZlJykge1xyXG4gICAgICAgICAgICBvYmplY3QucGVuZGluZ3MucHVzaCh7Y2xiLCBhcmdzfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2xiKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY2xiKFtdKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc29sdmVQZW5kaW5ncyhwZW5kaW5ncykge1xyXG4gICAgZm9yKGxldCBwIG9mIHBlbmRpbmdzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcC5jbGIoLi4ucC5hcmdzKTtcclxuICAgICAgfVxyXG4gICAgICBjYXRjaChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcGVuZGluZ3Muc3BsaWNlKDAsIHBlbmRpbmdzLmxlbmd0aCk7XHJcbiAgfVxyXG5cclxuICBydGxQYWdlTihuKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wLnJ0bD8gMioodGhpcy5wLnNoZWV0cysyKS0xLW46IG47XHJcbiAgfVxyXG5cclxuICBsb2FkKG1hdGVyaWFsLCBuKSB7XHJcbiAgICBjb25zdCBwaSA9IHRoaXMucC5wYWdlQ2FsbGJhY2sodGhpcy5ydGxQYWdlTihuKSksIHAgPSB0aGlzLmlzQ292ZXIobik/IHRoaXMucC5jb3ZlcjogdGhpcy5wLnBhZ2U7XHJcbiAgICBjb25zdCBvID0ge1xyXG4gICAgICBuLFxyXG4gICAgICB0ZXh0dXJlOiBuZXcgVEhSRUUuVGV4dHVyZSgpLFxyXG4gICAgICB3cmFwcGVyOiBudWxsLFxyXG4gICAgICBzdGF0ZTogJ2xvYWRpbmcnLFxyXG4gICAgICBsb2NrZWQ6IChuKT0+IG8uc3RhdGUgPT09ICdsb2FkaW5nJyB8fCBvLnN0YXRlID09PSAncmVuZGVyaW5nJyB8fCB0aGlzLmJvb2suaXNBY3RpdmVQYWdlKG4pLFxyXG4gICAgICBjb2xvcjogcC5jb2xvcixcclxuICAgICAgaXNBY3RpdmU6ICgpPT4gdGhpcy5ib29rLmlzQWN0aXZlUGFnZShuKSxcclxuICAgICAgaXNUb3A6ICgpPT4gfnRoaXMuYm9vay5nZXRUb3BQYWdlcygpLmluZGV4T2YobiksXHJcbiAgICAgIGRpc3Bvc2U6ICgpPT4ge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlRnJvbUxvYWRpbmdzKG8pO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlRnJvbVJlbmRlclF1ZXVlKG8pO1xyXG4gICAgICAgIGlmKG8ud3JhcHBlciAmJiBvLndyYXBwZXIuZGlzcG9zZSkge1xyXG4gICAgICAgICAgby53cmFwcGVyLmRpc3Bvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgby50ZXh0dXJlLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgby50ZXh0dXJlO1xyXG4gICAgICAgIGRlbGV0ZSBvLndyYXBwZXI7XHJcbiAgICAgIH0sXHJcbiAgICAgIHBlbmRpbmdzOiBbXVxyXG4gICAgfTtcclxuICAgIG8udGV4dHVyZS5taW5GaWx0ZXIgPSBUSFJFRS5MaW5lYXJGaWx0ZXI7XHJcbiAgICB0aGlzLmxvYWRpbmdzLnB1c2gobyk7XHJcbiAgICB0aGlzLnNldE1hdGVyaWFsKG8sIG1hdGVyaWFsKTtcclxuXHJcbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT4ge1xyXG4gICAgICBpZihvLnRleHR1cmUpIHtcclxuICAgICAgICBvLndpZHRoVGV4ZWxzID0gcGkud2lkdGhUZXhlbHMgfHwgcC53aWR0aFRleGVscztcclxuICAgICAgICBvLmhlaWdodFRleGVscyA9IHBpLmhlaWdodFRleGVscyB8fCBwLmhlaWdodFRleGVscztcclxuICAgICAgICBjb25zdCByZXMgPSB0aGlzLmNhbGNSZXNvbHV0aW9uKG8pO1xyXG4gICAgICAgIG8ud3JhcHBlciA9IHRoaXMuaW1hZ2VGYWN0b3J5LmJ1aWxkKHBpLCBwaS5udW1iZXI9PT11bmRlZmluZWQ/IG46IHBpLm51bWJlciwgcmVzLndpZHRoLCByZXMuaGVpZ2h0LCBwLmNvbG9yLCB0aGlzLnAuaW5qZWN0b3IpO1xyXG4gICAgICAgIGlmKG8ud3JhcHBlci5zZXRRdWVyeSkge1xyXG4gICAgICAgICAgby53cmFwcGVyLnNldFF1ZXJ5KHRoaXMucGFnZVF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgby5zaW11bGF0ZSA9IHBpLmludGVyYWN0aXZlPyAoby53cmFwcGVyLnNpbXVsYXRlIHx8ICgoKT0+IHVuZGVmaW5lZCkpLmJpbmQoby53cmFwcGVyKTogdW5kZWZpbmVkO1xyXG4gICAgICAgIG8ud3JhcHBlci5vbkxvYWQgPSAoKT0+IHtcclxuICAgICAgICAgIHRoaXMucHVzaEluUmVuZGVyUXVldWUobyk7XHJcbiAgICAgICAgICB0aGlzLmJvb2suZGlzcGF0Y2hFdmVudCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdsb2FkZWRQYWdlJyxcclxuICAgICAgICAgICAgcGFnZTogblxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBvLndyYXBwZXIub25DaGFuZ2UgPSAoaW1hZ2UpPT4ge1xyXG4gICAgICAgICAgaWYoby50ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbUxvYWRpbmdzKG8pO1xyXG4gICAgICAgICAgICBpZihvLm1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgby5tYXRlcmlhbC5tYXAgPSBvLnRleHR1cmU7XHJcbiAgICAgICAgICAgICAgby5tYXRlcmlhbC5jb2xvciA9IG5ldyBUSFJFRS5Db2xvcigweEZGRkZGRik7XHJcbiAgICAgICAgICAgICAgby5tYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgby50ZXh0dXJlLmltYWdlID0gaW1hZ2U7XHJcbiAgICAgICAgICAgIG8udGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIG8udGV4dHVyZS5vblVwZGF0ZSA9ICgpPT4ge1xyXG4gICAgICAgICAgICAgIGlmKG8uc3RhdGUgIT09ICdxdWV1ZWRGb3JSZW5kZXInKSB7XHJcbiAgICAgICAgICAgICAgICBvLnN0YXRlID0gJ2FjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmVQZW5kaW5ncyhvLnBlbmRpbmdzKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucmVuZGVyaW5nO1xyXG4gICAgICAgICAgICAgIC8vdGhpcy51cGRhdGVSZW5kZXJRdWV1ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnRtcE1hdGVyaWFsLm1hcCA9IG8udGV4dHVyZTtcclxuICAgICAgICAgICAgdGhpcy50bXBNYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmJvb2suZGlzcGF0Y2hFdmVudCh7XHJcbiAgICAgIHR5cGU6ICdsb2FkUGFnZScsXHJcbiAgICAgIHBhZ2U6IG5cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMucGFnZUNhY2hlLnB1dChuLCBvKTtcclxuICB9XHJcblxyXG4gIGlzU2luZ2xlUGFnZShvKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wLnNpbmdsZVBhZ2UgfHwgIW8ubiB8fCBvLm49PT10aGlzLmJvb2suZ2V0UGFnZXMoKS0xO1xyXG4gIH1cclxuXHJcbiAgY2FsY1Jlc29sdXRpb24obykge1xyXG4gICAgbGV0IHJlcztcclxuICAgIGlmKHRoaXMucC5hdXRvUmVzb2x1dGlvbi5lbmFibGUpIHtcclxuICAgICAgY29uc3QgayA9IE1hdGgubWluKCh0aGlzLmlzU2luZ2xlUGFnZShvKT8gMTogMC41KSp0aGlzLnZpc3VhbC53aWR0aCgpL28ud2lkdGhUZXhlbHMsIHRoaXMudmlzdWFsLmhlaWdodCgpL28uaGVpZ2h0VGV4ZWxzKTtcclxuICAgICAgcmVzID0ge1xyXG4gICAgICAgIHdpZHRoOiB0aGlzLnAuYXV0b1Jlc29sdXRpb24uayp0aGlzLnAuem9vbSprKm8ud2lkdGhUZXhlbHMsXHJcbiAgICAgICAgaGVpZ2h0OiB0aGlzLnAuYXV0b1Jlc29sdXRpb24uayp0aGlzLnAuem9vbSprKm8uaGVpZ2h0VGV4ZWxzXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmVzID0ge1xyXG4gICAgICAgIHdpZHRoOiBvLndpZHRoVGV4ZWxzLFxyXG4gICAgICAgIGhlaWdodDogby5oZWlnaHRUZXhlbHNcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICBwdXNoSW5SZW5kZXJRdWV1ZShvKSB7XHJcbiAgICBpZihvLnN0YXRlICE9PSAncXVldWVkRm9yUmVuZGVyJykge1xyXG4gICAgICBvLnN0YXRlID0gJ3F1ZXVlZEZvclJlbmRlcic7XHJcbiAgICAgIHRoaXMucmVuZGVyUXVldWUucHVzaChvKTtcclxuICAgICAgLy8gdGhpcy51cGRhdGVSZW5kZXJRdWV1ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlUmVuZGVyUXVldWUoKSB7XHJcbiAgICBpZih0aGlzLmNhbnZhcykge1xyXG4gICAgICBjb25zdCBwID0gdGhpcy5wO1xyXG4gICAgICBpZighdGhpcy5yZW5kZXJpbmcgJiYgKHAucmVuZGVyV2hpbGVGbGlwcGluZyB8fCAhdGhpcy5ib29rLmlzUHJvY2Vzc2luZygpKSkge1xyXG4gICAgICAgIGxldCBhY3RpdmUsIHRvcDtcclxuICAgICAgICBmb3IobGV0IG8gb2YgdGhpcy5yZW5kZXJRdWV1ZSkge1xyXG4gICAgICAgICAgaWYoIWFjdGl2ZSAmJiBvLmlzQWN0aXZlKCkpIHtcclxuICAgICAgICAgICAgYWN0aXZlID0gbztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmKG8uaXNUb3AoKSkge1xyXG4gICAgICAgICAgICB0b3AgPSBvO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJpbmcgPSB0b3AgfHwgYWN0aXZlO1xyXG4gICAgICAgIGlmKHRoaXMuaXNNb2JpbGUoKSAmJiBwLnJlbmRlckluYWN0aXZlUGFnZXNPbk1vYmlsZSB8fCAhdGhpcy5pc01vYmlsZSgpICYmIHAucmVuZGVySW5hY3RpdmVQYWdlcykge1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJpbmcgPSB0aGlzLnJlbmRlcmluZyB8fCB0aGlzLnJlbmRlclF1ZXVlWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLnJlbmRlcmluZykge1xyXG4gICAgICAgICAgaWYodGhpcy5yZW5kZXJpbmcud3JhcHBlci5zdGFydFJlbmRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21SZW5kZXJRdWV1ZSh0aGlzLnJlbmRlcmluZyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyaW5nLnN0YXRlID0gJ3JlbmRlcmluZyc7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyaW5nLndyYXBwZXIuc2V0UmVzb2x1dGlvbih0aGlzLmNhbGNSZXNvbHV0aW9uKHRoaXMucmVuZGVyaW5nKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyaW5nLndyYXBwZXIuc3RhcnRSZW5kZXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5yZW5kZXJpbmc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNldFRpbWVvdXQodGhpcy51cGRhdGVSZW5kZXJRdWV1ZS5iaW5kKHRoaXMpLCAyNTApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdHVybk9uRXZlbnRzKCkge1xyXG4gICAgdGhpcy50cmFuc2ZlckV2ZW50cyA9IHRydWU7XHJcbiAgfVxyXG5cclxuICB0dXJuT2ZmRXZlbnRzKCkge1xyXG4gICAgY29uc3QgbW91c2V1cCA9ICQuRXZlbnQoJ21vdXNldXAnKSwgbW91c2VvdXQgPSAkLkV2ZW50KCdtb3VzZW91dCcpO1xyXG4gICAgdGhpcy5wYWdlQ2FjaGUuZm9yRWFjaCgoZW50KT0+IHtcclxuICAgICAgY29uc3Qgb2JqZWN0ID0gZW50WzFdO1xyXG4gICAgICBpZihvYmplY3Quc2ltdWxhdGUpIHtcclxuICAgICAgICBvYmplY3Quc2ltdWxhdGUobW91c2V1cCwgdW5kZWZpbmVkLCAwLCAwKTtcclxuICAgICAgICBvYmplY3Quc2ltdWxhdGUobW91c2VvdXQsIHVuZGVmaW5lZCwgMCwgMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy50cmFuc2ZlckV2ZW50cyA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdHJhbnNmZXJFdmVudFRvVGV4dHVyZShuLCBlLCBkYXRhKSB7XHJcbiAgICBpZih0aGlzLnRyYW5zZmVyRXZlbnRzKSB7XHJcbiAgICAgIGNvbnN0IHRvT2JqZWN0ID0gdGhpcy5nZXRPckxvYWRUZXh0dXJlT2JqZWN0KHVuZGVmaW5lZCwgbik7XHJcbiAgICAgIGlmKHRvT2JqZWN0LndyYXBwZXIpIHtcclxuICAgICAgICBjb25zdCB7dXZ9ID0gZGF0YSwgdG9Eb2MgPSB0b09iamVjdC53cmFwcGVyLmdldFNpbXVsYXRlZERvYygpO1xyXG4gICAgICAgIHRoaXMucGFnZUNhY2hlLmZvckVhY2goKGVudCk9PiB7XHJcbiAgICAgICAgICBjb25zdCBvYmplY3QgPSBlbnRbMV07XHJcbiAgICAgICAgICBpZihvYmplY3Quc2ltdWxhdGUpIHtcclxuICAgICAgICAgICAgb2JqZWN0LnNpbXVsYXRlKGUsIHRvRG9jLCB1di54LCB1di55KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbG9hZFByZWRpY3RlZFBhZ2VzKCkge1xyXG4gICAgdGhpcy5wcmVkaWN0ZWRSZXF1ZXN0cyA9IEJhc2VNYXRoVXRpbHMucHJlZGljdCh0aGlzLnBhZ2VSZXF1ZXN0cywgdGhpcy5wLnByZWxvYWRQYWdlcyk7XHJcbiAgICBmb3IobGV0IHAgb2YgdGhpcy5wcmVkaWN0ZWRSZXF1ZXN0cykge1xyXG4gICAgICBpZihwPHRoaXMuYm9vay5nZXRQYWdlcygpICYmICF0aGlzLnBhZ2VDYWNoZS5nZXQocCkpIHtcclxuICAgICAgICB0aGlzLmxvYWQodW5kZWZpbmVkLCBwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkUGFnZVJlcXVlc3Qobikge1xyXG4gICAgdGhpcy5wYWdlUmVxdWVzdHMucHVzaChuKTtcclxuICAgIGlmKHRoaXMucGFnZVJlcXVlc3RzLmxlbmd0aD50aGlzLnAucGFnZXNGb3JQcmVkaWN0aW5nKSB7XHJcbiAgICAgIHRoaXMucGFnZVJlcXVlc3RzLnNoaWZ0KCk7XHJcbiAgICB9XHJcbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKHRoaXMubG9hZFByZWRpY3RlZFBhZ2VzLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgc2V0TWF0ZXJpYWwobywgbWF0ZXJpYWwpIHtcclxuICAgIHRoaXMucGFnZUNhY2hlLmZvckVhY2goKGUpPT4ge1xyXG4gICAgICBjb25zdCBvYiA9IGVbMV07XHJcbiAgICAgIGlmKG8hPT1vYiAmJiBvYi5tYXRlcmlhbD09PW1hdGVyaWFsKSB7XHJcbiAgICAgICAgZGVsZXRlIG9iLm1hdGVyaWFsO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmKG1hdGVyaWFsICYmIG1hdGVyaWFsIT09by5tYXRlcmlhbCkge1xyXG4gICAgICBvLm1hdGVyaWFsID0gbWF0ZXJpYWw7XHJcbiAgICAgIHRoaXMuc2V0dXBNYXRlcmlhbChvKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldHVwTWF0ZXJpYWwobykge1xyXG4gICAgby5tYXRlcmlhbC5tYXAgPSBvLnRleHR1cmUuaW1hZ2U/IG8udGV4dHVyZTogKHRoaXMubG9hZGluZ0FuaW1hdGlvbj8gdGhpcy5sb2FkaW5nW28uY29sb3JdLnRleHR1cmU6IG51bGwpO1xyXG4gICAgaWYoIW8ubWF0ZXJpYWwubWFwKSB7XHJcbiAgICAgIG8ubWF0ZXJpYWwuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3Ioby5jb2xvcik7XHJcbiAgICB9XHJcbiAgICBvLm1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGdldE9yTG9hZFRleHR1cmVPYmplY3QobWF0ZXJpYWwsIG4pIHtcclxuICAgIGxldCBvYmplY3QgPSB0aGlzLnBhZ2VDYWNoZS5nZXQobik7XHJcbiAgICBpZighb2JqZWN0KSB7XHJcbiAgICAgIG9iamVjdCA9IHRoaXMubG9hZChtYXRlcmlhbCwgbik7XHJcbiAgICAgIHRoaXMuYWRkUGFnZVJlcXVlc3Qobik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5zZXRNYXRlcmlhbChvYmplY3QsIG1hdGVyaWFsKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgc2V0VGV4dHVyZShtYXRlcmlhbCwgbikge1xyXG4gICAgaWYofnRoaXMucHJlZGljdGVkUmVxdWVzdHMuaW5kZXhPZihuKSkge1xyXG4gICAgICB0aGlzLmFkZFBhZ2VSZXF1ZXN0KG4pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5nZXRPckxvYWRUZXh0dXJlT2JqZWN0KG1hdGVyaWFsLCBuKTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9QYWdlTWFuYWdlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvUGFnZU1hbmFnZXIuanMiLCJpbXBvcnQgQm9va1Byb3BzQnVpbGRlciBmcm9tICcuL0Jvb2tQcm9wc0J1aWxkZXInO1xyXG5pbXBvcnQgUGRmIGZyb20gJ1BkZic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQZGZCb29rUHJvcHNCdWlsZGVyIGV4dGVuZHMgQm9va1Byb3BzQnVpbGRlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHNyYywgb25SZWFkeSkge1xyXG4gICAgc3VwZXIob25SZWFkeSk7XHJcbiAgICB0aGlzLnBkZiA9IG5ldyBQZGYoc3JjKTtcclxuICAgIHRoaXMucGFnZURlc2NyaXB0aW9uID0ge1xyXG4gICAgICB0eXBlOiAncGRmJyxcclxuICAgICAgc3JjOiB0aGlzLnBkZixcclxuICAgICAgaW50ZXJhY3RpdmU6IHRydWVcclxuICAgIH07XHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICBwYWdlQ2FsbGJhY2s6IHRoaXMucGFnZUNhbGxiYWNrLmJpbmQodGhpcylcclxuICAgIH07XHJcbiAgICB0aGlzLnBkZi5nZXRIYW5kbGVyKHRoaXMuaW5pdC5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLnBkZi5kaXNwb3NlKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICBpbml0KGhhbmRsZXIpIHtcclxuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5wZGYuZ2V0UGFnZXNOdW0oKTtcclxuICAgIHRoaXMuY2FsY1NoZWV0cyhwYWdlcyk7XHJcbiAgICBpZihwYWdlcz4wKSB7XHJcbiAgICAgIGhhbmRsZXIuZ2V0UGFnZSgxKS5cclxuICAgICAgdGhlbigocGFnZSk9PiB7XHJcbiAgICAgICAgY29uc3Qgc2l6ZSA9IFBkZi5nZXRQYWdlU2l6ZShwYWdlKTtcclxuICAgICAgICB0aGlzLmNhbGNQcm9wcyhzaXplLndpZHRoLCBzaXplLmhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZWFkeSgpO1xyXG4gICAgICB9KS5cclxuICAgICAgY2F0Y2goKGUpPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMucHJvcHMgPSB0aGlzLmRlZmF1bHRzO1xyXG4gICAgICB0aGlzLnJlYWR5KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwYWdlQ2FsbGJhY2sobikge1xyXG4gICAgcmV0dXJuIHRoaXMucGFnZURlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9QZGZCb29rUHJvcHNCdWlsZGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9QZGZCb29rUHJvcHNCdWlsZGVyLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGRmTGlua3NIYW5kbGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IocGRmLCBjdHJsLCBlbGVtZW50KSB7XHJcbiAgICB0aGlzLnBkZiA9IHBkZjtcclxuICAgIHRoaXMuY3RybCA9IGN0cmw7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgdGhpcy5jdXJzb3JzID0gW107XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG5cclxuICB9XHJcblxyXG4gIHNldEhhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcclxuICB9XHJcblxyXG4gIGRlZmF1bHRIYW5kbGVyKHR5cGUsIGRlc3RpbmF0aW9uKSB7XHJcbiAgICBpZih0eXBlPT09J2ludGVybmFsJykge1xyXG4gICAgICB0aGlzLmN0cmwuZ29Ub1BhZ2UoZGVzdGluYXRpb24pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0eXBlPT09J2V4dGVybmFsJykge1xyXG4gICAgICB3aW5kb3cub3BlbihkZXN0aW5hdGlvbiwgJ19ibGFuaycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2FsbEhhbmRsZXJzKHR5cGUsIGRlc3RpbmF0aW9uKSB7XHJcbiAgICBpZighdGhpcy5oYW5kbGVyIHx8ICF0aGlzLmhhbmRsZXIodHlwZSwgZGVzdGluYXRpb24pKSB7XHJcbiAgICAgIHRoaXMuZGVmYXVsdEhhbmRsZXIodHlwZSwgZGVzdGluYXRpb24pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRXZlbnQoZGF0YSkge1xyXG4gICAgY29uc3QgZSA9IGRhdGEuZXZlbnQsIGFubm8gPSBkYXRhLmFubm90YXRpb247XHJcbiAgICBzd2l0Y2goZS50eXBlKSB7XHJcbiAgICAgIGNhc2UgJ21vdXNlb3Zlcic6IHtcclxuICAgICAgICB0aGlzLmN1cnNvcnMucHVzaCh0aGlzLmVsZW1lbnQuY3NzKCdjdXJzb3InKSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNzcygnY3Vyc29yJywgJ3BvaW50ZXInKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdtb3VzZW91dCc6IHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuY3NzKCdjdXJzb3InLCB0aGlzLmN1cnNvcnMucG9wKCkgfHwgJycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ3RvdWNodGFwJzpcclxuICAgICAgY2FzZSAnY2xpY2snOiB7XHJcbiAgICAgICAgaWYoYW5uby51cmwpIHtcclxuICAgICAgICAgIHRoaXMuY2FsbEhhbmRsZXJzKCdleHRlcm5hbCcsIGFubm8udXJsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihhbm5vLmRlc3QpIHtcclxuICAgICAgICAgIGxldCBkZXN0UHJvbWlzZTtcclxuICAgICAgICAgIGlmKHR5cGVvZiBhbm5vLmRlc3Q9PT0nc3RyaW5nJykge1xyXG4gICAgICAgICAgICBkZXN0UHJvbWlzZSA9IHRoaXMucGRmLmhhbmRsZXIuZ2V0RGVzdGluYXRpb24oYW5uby5kZXN0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZXN0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShhbm5vLmRlc3QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGVzdFByb21pc2UuXHJcbiAgICAgICAgICAgIHRoZW4oKGRlc3QpPT4gdHlwZW9mIGRlc3RbMF09PT0nbnVtYmVyJz8gZGVzdFswXTogdGhpcy5wZGYuaGFuZGxlci5nZXRQYWdlSW5kZXgoZGVzdFswXSkpLlxyXG4gICAgICAgICAgICB0aGVuKChudW1iZXIpPT4gdGhpcy5jYWxsSGFuZGxlcnMoJ2ludGVybmFsJywgbnVtYmVyKSkuXHJcbiAgICAgICAgICAgIGNhdGNoKCgpPT4gY29uc29sZS5lcnJvcignQmFkIGxpbmsnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL1BkZkxpbmtzSGFuZGxlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvUGRmTGlua3NIYW5kbGVyLmpzIiwiaW1wb3J0IEZpbmRlciBmcm9tICdGaW5kZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VhcmNoRW5naW5lIHtcclxuICBjb25zdHJ1Y3RvcihwYWdlQ2FsbGJhY2ssIHBhZ2VzKSB7XHJcbiAgICB0aGlzLnBhZ2VDYWxsYmFjayA9IHBhZ2VDYWxsYmFjaztcclxuICAgIHRoaXMucGFnZXMgPSBwYWdlcztcclxuICAgIHRoaXMucmVzdWx0cyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgc2V0UXVlcnkocXVlcnkpIHtcclxuICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgIHRoaXMudXBkYXRlID0gdHJ1ZTtcclxuICAgIHRoaXMucHJvY2VzcygpO1xyXG4gIH1cclxuXHJcbiAgcHJvY2VzcygpIHtcclxuICAgIGlmKHRoaXMudXBkYXRlKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnJlc3VsdHM7XHJcbiAgICAgIHRoaXMucmVzdWx0cyA9IFtdO1xyXG4gICAgICBpZih0aGlzLm9uUGFnZUhpdHNDaGFuZ2VkKSB7XHJcbiAgICAgICAgZm9yKGxldCByZXMgb2YgcmVzdWx0cykge1xyXG4gICAgICAgICAgdGhpcy5vblBhZ2VIaXRzQ2hhbmdlZCh1bmRlZmluZWQsICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy51cGRhdGUgPSBmYWxzZTtcclxuICAgICAgdGhpcy5wYWdlID0gMDtcclxuICAgICAgdGhpcy5zdGFtcCA9IERhdGUubm93KCk7XHJcbiAgICAgIGlmKHRoaXMucXVlcnkubGVuZ3RoPjEpIHtcclxuICAgICAgICB0aGlzLnByb2Nlc3MoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGlmKHRoaXMucGFnZTx0aGlzLnBhZ2VzKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhbXAgPSB0aGlzLnN0YW1wO1xyXG4gICAgICAgIHRoaXMuZmluZCh0aGlzLnBhZ2VDYWxsYmFjayh0aGlzLnBhZ2UpKS5cclxuICAgICAgICAgIHRoZW4oKGNvbnRleHRzKT0+IHtcclxuICAgICAgICAgICAgaWYoc3RhbXAgPT09IHRoaXMuc3RhbXApIHtcclxuICAgICAgICAgICAgICBpZihjb250ZXh0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgcGFnZTogdGhpcy5wYWdlLFxyXG4gICAgICAgICAgICAgICAgICBjb250ZXh0c1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICsrdGhpcy5wYWdlO1xyXG4gICAgICAgICAgICAgIGlmKHRoaXMub25QYWdlSGl0c0NoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25QYWdlSGl0c0NoYW5nZWQodGhpcy5wYWdlLCB0aGlzLnF1ZXJ5KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmaW5kKHBpKSB7XHJcbiAgICBsZXQgbmV4dDtcclxuICAgIGlmKHBpLnR5cGU9PT0ncGRmJykge1xyXG4gICAgICBuZXh0ID0gbmV3IFByb21pc2UoKHJlc29sdmUpPT4ge1xyXG4gICAgICAgIHBpLnNyYy5nZXRIYW5kbGVyKCgpPT4ge1xyXG4gICAgICAgICAgY29uc3QgbiA9IHBpLm51bWJlcj09PXVuZGVmaW5lZD8gdGhpcy5wYWdlOiBwaS5udW1iZXI7XHJcbiAgICAgICAgICBpZihwaS5zcmMuZ2V0UGFnZVR5cGUobik9PT0ncmlnaHQnKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoW10pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBpLnNyYy5nZXRQYWdlKG4pLlxyXG4gICAgICAgICAgICB0aGVuKChwYWdlKT0+IHtcclxuICAgICAgICAgICAgICBwYWdlLmdldFRleHRDb250ZW50KCkuXHJcbiAgICAgICAgICAgICAgdGhlbigodGV4dENvbnRlbnQpPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgRmluZGVyKHRleHRDb250ZW50Lml0ZW1zLm1hcCgoaXRlbSk9PiBpdGVtLnN0ciksIHRoaXMucXVlcnksIHtoaXRzOiBmYWxzZX0pLmdldENvbnRleHRzKCkpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5cclxuICAgICAgICAgICAgY2F0Y2goKCk9PiByZXNvbHZlKFtdKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIG5leHQgPSBQcm9taXNlLnJlc29sdmUoW10pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5leHQ7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL1NlYXJjaEVuZ2luZS5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvU2VhcmNoRW5naW5lLmpzIiwiaW1wb3J0IENTU0xheWVyIGZyb20gJ0NTU0xheWVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNoZWV0Q3NzTGF5ZXIge1xyXG4gIGNvbnN0cnVjdG9yKHZpc3VhbCwgYmxvY2ssIHByb3BzKSB7XHJcbiAgICB0aGlzLnZpc3VhbCA9IHZpc3VhbDtcclxuICAgIGNvbnN0IHNpemUgPSBibG9jay5nZXRUb3BTaXplKCk7XHJcbiAgICB0aGlzLmxheWVyID0gbmV3IENTU0xheWVyKHNpemUud2lkdGgsIHNpemUuaGVpZ2h0LCBwcm9wcyk7XHJcblxyXG4gICAgdGhpcy51cGRhdGUoYmxvY2spO1xyXG4gICAgdGhpcy52aXN1YWwuYWRkQ3NzT2JqZWN0KHRoaXMubGF5ZXIpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMubGF5ZXIuZGlzcG9zZSgpO1xyXG4gICAgdGhpcy52aXN1YWwucmVtb3ZlQ3NzT2JqZWN0KHRoaXMubGF5ZXIpO1xyXG4gIH1cclxuXHJcbiAgaXNIaWRkZW4oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5sYXllci5pc0hpZGRlbigpO1xyXG4gIH1cclxuXHJcbiAgaGlkZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmxheWVyLmhpZGUoKTtcclxuICB9XHJcblxyXG4gIHNob3coKSB7XHJcbiAgICByZXR1cm4gdGhpcy5sYXllci5zaG93KCk7XHJcbiAgfVxyXG5cclxuICBzZXQoY3NzLCBodG1sLCBqcykge1xyXG4gICAgdGhpcy5sYXllci5zZXREYXRhKGNzcywgaHRtbCwganMpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGJsb2NrKSB7XHJcbiAgICB0aGlzLmJsb2NrID0gYmxvY2s7XHJcbiAgICB0aGlzLmJsb2NrLmdldFRvcFdvcmxkUm90YXRpb24odGhpcy5sYXllci5yb3RhdGlvbik7XHJcbiAgICB0aGlzLmJsb2NrLmdldFRvcFdvcmxkUG9zaXRpb24odGhpcy5sYXllci5wb3NpdGlvbik7XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvU2hlZXRDc3NMYXllci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvU2hlZXRDc3NMYXllci5qcyIsImltcG9ydCBNYXRoVXRpbHMgZnJvbSAnTWF0aFV0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNoZWV0UGh5c2ljcyB7XHJcblxyXG4gIHN0YXRpYyB0YXJnZXRGb3JjZUNsYihvLGEsdixjaCkge1xyXG4gICAgY29uc3QgbCA9IGEqdGhpcy5yO1xyXG4gICAgcmV0dXJuIDEwMCp0aGlzLm0qdGhpcy5nKigyLygxK01hdGguZXhwKDEwKihsLXRoaXMudGwpKSktMSktdGhpcy5tKjQwKnY7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaG92ZXJDb3JuZXJGb3JjZUNsYihvLHYsbCxjaCkge1xyXG4gICAgcmV0dXJuIDU7XHJcbiAgfVxyXG5cclxuICBnZXRUYXJnZXRGb3JjZUNsYihtYXNzLCB0YXJnZXRBbmdsZSkge1xyXG4gICAgcmV0dXJuIFNoZWV0UGh5c2ljcy50YXJnZXRGb3JjZUNsYi5iaW5kKHtcclxuICAgICAgZzogdGhpcy5wLmdyYXZpdHksXHJcbiAgICAgIG06IG1hc3MsXHJcbiAgICAgIHRsOiB0YXJnZXRBbmdsZSp0aGlzLnAucixcclxuICAgICAgcjogdGhpcy5wLnJcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGRyYWdGb3JjZUNsYihvLGEsdixjaCkge1xyXG4gICAgcmV0dXJuIG8uZmxidCpvLm0qKDEwKm8uZypjaC01MCp2LygxK01hdGguZXhwKDMuNSpNYXRoLmFicyhjaCkpKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZHJhZ0Nvcm5lckZvcmNlQ2xiKG8sYSx2LGNoKSB7XHJcbiAgICByZXR1cm4gMTUqKDIvKDErTWF0aC5leHAoMTAqKGEtdGhpcy50YSkqby5yKSktMSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0RHJhZ0Nvcm5lckZvcmNlQ2xiKHRhcmdldEFuZ2xlKSB7XHJcbiAgICByZXR1cm4gU2hlZXRQaHlzaWNzLmRyYWdDb3JuZXJGb3JjZUNsYi5iaW5kKHtcclxuICAgICAgdGE6IHRhcmdldEFuZ2xlXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHI9MSwgZ3Jhdml0eT0xLCBjb3JuZXJEZXZpYXRpb249MC4xNSwgZnBzPTI0MCkge1xyXG4gICAgdGhpcy5wID0ge1xyXG4gICAgICByLFxyXG4gICAgICBjb3JuZXJEZXZpYXRpb24sXHJcbiAgICAgIGw6IE1hdGguUEkqcixcclxuICAgICAgc3RhcnREdDogMS9mcHMsXHJcbiAgICAgIGdyYXZpdHksXHJcbiAgICAgIG1hcmdpbjogMC4wMDIqcixcclxuICAgICAgaW5mTTogMWU0LFxyXG4gICAgICBhdHRlbXB0czogMTYsXHJcbiAgICAgIG1heEl0ZXJhdGlvbnM6IDEwMFxyXG4gICAgfTtcclxuICAgIHRoaXMub3MgPSBbXTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLm9zID0gW107XHJcbiAgfVxyXG5cclxuICBnZXRTaXplKCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3MubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgYWRkT2JqZWN0KG1hc3MsIGFuZ2xlLCB2ZWxvY2l0eSwgZmxleGliaWxpdHksIGNvcm5lckhlaWdodCwgc2ltdWxhdGVDbGIsIHJlbW92ZUNsYiwgZm9yY2VDbGI9KCk9PiAwLCBjb3JuZXJGb3JjZUNsYj0oKT0+IDApIHtcclxuICAgIGNvbnN0IG5vID0ge1xyXG4gICAgICBpZDogTWF0aFV0aWxzLmdldFVuaXF1ZSgpLFxyXG4gICAgICBtOiBtYXNzLFxyXG4gICAgICB2OiB2ZWxvY2l0eSxcclxuICAgICAgbDogYW5nbGUqdGhpcy5wLnIsXHJcbiAgICAgIGY6IGZvcmNlQ2xiLFxyXG4gICAgICBjZjogY29ybmVyRm9yY2VDbGIsXHJcbiAgICAgIGNoOiBjb3JuZXJIZWlnaHQsXHJcbiAgICAgIGZsYnQ6IGZsZXhpYmlsaXR5LFxyXG4gICAgICBzaW11bGF0ZUNsYixcclxuICAgICAgcmVtb3ZlQ2xiXHJcbiAgICB9O1xyXG4gICAgbGV0IGkgPSB0aGlzLm9zLmZpbmRJbmRleCgobyk9PiBuby5sPD1vLmwpO1xyXG4gICAgaSA9IH5pPyBpOiB0aGlzLm9zLmxlbmd0aDtcclxuICAgIHRoaXMub3Muc3BsaWNlKGksIDAsIG5vKTtcclxuICAgIHJldHVybiBuby5pZDtcclxuICB9XHJcblxyXG4gIGdldFBhcmFtZXRyTWFwKG5hbWUpIHtcclxuICAgIGNvbnN0IG1hcCA9IHtcclxuICAgICAgbWFzczogJ20nLFxyXG4gICAgICB2ZWxvY2l0eTogJ3YnLFxyXG4gICAgICBmbGV4aWJpbGl0eTogJ2ZsYnQnLFxyXG4gICAgICBjb3JuZXJIZWlnaHQ6ICdjaCcsXHJcbiAgICAgIHNpbXVsYXRlQ2xiOiAnc2ltdWxhdGVDbGInLFxyXG4gICAgICByZW1vdmVDbGI6ICdyZW1vdmVDbGInLFxyXG4gICAgICBmb3JjZUNsYjogJ2YnLFxyXG4gICAgICBjb3JuZXJGb3JjZUNsYjogJ2NmJ1xyXG4gICAgfTtcclxuICAgIHJldHVybiBtYXBbbmFtZV07XHJcbiAgfVxyXG5cclxuICBzZXRQYXJhbWV0cihpZCwgbmFtZSwgdmFsdWUpIHtcclxuICAgIGNvbnN0IG8gPSB0aGlzLm9zLmZpbmQoKG8pPT4gby5pZD09PWlkKTtcclxuICAgIGlmKG5hbWUgPT09ICdhbmdsZScpIHtcclxuICAgICAgby5sID0gdmFsdWUqdGhpcy5wLnI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgb1t0aGlzLmdldFBhcmFtZXRyTWFwKG5hbWUpXSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UGFyYW1ldHIoaWQsIG5hbWUpIHtcclxuICAgIGNvbnN0IG8gPSB0aGlzLm9zLmZpbmQoKG8pPT4gby5pZD09PWlkKTtcclxuICAgIGxldCB2YWx1ZTtcclxuICAgIGlmKG5hbWUgPT09ICdhbmdsZScpIHtcclxuICAgICAgdmFsdWUgPSBvLmwvdGhpcy5wLnI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdmFsdWUgPSBvW3RoaXMuZ2V0UGFyYW1ldHJNYXAobmFtZSldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc2ltdWxhdGUoVCkge1xyXG4gICAgbGV0IHQ9MCxcclxuICAgICAgICBkdD10aGlzLnAuc3RhcnREdCxcclxuICAgICAgICBhdHRlbXB0PTAsXHJcbiAgICAgICAgaXQ9MDtcclxuXHJcbiAgICB3aGlsZSh0PFQgJiYgaXQ8dGhpcy5wLm1heEl0ZXJhdGlvbnMpIHtcclxuICAgICAgaWYoZHQ+VC10KSB7XHJcbiAgICAgICAgZHQgPSBULXQ7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3Qgbm9zID0gdGhpcy5pbnRlZ3JhdGUodGhpcy5vcywgZHQpLFxyXG4gICAgICAgICAgICBjaSA9IHRoaXMuZmluZENvbGxpc2lvbnMobm9zKTtcclxuICAgICAgaWYoY2kubnVtPjEgJiYgYXR0ZW1wdDx0aGlzLnAuYXR0ZW1wdHMpIHtcclxuICAgICAgICBkdC89MjtcclxuICAgICAgICArK2F0dGVtcHQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgaWYoY2kubnVtPT09MSkge1xyXG4gICAgICAgICAgY29uc3Qgc2NvcyA9IHRoaXMuc29sdmVDb2xsaXNpb24obm9zW2NpLmxhc3QtMV0sIG5vc1tjaS5sYXN0XSk7XHJcbiAgICAgICAgICBub3NbY2kubGFzdC0xXSA9IHNjb3NbMF07XHJcbiAgICAgICAgICBub3NbY2kubGFzdF0gPSBzY29zWzFdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGNpLm51bT4xKSB7XHJcbiAgICAgICAgICBjb25zdCBncyA9IFtdO1xyXG4gICAgICAgICAgbGV0IGxhc3QgPSAtMjtcclxuICAgICAgICAgIGZvcihsZXQgaSBvZiBjaS5hbGwpIHtcclxuICAgICAgICAgICAgaWYoaS1sYXN0PjEpIHtcclxuICAgICAgICAgICAgICBncy5wdXNoKFtdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnc1tncy5sZW5ndGgtMV0ucHVzaChpKTtcclxuICAgICAgICAgICAgbGFzdCA9IGk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmb3IobGV0IGcgb2YgZ3MpIHtcclxuICAgICAgICAgICAgbGV0IHNnLCBpMDtcclxuICAgICAgICAgICAgaWYobm9zW2dbMF1dLmw+TWF0aC5QSS8yKnRoaXMucC5yKSB7XHJcbiAgICAgICAgICAgICAgc2cgPSAtMTtcclxuICAgICAgICAgICAgICBpMCA9IGdbZy5sZW5ndGgtMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2cgPSAxO1xyXG4gICAgICAgICAgICAgIGkwID0gZ1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IobGV0IGk9aTA7IGk8bm9zLmxlbmd0aCAmJiBpPi0xOyBpKz1zZykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG8gPSBub3NbaStzZ107XHJcbiAgICAgICAgICAgICAgaWYobyAmJiBzZyooby5sLW5vc1tpXS5sKTw9dGhpcy5wLm1hcmdpbikge1xyXG4gICAgICAgICAgICAgICAgby5sPW5vc1tpXS5sK3NnKjIqdGhpcy5wLm1hcmdpbjtcclxuICAgICAgICAgICAgICAgIGlmKG8ubD50aGlzLnAubCB8fCBvLmw8MCkge1xyXG4gICAgICAgICAgICAgICAgICBvLmwgPSBvLmw+dGhpcy5wLmw/IHRoaXMucC5sOiAwO1xyXG4gICAgICAgICAgICAgICAgICBvLmNoID0gMDtcclxuICAgICAgICAgICAgICAgICAgby52PTA7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JhZCBjb2xsaXNpb24nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcyA9IG5vcztcclxuICAgICAgICB0aGlzLmZpbmRBbmRTb2x2ZUNvcm5lckNvbGxpc2lvbnMoKTtcclxuICAgICAgICB0Kz1kdDtcclxuICAgICAgICBkdD10aGlzLnAuc3RhcnREdDtcclxuICAgICAgICBhdHRlbXB0PTA7XHJcbiAgICAgIH1cclxuICAgICAgKytpdDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlbW92ZVN0YXRpY3MoKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVN0YXRpY3MoKSB7XHJcbiAgICBjb25zdCBub3MgPSBbXSwgbm90aWZ5ID0gW1tdLFtdXTtcclxuICAgIGZvcihsZXQgbyBvZiB0aGlzLm9zKSB7XHJcbiAgICAgIGlmKG8uc2ltdWxhdGVDbGIpIHtcclxuICAgICAgICBvLnNpbXVsYXRlQ2xiKG8ubC90aGlzLnAuciwgby5jaCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYoKG8ubD09PXRoaXMucC5sIHx8IG8ubD09PTApICYmIG8udj09PTApIHtcclxuICAgICAgICBpZihvLnJlbW92ZUNsYiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBub3RpZnlbKG8ubCE9PXRoaXMucC5sKSswXS5wdXNoKG8pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBub3MucHVzaChvKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5vcyA9IG5vcztcclxuICAgIGZvcihsZXQgbyBvZiBub3RpZnlbMF0ucmV2ZXJzZSgpKSB7XHJcbiAgICAgIG8ucmVtb3ZlQ2xiKE1hdGguUEksIG8uY2gpO1xyXG4gICAgfVxyXG4gICAgZm9yKGxldCBvIG9mIG5vdGlmeVsxXSkge1xyXG4gICAgICBvLnJlbW92ZUNsYigwLCBvLmNoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpbmRBbmRTb2x2ZUNvcm5lckNvbGxpc2lvbnMoKSB7XHJcbiAgICBpZih0aGlzLm9zLmxlbmd0aCkge1xyXG4gICAgICBjb25zdCBvcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAuLi50aGlzLm9zWzBdLFxyXG4gICAgICAgICAgbDogMCxcclxuICAgICAgICAgIG06IHRoaXMucC5pbmZNLFxyXG4gICAgICAgICAgY2g6IDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIC4uLnRoaXMub3MsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLi4udGhpcy5vc1swXSxcclxuICAgICAgICAgIGw6IDEuMDUqdGhpcy5wLmwsXHJcbiAgICAgICAgICBtOiB0aGlzLnAuaW5mTSxcclxuICAgICAgICAgIGNoOiAwXHJcbiAgICAgICAgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgZm9yKGxldCBpPTE7IGk8b3MubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjb25zdCBhPW9zW2ktMV0sIGI9b3NbaV0sXHJcbiAgICAgICAgICAgICAgYWw9YS5sK3RoaXMucC5jb3JuZXJEZXZpYXRpb24qYS5jaCp0aGlzLnAucixcclxuICAgICAgICAgICAgICBibD1iLmwrdGhpcy5wLmNvcm5lckRldmlhdGlvbipiLmNoKnRoaXMucC5yO1xyXG4gICAgICAgIGlmKDEuMDUqYWw+YmwgJiYgYS5jaD5iLmNoKSB7XHJcbiAgICAgICAgICBjb25zdCBkQ2ggPSBhLmNoLWIuY2gsIGR2PWEubS9hLmZsYnQrYi5tL2IuZmxidCwga2E9YS5tL2EuZmxidC9kdiwga2I9Yi5tL2IuZmxidC9kdjtcclxuICAgICAgICAgIGEuY2g9YS5jaC1rYipkQ2g7XHJcbiAgICAgICAgICBiLmNoPWIuY2gra2EqZENoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc29sdmVDb2xsaXNpb24oYSwgYikge1xyXG4gICAgY29uc3QgbW09KGIubSthLm0pLFxyXG4gICAgICBhdiA9ICgtYS52KmIubSthLm0qYS52KzIqYi5tKmIudikvbW0sXHJcbiAgICAgIGJ2ID0gKGIubSpiLnYtYi52KmEubSsyKmEubSphLnYpL21tO1xyXG4gICAgcmV0dXJuIFt7Li4uYSwgdjogYXZ9LCB7Li4uYiwgdjogYnZ9XTtcclxuICB9XHJcblxyXG4gIGZpbmRDb2xsaXNpb25zKG9zKSB7XHJcbiAgICBjb25zdCBjaSA9IHtcclxuICAgICAgbnVtOiAwLFxyXG4gICAgICBsYXN0OiAwLFxyXG4gICAgICBhbGw6IFtdXHJcbiAgICB9O1xyXG4gICAgZm9yKGxldCBpID0gMTsgaTxvcy5sZW5ndGggJiYgY2kubnVtPDI7ICsraSkge1xyXG4gICAgICBpZihvc1tpLTFdLmw+b3NbaV0ubCB8fCB0aGlzLmlzQ29sbGlzaW9uKG9zW2ktMV0sIG9zW2ldKSkge1xyXG4gICAgICAgIGlmKG9zW2ktMV0ubD5vc1tpXS5sKSB7XHJcbiAgICAgICAgICArK2NpLm51bTtcclxuICAgICAgICB9XHJcbiAgICAgICAgKytjaS5udW07XHJcbiAgICAgICAgY2kubGFzdCA9IGk7XHJcbiAgICAgICAgaWYoY2kuYWxsLmluZGV4T2YoaS0xKT09PS0xKSB7XHJcbiAgICAgICAgICBjaS5hbGwucHVzaChpLTEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjaS5hbGwuaW5kZXhPZihpKT09PS0xKSB7XHJcbiAgICAgICAgICBjaS5hbGwucHVzaChpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjaTtcclxuICB9XHJcblxyXG4gIGlzQ29sbGlzaW9uKGEsIGIpIHtcclxuICAgIHJldHVybiBNYXRoLmFicyhhLmwtYi5sKTx0aGlzLnAubWFyZ2luICYmIGEudj5iLnY7XHJcbiAgfVxyXG5cclxuICBpbnRlZ3JhdGUob3MsIGR0KSB7XHJcbiAgICBjb25zdCBub3MgPSBbXTtcclxuICAgIGZvcihsZXQgbyBvZiBvcykge1xyXG4gICAgICBjb25zdCB2bCA9IE1hdGhVdGlscy5yazQoXHJcbiAgICAgICAgdGhpcy5keS5iaW5kKHtcclxuICAgICAgICAgIGc6IHRoaXMucC5ncmF2aXR5LFxyXG4gICAgICAgICAgcjogdGhpcy5wLnIsXHJcbiAgICAgICAgICBtOiBvLm0sXHJcbiAgICAgICAgICBmOiBvLmYsXHJcbiAgICAgICAgICBjZjogby5jZixcclxuICAgICAgICAgIGNoOiBvLmNoLFxyXG4gICAgICAgICAgZmxidDogby5mbGJ0XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgMCxcclxuICAgICAgICBkdCxcclxuICAgICAgICBbby52LCBvLmwsIG8uY2hdXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IG5vID0ge1xyXG4gICAgICAgIC4uLm8sXHJcbiAgICAgICAgdjogdmxbMF0sXHJcbiAgICAgICAgbDogdmxbMV0sXHJcbiAgICAgICAgY2g6IHZsWzJdXHJcbiAgICAgIH07XHJcbiAgICAgIGlmKG5vLmw8PTAgfHwgbm8ubD49dGhpcy5wLmwpIHtcclxuICAgICAgICBuby5sPW5vLmw8PTA/IDA6IHRoaXMucC5sO1xyXG4gICAgICAgIG5vLnY9MDtcclxuICAgICAgICBuby5jaD0wO1xyXG4gICAgICB9XHJcbiAgICAgIG5vcy5wdXNoKG5vKTtcclxuICAgIH1cclxuICAgIHJldHVybiBub3M7XHJcbiAgfVxyXG5cclxuICBkeSh0LHkpIHtcclxuICAgIGNvbnN0IHY9eVswXSwgbD15WzFdLCBjaD15WzJdLCBmPXRoaXMuZih0aGlzLGwvdGhpcy5yLHYsY2gpLCBjZj10aGlzLmNmKHRoaXMsbC90aGlzLnIsdixjaCk7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAoLXRoaXMuZypNYXRoLmNvcyhsL3RoaXMucikqdGhpcy5tK2YpL3RoaXMubSxcclxuICAgICAgdiswLjAxKihNYXRoLnJhbmRvbSgpLTAuNSksXHJcbiAgICAgIHRoaXMuZmxidCooKDIvKDErTWF0aC5leHAoLTAuMipjZikpLTEpKigxLTIvKDErTWF0aC5leHAoLTUqKE1hdGguYWJzKGNoKS0yKSkpKS1jaClcclxuICAgIF07XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL1NoZWV0UGh5c2ljcy5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvU2hlZXRQaHlzaWNzLmpzIiwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTb3VuZHNFbnZpcm9tZW50IHtcclxuXHJcbiAgY29uc3RydWN0b3IodGVtcGxhdGU9e30pIHtcclxuICAgIHRoaXMuc291bmRzID0gdGVtcGxhdGUuc291bmRzIHx8IHt9O1xyXG4gICAgdGhpcy5hdWRpbyA9IHt9O1xyXG4gICAgaWYodGhpcy5zb3VuZHMuc3RhcnRGbGlwKSB7XHJcbiAgICAgIHRoaXMuYXVkaW8uc3RhcnRGbGlwID0gbmV3IEF1ZGlvKHRoaXMuc291bmRzLnN0YXJ0RmxpcCk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLnNvdW5kcy5lbmRGbGlwKSB7XHJcbiAgICAgIHRoaXMuYXVkaW8uZW5kRmxpcCA9IG5ldyBBdWRpbyh0aGlzLnNvdW5kcy5lbmRGbGlwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEVuYWJsZWQoZW5hYmxlZCkge1xyXG4gICAgdGhpcy5lbmFibGVkID0gZW5hYmxlZDtcclxuICB9XHJcblxyXG4gIHRvZ2xlKCkge1xyXG4gICAgdGhpcy5lbmFibGVkID0gIXRoaXMuZW5hYmxlZDtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBkZWxldGUgdGhpcy5hdWRpby5zdGFydEZsaXA7XHJcbiAgICBkZWxldGUgdGhpcy5hdWRpby5lbmRGbGlwO1xyXG4gIH1cclxuXHJcbiAgc3RhcnRGbGlwKCkge1xyXG4gICAgaWYodGhpcy5lbmFibGVkICYmIHRoaXMuYXVkaW8uc3RhcnRGbGlwKSB7XHJcbiAgICAgIHRoaXMuYXVkaW8uc3RhcnRGbGlwLnBsYXkoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVuZEZsaXAoKSB7XHJcbiAgICBpZih0aGlzLmVuYWJsZWQgJiYgdGhpcy5hdWRpby5zdGFydEZsaXApIHtcclxuICAgICAgdGhpcy5hdWRpby5zdGFydEZsaXAucGF1c2UoKTtcclxuICAgICAgdGhpcy5hdWRpby5zdGFydEZsaXAuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5lbmFibGVkICYmIHRoaXMuYXVkaW8uZW5kRmxpcCkge1xyXG4gICAgICB0aGlzLmF1ZGlvLmVuZEZsaXAucGxheSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlRmxpcHMoZW1pdHRlcikge1xyXG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKCdzdGFydEZsaXAnLCB0aGlzLnN0YXJ0RmxpcC5iaW5kKHRoaXMpKTtcclxuICAgIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcignZW5kRmxpcCcsIHRoaXMuZW5kRmxpcC5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvU291bmRzRW52aXJvbWVudC5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvU291bmRzRW52aXJvbWVudC5qcyIsImltcG9ydCBXaWRnZXRDb250cm9sbGVyIGZyb20gJ1dpZGdldENvbnRyb2xsZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9jQ29udHJvbGxlciBleHRlbmRzIFdpZGdldENvbnRyb2xsZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih2aWV3LCBib29rQ3RybCkge1xyXG4gICAgc3VwZXIodmlldyk7XHJcbiAgICB0aGlzLmJvb2tDdHJsID0gYm9va0N0cmw7XHJcbiAgICB0aGlzLnRhYiA9ICdub25lJztcclxuICB9XHJcblxyXG4gIHNldFRodW1ibmFpbHModGh1bWJuYWlscykge1xyXG4gICAgdGhpcy50aHVtYm5haWxzID0gdGh1bWJuYWlscztcclxuICAgIHRodW1ibmFpbHMub25OYXZpZ2F0ZSA9IHRoaXMubmF2aWdhdGVUaHVtYm5haWxzLmJpbmQodGhpcyk7XHJcbiAgICBpZih0aGlzLnRhYiA9PT0gJ25vbmUnKSB7XHJcbiAgICAgIHRoaXMudGFiID0gJ3RodW1ibmFpbHMnO1xyXG4gICAgfVxyXG4gICAgdGhpcy5maXJlQ2hhbmdlKCk7XHJcbiAgfVxyXG5cclxuICBzZXRTZWFyY2goc2VhcmNoKSB7XHJcbiAgICB0aGlzLnNlYXJjaCA9IHNlYXJjaDtcclxuICAgIHNlYXJjaC5vbk5hdmlnYXRlID0gdGhpcy5uYXZpZ2F0ZVNlYXJjaC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5maXJlQ2hhbmdlKCk7XHJcbiAgfVxyXG5cclxuICBzZXRCb29rbWFya3MoYm9va21hcmtzLCBwZGYpIHtcclxuICAgIHRoaXMuYm9va21hcmtzID0gYm9va21hcmtzO1xyXG4gICAgdGhpcy5wZGYgPSBwZGY7XHJcbiAgICBib29rbWFya3Mub25OYXZpZ2F0ZSA9IHRoaXMubmF2aWdhdGVCb29rbWFya3MuYmluZCh0aGlzKTtcclxuICAgIGlmKGJvb2ttYXJrcy5nZXRTaXplKCkpIHtcclxuICAgICAgdGhpcy50YWIgPSAnYm9va21hcmtzJztcclxuICAgICAgdGhpcy5pc0Jvb2ttYXJrcyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpcmVDaGFuZ2UoKTtcclxuICB9XHJcblxyXG4gIGNtZEJvb2ttYXJrcygpIHtcclxuICAgIHRoaXMudGFiID0gJ2Jvb2ttYXJrcyc7XHJcbiAgICB0aGlzLmZpcmVDaGFuZ2UoKTtcclxuICB9XHJcblxyXG4gIGNtZFRodW1ibmFpbHMoKSB7XHJcbiAgICB0aGlzLnRhYiA9ICd0aHVtYm5haWxzJztcclxuICAgIHRoaXMuZmlyZUNoYW5nZSgpO1xyXG4gIH1cclxuXHJcbiAgY21kU2VhcmNoKCkge1xyXG4gICAgdGhpcy50YWIgPSAnc2VhcmNoJztcclxuICAgIHRoaXMuZmlyZUNoYW5nZSgpO1xyXG4gIH1cclxuXHJcbiAgY21kQ2xvc2VUb2MoKSB7XHJcbiAgICB0aGlzLmhpZGUoKTtcclxuICB9XHJcblxyXG4gIG5hdmlnYXRlVGh1bWJuYWlscyhudW1iZXIpIHtcclxuICAgIHRoaXMuYm9va0N0cmwuZ29Ub1BhZ2UobnVtYmVyKTtcclxuICB9XHJcblxyXG4gIG5hdmlnYXRlU2VhcmNoKG51bWJlcikge1xyXG4gICAgdGhpcy5ib29rQ3RybC5nb1RvUGFnZShudW1iZXIpO1xyXG4gIH1cclxuXHJcbiAgbmF2aWdhdGVCb29rbWFya3MoaXRlbSkge1xyXG4gICAgaWYoaXRlbS51cmwpIHtcclxuICAgICAgd2luZG93Lm9wZW4oaXRlbS51cmwsICdfYmxhbmsnKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoaXRlbS5kZXN0KSB7XHJcbiAgICAgIGxldCBkZXN0UHJvbWlzZTtcclxuICAgICAgaWYodHlwZW9mIGl0ZW0uZGVzdD09PSdzdHJpbmcnKSB7XHJcbiAgICAgICAgZGVzdFByb21pc2UgPSB0aGlzLnBkZi5oYW5kbGVyLmdldERlc3RpbmF0aW9uKGl0ZW0uZGVzdCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgZGVzdFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoaXRlbS5kZXN0KTtcclxuICAgICAgfVxyXG4gICAgICBkZXN0UHJvbWlzZS5cclxuICAgICAgICB0aGVuKChkZXN0KT0+IHRoaXMucGRmLmhhbmRsZXIuZ2V0UGFnZUluZGV4KGRlc3RbMF0pKS5cclxuICAgICAgICB0aGVuKChudW1iZXIpPT4gdGhpcy5ib29rQ3RybC5nb1RvUGFnZShudW1iZXIpKS5cclxuICAgICAgICBjYXRjaCgoKT0+IGNvbnNvbGUuZXJyb3IoJ0JhZCBib29rbWFyaycpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZVZpZXcoKSB7XHJcbiAgICBpZih0aGlzLnZpZXcpIHtcclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCd3aWRUb2NNZW51Jywge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMudmlldy5zZXRTdGF0ZSgnd2lkVGh1bWJuYWlscycsIHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy50YWI9PT0ndGh1bWJuYWlscycsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCd3aWRTZWFyY2gnLCB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMudGFiPT09J3NlYXJjaCcsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCd3aWRCb29rbWFya3MnLCB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMudGFiPT09J2Jvb2ttYXJrcycsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCdjbWRCb29rbWFya3MnLCB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgYWN0aXZlOiB0aGlzLnRhYj09PSdib29rbWFya3MnXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnZpZXcuc2V0U3RhdGUoJ2NtZENsb3NlVG9jJywge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMudmlldy5zZXRTdGF0ZSgnY21kVGh1bWJuYWlscycsIHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBhY3RpdmU6IHRoaXMudGFiPT09J3RodW1ibmFpbHMnXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnZpZXcuc2V0U3RhdGUoJ2NtZFNlYXJjaCcsIHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBhY3RpdmU6IHRoaXMudGFiPT09J3NlYXJjaCdcclxuICAgICAgfSk7XHJcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PiB0aGlzLnRodW1ibmFpbHMuc2V0RW5hYmxlKHRoaXMudmlzaWJsZSAmJiB0aGlzLnRhYj09PSd0aHVtYm5haWxzJykpO1xyXG4gICAgICBzdXBlci51cGRhdGVWaWV3KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL1RvY0NvbnRyb2xsZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL1RvY0NvbnRyb2xsZXIuanMiLCJpbXBvcnQge1RIUkVFfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IFRocmVlVXRpbHMgZnJvbSAnVGhyZWVVdGlscyc7XHJcblxyXG5jb25zdCByZXNYID0gMTEsXHJcbiAgICAgIHJlc1kgPSAyLFxyXG4gICAgICByZXNaID0gMTUsXHJcbiAgICAgIHNjYWxlID0gMSxcclxuICAgICAgZmFjZXMgPSBbXTtcclxuXHJcbmNvbnN0IGZyb250R2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShzY2FsZSwgc2NhbGUsIHJlc1gtMSwgcmVzWS0xKTtcclxuZnJvbnRHZW9tZXRyeS50cmFuc2xhdGUoMC41KnNjYWxlLDAuNSpzY2FsZSxzY2FsZSk7XHJcbmNvbnN0IGJhY2tHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KHNjYWxlLCBzY2FsZSwgcmVzWC0xLCByZXNZLTEpO1xyXG5iYWNrR2VvbWV0cnkucm90YXRlWShNYXRoLlBJKTtcclxuYmFja0dlb21ldHJ5LnRyYW5zbGF0ZSgwLjUqc2NhbGUsMC41KnNjYWxlLDApO1xyXG5jb25zdCBsZWZ0R2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShzY2FsZSwgc2NhbGUsIHJlc1otMSwgcmVzWS0xKTtcclxubGVmdEdlb21ldHJ5LnJvdGF0ZVkoLU1hdGguUEkvMik7XHJcbmxlZnRHZW9tZXRyeS50cmFuc2xhdGUoMCwwLjUqc2NhbGUsMC41KnNjYWxlKTtcclxuY29uc3QgcmlnaHRHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KHNjYWxlLCBzY2FsZSwgcmVzWi0xLCByZXNZLTEpO1xyXG5yaWdodEdlb21ldHJ5LnJvdGF0ZVkoTWF0aC5QSS8yKTtcclxucmlnaHRHZW9tZXRyeS50cmFuc2xhdGUoc2NhbGUsMC41KnNjYWxlLDAuNSpzY2FsZSk7XHJcbmNvbnN0IHRvcEdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoc2NhbGUsIHNjYWxlLCByZXNYLTEsIHJlc1otMSk7XHJcbnRvcEdlb21ldHJ5LnJvdGF0ZVgoLU1hdGguUEkvMik7XHJcbnRvcEdlb21ldHJ5LnRyYW5zbGF0ZSgwLjUqc2NhbGUsc2NhbGUsMC41KnNjYWxlKTtcclxuY29uc3QgYm90dG9tR2VvbWV0cnkgPSB0b3BHZW9tZXRyeS5jbG9uZSgpO1xyXG5ib3R0b21HZW9tZXRyeS50cmFuc2xhdGUoMCwtc2NhbGUsMCk7XHJcbmZvcihsZXQgZiBvZiBib3R0b21HZW9tZXRyeS5mYWNlcykge1xyXG4gIFtmLmEsIGYuYl0gPSBbZi5iLCBmLmFdO1xyXG59XHJcblxyXG5jb25zdCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5HZW9tZXRyeSgpO1xyXG5nZW9tZXRyeS52ZXJ0aWNlcyA9IFsuLi5ib3R0b21HZW9tZXRyeS52ZXJ0aWNlcywgLi4udG9wR2VvbWV0cnkudmVydGljZXNdO1xyXG5cclxuY29uc3QgYWRkRmFjZXMgPSAoZnMsIG1hcCk9PiB7XHJcbiAgZm9yKGxldCBmIG9mIGZzKSB7XHJcbiAgICBnZW9tZXRyeS5mYWNlcy5wdXNoKG5ldyBUSFJFRS5GYWNlMyhtYXAoZi5hKSwgbWFwKGYuYiksIG1hcChmLmMpKSk7XHJcbiAgfVxyXG4gIGZhY2VzLnB1c2goZ2VvbWV0cnkuZmFjZXMubGVuZ3RoKTtcclxufTtcclxuXHJcbmNvbnN0IG1hcFZlcnRpY2VzID0gKHNyYywgZHN0KT0+IHtcclxuICBjb25zdCBtYXAgPSBbXTtcclxuICBjb25zdCBlcSA9IChhLCBiKT0+IE1hdGguYWJzKGEueC1iLngpK01hdGguYWJzKGEueS1iLnkpK01hdGguYWJzKGEuei1iLnopPDFlLTQ7XHJcbiAgZm9yKGxldCBpPTA7IGk8c3JjLmxlbmd0aDsgKytpKSB7XHJcbiAgICBmb3IobGV0IGo9MDsgajxkc3QubGVuZ3RoOyArK2opIHtcclxuICAgICAgaWYoZXEoc3JjW2ldLCBkc3Rbal0pKSB7XHJcbiAgICAgICAgbWFwW2ldPWo7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG1hcDtcclxufTtcclxuXHJcbmNvbnN0IGZyb250TWFwID0gbWFwVmVydGljZXMoZnJvbnRHZW9tZXRyeS52ZXJ0aWNlcywgZ2VvbWV0cnkudmVydGljZXMpO1xyXG5jb25zdCBiYWNrTWFwID0gbWFwVmVydGljZXMoYmFja0dlb21ldHJ5LnZlcnRpY2VzLCBnZW9tZXRyeS52ZXJ0aWNlcyk7XHJcbmNvbnN0IGxlZnRNYXAgPSBtYXBWZXJ0aWNlcyhsZWZ0R2VvbWV0cnkudmVydGljZXMsIGdlb21ldHJ5LnZlcnRpY2VzKTtcclxuY29uc3QgcmlnaHRNYXAgPSBtYXBWZXJ0aWNlcyhyaWdodEdlb21ldHJ5LnZlcnRpY2VzLCBnZW9tZXRyeS52ZXJ0aWNlcyk7XHJcblxyXG5hZGRGYWNlcyh0b3BHZW9tZXRyeS5mYWNlcywgKGkpPT4gaStib3R0b21HZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGgpO1xyXG5hZGRGYWNlcyhib3R0b21HZW9tZXRyeS5mYWNlcywgKGkpPT4gaSk7XHJcbmFkZEZhY2VzKGZyb250R2VvbWV0cnkuZmFjZXMsIChpKT0+IGZyb250TWFwW2ldKTtcclxuYWRkRmFjZXMoYmFja0dlb21ldHJ5LmZhY2VzLCAoaSk9PiBiYWNrTWFwW2ldKTtcclxuYWRkRmFjZXMobGVmdEdlb21ldHJ5LmZhY2VzLCAoaSk9PiBsZWZ0TWFwW2ldKTtcclxuYWRkRmFjZXMocmlnaHRHZW9tZXRyeS5mYWNlcywgKGkpPT4gcmlnaHRNYXBbaV0pO1xyXG5mYWNlcy5wb3AoKTtcclxuXHJcblRocmVlVXRpbHMuY29tcHV0ZUZhY2VWZXJ0ZXhVdnMoZ2VvbWV0cnksIGZhY2VzKTtcclxuXHJcbmdlb21ldHJ5LmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7XHJcbi8vZ2VvbWV0cnkuY29tcHV0ZUZhY2VOb3JtYWxzKCk7XHJcbmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO1xyXG4vL2dlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xyXG5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGUgPSB0cnVlO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cdHJlc1gsXHJcblx0cmVzWSxcclxuXHRyZXNaLFxyXG5cdGZhY2VzLFxyXG5cdGdlb21ldHJ5XHJcbn07XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21vZGVscy9zaGVldEJsb2NrLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvbW9kZWxzL3NoZWV0QmxvY2suanMiLCJjb25zdCBtb3VzZUJ1dHRvbnMgPSB7XHJcbiAgTGVmdDogMCxcclxuICBNaWRkbGU6IDEsXHJcbiAgUmlnaHQ6IDJcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcm9wcygpIHtcclxuICByZXR1cm4ge1xyXG4gICAgZXBzOiAxZS00LFxyXG4gICAgc2tpbjoge1xyXG4gICAgICBkZWZhdWx0OiAnc2hvcnQtd2hpdGUtYm9vay12aWV3JyxcclxuICAgIH0sXHJcbiAgICBzY2FsZToge1xyXG4gICAgICBkZWZhdWx0OiAwLjksXHJcbiAgICAgIG1pbjogMC45LFxyXG4gICAgICBtYXg6IDIuNSxcclxuICAgICAgbGV2ZWxzOiA3XHJcbiAgICB9LFxyXG4gICAgbGlnaHRpbmc6IHtcclxuICAgICAgZGVmYXVsdDogMC43LFxyXG4gICAgICBtaW46IDAsXHJcbiAgICAgIG1heDogMSxcclxuICAgICAgbGV2ZWxzOiA3XHJcbiAgICB9LFxyXG4gICAgcGFuOiB7XHJcbiAgICAgIHNwZWVkOiA1MFxyXG4gICAgfSxcclxuICAgIGxvYWRpbmdBbmltYXRpb246IHtcclxuICAgICAgc2tpbjogZmFsc2UsXHJcbiAgICAgIGJvb2s6IHRydWVcclxuICAgIH0sXHJcbiAgICBhdXRvUmVzb2x1dGlvbjoge1xyXG4gICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICBjb2VmZmljaWVudDogMS41XHJcbiAgICB9LFxyXG4gICAgYWN0aW9uczoge1xyXG4gICAgICBjbWRab29tSW46IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgICBjbWRab29tT3V0OiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWREZWZhdWx0Wm9vbToge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgdHlwZTogJ2RibGNsaWNrJyxcclxuICAgICAgICBjb2RlOiAwXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFRvYzoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgY21kRmFzdEJhY2t3YXJkOiB7XHJcbiAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgY21kQmFja3dhcmQ6IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZEZvcndhcmQ6IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZEZhc3RGb3J3YXJkOiB7XHJcbiAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgY21kU2F2ZToge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgY21kUHJpbnQ6IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZEZ1bGxTY3JlZW46IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIHdpZFNldHRpbmdzOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRTbWFydFBhbjoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgICBjbWRTaW5nbGVQYWdlOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlLFxyXG4gICAgICAgIGFjdGl2ZUZvck1vYmlsZTogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgY21kU291bmRzOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICBhY3RpdmU6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgY21kU3RhdHM6IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgY21kTGlnaHRpbmdVcDoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgY21kTGlnaHRpbmdEb3duOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRQYW5MZWZ0OiB7XHJcbiAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgY21kUGFuUmlnaHQ6IHtcclxuICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRQYW5VcDoge1xyXG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFBhbkRvd246IHtcclxuICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBtb3VzZUNtZFJvdGF0ZToge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgdHlwZTogJ21vdXNlZHJhZycsXHJcbiAgICAgICAgY29kZTogbW91c2VCdXR0b25zLlJpZ2h0XHJcbiAgICAgIH0sXHJcbiAgICAgIG1vdXNlQ21kRHJhZ1pvb206IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIHR5cGU6ICdtb3VzZWRyYWcnLFxyXG4gICAgICAgIGNvZGU6IG1vdXNlQnV0dG9ucy5NaWRkbGVcclxuICAgICAgfSxcclxuICAgICAgbW91c2VDbWRQYW46IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIHR5cGU6ICdtb3VzZWRyYWcnLFxyXG4gICAgICAgIGNvZGU6IG1vdXNlQnV0dG9ucy5MZWZ0XHJcbiAgICAgIH0sXHJcbiAgICAgIG1vdXNlQ21kV2hlZWxab29tOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICB0eXBlOiAnbW91c2V3aGVlbCcsXHJcbiAgICAgICAgY29kZTogMFxyXG4gICAgICB9LFxyXG4gICAgICB0b3VjaENtZFJvdGF0ZToge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgdHlwZTogJ3RvdWNoZHJhZycsXHJcbiAgICAgICAgY29kZTogM1xyXG4gICAgICB9LFxyXG4gICAgICB0b3VjaENtZFpvb206IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIHR5cGU6ICd0b3VjaGRyYWcnLFxyXG4gICAgICAgIGNvZGU6IDJcclxuICAgICAgfSxcclxuICAgICAgdG91Y2hDbWRQYW46IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIHR5cGU6ICd0b3VjaGRyYWcnLFxyXG4gICAgICAgIGNvZGU6IDFcclxuICAgICAgfSxcclxuICAgICAgdG91Y2hDbWRTd2lwZToge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgdHlwZTogJ3RvdWNoZHJhZycsXHJcbiAgICAgICAgY29kZTogMVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcHJvcHMvYm9va0NvbnRyb2xsZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9wcm9wcy9ib29rQ29udHJvbGxlci5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBJbWFnZUJhc2UgZnJvbSAnLi9JbWFnZUJhc2UnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmxhbmtJbWFnZSBleHRlbmRzIEltYWdlQmFzZSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQsIGNvbG9yKSB7XHJcbiAgICBzdXBlcihjb250ZXh0LCB3aWR0aCwgaGVpZ2h0LCBjb2xvcik7XHJcblxyXG4gICAgUHJvbWlzZS5yZXNvbHZlKCkuXHJcbiAgICAgIHRoZW4oKCk9PiB7XHJcbiAgICAgICAgdGhpcy5zdGFydFJlbmRlciA9ICgpPT4ge1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJCbGFua1BhZ2UoKTtcclxuICAgICAgICAgIHRoaXMuZmluaXNoUmVuZGVyKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmZpbmlzaExvYWQoKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0JsYW5rSW1hZ2UuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9CbGFua0ltYWdlLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvb2ttYXJrcyB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgaXRlbXMsIGdldFRpdGxlPShpKT0+IGkudGl0bGUsIGdldEl0ZW1zPShpKT0+aS5pdGVtcykge1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB0aGlzLm1hcCA9IFtdO1xyXG4gICAgdGhpcy5nZXRUaXRsZSA9IGdldFRpdGxlO1xyXG4gICAgdGhpcy5nZXRJdGVtcyA9IGdldEl0ZW1zO1xyXG4gICAgdGhpcy5ub2RlcyA9IHRoaXMubWFwTm9kZXMoaXRlbXMsIHRoaXMubWFwKTtcclxuXHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICB0b2dsZTogKGUpPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBsZXQgbGkgPSAkKGUudGFyZ2V0KTtcclxuICAgICAgICB3aGlsZShsaVswXSAmJiBsaVswXSE9PWNvbnRhaW5lclswXSAmJiAhbGkuaGFzQ2xhc3MoJ2l0ZW0nKSkge1xyXG4gICAgICAgICAgbGkgPSAkKGxpWzBdLnBhcmVudE5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihsaS5oYXNDbGFzcygnaXRlbScpKSB7XHJcbiAgICAgICAgICBsZXQgY21kID0gJChlLnRhcmdldCk7XHJcbiAgICAgICAgICB3aGlsZShjbWRbMF0gJiYgY21kWzBdIT09bGlbMF0gJiYgIWNtZC5oYXNDbGFzcygnY21kJykpIHtcclxuICAgICAgICAgICAgY21kID0gJChjbWRbMF0ucGFyZW50Tm9kZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihjbWQuaGFzQ2xhc3MoJ2NtZCcpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm1hcFtsaS5hdHRyKCdkYXRhLWlkJyldO1xyXG4gICAgICAgICAgICBpZihjbWQuaGFzQ2xhc3MoJ3RvZ2xlJykpIHtcclxuICAgICAgICAgICAgICBub2RlLm1pbmltaXplZCA9ICFub2RlLm1pbmltaXplZDtcclxuICAgICAgICAgICAgICBpZihub2RlLm1pbmltaXplZCkge1xyXG4gICAgICAgICAgICAgICAgbGkuZmluZCgndWwnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGxpLmZpbmQoJy50b2dsZScpLmFkZENsYXNzKCdtaW5pbWl6ZWQnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsaS5maW5kKCcudG9nbGUnKS5yZW1vdmVDbGFzcygnbWluaW1pemVkJyk7XHJcbiAgICAgICAgICAgICAgICBsaS5hcHBlbmQoKHRoaXMucmVuZGVyTm9kZShub2RlKS5tYXRjaCgvPHVsLio8XFwvdWw+LykgfHwgWycnXSlbMF0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBpZih0aGlzLm9uTmF2aWdhdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25OYXZpZ2F0ZShub2RlLml0ZW0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnRhaW5lci5vbignY2xpY2snLCB0aGlzLmJpbmRzLnRvZ2xlKTtcclxuICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgfVxyXG5cclxuICBnZXRTaXplKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubWFwLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5vZmYoJ2NsaWNrJywgdGhpcy5iaW5kcy50b2dsZSk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5odG1sKCcnKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIHRoaXMuY29udGFpbmVyLmh0bWwodGhpcy5yZW5kZXJOb2Rlcyh0aGlzLm5vZGVzKSk7XHJcbiAgfVxyXG5cclxuICBmb3JFYWNoKGYsIG5vZGVzPXRoaXMubm9kZXMpIHtcclxuICAgIGZvcihsZXQgbm9kZSBvZiAobm9kZXMgfHwgW10pKSB7XHJcbiAgICAgIGYobm9kZSk7XHJcbiAgICAgIHRoaXMuZm9yRWFjaChmLCBub2RlLmNoaWxkcmVuKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGV4cGFuZCgpIHtcclxuICAgIHRoaXMuZm9yRWFjaCgobik9PiBuLm1pbmltaXplZCA9IGZhbHNlKTtcclxuICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgfVxyXG5cclxuICBtaW5pbWl6ZSgpIHtcclxuICAgIHRoaXMuZm9yRWFjaCgobik9PiBuLm1pbmltaXplZCA9IHRydWUpO1xyXG4gICAgdGhpcy51cGRhdGUoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlck5vZGUobm9kZSkge1xyXG4gICAgcmV0dXJuIFsnPGRpdiBjbGFzcz1cImFyZWFcIj4nLFxyXG4gICAgICBub2RlLmNoaWxkcmVuPyAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImNtZCB0b2dsZScgKyAobm9kZS5taW5pbWl6ZWQ/ICcgbWluaW1pemVkJzogJycpICsgJ1wiPjxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtcmlnaHRcIj48L2k+PC9hPiAnOiAnPGkgY2xhc3M9XCJ3aGl0ZS1zcGFjZVwiPjwvaT4gJyxcclxuICAgICAgJzxhIGNsYXNzPVwiY21kXCIgdGl0bGU9XCInLCBub2RlLnRpdGxlLCdcIiBocmVmPVwiI1wiPicsIG5vZGUudGl0bGUsICc8L2E+PC9kaXY+JyxcclxuICAgICAgbm9kZS5taW5pbWl6ZWQ/ICcnOiB0aGlzLnJlbmRlck5vZGVzKG5vZGUuY2hpbGRyZW4pXHJcbiAgICBdLmpvaW4oJycpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTm9kZXMobm9kZXMpIHtcclxuICAgIGxldCByZXMgPSBbJzxkaXYgY2xhc3M9XCJib29rbWFya3NcIj4nXTtcclxuICAgIGlmKG5vZGVzICYmIG5vZGVzLmxlbmd0aCkge1xyXG4gICAgICByZXMucHVzaCgnPHVsIGNsYXNzPVwibGV2ZWwtJywgbm9kZXNbMF0ubGV2ZWwsICdcIj4nKTtcclxuICAgICAgZm9yKGxldCBub2RlIG9mIG5vZGVzKSB7XHJcbiAgICAgICAgcmVzLnB1c2goW1xyXG4gICAgICAgICAgJzxsaSBjbGFzcz1cIml0ZW1cIiBkYXRhLWlkPVwiJywgbm9kZS5pZCwnXCI+JyxcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJOb2RlKG5vZGUpLFxyXG4gICAgICAgICAgJzwvbGk+J10uam9pbignJykpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlcy5wdXNoKCc8L3VsPicpO1xyXG4gICAgfVxyXG4gICAgcmVzLnB1c2goJzwvZGl2PicpO1xyXG4gICAgcmV0dXJuIHJlcy5qb2luKCcnKTtcclxuICB9XHJcblxyXG4gIG1hcE5vZGVzKGl0ZW1zLCBtYXA9W10sIGxldmVsPTApIHtcclxuICAgIGxldCBub2RlcyA9IG51bGw7XHJcbiAgICBpZihpdGVtcyAmJiBpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgbm9kZXM9W107XHJcbiAgICAgIGZvcihsZXQgaXRlbSBvZiBpdGVtcykge1xyXG4gICAgICAgIGNvbnN0IGlkID0gbWFwLmxlbmd0aDtcclxuICAgICAgICBtYXAucHVzaCh1bmRlZmluZWQpO1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSB7XHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIHRpdGxlOiB0aGlzLmdldFRpdGxlKGl0ZW0pLFxyXG4gICAgICAgICAgbGV2ZWwsXHJcbiAgICAgICAgICBpdGVtLFxyXG4gICAgICAgICAgbWluaW1pemVkOiB0cnVlLFxyXG4gICAgICAgICAgY2hpbGRyZW46IHRoaXMubWFwTm9kZXModGhpcy5nZXRJdGVtcyhpdGVtKSwgbWFwLCBsZXZlbCsxKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcclxuICAgICAgICBtYXBbaWRdID0gbm9kZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vZGVzO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvQm9va21hcmtzLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQm9va21hcmtzLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERldGVjdG9yIHtcclxuXHJcblx0c3RhdGljIGNhbnZhcyA9ICEhIHdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG5cdHN0YXRpYyB3ZWJnbCA9IChmdW5jdGlvbigpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG5cdFx0XHRyZXR1cm4gISEgKHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQgJiYgKGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpIHx8IGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKSkpO1xyXG5cdFx0fVxyXG5cdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0pKCk7XHJcblxyXG5cdHN0YXRpYyB3b3JrZXJzID0gISEgd2luZG93LldvcmtlcjtcclxuXHJcblx0c3RhdGljIGZpbGVhcGkgPSB3aW5kb3cuRmlsZSAmJiB3aW5kb3cuRmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZUxpc3QgJiYgd2luZG93LkJsb2I7XHJcblxyXG5cdHN0YXRpYyBnZXRXZWJHTEVycm9yTWVzc2FnZSgpIHtcclxuXHRcdGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdGVsZW1lbnQuaWQgPSAnd2ViZ2wtZXJyb3ItbWVzc2FnZSc7XHJcblx0XHRlbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAnbW9ub3NwYWNlJztcclxuXHRcdGVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSAnMTNweCc7XHJcblx0XHRlbGVtZW50LnN0eWxlLmZvbnRXZWlnaHQgPSAnbm9ybWFsJztcclxuXHRcdGVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcblx0XHRlbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSAnI2ZmZic7XHJcblx0XHRlbGVtZW50LnN0eWxlLmNvbG9yID0gJyMwMDAnO1xyXG5cdFx0ZWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzEuNWVtJztcclxuXHRcdGVsZW1lbnQuc3R5bGUud2lkdGggPSAnNDAwcHgnO1xyXG5cdFx0ZWxlbWVudC5zdHlsZS5tYXJnaW4gPSAnNWVtIGF1dG8gMCc7XHJcblxyXG5cdFx0aWYgKCFEZXRlY3Rvci53ZWJnbCkge1xyXG5cdFx0XHRlbGVtZW50LmlubmVySFRNTCA9IHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQgPyBbXHJcblx0XHRcdFx0J1lvdXIgZ3JhcGhpY3MgY2FyZCBkb2VzIG5vdCBzZWVtIHRvIHN1cHBvcnQgPGEgaHJlZj1cImh0dHA6Ly9raHJvbm9zLm9yZy93ZWJnbC93aWtpL0dldHRpbmdfYV9XZWJHTF9JbXBsZW1lbnRhdGlvblwiIHN0eWxlPVwiY29sb3I6IzAwMFwiPldlYkdMPC9hPi48YnIgLz4nLFxyXG5cdFx0XHRcdCdGaW5kIG91dCBob3cgdG8gZ2V0IGl0IDxhIGhyZWY9XCJodHRwOi8vZ2V0LndlYmdsLm9yZy9cIiBzdHlsZT1cImNvbG9yOiMwMDBcIj5oZXJlPC9hPi4nXHJcblx0XHRcdF0uam9pbignXFxuJykgOiBbXHJcblx0XHRcdFx0J1lvdXIgYnJvd3NlciBkb2VzIG5vdCBzZWVtIHRvIHN1cHBvcnQgPGEgaHJlZj1cImh0dHA6Ly9raHJvbm9zLm9yZy93ZWJnbC93aWtpL0dldHRpbmdfYV9XZWJHTF9JbXBsZW1lbnRhdGlvblwiIHN0eWxlPVwiY29sb3I6IzAwMFwiPldlYkdMPC9hPi48YnIvPicsXHJcblx0XHRcdFx0J0ZpbmQgb3V0IGhvdyB0byBnZXQgaXQgPGEgaHJlZj1cImh0dHA6Ly9nZXQud2ViZ2wub3JnL1wiIHN0eWxlPVwiY29sb3I6IzAwMFwiPmhlcmU8L2E+LidcclxuXHRcdFx0XS5qb2luKCdcXG4nKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBlbGVtZW50O1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGFkZEdldFdlYkdMTWVzc2FnZShwYXJhbWV0ZXJzKSB7XHJcblx0XHRsZXQgcGFyZW50LCBpZCwgZWxlbWVudDtcclxuXHRcdHBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzIHx8IHt9O1xyXG5cclxuXHRcdHBhcmVudCA9IHBhcmFtZXRlcnMucGFyZW50IHx8ICQoZG9jdW1lbnQuYm9keSk7XHJcblx0XHRpZCA9IHBhcmFtZXRlcnMuaWQgfHwgJ29sZGllJztcclxuXHJcblx0XHRlbGVtZW50ID0gRGV0ZWN0b3IuZ2V0V2ViR0xFcnJvck1lc3NhZ2UoKTtcclxuXHRcdC8vZWxlbWVudC5pZCA9IGlkO1xyXG5cclxuXHRcdHBhcmVudC5hcHBlbmQoZWxlbWVudCk7XHJcblx0fVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9EZXRlY3Rvci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0RldGVjdG9yLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRG9jTW91c2VTaW11bGF0b3Ige1xyXG5cclxuICBzdGF0aWMgSE9WRVIgPSAnU0lNVUxBVEVELUhPVkVSJztcclxuICBzdGF0aWMgQUNUSVZFID0gJ1NJTVVMQVRFRC1BQ1RJVkUnO1xyXG5cclxuICBjb25zdHJ1Y3RvcihqRnJhbWUsIGVsZW1lbnQsIGJFbGVtZW50PWRvY3VtZW50LmJvZHkpIHtcclxuICAgIHRoaXMuakZyYW1lID0gakZyYW1lO1xyXG4gICAgdGhpcy53bmQgPSBqRnJhbWVbMF0uY29udGVudFdpbmRvdztcclxuICAgIHRoaXMuZG9jID0gakZyYW1lWzBdLmNvbnRlbnREb2N1bWVudDtcclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQgfHwgZG9jLmJvZHk7XHJcbiAgICB0aGlzLmJFbGVtZW50ID0gYkVsZW1lbnQ7XHJcbiAgICB0aGlzLnJlc2VuZFByb3BlcnRpZXMgPSB0aGlzLmdldERlZmF1bHRSZXNlbmRQcm9wZXJ0aWVzKCk7XHJcbiAgICB0aGlzLnVuZGVmaW5lZFByb3BlcnRpZXMgPSB0aGlzLmdldERlZmF1bHRVbmRlZmluZWRQcm9wZXJ0aWVzKCk7XHJcbiAgICB0aGlzLmN1cnNvcnMgPSBbXTtcclxuICAgIHRoaXMub25Eb2NDaGFuZ2VDbGJzID0gW107XHJcbiAgICBjb25zdCB0ZXJtcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmaW5kOiAnOmhvdmVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2U6ICcuJytEb2NNb3VzZVNpbXVsYXRvci5IT1ZFUlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZmluZDogJzphY3RpdmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZTogJy4nK0RvY01vdXNlU2ltdWxhdG9yLkFDVElWRVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgXTtcclxuICAgIGxldCBzdHlsZSA9IFsnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPiddO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRvYy5zdHlsZVNoZWV0cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICBsZXQgc3MgPSB0aGlzLmRvYy5zdHlsZVNoZWV0c1tpXTtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzcy5jc3NSdWxlcy5sZW5ndGg7ICsraikge1xyXG4gICAgICAgIGxldCByID0gc3MuY3NzUnVsZXNbal0sIGNzc1RleHQ7XHJcbiAgICAgICAgZm9yKGxldCB0ZXJtIG9mIHRlcm1zKSB7XHJcbiAgICAgICAgICBpZiAofnIuc2VsZWN0b3JUZXh0LmluZGV4T2YodGVybS5maW5kKSkge1xyXG4gICAgICAgICAgICBjc3NUZXh0ID0gKGNzc1RleHQgfHwgci5jc3NUZXh0KS5yZXBsYWNlKG5ldyBSZWdFeHAodGVybS5maW5kLCAnZycpLCB0ZXJtLnJlcGxhY2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjc3NUZXh0KSB7XHJcbiAgICAgICAgICBzdHlsZS5wdXNoKGNzc1RleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3R5bGUucHVzaCgnPC9zdHlsZT4nKTtcclxuICAgICQodGhpcy5kb2MuaGVhZCkuYXBwZW5kKCQoc3R5bGUuam9pbignJykpKTtcclxuICB9XHJcblxyXG4gIGNvbnZlcnRDb29yZHMoeCwgeSkge1xyXG4gICAgY29uc3QgakVsZW1lbnQgPSAkKHRoaXMuZWxlbWVudCk7XHJcbiAgICBjb25zdCBvZmZzZXQgPSBqRWxlbWVudC5vZmZzZXQoKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHg6IG9mZnNldC5sZWZ0K2pFbGVtZW50LndpZHRoKCkqeCxcclxuICAgICAgeTogb2Zmc2V0LnRvcCtqRWxlbWVudC5oZWlnaHQoKSooMS15KVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHRyaWdnZXJFdmVudChlbGVtZW50LCBlLCBwLCB0eXBlLCBhZHZhbmNlZFByb3BzKSB7XHJcbiAgICBjb25zdCBwcm9wcyA9IHt9O1xyXG4gICAgZm9yKGxldCBuIG9mIHRoaXMucmVzZW5kUHJvcGVydGllcykge1xyXG4gICAgICBwcm9wc1tuXSA9IGVbbl07XHJcbiAgICB9XHJcbiAgICBmb3IobGV0IG4gb2YgdGhpcy51bmRlZmluZWRQcm9wZXJ0aWVzKSB7XHJcbiAgICAgIHByb3BzW25dID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgZm9yKGxldCBuIGluIGFkdmFuY2VkUHJvcHMpIHtcclxuICAgICAgaWYoYWR2YW5jZWRQcm9wcy5oYXNPd25Qcm9wZXJ0eShuKSkge1xyXG4gICAgICAgIHByb3BzW25dID0gYWR2YW5jZWRQcm9wc1tuXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJvcHMudmlldyA9IHRoaXMud25kO1xyXG4gICAgcHJvcHMucGFnZVggPSBwLng7XHJcbiAgICBwcm9wcy5wYWdlWSA9IHAueTtcclxuICAgIGNvbnN0IGpFID0gJC5FdmVudCh0eXBlLCBwcm9wcyk7XHJcbiAgICBqRS50aW1lU3RhbXAgPSBlLnRpbWVTdGFtcDtcclxuICAgICQoZWxlbWVudCkudHJpZ2dlcihqRSk7XHJcbiAgfVxyXG5cclxuICBhZGRDbGFzcyhlbGVtZW50LCBuYW1lKSB7XHJcbiAgICAkKGVsZW1lbnQpLmFkZENsYXNzKG5hbWUpO1xyXG4gICAgY29uc3Qgc3R5bGUgPSB0aGlzLnduZC5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xyXG4gICAgdGhpcy5jdXJzb3JzLnB1c2goJCh0aGlzLmJFbGVtZW50KS5jc3MoJ2N1cnNvcicpKTtcclxuICAgICQodGhpcy5iRWxlbWVudCkuY3NzKCdjdXJzb3InLCBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdjdXJzb3InKSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDbGFzcyhlbGVtZW50LCBuYW1lKSB7XHJcbiAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKG5hbWUpO1xyXG4gICAgJCh0aGlzLmJFbGVtZW50KS5jc3MoJ2N1cnNvcicsIHRoaXMuY3Vyc29ycy5wb3AoKSk7XHJcbiAgfVxyXG5cclxuICBlbnRlckVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgdGhpcy5hZGRDbGFzcyhlbGVtZW50LCBEb2NNb3VzZVNpbXVsYXRvci5IT1ZFUik7XHJcbiAgfVxyXG5cclxuICBsZWF2ZUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgdGhpcy5yZW1vdmVDbGFzcyhlbGVtZW50LCBEb2NNb3VzZVNpbXVsYXRvci5IT1ZFUik7XHJcbiAgfVxyXG5cclxuICBhY3RpdmF0ZUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgdGhpcy5hZGRDbGFzcyhlbGVtZW50LCBEb2NNb3VzZVNpbXVsYXRvci5BQ1RJVkUpO1xyXG4gIH1cclxuXHJcbiAgZGVhY3RpdmF0ZUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgdGhpcy5yZW1vdmVDbGFzcyhlbGVtZW50LCBEb2NNb3VzZVNpbXVsYXRvci5BQ1RJVkUpO1xyXG4gIH1cclxuXHJcbiAgYWRkRG9jQ2hhbmdlQ2xiKGNsYikge1xyXG4gICAgdGhpcy5vbkRvY0NoYW5nZUNsYnMucHVzaChjbGIpO1xyXG4gIH1cclxuXHJcbiAgbm90aWZ5KCkge1xyXG4gICAgZm9yKGxldCBjbGIgb2YgdGhpcy5vbkRvY0NoYW5nZUNsYnMpIHtcclxuICAgICAgY2xiKHRoaXMud25kLCB0aGlzLmRvYyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlbGVtZW50RnJvbVBvaW50KHApIHtcclxuICAgIGxldCBub2RlID0gdGhpcy5kb2MuYm9keSwgbmV4dCA9IHRydWU7XHJcbiAgICB3aGlsZShuZXh0KSB7XHJcbiAgICAgIG5leHQgPSBmYWxzZTtcclxuICAgICAgZm9yKGxldCBpPTA7IGk8bm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgY2hpbGQgPSBub2RlLmNoaWxkTm9kZXNbaV07XHJcbiAgICAgICAgaWYoY2hpbGQgaW5zdGFuY2VvZiB0aGlzLnduZC5FbGVtZW50KSB7XHJcbiAgICAgICAgICBjb25zdCBqQyA9ICQoY2hpbGQpLCBvZmZzZXQgPSBqQy5vZmZzZXQoKSwgaGVpZ2h0ID0gakMuaGVpZ2h0KCksIHdpZHRoID0gakMud2lkdGgoKTtcclxuICAgICAgICAgIGlmKHAueD5vZmZzZXQubGVmdCAmJiBwLng8b2Zmc2V0LmxlZnQrd2lkdGggJiYgcC55Pm9mZnNldC50b3AgJiYgcC55PG9mZnNldC50b3AraGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIG5vZGUgPSBjaGlsZDtcclxuICAgICAgICAgICAgbmV4dCA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG5cclxuICBnZXRFbGVtZW50KHApIHtcclxuICAgIGNvbnN0IG9mZjAgPSB0aGlzLmpGcmFtZS5vZmZzZXQoKTtcclxuICAgIHRoaXMuakZyYW1lLm9mZnNldCh7bGVmdDogMC41KndpbmRvdy5pbm5lcldpZHRoLXAueCwgdG9wOiAwLjUqd2luZG93LmlubmVySGVpZ2h0LXAueX0pO1xyXG4gICAgbGV0IGVsZW1lbnQgPSB0aGlzLmRvYy5lbGVtZW50RnJvbVBvaW50KHAueCwgcC55KTtcclxuICAgIGlmKCFlbGVtZW50KSB7IC8vIGl0IGlzbid0IGEgam9rZSBpdCdzIElFXHJcbiAgICAgIGVsZW1lbnQgPSB0aGlzLmRvYy5lbGVtZW50RnJvbVBvaW50KHAueCwgcC55KTtcclxuICAgIH1cclxuICAgIHRoaXMuakZyYW1lLm9mZnNldChvZmYwKTtcclxuICAgIHJldHVybiBlbGVtZW50PyBlbGVtZW50OiB0aGlzLmVsZW1lbnRGcm9tUG9pbnQocCk7XHJcbiAgfVxyXG5cclxuICBzaW11bGF0ZShlLCBkb2MsIHgsIHkpIHtcclxuICAgIGNvbnN0IHAgPSB0aGlzLmNvbnZlcnRDb29yZHMoeCwgeSksXHJcbiAgICAgICAgICBlbGVtZW50ID0gZG9jPT09dGhpcy5kb2M/IHRoaXMuZ2V0RWxlbWVudChwKTogdW5kZWZpbmVkO1xyXG4gICAgbGV0IHRyaWdnZXIgPSBlbGVtZW50ICE9PSB1bmRlZmluZWQsIG5vdGlmeSA9IGZhbHNlO1xyXG5cclxuICAgIHN3aXRjaChlLnR5cGUpIHtcclxuICAgICAgY2FzZSAnbW91c2Vkb3duJzoge1xyXG4gICAgICAgIGlmKHRoaXMuY2FwRWxlbWVudCkge1xyXG4gICAgICAgICAgdGhpcy5kZWFjdGl2YXRlRWxlbWVudCh0aGlzLmNhcEVsZW1lbnQpO1xyXG4gICAgICAgICAgbm90aWZ5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYXBFbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICBpZih0aGlzLmNhcEVsZW1lbnQpIHtcclxuICAgICAgICAgIHRoaXMuYWN0aXZhdGVFbGVtZW50KHRoaXMuY2FwRWxlbWVudCk7XHJcbiAgICAgICAgICBub3RpZnkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdtb3VzZXVwJzoge1xyXG4gICAgICAgIGlmKHRoaXMuY2FwRWxlbWVudCkge1xyXG4gICAgICAgICAgdGhpcy5kZWFjdGl2YXRlRWxlbWVudCh0aGlzLmNhcEVsZW1lbnQpO1xyXG4gICAgICAgICAgbm90aWZ5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lU3RhbXAgPSBlLnRpbWVTdGFtcDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdjbGljayc6IHtcclxuICAgICAgICB0cmlnZ2VyID0gZWxlbWVudCAmJiB0aGlzLmNhcEVsZW1lbnQgPT09IGVsZW1lbnQgJiYgZS50aW1lU3RhbXAgPT09IHRoaXMudGltZVN0YW1wO1xyXG4gICAgICAgIHRoaXMuY2FwRWxlbWVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdtb3VzZWVudGVyJzpcclxuICAgICAgY2FzZSAnbW91c2VvdmVyJzpcclxuICAgICAgY2FzZSAnbW91c2Vtb3ZlJzoge1xyXG4gICAgICAgIGxldCBsZWF2ZWQgPSBudWxsO1xyXG4gICAgICAgIGlmKHRoaXMuaG92RWxlbWVudCAhPT0gZWxlbWVudCAmJiB0aGlzLmhvdkVsZW1lbnQpIHtcclxuICAgICAgICAgIHRoaXMudHJpZ2dlckV2ZW50KHRoaXMuaG92RWxlbWVudCwgZSwgcCwgJ21vdXNlb3V0Jywge3JlbGF0ZWRUYXJnZXQ6IGVsZW1lbnQ/IGVsZW1lbnQ6IG51bGx9KTtcclxuICAgICAgICAgIHRoaXMubGVhdmVFbGVtZW50KHRoaXMuaG92RWxlbWVudCk7XHJcbiAgICAgICAgICBsZWF2ZWQgPSB0aGlzLmhvdkVsZW1lbnQ7XHJcbiAgICAgICAgICB0aGlzLmhvdkVsZW1lbnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICBub3RpZnkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighdGhpcy5ob3ZFbGVtZW50ICYmIGVsZW1lbnQpIHtcclxuICAgICAgICAgIHRoaXMudHJpZ2dlckV2ZW50KGVsZW1lbnQsIGUsIHAsICdtb3VzZW92ZXInLCB7cmVsYXRlZFRhcmdldDogbGVhdmVkfSk7XHJcbiAgICAgICAgICB0aGlzLmVudGVyRWxlbWVudChlbGVtZW50KTtcclxuICAgICAgICAgIHRoaXMuaG92RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICBub3RpZnkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cmlnZ2VyID0gZWxlbWVudCAmJiBlLnR5cGUgPT09ICdtb3VzZW1vdmUnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ21vdXNlbGVhdmUnOlxyXG4gICAgICBjYXNlICdtb3VzZW91dCc6IHtcclxuICAgICAgICBpZih0aGlzLmhvdkVsZW1lbnQpIHtcclxuICAgICAgICAgIHRoaXMudHJpZ2dlckV2ZW50KHRoaXMuaG92RWxlbWVudCwgZSwgcCwgJ21vdXNlb3V0Jywge3JlbGF0ZWRUYXJnZXQ6IGUucmVsYXRlZFRhcmdldH0pO1xyXG4gICAgICAgICAgdGhpcy5sZWF2ZUVsZW1lbnQodGhpcy5ob3ZFbGVtZW50KTtcclxuICAgICAgICAgIHRoaXMuaG92RWxlbWVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgIG5vdGlmeSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyaWdnZXIgPSBmYWxzZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYodHJpZ2dlcikge1xyXG4gICAgICB0aGlzLnRyaWdnZXJFdmVudChlbGVtZW50LCBlLCBwLCBlLnR5cGUpO1xyXG4gICAgfVxyXG4gICAgaWYobm90aWZ5KSB7XHJcbiAgICAgIHRoaXMubm90aWZ5KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXREZWZhdWx0VW5kZWZpbmVkUHJvcGVydGllcygpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICdjbGllbnRYJyxcclxuICAgICAgJ2NsaWVudFknLFxyXG4gICAgICAnb2Zmc2V0WCcsXHJcbiAgICAgICdvZmZzZXRZJyxcclxuICAgICAgJ3NjcmVlblgnLFxyXG4gICAgICAnc2NyZWVuWSdcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBnZXREZWZhdWx0UmVzZW5kUHJvcGVydGllcygpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICdhbHRLZXknLFxyXG4gICAgICAnYnViYmxlcycsXHJcbiAgICAgICdidXR0b24nLFxyXG4gICAgICAnYnV0dG9ucycsXHJcbiAgICAgICdjYW5jZWxhYmxlJyxcclxuICAgICAgJ2NoYW5nZWRUb3VjaGVzJyxcclxuICAgICAgJ2NoYXInLFxyXG4gICAgICAnY2hhckNvZGUnLFxyXG4gICAgICAnY3RybEtleScsXHJcbiAgICAgICdkYXRhJyxcclxuICAgICAgJ2RldGFpbCcsXHJcbiAgICAgICdldmVudFBoYXNlJyxcclxuICAgICAgJ2lzRGVmYXVsdFByZXZlbnRlZCcsXHJcbiAgICAgICdrZXknLFxyXG4gICAgICAna2V5Q29kZScsXHJcbiAgICAgICdtZXRhS2V5JyxcclxuICAgICAgJ3BvaW50ZXJJZCcsXHJcbiAgICAgICdwb2ludGVyVHlwZScsXHJcbiAgICAgICdzaGlmdEtleScsXHJcbiAgICAgICd0YXJnZXRUb3VjaGVzJyxcclxuICAgICAgJ3RvdWNoZXMnLFxyXG4gICAgICAnd2hpY2gnXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbi8qXHJcbmFsdEtleSxcclxuYnViYmxlcyxcclxuYnV0dG9uLFxyXG5idXR0b25zLFxyXG5jYW5jZWxhYmxlLFxyXG5jaGFuZ2VkVG91Y2hlcyxcclxuY2hhcixcclxuY2hhckNvZGUsXHJcbmNsaWVudFgsXHJcbmNsaWVudFksXHJcbmN0cmxLZXksXHJcbmN1cnJlbnRUYXJnZXQsXHJcbmRhdGEsXHJcbmRlbGVnYXRlVGFyZ2V0LFxyXG5kZXRhaWwsXHJcbmV2ZW50UGhhc2UsXHJcbmhhbmRsZU9iaixcclxuaXNEZWZhdWx0UHJldmVudGVkLFxyXG5rZXksXHJcbmtleUNvZGUsXHJcbm1ldGFLZXksXHJcbm9mZnNldFgsXHJcbm9mZnNldFksXHJcbm9yaWdpbmFsRXZlbnQsXHJcbnBhZ2VYLFxyXG5wYWdlWSxcclxucG9pbnRlcklkLFxyXG5wb2ludGVyVHlwZSxcclxucmVsYXRlZFRhcmdldCxcclxuc2NyZWVuWCxcclxuc2NyZWVuWSxcclxuc2hpZnRLZXksXHJcbnRhcmdldCxcclxudGFyZ2V0VG91Y2hlcyxcclxudGltZVN0YW1wLFxyXG50b0VsZW1lbnQsXHJcbnRvdWNoZXMsXHJcbnR5cGUsXHJcbnZpZXcsXHJcbndoaWNoXHJcbiovXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0RvY01vdXNlU2ltdWxhdG9yLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRG9jTW91c2VTaW11bGF0b3IuanMiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEb20ySW1hZ2Uge1xuXG4gIGNvbnN0cnVjdG9yKHduZCwgZG9jLCBjYWNoZSkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIHRoaXMud2luZG93ID0gd25kO1xuICAgIHRoaXMuZG9jdW1lbnQgPSBkb2M7XG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuXG4gICAgY29uc3QgdXRpbCA9IG5ld1V0aWwoKTtcbiAgICBjb25zdCBpbmxpbmVyID0gbmV3SW5saW5lcigpO1xuICAgIGNvbnN0IGZvbnRGYWNlcyA9IG5ld0ZvbnRGYWNlcygpO1xuICAgIGNvbnN0IGltYWdlcyA9IG5ld0ltYWdlcygpO1xuXG4gICAgdGhpcy50b1N2ZyA9IHRvU3ZnO1xuICAgIHRoaXMudG9QbmcgPSB0b1BuZztcbiAgICB0aGlzLnRvSnBlZyA9IHRvSnBlZztcbiAgICB0aGlzLnRvQmxvYiA9IHRvQmxvYjtcbiAgICB0aGlzLnRvUGl4ZWxEYXRhID0gdG9QaXhlbERhdGE7XG4gICAgdGhpcy5pbXBsID0ge1xuICAgICAgICAgICAgICAgICAgZm9udEZhY2VzOiBmb250RmFjZXMsXG4gICAgICAgICAgICAgICAgICBpbWFnZXM6IGltYWdlcyxcbiAgICAgICAgICAgICAgICAgIHV0aWw6IHV0aWwsXG4gICAgICAgICAgICAgICAgICBpbmxpbmVyOiBpbmxpbmVyXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBSZW5kZXJpbmcgb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMuZmlsdGVyIC0gU2hvdWxkIHJldHVybiB0cnVlIGlmIHBhc3NlZCBub2RlIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgb3V0cHV0XG4gICAgICogICAgICAgICAgKGV4Y2x1ZGluZyBub2RlIG1lYW5zIGV4Y2x1ZGluZyBpdCdzIGNoaWxkcmVuIGFzIHdlbGwpLiBOb3QgY2FsbGVkIG9uIHRoZSByb290IG5vZGUuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuYmdjb2xvciAtIGNvbG9yIGZvciB0aGUgYmFja2dyb3VuZCwgYW55IHZhbGlkIENTUyBjb2xvciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy53aWR0aCAtIHdpZHRoIHRvIGJlIGFwcGxpZWQgdG8gbm9kZSBiZWZvcmUgcmVuZGVyaW5nLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLmhlaWdodCAtIGhlaWdodCB0byBiZSBhcHBsaWVkIHRvIG5vZGUgYmVmb3JlIHJlbmRlcmluZy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5zdHlsZSAtIGFuIG9iamVjdCB3aG9zZSBwcm9wZXJ0aWVzIHRvIGJlIGNvcGllZCB0byBub2RlJ3Mgc3R5bGUgYmVmb3JlIHJlbmRlcmluZy5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5xdWFsaXR5IC0gYSBOdW1iZXIgYmV0d2VlbiAwIGFuZCAxIGluZGljYXRpbmcgaW1hZ2UgcXVhbGl0eSAoYXBwbGljYWJsZSB0byBKUEVHIG9ubHkpLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRzIHRvIDEuMC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgU1ZHIGltYWdlIGRhdGEgVVJMXG4gICAgICogKi9cblxuICAgIGZ1bmN0aW9uIHRvU3ZnKG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobm9kZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsb25lTm9kZShub2RlLCBvcHRpb25zLmZpbHRlciwgdHJ1ZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZW1iZWRGb250cylcbiAgICAgICAgICAgIC50aGVuKGlubGluZUltYWdlcylcbiAgICAgICAgICAgIC50aGVuKGFwcGx5T3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjbG9uZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYWtlU3ZnRGF0YVVyaShjbG9uZSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy53aWR0aCB8fCB1dGlsLndpZHRoKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmhlaWdodCB8fCB1dGlsLmhlaWdodChub2RlKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBhcHBseU9wdGlvbnMoY2xvbmUpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmJnY29sb3IpIGNsb25lLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG9wdGlvbnMuYmdjb2xvcjtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMud2lkdGgpIGNsb25lLnN0eWxlLndpZHRoID0gb3B0aW9ucy53aWR0aCArICdweCc7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5oZWlnaHQpIGNsb25lLnN0eWxlLmhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0ICsgJ3B4JztcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3R5bGUpXG4gICAgICAgICAgICAgICAgc2VsZi53aW5kb3cuT2JqZWN0LmtleXMob3B0aW9ucy5zdHlsZSkuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUuc3R5bGVbcHJvcGVydHldID0gb3B0aW9ucy5zdHlsZVtwcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBSZW5kZXJpbmcgb3B0aW9ucywgQHNlZSB7QGxpbmsgdG9Tdmd9XG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gLSBBIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2l0aCBhIFVpbnQ4QXJyYXkgY29udGFpbmluZyBSR0JBIHBpeGVsIGRhdGEuXG4gICAgICogKi9cbiAgICBmdW5jdGlvbiB0b1BpeGVsRGF0YShub2RlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBkcmF3KG5vZGUsIG9wdGlvbnMgfHwge30pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmdldEltYWdlRGF0YShcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgdXRpbC53aWR0aChub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5oZWlnaHQobm9kZSlcbiAgICAgICAgICAgICAgICApLmRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgLSBUaGUgRE9NIE5vZGUgb2JqZWN0IHRvIHJlbmRlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnMsIEBzZWUge0BsaW5rIHRvU3ZnfVxuICAgICAqIEByZXR1cm4ge1Byb21pc2V9IC0gQSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggYSBQTkcgaW1hZ2UgZGF0YSBVUkxcbiAgICAgKiAqL1xuICAgIGZ1bmN0aW9uIHRvUG5nKG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGRyYXcobm9kZSwgb3B0aW9ucyB8fCB7fSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlIC0gVGhlIERPTSBOb2RlIG9iamVjdCB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFJlbmRlcmluZyBvcHRpb25zLCBAc2VlIHtAbGluayB0b1N2Z31cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgSlBFRyBpbWFnZSBkYXRhIFVSTFxuICAgICAqICovXG4gICAgZnVuY3Rpb24gdG9KcGVnKG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHJldHVybiBkcmF3KG5vZGUsIG9wdGlvbnMpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCBvcHRpb25zLnF1YWxpdHkgfHwgMS4wKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBSZW5kZXJpbmcgb3B0aW9ucywgQHNlZSB7QGxpbmsgdG9Tdmd9XG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gLSBBIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2l0aCBhIFBORyBpbWFnZSBibG9iXG4gICAgICogKi9cbiAgICBmdW5jdGlvbiB0b0Jsb2Iobm9kZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgICAgICAgLnRoZW4odXRpbC5jYW52YXNUb0Jsb2IpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRyYXcoZG9tTm9kZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdG9TdmcoZG9tTm9kZSwgb3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKHV0aWwubWFrZUltYWdlKVxuICAgICAgICAgICAgLnRoZW4odXRpbC5kZWxheSgxMDApKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gbmV3Q2FudmFzKGRvbU5vZGUpO1xuICAgICAgICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIG5ld0NhbnZhcyhkb21Ob2RlKSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBzZWxmLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gb3B0aW9ucy53aWR0aCB8fCB1dGlsLndpZHRoKGRvbU5vZGUpO1xuICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IHV0aWwuaGVpZ2h0KGRvbU5vZGUpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5iZ2NvbG9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG9wdGlvbnMuYmdjb2xvcjtcbiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb25lTm9kZShub2RlLCBmaWx0ZXIsIHJvb3QpIHtcbiAgICAgICAgaWYgKCFyb290ICYmIGZpbHRlciAmJiAhZmlsdGVyKG5vZGUpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShub2RlKVxuICAgICAgICAgICAgLnRoZW4obWFrZU5vZGVDb3B5KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsb25lQ2hpbGRyZW4obm9kZSwgY2xvbmUsIGZpbHRlcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NDbG9uZShub2RlLCBjbG9uZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBtYWtlTm9kZUNvcHkobm9kZSkge1xuICAgICAgICAgICAgaWYgKHV0aWwuaXNDYW52YXMobm9kZSkpIHJldHVybiB1dGlsLm1ha2VJbWFnZShub2RlLnRvRGF0YVVSTCgpKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbG9uZUNoaWxkcmVuKG9yaWdpbmFsLCBjbG9uZSwgZmlsdGVyKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IG9yaWdpbmFsLmNoaWxkTm9kZXM7XG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSAwKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNsb25lKTtcblxuICAgICAgICAgICAgcmV0dXJuIGNsb25lQ2hpbGRyZW5Jbk9yZGVyKGNsb25lLCB1dGlsLmFzQXJyYXkoY2hpbGRyZW4pLCBmaWx0ZXIpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsb25lQ2hpbGRyZW5Jbk9yZGVyKHBhcmVudCwgY2hpbGRyZW4sIGZpbHRlcikge1xuICAgICAgICAgICAgICAgIGxldCBkb25lID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9uZSA9IGRvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xvbmVOb2RlKGNoaWxkLCBmaWx0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjaGlsZENsb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkQ2xvbmUpIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZENsb25lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBkb25lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0Nsb25lKG9yaWdpbmFsLCBjbG9uZSkge1xuICAgICAgICAgICAgaWYgKCF1dGlsLmlzRWxlbWVudChjbG9uZSkpIHJldHVybiBjbG9uZTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgLnRoZW4oY2xvbmVTdHlsZSlcbiAgICAgICAgICAgICAgICAudGhlbihjbG9uZVBzZXVkb0VsZW1lbnRzKVxuICAgICAgICAgICAgICAgIC50aGVuKGNvcHlVc2VySW5wdXQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZml4U3ZnKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbG9uZVN0eWxlKCkge1xuICAgICAgICAgICAgICAgIGNvcHlTdHlsZShzZWxmLndpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG9yaWdpbmFsKSwgY2xvbmUuc3R5bGUpO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY29weVN0eWxlKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuY3NzVGV4dCkgdGFyZ2V0LmNzc1RleHQgPSBzb3VyY2UuY3NzVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBjb3B5UHJvcGVydGllcyhzb3VyY2UsIHRhcmdldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY29weVByb3BlcnRpZXMoc291cmNlLCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuYXNBcnJheShzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UuZ2V0UHJvcGVydHlQcmlvcml0eShuYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xvbmVQc2V1ZG9FbGVtZW50cygpIHtcbiAgICAgICAgICAgICAgICBbJzpiZWZvcmUnLCAnOmFmdGVyJ10uZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZVBzZXVkb0VsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbG9uZVBzZXVkb0VsZW1lbnQoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IHNlbGYud2luZG93LmdldENvbXB1dGVkU3R5bGUob3JpZ2luYWwsIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnY29udGVudCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50ID09PSAnJyB8fCBjb250ZW50ID09PSAnbm9uZScpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGFzc05hbWUgPSB1dGlsLnVpZCgpO1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5jbGFzc05hbWUgPSBjbG9uZS5jbGFzc05hbWUgKyAnICcgKyBjbGFzc05hbWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlRWxlbWVudCA9IHNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGZvcm1hdFBzZXVkb0VsZW1lbnRTdHlsZShjbGFzc05hbWUsIGVsZW1lbnQsIHN0eWxlKSk7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0UHNldWRvRWxlbWVudFN0eWxlKGNsYXNzTmFtZSwgZWxlbWVudCwgc3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gJy4nICsgY2xhc3NOYW1lICsgJzonICsgZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNzc1RleHQgPSBzdHlsZS5jc3NUZXh0ID8gZm9ybWF0Q3NzVGV4dChzdHlsZSkgOiBmb3JtYXRDc3NQcm9wZXJ0aWVzKHN0eWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNlbGVjdG9yICsgJ3snICsgY3NzVGV4dCArICd9Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdENzc1RleHQoc3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnY29udGVudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHlsZS5jc3NUZXh0ICsgJyBjb250ZW50OiAnICsgY29udGVudCArICc7JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0Q3NzUHJvcGVydGllcyhzdHlsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWwuYXNBcnJheShzdHlsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmb3JtYXRQcm9wZXJ0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJzsgJykgKyAnOyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lICsgJzogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdHlsZS5nZXRQcm9wZXJ0eVByaW9yaXR5KG5hbWUpID8gJyAhaW1wb3J0YW50JyA6ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvcHlVc2VySW5wdXQoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWwuaXNUZXh0QXJlYShvcmlnaW5hbCkpIGNsb25lLmlubmVySFRNTCA9IG9yaWdpbmFsLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh1dGlsLmlzSW5wdXQob3JpZ2luYWwpKSBjbG9uZS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBvcmlnaW5hbC52YWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZpeFN2ZygpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWwuaXNTVkcoY2xvbmUpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCd4bWxucycsICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCF1dGlsLmlzU1ZHUmVjdChjbG9uZSkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBbJ3dpZHRoJywgJ2hlaWdodCddLmZvckVhY2goZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNsb25lLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgY2xvbmUuc3R5bGUuc2V0UHJvcGVydHkoYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbWJlZEZvbnRzKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGZvbnRGYWNlcy5yZXNvbHZlQWxsKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjc3NUZXh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVOb2RlID0gc2VsZi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoc3R5bGVOb2RlKTtcbiAgICAgICAgICAgICAgICBzdHlsZU5vZGUuYXBwZW5kQ2hpbGQoc2VsZi5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3NUZXh0KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbmxpbmVJbWFnZXMobm9kZSkge1xuICAgICAgICByZXR1cm4gaW1hZ2VzLmlubGluZUFsbChub2RlKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZVN2Z0RhdGFVcmkobm9kZSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd4bWxucycsICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBzZWxmLndpbmRvdy5YTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcobm9kZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4odXRpbC5lc2NhcGVYaHRtbClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh4aHRtbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCcsXG4gICAgICAgICAgICAgICAgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiJywgd2lkdGgsICdcIiBoZWlnaHQ9XCInLCBoZWlnaHQsICdcIj4nLFxuICAgICAgICAgICAgICAgICAgJzxmb3JlaWduT2JqZWN0IHg9XCIwXCIgeT1cIjBcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+JywgeGh0bWwsICc8L2ZvcmVpZ25PYmplY3Q+JyxcbiAgICAgICAgICAgICAgICAnPC9zdmc+J10uam9pbignJyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXdVdGlsKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZXNjYXBlOiBlc2NhcGUsXG4gICAgICAgICAgICBwYXJzZUV4dGVuc2lvbjogcGFyc2VFeHRlbnNpb24sXG4gICAgICAgICAgICBtaW1lVHlwZTogbWltZVR5cGUsXG4gICAgICAgICAgICBkYXRhQXNVcmw6IGRhdGFBc1VybCxcbiAgICAgICAgICAgIGlzRGF0YVVybDogaXNEYXRhVXJsLFxuICAgICAgICAgICAgY2FudmFzVG9CbG9iOiBjYW52YXNUb0Jsb2IsXG4gICAgICAgICAgICByZXNvbHZlVXJsOiByZXNvbHZlVXJsLFxuICAgICAgICAgICAgZ2V0QW5kRW5jb2RlOiBnZXRBbmRFbmNvZGUsXG4gICAgICAgICAgICB1aWQ6IHVpZCgpLFxuICAgICAgICAgICAgZGVsYXk6IGRlbGF5LFxuICAgICAgICAgICAgYXNBcnJheTogYXNBcnJheSxcbiAgICAgICAgICAgIGVzY2FwZVhodG1sOiBlc2NhcGVYaHRtbCxcbiAgICAgICAgICAgIG1ha2VJbWFnZTogbWFrZUltYWdlLFxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG5cbiAgICAgICAgICAgIGlzRWxlbWVudCxcbiAgICAgICAgICAgIGlzQ2FudmFzLFxuICAgICAgICAgICAgaXNUZXh0QXJlYSxcbiAgICAgICAgICAgIGlzSW5wdXQsXG4gICAgICAgICAgICBpc1NWRyxcbiAgICAgICAgICAgIGlzU1ZHUmVjdCxcbiAgICAgICAgICAgIGlzSW1hZ2VcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBtaW1lcygpIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBPbmx5IFdPRkYgYW5kIEVPVCBtaW1lIHR5cGVzIGZvciBmb250cyBhcmUgJ3JlYWwnXG4gICAgICAgICAgICAgKiBzZWUgaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9tZWRpYS10eXBlcy9tZWRpYS10eXBlcy54aHRtbFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCBXT0ZGID0gJ2FwcGxpY2F0aW9uL2ZvbnQtd29mZic7XG4gICAgICAgICAgICBjb25zdCBKUEVHID0gJ2ltYWdlL2pwZWcnO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICd3b2ZmJzogV09GRixcbiAgICAgICAgICAgICAgICAnd29mZjInOiBXT0ZGLFxuICAgICAgICAgICAgICAgICd0dGYnOiAnYXBwbGljYXRpb24vZm9udC10cnVldHlwZScsXG4gICAgICAgICAgICAgICAgJ2VvdCc6ICdhcHBsaWNhdGlvbi92bmQubXMtZm9udG9iamVjdCcsXG4gICAgICAgICAgICAgICAgJ3BuZyc6ICdpbWFnZS9wbmcnLFxuICAgICAgICAgICAgICAgICdqcGcnOiBKUEVHLFxuICAgICAgICAgICAgICAgICdqcGVnJzogSlBFRyxcbiAgICAgICAgICAgICAgICAnZ2lmJzogJ2ltYWdlL2dpZicsXG4gICAgICAgICAgICAgICAgJ3RpZmYnOiAnaW1hZ2UvdGlmZicsXG4gICAgICAgICAgICAgICAgJ3N2Zyc6ICdpbWFnZS9zdmcreG1sJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlRXh0ZW5zaW9uKHVybCkge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSAvXFwuKFteXFwuXFwvXSo/KSQvZy5leGVjKHVybCk7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHJldHVybiBtYXRjaFsxXTtcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbWltZVR5cGUodXJsKSB7XG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBwYXJzZUV4dGVuc2lvbih1cmwpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gbWltZXMoKVtleHRlbnNpb25dIHx8ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaXNEYXRhVXJsKHVybCkge1xuICAgICAgICAgICAgcmV0dXJuIHVybC5zZWFyY2goL14oZGF0YTopLykgIT09IC0xO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdG9CbG9iKGNhbnZhcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmluYXJ5U3RyaW5nID0gc2VsZi53aW5kb3cuYXRvYihjYW52YXMudG9EYXRhVVJMKCkuc3BsaXQoJywnKVsxXSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5hcnlBcnJheSA9IG5ldyBzZWxmLndpbmRvdy5VaW50OEFycmF5KGxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBiaW5hcnlBcnJheVtpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgc2VsZi53aW5kb3cuQmxvYihbYmluYXJ5QXJyYXldLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbWFnZS9wbmcnXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjYW52YXNUb0Jsb2IoY2FudmFzKSB7XG4gICAgICAgICAgICBpZiAoY2FudmFzLnRvQmxvYilcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLnRvQmxvYihyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRvQmxvYihjYW52YXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVybCh1cmwsIGJhc2VVcmwpIHtcbiAgICAgICAgICAgIGNvbnN0IGRvYyA9IHNlbGYuZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCk7XG4gICAgICAgICAgICBjb25zdCBiYXNlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2Jhc2UnKTtcbiAgICAgICAgICAgIGRvYy5oZWFkLmFwcGVuZENoaWxkKGJhc2UpO1xuICAgICAgICAgICAgY29uc3QgYSA9IGRvYy5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChhKTtcbiAgICAgICAgICAgIGJhc2UuaHJlZiA9IGJhc2VVcmw7XG4gICAgICAgICAgICBhLmhyZWYgPSB1cmw7XG4gICAgICAgICAgICByZXR1cm4gYS5ocmVmO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdWlkKCkge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3UnICsgZm91clJhbmRvbUNoYXJzKCkgKyBpbmRleCsrO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZm91clJhbmRvbUNoYXJzKCkge1xuICAgICAgICAgICAgICAgICAgICAvKiBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjI0ODcyMi8yNTE5MzczICovXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoJzAwMDAnICsgKHNlbGYud2luZG93Lk1hdGgucmFuZG9tKCkgKiBzZWxmLndpbmRvdy5NYXRoLnBvdygzNiwgNCkgPDwgMCkudG9TdHJpbmcoMzYpKS5zbGljZSgtNCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VJbWFnZSh1cmkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgc2VsZi53aW5kb3cuSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaW1hZ2UpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaW1hZ2Uub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSB1cmk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEFuZEVuY29kZSh1cmwpIHtcbiAgICAgICAgICBsZXQgZGF0YSA9IHNlbGYuY2FjaGUuZ2V0KHVybCk7XG4gICAgICAgICAgaWYoZGF0YSkge1xuICAgICAgICAgICAgaWYoZGF0YS5jb250ZW50KSB7XG4gICAgICAgICAgICAgIHJldHVybiBkYXRhLmNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKT0+IHtcbiAgICAgICAgICAgICAgICBpZihkYXRhLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBkYXRhLnBlbmRpbmdzLnB1c2gocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkYXRhID0gc2VsZi5jYWNoZS5wdXQodXJsLCB7cGVuZGluZ3M6IFtdfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IFRJTUVPVVQgPSAzMDAwMDtcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBzZWxmLndpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBkb25lO1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub250aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnRpbWVvdXQgPSBUSU1FT1VUO1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoKTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCgnY2Fubm90IGZldGNoIHJlc291cmNlOiAnICsgdXJsICsgJywgc3RhdHVzOiAnICsgcmVxdWVzdC5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBzZWxmLndpbmRvdy5GaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGVuY29kZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jb250ZW50ID0gZW5jb2Rlci5yZXN1bHQuc3BsaXQoLywvKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcmVzb2x2ZSBvZiBkYXRhLnBlbmRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucGVuZGluZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZW5jb2Rlci5yZWFkQXNEYXRhVVJMKHJlcXVlc3QucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRpbWVvdXQoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZhaWwoJ3RpbWVvdXQgb2YgJyArIFRJTUVPVVQgKyAnbXMgb2NjdXJlZCB3aGlsZSBmZXRjaGluZyByZXNvdXJjZTogJyArIHVybCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZmFpbChtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRhdGFBc1VybChjb250ZW50LCB0eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gWydkYXRhOicsdHlwZSwnO2Jhc2U2NCwnLGNvbnRlbnRdLmpvaW4oJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXNjYXBlKHN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oWy4qKz9eJHt9KCl8XFxbXFxdXFwvXFxcXF0pL2csICdcXFxcJDEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRlbGF5KG1zKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXJnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgbXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFzQXJyYXkoYXJyYXlMaWtlKSB7XG4gICAgICAgICAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGFycmF5LnB1c2goYXJyYXlMaWtlW2ldKTtcbiAgICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGVzY2FwZVhodG1sKHN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oI3xcXG4pL2csIChjKT0+IGM9PT0nIyc/ICclMjMnOiAnJTBBJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB3aWR0aChub2RlKSB7XG4gICAgICAgICAgICBjb25zdCBsZWZ0Qm9yZGVyID0gcHgobm9kZSwgJ2JvcmRlci1sZWZ0LXdpZHRoJyk7XG4gICAgICAgICAgICBjb25zdCByaWdodEJvcmRlciA9IHB4KG5vZGUsICdib3JkZXItcmlnaHQtd2lkdGgnKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlLnNjcm9sbFdpZHRoICsgbGVmdEJvcmRlciArIHJpZ2h0Qm9yZGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaGVpZ2h0KG5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvcEJvcmRlciA9IHB4KG5vZGUsICdib3JkZXItdG9wLXdpZHRoJyk7XG4gICAgICAgICAgICBjb25zdCBib3R0b21Cb3JkZXIgPSBweChub2RlLCAnYm9yZGVyLWJvdHRvbS13aWR0aCcpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuc2Nyb2xsSGVpZ2h0ICsgdG9wQm9yZGVyICsgYm90dG9tQm9yZGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcHgobm9kZSwgc3R5bGVQcm9wZXJ0eSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzZWxmLndpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpLmdldFByb3BlcnR5VmFsdWUoc3R5bGVQcm9wZXJ0eSk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZS5yZXBsYWNlKCdweCcsICcnKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc0VsZW1lbnQobm9kZSkge1xuICAgICAgICAgIHJldHVybiBub2RlIGluc3RhbmNlb2Ygc2VsZi53aW5kb3cuRWxlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzQ2FudmFzKG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIHNlbGYud2luZG93LkhUTUxDYW52YXNFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaXNUZXh0QXJlYShub2RlKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBzZWxmLndpbmRvdy5IVE1MVGV4dEFyZWFFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaXNJbnB1dChub2RlKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBzZWxmLndpbmRvdy5IVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaXNTVkcobm9kZSkge1xuICAgICAgICAgIHJldHVybiBub2RlIGluc3RhbmNlb2Ygc2VsZi53aW5kb3cuU1ZHRWxlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzU1ZHUmVjdChub2RlKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBzZWxmLndpbmRvdy5TVkdSZWN0RWxlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzSW1hZ2Uobm9kZSkge1xuICAgICAgICAgIHJldHVybiBub2RlIGluc3RhbmNlb2Ygc2VsZi53aW5kb3cuSFRNTEltYWdlRWxlbWVudDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld0lubGluZXIoKSB7XG4gICAgICAgIGNvbnN0IFVSTF9SRUdFWCA9IC91cmxcXChbJ1wiXT8oW14nXCJdKz8pWydcIl0/XFwpL2c7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlubGluZUFsbDogaW5saW5lQWxsLFxuICAgICAgICAgICAgc2hvdWxkUHJvY2Vzczogc2hvdWxkUHJvY2VzcyxcbiAgICAgICAgICAgIGltcGw6IHtcbiAgICAgICAgICAgICAgICByZWFkVXJsczogcmVhZFVybHMsXG4gICAgICAgICAgICAgICAgaW5saW5lOiBpbmxpbmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBzaG91bGRQcm9jZXNzKHN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5zZWFyY2goVVJMX1JFR0VYKSAhPT0gLTE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZWFkVXJscyhzdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IFVSTF9SRUdFWC5leGVjKHN0cmluZykpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobWF0Y2hbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5maWx0ZXIoZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhdXRpbC5pc0RhdGFVcmwodXJsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5saW5lKHN0cmluZywgdXJsLCBiYXNlVXJsLCBnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodXJsKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhc2VVcmwgPyB1dGlsLnJlc29sdmVVcmwodXJsLCBiYXNlVXJsKSA6IHVybDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGdldCB8fCB1dGlsLmdldEFuZEVuY29kZSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbC5kYXRhQXNVcmwoZGF0YSwgdXRpbC5taW1lVHlwZSh1cmwpKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSh1cmxBc1JlZ2V4KHVybCksIFsnJDEnLCBkYXRhVXJsLCAnJDMnXS5qb2luKCcnKSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHVybEFzUmVnZXgodXJsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBzZWxmLndpbmRvdy5SZWdFeHAoWycodXJsXFxcXChbXFwnXCJdPykoJywgdXRpbC5lc2NhcGUodXJsKSwgJykoW1xcJ1wiXT9cXFxcKSknXS5qb2luKCcnKSwgJ2cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlubGluZUFsbChzdHJpbmcsIGJhc2VVcmwsIGdldCkge1xuICAgICAgICAgICAgaWYgKG5vdGhpbmdUb0lubGluZSgpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHN0cmluZyk7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc3RyaW5nKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlYWRVcmxzKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1cmxzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkb25lID0gUHJvbWlzZS5yZXNvbHZlKHN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIHVybHMuZm9yRWFjaChmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gZG9uZS50aGVuKGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5saW5lKHN0cmluZywgdXJsLCBiYXNlVXJsLCBnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9uZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gbm90aGluZ1RvSW5saW5lKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhc2hvdWxkUHJvY2VzcyhzdHJpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV3Rm9udEZhY2VzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzb2x2ZUFsbDogcmVzb2x2ZUFsbCxcbiAgICAgICAgICAgIGltcGw6IHtcbiAgICAgICAgICAgICAgICByZWFkQWxsOiByZWFkQWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZUFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWFkQWxsKHNlbGYuZG9jdW1lbnQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHdlYkZvbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlYkZvbnRzLm1hcChmdW5jdGlvbiAod2ViRm9udCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3ZWJGb250LnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoY3NzU3RyaW5ncykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3NzU3RyaW5ncy5qb2luKCdcXG4nKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlYWRBbGwoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHV0aWwuYXNBcnJheShzZWxmLmRvY3VtZW50LnN0eWxlU2hlZXRzKSlcbiAgICAgICAgICAgICAgICAudGhlbihnZXRDc3NSdWxlcylcbiAgICAgICAgICAgICAgICAudGhlbihzZWxlY3RXZWJGb250UnVsZXMpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydWxlcy5tYXAobmV3V2ViRm9udCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNlbGVjdFdlYkZvbnRSdWxlcyhjc3NSdWxlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjc3NSdWxlc1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVsZS50eXBlID09PSBDU1NSdWxlLkZPTlRfRkFDRV9SVUxFO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5saW5lci5zaG91bGRQcm9jZXNzKHJ1bGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnc3JjJykpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q3NzUnVsZXMoc3R5bGVTaGVldHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjc3NSdWxlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHN0eWxlU2hlZXRzLmZvckVhY2goZnVuY3Rpb24gKHNoZWV0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmFzQXJyYXkoc2hlZXQuY3NzUnVsZXMgfHwgW10pLmZvckVhY2goY3NzUnVsZXMucHVzaC5iaW5kKGNzc1J1bGVzKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSByZWFkaW5nIENTUyBydWxlcyBmcm9tICcgKyBzaGVldC5ocmVmLCBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNzc1J1bGVzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBuZXdXZWJGb250KHdlYkZvbnRSdWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VVcmwgPSAod2ViRm9udFJ1bGUucGFyZW50U3R5bGVTaGVldCB8fCB7fSkuaHJlZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmxpbmVyLmlubGluZUFsbCh3ZWJGb250UnVsZS5jc3NUZXh0LCBiYXNlVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3JjOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2ViRm9udFJ1bGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnc3JjJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV3SW1hZ2VzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5saW5lQWxsOiBpbmxpbmVBbGwsXG4gICAgICAgICAgICBpbXBsOiB7XG4gICAgICAgICAgICAgICAgbmV3SW1hZ2U6IG5ld0ltYWdlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gbmV3SW1hZ2UoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbmxpbmU6IGlubGluZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaW5saW5lKGdldCkge1xuICAgICAgICAgICAgICAgIGlmICh1dGlsLmlzRGF0YVVybChlbGVtZW50LnNyYykpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZWxlbWVudC5zcmMpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGdldCB8fCB1dGlsLmdldEFuZEVuY29kZSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlsLmRhdGFBc1VybChkYXRhLCB1dGlsLm1pbWVUeXBlKGVsZW1lbnQuc3JjKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub25sb2FkID0gcmVzb2x2ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zcmMgPSBkYXRhVXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5saW5lQWxsKG5vZGUpIHtcbiAgICAgICAgICAgIGlmICghdXRpbC5pc0VsZW1lbnQobm9kZSkpIHJldHVybiBQcm9taXNlLnJlc29sdmUobm9kZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBpbmxpbmVCYWNrZ3JvdW5kKG5vZGUpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXRpbC5pc0ltYWdlKG5vZGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0ltYWdlKG5vZGUpLmlubGluZSgpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5hc0FycmF5KG5vZGUuY2hpbGROb2RlcykubWFwKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5saW5lQWxsKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaW5saW5lQmFja2dyb3VuZChub2RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFja2dyb3VuZCA9IG5vZGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnYmFja2dyb3VuZCcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFiYWNrZ3JvdW5kKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlubGluZXIuaW5saW5lQWxsKGJhY2tncm91bmQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChpbmxpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuZ2V0UHJvcGVydHlQcmlvcml0eSgnYmFja2dyb3VuZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0RvbTJJbWFnZS5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0RvbTJJbWFnZS5qcyIsImltcG9ydCB7JCwgVEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJhZyB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHduZCwgZG9jLCB2aXN1YWxXb3JsZCkge1xyXG4gICAgdGhpcy53bmQgPSB3bmQ7XHJcbiAgICB0aGlzLmRvYyA9IGRvYztcclxuICAgIHRoaXMudmlzdWFsID0gdmlzdWFsV29ybGQ7XHJcbiAgICB0aGlzLmNvb3JkcyA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XHJcbiAgICB0aGlzLmludGVyc2VjdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICB0aGlzLnJheWNhc3RlciA9IHRoaXMudmlzdWFsLnJheWNhc3RlcjtcclxuICAgIHRoaXMuY2FtZXJhID0gdGhpcy52aXN1YWwuY2FtZXJhO1xyXG4gICAgdGhpcy5wbGFuZSA9IG5ldyBUSFJFRS5QbGFuZSgpO1xyXG4gICAgdGhpcy50aHJlZXMgPSBbXTtcclxuICAgIHRoaXMuc2VsZWN0ZWQgPSBudWxsO1xyXG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcclxuICAgIHRoaXMuY29udHJvbHNTdGF0ZSA9IHRoaXMudmlzdWFsLmdldENvbnRyb2xzU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLnZpc3VhbC5lbGVtZW50O1xyXG4gICAgdGhpcy5iaW5kcyA9IHtcclxuICAgICAgb25Nb3VzZU1vdmU6IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKSxcclxuICAgICAgb25Nb3VzZURvd246IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKSxcclxuICAgICAgb25Nb3VzZVVwOiB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpXHJcbiAgICB9O1xyXG4gICAgJCh0aGlzLmVsZW1lbnQpLm9uKCdtb3VzZW1vdmUnLCB0aGlzLmJpbmRzLm9uTW91c2VNb3ZlKTtcclxuICAgICQodGhpcy5lbGVtZW50KS5vbignbW91c2Vkb3duJywgdGhpcy5iaW5kcy5vbk1vdXNlRG93bik7XHJcbiAgICAkKHRoaXMuZG9jKS5vbignbW91c2V1cCcsIHRoaXMuYmluZHMub25Nb3VzZVVwKTtcclxuICB9XHJcblxyXG4gIGFkZFRocmVlKHRocmVlKSB7XHJcbiAgICB0aGlzLnRocmVlcy5wdXNoKHRocmVlKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVRocmVlKHRocmVlKSB7XHJcbiAgICBjb25zdCBpID0gdGhpcy50aHJlZXMuaW5kZXhPZih0aHJlZSk7XHJcbiAgICBpZih+aSkge1xyXG4gICAgICB0aGlzLnRocmVlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblBpY2tDYWxsYmFjaygpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgb25EcmFnQ2FsbGJhY2soKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIG9uUmVsZWFzZUNhbGxiYWNrKCkge1xyXG5cclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICAkKHRoaXMuZWxlbWVudCkub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLmJpbmRzLm9uTW91c2VNb3ZlKTtcclxuICAgICQodGhpcy5lbGVtZW50KS5vZmYoJ21vdXNlZG93bicsIHRoaXMuYmluZHMub25Nb3VzZURvd24pO1xyXG4gICAgJCh0aGlzLmRvYykub2ZmKCdtb3VzZXVwJywgdGhpcy5iaW5kcy5vbk1vdXNlVXApO1xyXG4gIH1cclxuXHJcbiAgc2V0Q29vcmRzRnJvbUV2ZW50KGUpIHtcclxuICAgIGNvbnN0IGpFbGVtZW50ID0gJCh0aGlzLmVsZW1lbnQpO1xyXG4gICAgY29uc3Qgb2Zmc2V0ID0gakVsZW1lbnQub2Zmc2V0KCk7XHJcbiAgICB0aGlzLmNvb3Jkcy54ID0gKChlLnBhZ2VYLW9mZnNldC5sZWZ0KS9qRWxlbWVudC53aWR0aCgpKSoyLTE7XHJcbiAgICB0aGlzLmNvb3Jkcy55ID0gLSgoZS5wYWdlWS1vZmZzZXQudG9wKS9qRWxlbWVudC5oZWlnaHQoKSkqMisxO1xyXG4gICAgcmV0dXJuIHRoaXMuY29vcmRzO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZURvd24oZSkge1xyXG4gICAgaWYoIXRoaXMuZW5hYmxlZCkgcmV0dXJuO1xyXG5cclxuICAgIGlmKHRoaXMuc2VsZWN0ZWQpIHRoaXMub25Nb3VzZVVwKGUpO1xyXG5cclxuICAgIHRoaXMuc2V0Q29vcmRzRnJvbUV2ZW50KGUpO1xyXG4gIFx0dGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSh0aGlzLmNvb3JkcywgdGhpcy5jYW1lcmEpO1xyXG5cclxuICBcdGNvbnN0IGludGVyc2VjdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHRoaXMudGhyZWVzKTtcclxuICBcdGlmKGludGVyc2VjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBzZWxlY3RlZCA9IGludGVyc2VjdHNbMF0ub2JqZWN0O1xyXG4gICAgICBpZighdGhpcy5vblBpY2tDYWxsYmFjayhpbnRlcnNlY3RzWzBdKSkgcmV0dXJuO1xyXG4gICAgICBjb25zdCB2ID0gaW50ZXJzZWN0c1swXS5wb2ludC5jbG9uZSgpO1xyXG4gICAgICB0aGlzLmRpc3RhbmNlID0gdi5zdWIodGhpcy5yYXljYXN0ZXIucmF5Lm9yaWdpbikubGVuZ3RoKCk7O1xyXG4gICAgICB0aGlzLmNvbnRyb2xzU3RhdGUgPSB0aGlzLnZpc3VhbC5nZXRDb250cm9sc1N0YXRlKCk7XHJcbiAgICAgIHRoaXMudmlzdWFsLnNldENvbnRyb2xzU3RhdGUoZmFsc2UpO1xyXG4gICAgICB0aGlzLnBsYW5lLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KHRoaXMudmlzdWFsLmNhbWVyYS5nZXRXb3JsZERpcmVjdGlvbih0aGlzLnBsYW5lLm5vcm1hbCksIGludGVyc2VjdHNbMF0ucG9pbnQpO1xyXG4gICAgICAvL3RoaXMucGxhbmUuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQodGhpcy5wbGFuZS5ub3JtYWwuc2V0KDAsMCwxKSwgbmV3IFRIUkVFLlZlY3RvcjMoMCwwLDApKTtcclxuICAgICAgdGhpcy5zZWxlY3RlZCA9IHNlbGVjdGVkO1xyXG4gIFx0fVxyXG5cclxuICB9XHJcblxyXG4gIG9uTW91c2VNb3ZlKGUpIHtcclxuICAgIGlmKCF0aGlzLmVuYWJsZWQpIHJldHVybjtcclxuICBcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgXHRpZih0aGlzLnNlbGVjdGVkKSB7XHJcbiAgICAgIHRoaXMuc2V0Q29vcmRzRnJvbUV2ZW50KGUpO1xyXG4gICAgXHR0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMuY29vcmRzLCB0aGlzLmNhbWVyYSk7XHJcblx0ICAgIGlmKHRoaXMucmF5Y2FzdGVyLnJheS5pbnRlcnNlY3RQbGFuZSh0aGlzLnBsYW5lLCB0aGlzLmludGVyc2VjdGlvbikpIHtcclxuICAgICAgICBpZighdGhpcy5vbkRyYWdDYWxsYmFjayh0aGlzLmludGVyc2VjdGlvbikpIHRoaXMub25Nb3VzZVVwKGUpO1xyXG4gICAgICB9LyoqL1xyXG4gICAgICAvL3RoaXMuaW50ZXJzZWN0aW9uLmNvcHkodGhpcy5yYXljYXN0ZXIucmF5LmRpcmVjdGlvbikubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIodGhpcy5kaXN0YW5jZSkuYWRkKHRoaXMucmF5Y2FzdGVyLnJheS5vcmlnaW4pOy8qKi9cclxuICAgICAgLy9pZighdGhpcy5vbkRyYWdDYWxsYmFjayh0aGlzLnNlbGVjdGVkLCB0aGlzLmludGVyc2VjdGlvbikpIHRoaXMub25Nb3VzZVVwKGUpO1xyXG4gIFx0fVxyXG4gIH1cclxuXHJcbiAgb25Nb3VzZVVwKGUpIHtcclxuICAgIGlmKHRoaXMuc2VsZWN0ZWQpIHtcclxuICAgICAgdGhpcy5vblJlbGVhc2VDYWxsYmFjaygpO1xyXG4gIFx0XHR0aGlzLnNlbGVjdGVkID0gbnVsbDtcclxuICAgICAgdGhpcy52aXN1YWwuc2V0Q29udHJvbHNTdGF0ZSh0aGlzLmNvbnRyb2xzU3RhdGUpO1xyXG4gIFx0fVxyXG4gICAgaWYoIXRoaXMuZW5hYmxlZCkgcmV0dXJuO1xyXG4gIFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvRHJhZy5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0RyYWcuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5yZXF1aXJlKCdpbXBvcnRzLWxvYWRlcj9kZWZpbmU9PmZhbHNlIWpxdWVyeS1tb3VzZXdoZWVsJykoJCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFdmVudHNUb0FjdGlvbnMge1xyXG5cclxuICBzdGF0aWMgbW9kS2V5cyA9IHtcclxuICAgIEN0cmw6IDEsXHJcbiAgICBTaGlmdDogMixcclxuICAgIEFsdDogNFxyXG4gIH07XHJcblxyXG4gIHN0YXRpYyBtb3VzZUJ1dHRvbnMgPSB7XHJcbiAgICBMZWZ0OiAwLFxyXG4gICAgTWlkZGxlOiAxLFxyXG4gICAgUmlnaHQ6IDJcclxuICB9O1xyXG5cclxuICBzdGF0aWMgZ2V0RXZlbnRGbGFncyhlKSB7XHJcbiAgICByZXR1cm4gZS5jdHJsS2V5PDwwIHwgZS5zaGlmdEtleTw8MSB8IGUuYWx0S2V5PDwyO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldFBvc2l0aW9uKHRvdWNoZXMpIHtcclxuICAgIGxldCB4LCB5O1xyXG4gICAgaWYodG91Y2hlcy5sZW5ndGg9PT0yKSB7XHJcbiAgICAgIHggPSB0b3VjaGVzWzFdLnBhZ2VYLXRvdWNoZXNbMF0ucGFnZVg7XHJcbiAgICAgIHkgPSB0b3VjaGVzWzFdLnBhZ2VZLXRvdWNoZXNbMF0ucGFnZVk7XHJcbiAgICAgIHkgPSAtTWF0aC5zcXJ0KHgqeCt5KnkpO1xyXG4gICAgICB4ID0gMDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB4ID0gdG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgeSA9IHRvdWNoZXNbMF0ucGFnZVk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4LFxyXG4gICAgICB5XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoZWxlbWVudCwgYWN0aW9ucykge1xyXG4gICAgdGhpcy5hY3Rpb25zID0gYWN0aW9ucyB8fCB7fTtcclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB0aGlzLmRvYyA9IGVsZW1lbnRbMF0ub3duZXJEb2N1bWVudDtcclxuICAgIHRoaXMud25kID0gdGhpcy5kb2MuZGVmYXVsdFZpZXc7XHJcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMuYmluZHMgPSB7XHJcbiAgICAgIGNvbnRleHRNZW51OiB0aGlzLmNvbnRleHRNZW51LmJpbmQodGhpcyksXHJcblxyXG4gICAgICBtb3VzZURvd246IHRoaXMubW91c2VEb3duLmJpbmQodGhpcyksXHJcbiAgICAgIG1vdXNlTW92ZTogdGhpcy5tb3VzZU1vdmUuYmluZCh0aGlzKSxcclxuICAgICAgbW91c2VVcDogdGhpcy5tb3VzZVVwLmJpbmQodGhpcyksXHJcbiAgICAgIG1vdXNlV2hlZWw6IHRoaXMubW91c2VXaGVlbC5iaW5kKHRoaXMpLFxyXG5cclxuICAgICAgbW91c2VNb3ZlRG9jOiB0aGlzLm1vdXNlTW92ZURvYy5iaW5kKHRoaXMpLFxyXG4gICAgICBtb3VzZVVwRG9jOiB0aGlzLm1vdXNlVXBEb2MuYmluZCh0aGlzKSxcclxuXHJcbiAgICAgIGNsaWNrOiB0aGlzLmNsaWNrLmJpbmQodGhpcyksXHJcbiAgICAgIGRibGNsaWNrOiB0aGlzLmRibGNsaWNrLmJpbmQodGhpcyksXHJcblxyXG4gICAgICB0b3VjaFN0YXJ0OiB0aGlzLnRvdWNoU3RhcnQuYmluZCh0aGlzKSxcclxuICAgICAgdG91Y2hNb3ZlOiB0aGlzLnRvdWNoTW92ZS5iaW5kKHRoaXMpLFxyXG4gICAgICB0b3VjaEVuZDogdGhpcy50b3VjaEVuZC5iaW5kKHRoaXMpLFxyXG5cclxuICAgICAga2V5RG93bjogdGhpcy5rZXlEb3duLmJpbmQodGhpcyksXHJcbiAgICAgIGtleVByZXNzOiB0aGlzLmtleVByZXNzLmJpbmQodGhpcyksXHJcbiAgICAgIGtleVVwOiB0aGlzLmtleVVwLmJpbmQodGhpcylcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5lbGVtZW50Lm9uKCdjb250ZXh0bWVudScsIHRoaXMuYmluZHMuY29udGV4dE1lbnUpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5vbignbW91c2Vkb3duJywgdGhpcy5iaW5kcy5tb3VzZURvd24pO1xyXG4gICAgdGhpcy5lbGVtZW50Lm9uKCdtb3VzZW1vdmUnLCB0aGlzLmJpbmRzLm1vdXNlTW92ZSk7XHJcbiAgICB0aGlzLmVsZW1lbnQub24oJ21vdXNldXAnLCB0aGlzLmJpbmRzLm1vdXNlVXApO1xyXG4gICAgdGhpcy5lbGVtZW50Lm9uKCdtb3VzZXdoZWVsJywgdGhpcy5iaW5kcy5tb3VzZVdoZWVsKTtcclxuXHJcbiAgICAkKHRoaXMuZG9jKS5vbignbW91c2Vtb3ZlJywgdGhpcy5iaW5kcy5tb3VzZU1vdmVEb2MpO1xyXG4gICAgJCh0aGlzLmRvYykub24oJ21vdXNldXAnLCB0aGlzLmJpbmRzLm1vdXNlVXBEb2MpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5vbignY2xpY2snLCB0aGlzLmJpbmRzLmNsaWNrKTtcclxuICAgIHRoaXMuZWxlbWVudC5vbignZGJsY2xpY2snLCB0aGlzLmJpbmRzLmRibGNsaWNrKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQub24oJ3RvdWNoc3RhcnQnLCB0aGlzLmJpbmRzLnRvdWNoU3RhcnQpO1xyXG4gICAgdGhpcy5lbGVtZW50Lm9uKCd0b3VjaG1vdmUnLCB0aGlzLmJpbmRzLnRvdWNoTW92ZSk7XHJcbiAgICB0aGlzLmVsZW1lbnQub24oJ3RvdWNoZW5kJywgdGhpcy5iaW5kcy50b3VjaEVuZCk7XHJcblxyXG4gICAgJCh0aGlzLnduZCkub24oJ2tleWRvd24nLCB0aGlzLmJpbmRzLmtleURvd24pO1xyXG4gICAgJCh0aGlzLnduZCkub24oJ2tleXByZXNzJywgdGhpcy5iaW5kcy5rZXlQcmVzcyk7XHJcbiAgICAkKHRoaXMud25kKS5vbigna2V5dXAnLCB0aGlzLmJpbmRzLmtleVVwKTtcclxuICB9XHJcblxyXG4gIGFkZEFjdGlvbihhY3Rpb24sIHR5cGUsIGNvZGUsIGZsYWdzKSB7XHJcbiAgICB0eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYoIXRoaXMuYWN0aW9uc1t0eXBlXSkge1xyXG4gICAgICB0aGlzLmFjdGlvbnNbdHlwZV0gPSB7fTtcclxuICAgIH1cclxuICAgIGlmKCF0aGlzLmFjdGlvbnNbdHlwZV1bY29kZV0pIHtcclxuICAgICAgdGhpcy5hY3Rpb25zW3R5cGVdW2NvZGVdID0ge31cclxuICAgIH1cclxuICAgIGlmKCF0aGlzLmFjdGlvbnNbdHlwZV1bY29kZV1bZmxhZ3NdKSB7XHJcbiAgICAgIHRoaXMuYWN0aW9uc1t0eXBlXVtjb2RlXVtmbGFnc10gPSBbXTtcclxuICAgIH1cclxuICAgIHRoaXMuYWN0aW9uc1t0eXBlXVtjb2RlXVtmbGFnc10ucHVzaChhY3Rpb24pO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWN0aW9ucyh0eXBlLCBjb2RlLCBmbGFncykge1xyXG4gICAgcmV0dXJuICgodGhpcy5hY3Rpb25zW3R5cGVdIHx8IHt9KVtjb2RlXSB8fCB7fSlbZmxhZ3NdIHx8IFtdO1xyXG4gIH1cclxuXHJcbiAgZmlyZUFjdGlvbnMoYWN0aW9ucywgZSwgZGF0YSkge1xyXG4gICAgZm9yKGxldCBhY3Rpb24gb2YgYWN0aW9ucykge1xyXG4gICAgICBhY3Rpb24oZSwgZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb250ZXh0TWVudShlKSB7XHJcbiAgICBpZih0aGlzLmVuYWJsZWQpIHtcclxuICAgICAgY29uc3QgZmxhZ3MgPSBFdmVudHNUb0FjdGlvbnMuZ2V0RXZlbnRGbGFncyhlKTtcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLmdldEFjdGlvbnMoJ2NvbnRleHRtZW51JywgZS5idXR0b24sIGZsYWdzKSwgZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3VzZURvd24oZSkge1xyXG4gICAgaWYodGhpcy5waWNrZWQpIHtcclxuICAgICAgdGhpcy5tb3VzZVVwRG9jKCk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLmVuYWJsZWQpIHtcclxuICAgICAgY29uc3QgZmxhZ3MgPSBFdmVudHNUb0FjdGlvbnMuZ2V0RXZlbnRGbGFncyhlKTtcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLmdldEFjdGlvbnMoJ21vdXNlZG93bicsIGUuYnV0dG9uLCBmbGFncyksIGUpO1xyXG4gICAgICB0aGlzLnBpY2tlZCA9IHtcclxuICAgICAgICB4OiBlLnBhZ2VYLFxyXG4gICAgICAgIHk6IGUucGFnZVksXHJcbiAgICAgICAgYWN0aW9uczogdGhpcy5nZXRBY3Rpb25zKCdtb3VzZWRyYWcnLCBlLmJ1dHRvbiwgZmxhZ3MpXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy5waWNrZWQuYWN0aW9ucywgZSwge1xyXG4gICAgICAgIHN0YXRlOiAnc3RhcnQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW91c2VNb3ZlKGUpIHtcclxuICAgIGlmKHRoaXMuZW5hYmxlZCkge1xyXG4gICAgICBjb25zdCBmbGFncyA9IEV2ZW50c1RvQWN0aW9ucy5nZXRFdmVudEZsYWdzKGUpO1xyXG4gICAgICB0aGlzLmZpcmVBY3Rpb25zKHRoaXMuZ2V0QWN0aW9ucygnbW91c2Vtb3ZlJywgZS5idXR0b24sIGZsYWdzKSwgZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3VzZU1vdmVEb2MoZSkge1xyXG4gICAgaWYodGhpcy5lbmFibGVkICYmIHRoaXMucGlja2VkKSB7XHJcbiAgICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy5waWNrZWQuYWN0aW9ucywgZSwge1xyXG4gICAgICAgIHN0YXRlOiAnbW92ZScsXHJcbiAgICAgICAgZHg6IGUucGFnZVgtdGhpcy5waWNrZWQueCxcclxuICAgICAgICBkeTogZS5wYWdlWS10aGlzLnBpY2tlZC55XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnBpY2tlZCA9IHtcclxuICAgICAgICB4OiBlLnBhZ2VYLFxyXG4gICAgICAgIHk6IGUucGFnZVksXHJcbiAgICAgICAgYWN0aW9uczogdGhpcy5waWNrZWQuYWN0aW9uc1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW91c2VVcChlKSB7XHJcbiAgICBpZih0aGlzLmVuYWJsZWQpIHtcclxuICAgICAgY29uc3QgZmxhZ3MgPSBFdmVudHNUb0FjdGlvbnMuZ2V0RXZlbnRGbGFncyhlKTtcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLmdldEFjdGlvbnMoJ21vdXNldXAnLCBlLmJ1dHRvbiwgZmxhZ3MpLCBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdXNlVXBEb2MoZSkge1xyXG4gICAgaWYodGhpcy5waWNrZWQpIHtcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLnBpY2tlZC5hY3Rpb25zLCBlLCB7XHJcbiAgICAgICAgc3RhdGU6ICdlbmQnXHJcbiAgICAgIH0pO1xyXG4gICAgICBkZWxldGUgdGhpcy5waWNrZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3VzZVdoZWVsKGUpIHtcclxuICAgIGlmKHRoaXMuZW5hYmxlZCkge1xyXG4gICAgICBjb25zdCBmbGFncyA9IEV2ZW50c1RvQWN0aW9ucy5nZXRFdmVudEZsYWdzKGUpO1xyXG4gICAgICB0aGlzLmZpcmVBY3Rpb25zKHRoaXMuZ2V0QWN0aW9ucygnbW91c2V3aGVlbCcsIDAsIGZsYWdzKSwgZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGlja3MoZSwgdHlwZSkge1xyXG4gICAgaWYodGhpcy5lbmFibGVkKSB7XHJcbiAgICAgIGNvbnN0IGZsYWdzID0gRXZlbnRzVG9BY3Rpb25zLmdldEV2ZW50RmxhZ3MoZSk7XHJcbiAgICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy5nZXRBY3Rpb25zKHR5cGUsIGUuYnV0dG9uLCBmbGFncyksIGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xpY2soZSkge1xyXG4gICAgdGhpcy5jbGlja3MoZSwgJ2NsaWNrJyk7XHJcbiAgfVxyXG5cclxuICBkYmxjbGljayhlKSB7XHJcbiAgICB0aGlzLmNsaWNrcyhlLCAnZGJsY2xpY2snKTtcclxuICB9XHJcblxyXG4gIHRvdWNoUGljayhlLCBmbGFncywgdG91Y2hlcykge1xyXG4gICAgdGhpcy50b3VjaFBpY2tlZCA9IHtcclxuICAgICAgLi4uRXZlbnRzVG9BY3Rpb25zLmdldFBvc2l0aW9uKHRvdWNoZXMpLFxyXG4gICAgICBhY3Rpb25zOiB0aGlzLmdldEFjdGlvbnMoJ3RvdWNoZHJhZycsIHRvdWNoZXMubGVuZ3RoLCBmbGFncyksXHJcbiAgICAgIGNvZGU6IHRvdWNoZXMubGVuZ3RoLFxyXG4gICAgICBmbGFnc1xyXG4gICAgfTtcclxuICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy50b3VjaFBpY2tlZC5hY3Rpb25zLCBlLCB7XHJcbiAgICAgIHN0YXRlOiAnc3RhcnQnXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvdWNoU3RhcnQoZSkge1xyXG4gICAgaWYodGhpcy50b3VjaFBpY2tlZCkge1xyXG4gICAgICB0aGlzLnRvdWNoRW5kKGUpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5lbmFibGVkKSB7XHJcbiAgICAgIGNvbnN0IGZsYWdzID0gRXZlbnRzVG9BY3Rpb25zLmdldEV2ZW50RmxhZ3MoZSksIHRvdWNoZXMgPSBlLnRvdWNoZXMgfHwgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXM7XHJcbiAgICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy5nZXRBY3Rpb25zKCd0b3VjaHN0YXJ0JywgdG91Y2hlcy5sZW5ndGgsIGZsYWdzKSwgZSk7XHJcbiAgICAgIHRoaXMudG91Y2hQaWNrKGUsIGZsYWdzLCB0b3VjaGVzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvdWNoTW92ZShlKSB7XHJcbiAgICBpZih0aGlzLmVuYWJsZWQpIHtcclxuICAgICAgY29uc3QgZmxhZ3MgPSBFdmVudHNUb0FjdGlvbnMuZ2V0RXZlbnRGbGFncyhlKSwgdG91Y2hlcyA9IGUudG91Y2hlcyB8fCBlLm9yaWdpbmFsRXZlbnQudG91Y2hlcztcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLmdldEFjdGlvbnMoJ3RvdWNobW92ZScsIHRvdWNoZXMubGVuZ3RoLCBmbGFncyksIGUpO1xyXG4gICAgICBpZih0aGlzLnRvdWNoUGlja2VkKSB7XHJcbiAgICAgICAgaWYodGhpcy50b3VjaFBpY2tlZC5jb2RlPT09dG91Y2hlcy5sZW5ndGggJiYgdGhpcy50b3VjaFBpY2tlZC5mbGFncz09PWZsYWdzKSB7XHJcbiAgICAgICAgICBjb25zdCBwb3MgPSBFdmVudHNUb0FjdGlvbnMuZ2V0UG9zaXRpb24odG91Y2hlcyk7XHJcbiAgICAgICAgICB0aGlzLmZpcmVBY3Rpb25zKHRoaXMudG91Y2hQaWNrZWQuYWN0aW9ucywgZSwge1xyXG4gICAgICAgICAgICBzdGF0ZTogJ21vdmUnLFxyXG4gICAgICAgICAgICBkeDogcG9zLngtdGhpcy50b3VjaFBpY2tlZC54LFxyXG4gICAgICAgICAgICBkeTogcG9zLnktdGhpcy50b3VjaFBpY2tlZC55XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHRoaXMudG91Y2hQaWNrZWQgPSB7XHJcbiAgICAgICAgICAgIC4uLnRoaXMudG91Y2hQaWNrZWQsXHJcbiAgICAgICAgICAgIC4uLnBvc1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnRvdWNoRW5kKGUpO1xyXG4gICAgICAgICAgdGhpcy50b3VjaFBpY2soZSwgZmxhZ3MsIHRvdWNoZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG91Y2hFbmQoZSkge1xyXG4gICAgaWYodGhpcy50b3VjaFBpY2tlZCkge1xyXG4gICAgICB0aGlzLmZpcmVBY3Rpb25zKHRoaXMudG91Y2hQaWNrZWQuYWN0aW9ucywgZSwge1xyXG4gICAgICAgIHN0YXRlOiAnZW5kJ1xyXG4gICAgICB9KTtcclxuICAgICAgZGVsZXRlIHRoaXMudG91Y2hQaWNrZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBrZXkoZSwgdHlwZSkge1xyXG4gICAgaWYodGhpcy5lbmFibGVkKSB7XHJcbiAgICAgIGNvbnN0IGZsYWdzID0gRXZlbnRzVG9BY3Rpb25zLmdldEV2ZW50RmxhZ3MoZSk7XHJcbiAgICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy5nZXRBY3Rpb25zKHR5cGUsIGUua2V5Q29kZSwgZmxhZ3MpLCBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGtleURvd24oZSkge1xyXG4gICAgdGhpcy5rZXkoZSwgJ2tleWRvd24nKTtcclxuICB9XHJcblxyXG4gIGtleVByZXNzKGUpIHtcclxuICAgIHRoaXMua2V5KGUsICdrZXlwcmVzcycpO1xyXG4gIH1cclxuXHJcbiAga2V5VXAoZSkge1xyXG4gICAgdGhpcy5rZXkoZSwgJ2tleXVwJyk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5lbGVtZW50Lm9mZignY29udGV4dG1lbnUnLCB0aGlzLmJpbmRzLmNvbnRleHRNZW51KTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQub2ZmKCdtb3VzZWRvd24nLCB0aGlzLmJpbmRzLm1vdXNlRG93bik7XHJcbiAgICB0aGlzLmVsZW1lbnQub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLmJpbmRzLm1vdXNlTW92ZSk7XHJcbiAgICB0aGlzLmVsZW1lbnQub2ZmKCdtb3VzZXVwJywgdGhpcy5iaW5kcy5tb3VzZVVwKTtcclxuICAgIHRoaXMuZWxlbWVudC5vZmYoJ21vdXNld2hlZWwnLCB0aGlzLmJpbmRzLm1vdXNlV2hlZWwpO1xyXG5cclxuICAgICQodGhpcy5kb2MpLm9mZignbW91c2Vtb3ZlJywgdGhpcy5iaW5kcy5tb3VzZU1vdmVEb2MpO1xyXG4gICAgJCh0aGlzLmRvYykub2ZmKCdtb3VzZXVwJywgdGhpcy5iaW5kcy5tb3VzZVVwRG9jKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQub2ZmKCdjbGljaycsIHRoaXMuYmluZHMuY2xpY2spO1xyXG4gICAgdGhpcy5lbGVtZW50Lm9mZignZGJsY2xpY2snLCB0aGlzLmJpbmRzLmRibGNsaWNrKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQub2ZmKCd0b3VjaHN0YXJ0JywgdGhpcy5iaW5kcy50b3VjaFN0YXJ0KTtcclxuICAgIHRoaXMuZWxlbWVudC5vZmYoJ3RvdWNobW92ZScsIHRoaXMuYmluZHMudG91Y2hNb3ZlKTtcclxuICAgIHRoaXMuZWxlbWVudC5vZmYoJ3RvdWNoZW5kJywgdGhpcy5iaW5kcy50b3VjaEVuZCk7XHJcblxyXG4gICAgJCh0aGlzLnduZCkub2ZmKCdrZXlkb3duJywgdGhpcy5iaW5kcy5rZXlEb3duKTtcclxuICAgICQodGhpcy53bmQpLm9mZigna2V5cHJlc3MnLCB0aGlzLmJpbmRzLmtleVByZXNzKTtcclxuICAgICQodGhpcy53bmQpLm9mZigna2V5dXAnLCB0aGlzLmJpbmRzLmtleVVwKTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0V2ZW50c1RvQWN0aW9ucy5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0V2ZW50c1RvQWN0aW9ucy5qcyIsIlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGdWxsU2NyZWVuIHtcclxuXHJcblx0c3RhdGljIF9oYXNXZWJraXRGdWxsU2NyZWVuXHQ9ICEhZG9jdW1lbnQud2Via2l0Q2FuY2VsRnVsbFNjcmVlbjtcclxuXHRzdGF0aWMgX2hhc01vekZ1bGxTY3JlZW5cdD0gISFkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuO1xyXG5cdHN0YXRpYyBfaGFzTXNGdWxsc2NyZWVuID0gISFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbjtcclxuXHJcblx0c3RhdGljIGF2YWlsYWJsZSgpIHtcclxuXHRcdHJldHVybiBGdWxsU2NyZWVuLl9oYXNXZWJraXRGdWxsU2NyZWVuIHx8IEZ1bGxTY3JlZW4uX2hhc01vekZ1bGxTY3JlZW4gfHwgRnVsbFNjcmVlbi5faGFzTXNGdWxsc2NyZWVuO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGFjdGl2YXRlZCgpIHtcclxuXHRcdGlmKEZ1bGxTY3JlZW4uX2hhc1dlYmtpdEZ1bGxTY3JlZW4pIHtcclxuXHRcdFx0cmV0dXJuIGRvY3VtZW50LndlYmtpdElzRnVsbFNjcmVlbjtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYoRnVsbFNjcmVlbi5faGFzTW96RnVsbFNjcmVlbikge1xyXG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQubW96RnVsbFNjcmVlbjtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYoRnVsbFNjcmVlbi5faGFzTXNGdWxsc2NyZWVuKSB7XHJcblx0XHRcdHJldHVybiAhIWRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQ7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29uc29sZS5hc3NlcnQoZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RhdGljIGFkZEV2ZW50TGlzdGVuZXIoZWxlbWVudCwgaGFuZGxlcikge1xyXG5cdFx0aWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xyXG5cdFx0ICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsIGhhbmRsZXIsIGZhbHNlKTtcclxuXHRcdCAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vemZ1bGxzY3JlZW5jaGFuZ2UnLCBoYW5kbGVyLCBmYWxzZSk7XHJcblx0XHQgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgaGFuZGxlciwgZmFsc2UpO1xyXG5cdFx0ICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignTVNGdWxsc2NyZWVuQ2hhbmdlJywgaGFuZGxlciwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RhdGljIHJlbW92ZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgaGFuZGxlcikge1xyXG5cdFx0aWYgKGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xyXG5cdFx0ICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsIGhhbmRsZXIsIGZhbHNlKTtcclxuXHRcdCAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vemZ1bGxzY3JlZW5jaGFuZ2UnLCBoYW5kbGVyLCBmYWxzZSk7XHJcblx0XHQgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgaGFuZGxlciwgZmFsc2UpO1xyXG5cdFx0ICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignTVNGdWxsc2NyZWVuQ2hhbmdlJywgaGFuZGxlciwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RhdGljIHJlcXVlc3QoZWxlbWVudCkge1xyXG5cdFx0ZWxlbWVudFx0PSBlbGVtZW50XHR8fCBkb2N1bWVudC5ib2R5O1xyXG5cdFx0aWYoRnVsbFNjcmVlbi5faGFzV2Via2l0RnVsbFNjcmVlbikge1xyXG5cdFx0XHRlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKEZ1bGxTY3JlZW4uX2hhc01vekZ1bGxTY3JlZW4pIHtcclxuXHRcdFx0ZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZihGdWxsU2NyZWVuLl9oYXNNc0Z1bGxzY3JlZW4pIHtcclxuXHRcdFx0ZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29uc29sZS5hc3NlcnQoZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RhdGljIGNhbmNlbCgpIHtcclxuXHRcdGlmKEZ1bGxTY3JlZW4uX2hhc1dlYmtpdEZ1bGxTY3JlZW4pIHtcclxuXHRcdFx0ZG9jdW1lbnQud2Via2l0Q2FuY2VsRnVsbFNjcmVlbigpO1xyXG5cdFx0fWVsc2UgaWYoRnVsbFNjcmVlbi5faGFzTW96RnVsbFNjcmVlbikge1xyXG5cdFx0XHRkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKEZ1bGxTY3JlZW4uX2hhc01zRnVsbHNjcmVlbikge1xyXG5cdFx0XHRkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29uc29sZS5hc3NlcnQoZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvRnVsbFNjcmVlbi5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0Z1bGxTY3JlZW4uanMiLCJpbXBvcnQgeyQsIGh0bWwyY2FudmFzfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IEltYWdlQmFzZSBmcm9tICcuL0ltYWdlQmFzZSc7XHJcbmltcG9ydCBCYXNlTWF0aFV0aWxzIGZyb20gJy4vQmFzZU1hdGhVdGlscyc7XHJcbmltcG9ydCBEb20ySW1hZ2UgZnJvbSAnLi9Eb20ySW1hZ2UnO1xyXG5pbXBvcnQgRG9jTW91c2VTaW11bGF0b3IgZnJvbSAnLi9Eb2NNb3VzZVNpbXVsYXRvcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnRlcmFjdGl2ZUltYWdlIGV4dGVuZHMgSW1hZ2VCYXNlIHtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dCwgd2lkdGgsIGhlaWdodCwgY29sb3IsIHNyYywgY2FjaGUsIGluamVjdG9yKSB7XHJcbiAgICBzdXBlcihjb250ZXh0LCB3aWR0aCwgaGVpZ2h0LCBjb2xvcik7XHJcblxyXG4gICAgdGhpcy5pSWQgPSAnaScrQmFzZU1hdGhVdGlscy5nZXRVbmlxdWUoKTtcclxuICAgIGNvbnN0IGpGcmFtZSA9ICQoJzxpZnJhbWUgaWQ9XCInK3RoaXMuaUlkKydcIiBzcmM9XCInICsgc3JjICsgJ1wiIHN0eWxlPVwicG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMHB4O1wiPjwvaWZyYW1lPicpO1xyXG4gICAgJCh0aGlzLmRvYy5ib2R5KS5hcHBlbmQoakZyYW1lKTtcclxuICAgIHRoaXMuZnJhbWUgPSBqRnJhbWVbMF07XHJcblxyXG4gICAgdGhpcy5iaW5kcyA9IHt9O1xyXG5cclxuICAgIGlmKGluamVjdG9yKSB7XHJcbiAgICAgIGluamVjdG9yKHRoaXMuZnJhbWUuY29udGVudFdpbmRvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5kb2MuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgnd3d3Lmh0dHA6Ly93My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5JywgJzEuMScpKSB7IC8vIHN2ZyBmb3JlaWduT2JqZWN0IHJlbmRlcmVyXHJcbiAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgdGhpcy5iaW5kcy5pbWFnZUxvYWQgPSAoKT0+IHtcclxuICAgICAgICB0aGlzLnJlbmRlckltYWdlKHRoaXMuaW1hZ2UpO1xyXG4gICAgICAgIHRoaXMuZmluaXNoUmVuZGVyKCk7XHJcbiAgICAgIH07XHJcbiAgICAgICQodGhpcy5pbWFnZSkub24oJ2xvYWQnLCB0aGlzLmJpbmRzLmltYWdlTG9hZCk7XHJcbiAgICAgIHRoaXMuc3ZnUmVuZGVyID0gbmV3IERvbTJJbWFnZSh0aGlzLmZyYW1lLmNvbnRlbnRXaW5kb3csIHRoaXMuZnJhbWUuY29udGVudERvY3VtZW50LCBjYWNoZSk7XHJcbiAgICB9IC8vIG90aGVyd2lzZSAtIGh0bWwyY2FudmFzXHJcblxyXG4gICAgdGhpcy5iaW5kcy5mcmFtZUxvYWQgPSAoKT0+IHtcclxuICAgICAgaWYofnRoaXMuZnJhbWUuY29udGVudERvY3VtZW50LnRpdGxlLmluZGV4T2YoJzQwNCcpKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydFJlbmRlciA9ICgpPT4ge1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJOb3RGb3VuZFBhZ2UoKTtcclxuICAgICAgICAgIHRoaXMuZmluaXNoUmVuZGVyKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmZpbmlzaExvYWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpPT4ge1xyXG4gICAgICAgICAgaWYodGhpcy5mcmFtZSkge1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gJCh0aGlzLmZyYW1lLmNvbnRlbnREb2N1bWVudC5ib2R5KS53aWR0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9ICQodGhpcy5mcmFtZS5jb250ZW50RG9jdW1lbnQuYm9keSkuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIGpGcmFtZS5jc3MoJ3dpZHRoJywgdGhpcy53aWR0aCsncHgnKS5jc3MoJ2hlaWdodCcsIHRoaXMuaGVpZ2h0KydweCcpO1xyXG4gICAgICAgICAgICBqRnJhbWUub2Zmc2V0KHtsZWZ0OiAtdGhpcy53aWR0aC0xMDAsIHRvcDogMH0pO1xyXG4gICAgICAgICAgICBpZih0aGlzLnN2Z1JlbmRlcikge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2ltdWxhdG9yID0gbmV3IERvY01vdXNlU2ltdWxhdG9yKGpGcmFtZSwgdGhpcy5mcmFtZS5jb250ZW50RG9jdW1lbnQuYm9keSwgdGhpcy5lbGVtZW50KTtcclxuICAgICAgICAgICAgICB0aGlzLnNpbXVsYXRvci5hZGREb2NDaGFuZ2VDbGIodGhpcy5maW5pc2hMb2FkLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRSZW5kZXIgPSAoKT0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmZpbmlzaExvYWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCA1MDApO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgJCh0aGlzLmZyYW1lLmNvbnRlbnRXaW5kb3cpLm9uKCdsb2FkJywgdGhpcy5iaW5kcy5mcmFtZUxvYWQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2ltdWxhdGVkRG9jKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZnJhbWUuY29udGVudERvY3VtZW50O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYodGhpcy5zdmdSZW5kZXIpIHtcclxuICAgICAgdGhpcy5zdmdSZW5kZXIudG9TdmcodGhpcy5zaW11bGF0b3IuZWxlbWVudCwge2hlaWdodDogdGhpcy5oZWlnaHQrJ3B4Jywgd2lkdGg6IHRoaXMud2lkdGgrJ3B4J30pXHJcbiAgICAgICAgLnRoZW4oKGRhdGFVcmwpPT4ge1xyXG4gICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBkYXRhVXJsO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcik9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdEb20ySW1hZ2U6ICcsIGVycm9yKTtcclxuICAgICAgICAgIHRoaXMucmVuZGVyQmxhbmtQYWdlKCk7XHJcbiAgICAgICAgICB0aGlzLmZpbmlzaFJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGh0bWwyY2FudmFzKHRoaXMuZnJhbWUuY29udGVudERvY3VtZW50LmJvZHksIHt0aW1lb3V0OiAzMDAwMH0pLlxyXG4gICAgICAgIHRoZW4oKGNhbnZhcyk9PiB7XHJcbiAgICAgICAgICB0aGlzLnJlbmRlckltYWdlKGNhbnZhcyk7XHJcbiAgICAgICAgICB0aGlzLmZpbmlzaFJlbmRlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgICQodGhpcy5pbWFnZSkub2ZmKCdsb2FkJywgdGhpcy5iaW5kcy5pbWFnZUxvYWQpO1xyXG4gICAgJCh0aGlzLmZyYW1lLmNvbnRlbnRXaW5kb3cpLm9mZignbG9hZCcsIHRoaXMuYmluZHMuZnJhbWVMb2FkKTtcclxuICAgICQodGhpcy5kb2MuYm9keSkuZmluZCgnIycrdGhpcy5pSWQpLnJlbW92ZSgpO1xyXG4gICAgaWYodGhpcy5pbWFnZSkge1xyXG4gICAgICB0aGlzLmltYWdlLnNyYyA9ICcnO1xyXG4gICAgICBkZWxldGUgdGhpcy5pbWFnZTtcclxuICAgIH1cclxuICAgIHRoaXMuZnJhbWUuc3JjID0gJyc7XHJcbiAgICBkZWxldGUgdGhpcy5mcmFtZTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIHNpbXVsYXRlKGUsIGRvYywgeCwgeSkge1xyXG4gICAgaWYodGhpcy5zaW11bGF0b3IpIHtcclxuICAgICAgdGhpcy5zaW11bGF0b3Iuc2ltdWxhdGUoZSwgZG9jLCB4LCB5KTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0ludGVyYWN0aXZlSW1hZ2UuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9JbnRlcmFjdGl2ZUltYWdlLmpzIiwiaW1wb3J0IHskLCB0cn0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBHcmFwaFV0aWxzIGZyb20gJy4vR3JhcGhVdGlscyc7XHJcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSAnLi9NYXRoVXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9hZGluZ0FuaW1hdGlvbiB7XHJcblxyXG4gIGR5KHQseSkge1xyXG4gICAgY29uc3Qgdz15WzBdLCBhPXlbMV07XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAtdGhpcy5nKk1hdGguY29zKGEpLFxyXG4gICAgICB3XHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgaW50ZWdyYXRlKFQpIHtcclxuICAgIGxldCB0PTAsIGR0PXRoaXMucC5kdCwgb3MgPSB0aGlzLm9zO1xyXG4gICAgd2hpbGUodDxUKSB7XHJcbiAgICAgIGlmKHQrZHQ+VCkge1xyXG4gICAgICAgIGR0PVQtdDtcclxuICAgICAgfVxyXG4gICAgICBvcz1NYXRoVXRpbHMucms0KHRoaXMuZHkuYmluZCh7ZzogdGhpcy5wLmd9KSwgMCwgZHQsIG9zKTtcclxuICAgICAgdCs9ZHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3M7XHJcbiAgfVxyXG5cclxuICBjYWxjVGltZVRvKHRhcmdldCkge1xyXG4gICAgbGV0IHQ9MCwgZHQ9dGhpcy5wLmR0LCBvcyA9IHRoaXMub3M7XHJcbiAgICB3aGlsZShNYXRoLmFicyhvc1sxXS10YXJnZXQpPjFlLTQpIHtcclxuICAgICAgY29uc3Qgbm9zPU1hdGhVdGlscy5yazQodGhpcy5keS5iaW5kKHtnOiB0aGlzLnAuZ30pLCAwLCBkdCwgb3MpO1xyXG4gICAgICBpZihub3NbMF08MCAmJiBub3NbMV08dGFyZ2V0IHx8IG5vc1swXT4wICYmIG5vc1sxXT50YXJnZXQpIHtcclxuICAgICAgICBkdC89MjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBvcyA9IG5vcztcclxuICAgICAgICB0Kz1kdDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoVCkge1xyXG4gICAgdGhpcy5vcyA9IHRoaXMuaW50ZWdyYXRlKFQpO1xyXG5cclxuICAgIHRoaXMudCs9VFxyXG4gICAgaWYodGhpcy50Pj10aGlzLnAudXBkYXRlSW50ZXJ2YWwpIHtcclxuICAgICAgdGhpcy50ID0gMDtcclxuICAgICAgY29uc3QgciA9IDAuMDYqTWF0aC5taW4odGhpcy5jLndpZHRoLCB0aGlzLmMuaGVpZ2h0KSxcclxuICAgICAgICAgICAgYSA9IHRoaXMub3NbMV0sXHJcbiAgICAgICAgICAgIHgwID0gMC41KnRoaXMuYy53aWR0aCxcclxuICAgICAgICAgICAgeTAgPSAwLjUqdGhpcy5jLmhlaWdodCxcclxuICAgICAgICAgICAgY3R4ID0gdGhpcy5jdHg7XHJcblxyXG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuYy53aWR0aCwgdGhpcy5jLmhlaWdodCk7XHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IEdyYXBoVXRpbHMuY29sb3IyUmdiYSh0aGlzLnAuY29sb3IsMSk7XHJcbiAgICAgIGN0eC5yZWN0KDAsIDAsIHRoaXMuYy53aWR0aCwgdGhpcy5jLmhlaWdodCk7XHJcbiAgICAgIGN0eC5maWxsKCk7XHJcblxyXG4gICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgIGN0eC5zaGFkb3dCbHVyID0gNTA7XHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBHcmFwaFV0aWxzLmNvbG9yMlJnYmEoR3JhcGhVdGlscy5pbnZlcnNlQ29sb3IodGhpcy5wLmNvbG9yLDAuOSksTWF0aC5hYnModGhpcy5vc1swXS82LjM2KSk7XHJcbiAgICAgIGN0eC5zaGFkb3dDb2xvciA9IEdyYXBoVXRpbHMuY29sb3IyUmdiYShHcmFwaFV0aWxzLmludmVyc2VDb2xvcih0aGlzLnAuY29sb3IsMSksMC45KTtcclxuICAgICAgY3R4LnNoYWRvd09mZnNldFggPSAwO1xyXG4gICAgICBjdHguc2hhZG93T2Zmc2V0WSA9IDA7XHJcbiAgICAgIGN0eC5mb250PSdib2xkICcrTWF0aC5yb3VuZCgwLjI1KnIpKydweCBBcmlhbCc7XHJcbiAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xyXG4gICAgICBjdHguZmlsbFRleHQodHIoJ0xvYWRpbmcuLi4nKSx4MCx5MCk7XHJcblxyXG4gICAgICBjb25zdCBwcyA9IDEwLCBkYT0yKk1hdGguUEkvcHM7Ly8yLjUqX3IvclxyXG4gICAgICBjdHguc2hhZG93Q29sb3IgPSBHcmFwaFV0aWxzLmNvbG9yMlJnYmEoR3JhcGhVdGlscy5pbnZlcnNlQ29sb3IodGhpcy5wLmNvbG9yLDEpLDAuNyk7XHJcbiAgICAgIGZvcihsZXQgaT0wLCBfYT1hLCBfcj0wLjIqcjsgaTxwczsgKytpLCBfcio9MC45LCBfYSs9ZGEpIHtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IEdyYXBoVXRpbHMuY29sb3IyUmdiYShHcmFwaFV0aWxzLmludmVyc2VDb2xvcih0aGlzLnAuY29sb3IsKHBzLWkpL3BzKSwwLjcqKHBzLWkpL3BzKTtcclxuICAgICAgICBjb25zdCBjeD14MCtyKk1hdGguY29zKF9hKSwgY3k9eTAtcipNYXRoLnNpbihfYSksIG54PXgwK3IqTWF0aC5jb3MoX2ErZGEpLCBueT15MC1yKk1hdGguc2luKF9hK2RhKTtcclxuICAgICAgICBjdHguc2hhZG93T2Zmc2V0WCA9IDAuMioobngtY3gpO1xyXG4gICAgICAgIGN0eC5zaGFkb3dPZmZzZXRZID0gMC4yKihueS1jeSk7XHJcbiAgICAgICAgY3R4LmFyYyhjeCwgY3ksIF9yLCAwLCBNYXRoLlBJKjIsIDEpO1xyXG4gICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5vbkNoYW5nZSkge1xyXG4gICAgICAgIHRoaXMub25DaGFuZ2UodGhpcy5jLCB0aGlzLnAuY29sb3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRJbWFnZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmM7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5jLndpZHRoID0gMDtcclxuICAgIHRoaXMuYy5oZWlnaHQgPSAwO1xyXG4gICAgZGVsZXRlIHRoaXMuY3R4O1xyXG4gICAgZGVsZXRlIHRoaXMuYztcclxuICB9XHJcblxyXG4gIGNyZWF0ZVNwcml0ZShuKSB7XHJcbiAgICBjb25zdCBjID0gJCgnPGNhbnZhcyB3aWR0aD1cIicrdGhpcy5jLndpZHRoKm4rJ1wiIGhlaWdodD1cIicrdGhpcy5jLmhlaWdodCsnXCI+PC9jYW52YXM+JylbMF0sIGN0eCA9IGMuZ2V0Q29udGV4dCgnMmQnKSxcclxuICAgIHQgPSB0aGlzLmNhbGNUaW1lVG8odGhpcy5vc1sxXStNYXRoLnNpZ24odGhpcy5vc1swXSkqMipNYXRoLlBJKSwgZHQ9dC8obisxKTtcclxuICAgIGNvbnN0IHt1cGRhdGVJbnRlcnZhbH0gPSB0aGlzLnA7XHJcbiAgICB0aGlzLnAudXBkYXRlSW50ZXJ2YWwgPSAwO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8bjsgKytpKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlKGR0KTtcclxuICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLmMsIGkqdGhpcy5jLndpZHRoLCAwKTtcclxuICAgIH1cclxuICAgIHRoaXMucC51cGRhdGVJbnRlcnZhbCA9IHVwZGF0ZUludGVydmFsO1xyXG4gICAgcmV0dXJuIGM7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3Rvcih3aWR0aCwgaGVpZ2h0LCBjb2xvcikge1xyXG4gICAgY29uc3QgakMgPSAkKCc8Y2FudmFzIHdpZHRoPVwiJyt3aWR0aCsnXCIgaGVpZ2h0PVwiJytoZWlnaHQrJ1wiPjwvY2FudmFzPicpO1xyXG4gICAgdGhpcy5jID0gakNbMF07XHJcbiAgICB0aGlzLnAgPSB7XHJcbiAgICAgIGc6IDkuOCxcclxuICAgICAgZHQ6IDEvNjAsXHJcbiAgICAgIGNvbG9yLFxyXG4gICAgICB1cGRhdGVJbnRlcnZhbDogMC4yNVxyXG4gICAgfTtcclxuICAgIHRoaXMuY3R4ID0gdGhpcy5jLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICB0aGlzLm9zID0gWy0yLCBNYXRoLlBJLzJdO1xyXG4gICAgdGhpcy50ID0gdGhpcy5wLnVwZGF0ZUludGVydmFsO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvTG9hZGluZ0FuaW1hdGlvbi5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0xvYWRpbmdBbmltYXRpb24uanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9hZGluZ0NvbnRyb2xsZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih2aWV3LCBzaG93UHJvZ3Jlc3M9dHJ1ZSwgbG9hZGluZ01zZz11bmRlZmluZWQpIHtcclxuICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICB0aGlzLnByb2dyZXNzID0gMDtcclxuICAgIHRoaXMuc2hvd1Byb2dyZXNzID0gc2hvd1Byb2dyZXNzO1xyXG4gICAgdGhpcy5nZXRMb2FkaW5nTXNnID0gbG9hZGluZ01zZyB8fCBMb2FkaW5nQ29udHJvbGxlci5kZWZhdWx0TG9hZGluZ01zZztcclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGRlZmF1bHRMb2FkaW5nTXNnKHByb2dyZXNzKSB7XHJcbiAgICByZXR1cm4gWydQbGVhc2Ugd2FpdC4uLiB0aGUgQXBwbGljYXRpb24gaXMgTG9hZGluZzogJywgcHJvZ3Jlc3MsICclJ10uam9pbignJyk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5zaG93UHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gICAgZGVsZXRlIHRoaXMudmlldztcclxuICB9XHJcblxyXG4gIHNldFByb2dyZXNzKHYpIHtcclxuICAgIHRoaXMucHJvZ3Jlc3MgPSB2O1xyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVWaWV3KCkge1xyXG4gICAgaWYodGhpcy52aWV3KSB7XHJcblxyXG4gICAgICB0aGlzLnZpZXcuc2V0U3RhdGUoJ3dpZExvYWRpbmdQcm9ncmVzcycsIHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5zaG93UHJvZ3Jlc3MsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMudmlldy5zZXRTdGF0ZSgndHh0TG9hZGluZ1Byb2dyZXNzJywge1xyXG4gICAgICAgIHZhbHVlOiB0aGlzLmdldExvYWRpbmdNc2codGhpcy5wcm9ncmVzcyksXHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZvcihsZXQgbmFtZSBvZiB0aGlzLnZpZXcuZ2V0TGlua3MoKSkge1xyXG4gICAgICAgIHRoaXMudmlldy5zZXRTdGF0ZShuYW1lLCB7XHJcbiAgICAgICAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCdpbnBQYWdlcycsIHtcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIHZhbHVlOiAnJ1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMudmlldy5zZXRTdGF0ZSgnaW5wUGFnZScsIHtcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgdmFsdWU6ICcnXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0xvYWRpbmdDb250cm9sbGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvTG9hZGluZ0NvbnRyb2xsZXIuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9FdmVudENvbnZlcnRlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3VzZUV2ZW50Q29udmVydGVyIGV4dGVuZHMgRXZlbnRDb252ZXJ0ZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3bmQsIGRvYywgZWxlbWVudCkge1xyXG4gICAgc3VwZXIod25kLCBkb2MpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICBjb252ZXJ0OiB0aGlzLmNvbnZlcnQuYmluZCh0aGlzKVxyXG4gICAgfTtcclxuICAgICQodGhpcy5lbGVtZW50KS5vbignbW91c2Vtb3ZlIG1vdXNlZG93biBtb3VzZW92ZXIgbW91c2VvdXQgY2xpY2snLCB0aGlzLmJpbmRzLmNvbnZlcnQpO1xyXG4gICAgJCh0aGlzLmRvYykub24oJ21vdXNldXAnLCB0aGlzLmJpbmRzLmNvbnZlcnQpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgICQodGhpcy5lbGVtZW50KS5vZmYoJ21vdXNlbW92ZSBtb3VzZWRvd24gbW91c2VvdmVyIG1vdXNlb3V0IGNsaWNrJywgdGhpcy5iaW5kcy5jb252ZXJ0KTtcclxuICAgICQodGhpcy5kb2MpLm9mZignbW91c2V1cCcsIHRoaXMuYmluZHMuY29udmVydCk7XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL01vdXNlRXZlbnRDb252ZXJ0ZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Nb3VzZUV2ZW50Q29udmVydGVyLmpzIiwiaW1wb3J0IHtUSFJFRX0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSAnLi9NYXRoVXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT2JqZWN0M0RXYXRjaGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IodmlzdWFsLCBib3VuZEJveENsYiwgdGVzdFNjYWxlPXRoaXMudGVzdFNjYWxlKSB7XHJcbiAgICB0aGlzLnZpc3VhbCA9IHZpc3VhbDtcclxuICAgIHRoaXMuYm91bmRCb3hDbGIgPSBib3VuZEJveENsYjtcclxuICAgIHRoaXMudGVzdFNjYWxlID0gdGVzdFNjYWxlO1xyXG4gICAgdGhpcy5jYW1lcmEgPSB2aXN1YWwuY2FtZXJhO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy52aXN1YWwuZWxlbWVudDtcclxuICAgIHRoaXMuZWxlbWVudFNpemUgPSB7dzogMSwgaDogMX07XHJcbiAgICB0aGlzLmRldmljZVBpeGVsUmF0aW8gPSB0aGlzLnZpc3VhbC53bmQuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xyXG4gICAgdGhpcy5vcmJpdCA9IHZpc3VhbC5nZXRPcmJpdCgpO1xyXG4gICAgdGhpcy5zY2FsZSA9IDE7XHJcblxyXG4gICAgdGhpcy5lcHMgPSAxZS00O1xyXG4gICAgdGhpcy52ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgIHRoaXMuZHYgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xyXG5cclxuICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIHZpc3VhbC5hZGRSZW5kZXJDYWxsYmFjayh0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLm9zID0ge1xyXG4gICAgICB2eDogMCxcclxuICAgICAgdnk6IDAsXHJcbiAgICAgIHg6IDAsXHJcbiAgICAgIHk6IDBcclxuICAgIH07XHJcbiAgICB0aGlzLm9yYml0LnVwZGF0ZSgpO1xyXG4gICAgdGhpcy5jYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTtcclxuICAgIGxldCBib3ggPSB0aGlzLmNvbXB1dGVDbGllbnRCb3VuZEJveCgpLCBrPTEuMTE7XHJcbiAgICB0aGlzLm1vdmVQYW4oe3g6IC1rKmJveC5taWQueCwgeTogLWsqYm94Lm1pZC55fSk7XHJcbiAgfVxyXG5cclxuICBtb3ZlUGFuKGR2KSB7XHJcbiAgICB0aGlzLm9yYml0LnBhbihkdi54KnRoaXMudmlzdWFsLndpZHRoKCksIC1kdi55KnRoaXMudmlzdWFsLmhlaWdodCgpKTtcclxuICB9XHJcblxyXG4gIHZUb0NhbWVyYSh2KSB7XHJcbiAgICB2LnByb2plY3QodGhpcy5jYW1lcmEpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogMC41KnYueCxcclxuICAgICAgeTogMC41KnYueVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNvbXB1dGVDbGllbnRCb3VuZEJveCgpIHtcclxuICAgIGNvbnN0IGJveCA9IHRoaXMuYm91bmRCb3hDbGIoKSxcclxuICAgICAgeHMgPSBbYm94Lm1pbi54LCBib3gubWF4LnhdLFxyXG4gICAgICB5cyA9IFswLCAwXSxcclxuICAgICAgenMgPSBbYm94Lm1pbi56LCBib3gubWF4LnpdO1xyXG5cclxuICAgIGNvbnN0IHBzID0gW10sIHJlcyA9IHttYXg6IHt9LCBtaW46IHt9fTtcclxuICAgIGZvcihsZXQgeCBvZiB4cykge1xyXG4gICAgICBmb3IobGV0IHkgb2YgeXMpIHtcclxuICAgICAgICBmb3IobGV0IHogb2YgenMpIHtcclxuICAgICAgICAgIHBzLnB1c2godGhpcy52VG9DYW1lcmEodGhpcy52LnNldCh4LHkseikpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcy5zb3J0KChwMSwgcDIpPT4gcDEueC1wMi54KTtcclxuICAgIHJlcy5taW4ueCA9IHBzWzBdLng7XHJcbiAgICByZXMubWF4LnggPSBwc1twcy5sZW5ndGgtMV0ueDtcclxuICAgIHBzLnNvcnQoKHAxLCBwMik9PiBwMS55LXAyLnkpO1xyXG4gICAgcmVzLm1pbi55ID0gcHNbMF0ueTtcclxuICAgIHJlcy5tYXgueSA9IHBzW3BzLmxlbmd0aC0xXS55O1xyXG5cclxuICAgIHJlcy53aWR0aCA9IHJlcy5tYXgueC1yZXMubWluLng7XHJcbiAgICByZXMuaGVpZ2h0ID0gcmVzLm1heC55LXJlcy5taW4ueTtcclxuXHJcbiAgICByZXMubWlkID0ge1xyXG4gICAgICB4OiAwLjUqKHJlcy5tYXgueCtyZXMubWluLngpLFxyXG4gICAgICB5OiAwLjUqKHJlcy5tYXgueStyZXMubWluLnkpXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICBzZXRPYmplY3QoYm91bmRCb3hDbGIpIHtcclxuICAgIHRoaXMuYm91bmRCb3hDbGIgPSBib3VuZEJveENsYjtcclxuICB9XHJcblxyXG4gIHRlc3RTY2FsZSgpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgY29tcHV0ZUNvcnIoSywgbWluLCBtYXgpIHtcclxuICAgIGxldCBjb3JyID0gMDtcclxuICAgIGlmKEs8MSkge1xyXG4gICAgICBpZihtaW4+LTAuNSkge1xyXG4gICAgICAgIGNvcnIgPSAtMC41LW1pbjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKG1heDwwLjUpIHtcclxuICAgICAgICBjb3JyID0gMC41LW1heDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGlmKG1pbjwtMC41KSB7XHJcbiAgICAgICAgY29yciA9IC0wLjUtbWluO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYobWF4PjAuNSkge1xyXG4gICAgICAgIGNvcnIgPSAwLjUtbWF4O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29ycjtcclxuICB9XHJcblxyXG4gIGdldFNjYWxlKCkge1xyXG4gICAgY29uc3QgYm94ID0gdGhpcy5jb21wdXRlQ2xpZW50Qm91bmRCb3goKSxcclxuICAgICAgS3ggPSB0aGlzLmVsZW1lbnRTaXplLncvYm94LndpZHRoLFxyXG4gICAgICBLeSA9IHRoaXMuZWxlbWVudFNpemUuaC9ib3guaGVpZ2h0O1xyXG4gICAgcmV0dXJuIDEvTWF0aC5taW4oS3gsIEt5KTtcclxuICB9XHJcblxyXG4gIGNlbnRlclZpZXcoVCkge1xyXG4gICAgbGV0IGJveCA9IHRoaXMuY29tcHV0ZUNsaWVudEJvdW5kQm94KCksXHJcbiAgICAgIEt4ID0gdGhpcy5lbGVtZW50U2l6ZS53L2JveC53aWR0aCxcclxuICAgICAgS3kgPSB0aGlzLmVsZW1lbnRTaXplLmgvYm94LmhlaWdodCxcclxuICAgICAgSyA9IE1hdGgubWluKEt4LCBLeSk7XHJcblxyXG4gICAgaWYodGhpcy50ZXN0U2NhbGUoKSAmJiBNYXRoLmFicygxL0stdGhpcy5zY2FsZSk+dGhpcy5lcHMpIHtcclxuICAgICAgY29uc3Qgc2NhbGUgPSAxL0srMC4yKih0aGlzLnNjYWxlLTEvSyk7XHJcbiAgICAgIHRoaXMub3JiaXQuc2V0U2NhbGUodGhpcy5vcmJpdC5nZXRTY2FsZSgpLyhLKnNjYWxlKSk7XHJcbiAgICAgIHRoaXMub3JiaXQudXBkYXRlKCk7XHJcbiAgICAgIHRoaXMuY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCk7XHJcbiAgICAgIGJveCA9IHRoaXMuY29tcHV0ZUNsaWVudEJvdW5kQm94KCk7XHJcbiAgICAgICAgS3ggPSB0aGlzLmVsZW1lbnRTaXplLncvYm94LndpZHRoO1xyXG4gICAgICAgIEt5ID0gdGhpcy5lbGVtZW50U2l6ZS5oL2JveC5oZWlnaHQ7XHJcbiAgICAgICAgSyA9IE1hdGgubWluKEt4LCBLeSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZHYgPSB0aGlzLmR2O1xyXG4gICAgaWYoSz4xLXRoaXMuZXBzKSB7XHJcbiAgICAgIGR2LnNldCgtYm94Lm1pZC54LCAtYm94Lm1pZC55KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBkdi5zZXQodGhpcy5jb21wdXRlQ29ycihLeCwgYm94Lm1pbi54LCBib3gubWF4LngpLFxyXG4gICAgICAgICAgICAgdGhpcy5jb21wdXRlQ29ycihLeSwgYm94Lm1pbi55LCBib3gubWF4LnkpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZihNYXRoLnNxcnQodGhpcy5vcy52eCp0aGlzLm9zLnZ4K3RoaXMub3MudnkqdGhpcy5vcy52eSk+MC4wMDMgfHwgZHYubGVuZ3RoKCk+MC4wMDMpIHtcclxuICAgICAgbGV0IGR0ID0gMS82MCwgdD0wLCBvcyA9IHtcclxuICAgICAgICAuLi50aGlzLm9zLFxyXG4gICAgICAgIHg6IDAsXHJcbiAgICAgICAgeTogMFxyXG4gICAgICB9O1xyXG4gICAgICBvcy50ZiA9ICh2eCwgdnksIHgsIHkpPT4gKHtcclxuICAgICAgICB4OiA3NSooZHYueC14KS9NYXRoLnBvdyh0aGlzLmRldmljZVBpeGVsUmF0aW8sIDEuMCksXHJcbiAgICAgICAgeTogNzUqKGR2LnkteSkvTWF0aC5wb3codGhpcy5kZXZpY2VQaXhlbFJhdGlvLCAxLjApXHJcbiAgICAgIH0pO1xyXG4gICAgICB3aGlsZSh0PFQpIHtcclxuICAgICAgICBpZih0K2R0PlQpIHtcclxuICAgICAgICAgIGR0ID0gVC10O1xyXG4gICAgICAgIH1cclxuICAgICAgICBvcyA9IHRoaXMuaW50ZWdyYXRlKG9zLCBkdCk7XHJcbiAgICAgICAgdCArPSBkdDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLm1vdmVQYW4ob3MpO1xyXG4gICAgICB0aGlzLm9zID0gb3M7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbnRlZ3JhdGUob3MsIGR0KSB7XHJcbiAgICBjb25zdCBbdngsIHZ5LCB4LCB5XSA9IE1hdGhVdGlscy5yazQoXHJcbiAgICAgIHRoaXMuZHkuYmluZChvcyksXHJcbiAgICAgIDAsXHJcbiAgICAgIGR0LFxyXG4gICAgICBbb3MudngsIG9zLnZ5LCBvcy54LCBvcy55XVxyXG4gICAgKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLm9zLFxyXG4gICAgICB2eCwgdnksIHgsIHlcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBkeSh0LFkpIHtcclxuICAgIGNvbnN0IFt2eCwgdnksIHgsIHldID0gWSwgdmQgPSAxNSwgdGYgPSB0aGlzLnRmKHZ4LCB2eSwgeCwgeSk7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB0Zi54LXZkKnZ4LFxyXG4gICAgICB0Zi55LXZkKnZ5LFxyXG4gICAgICB2eCxcclxuICAgICAgdnlcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZHQpIHtcclxuICAgIGlmKHRoaXMuZW5hYmxlZCAmJiB0aGlzLmJvdW5kQm94Q2xiKSB7XHJcbiAgICAgIHRoaXMuY2VudGVyVmlldyhkdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9PYmplY3QzRFdhdGNoZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9PYmplY3QzRFdhdGNoZXIuanMiLCJpbXBvcnQge1RIUkVFfSBmcm9tICcuLi9saWJzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yYml0IGV4dGVuZHMgVEhSRUUuRXZlbnREaXNwYXRjaGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3Iob2JqZWN0LCBkb21FbGVtZW50KSB7XHJcbiAgICBzdXBlcigpO1xyXG4gIFx0dGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgXHR0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50IHx8IGRvY3VtZW50LmJvZHk7XHJcblxyXG4gIFx0Ly8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdGhpcyBjb250cm9sXHJcbiAgXHR0aGlzLmVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICBcdC8vIFwidGFyZ2V0XCIgc2V0cyB0aGUgbG9jYXRpb24gb2YgZm9jdXMsIHdoZXJlIHRoZSBvYmplY3Qgb3JiaXRzIGFyb3VuZFxyXG4gIFx0dGhpcy50YXJnZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cclxuICBcdC8vIEhvdyBmYXIgeW91IGNhbiBkb2xseSBpbiBhbmQgb3V0KFBlcnNwZWN0aXZlQ2FtZXJhIG9ubHkpXHJcbiAgXHR0aGlzLm1pbkRpc3RhbmNlID0gMDtcclxuICBcdHRoaXMubWF4RGlzdGFuY2UgPSBJbmZpbml0eTtcclxuXHJcbiAgXHQvLyBIb3cgZmFyIHlvdSBjYW4gem9vbSBpbiBhbmQgb3V0KE9ydGhvZ3JhcGhpY0NhbWVyYSBvbmx5KVxyXG4gIFx0dGhpcy5taW5ab29tID0gMDtcclxuICBcdHRoaXMubWF4Wm9vbSA9IEluZmluaXR5O1xyXG5cclxuICBcdC8vIEhvdyBmYXIgeW91IGNhbiBvcmJpdCB2ZXJ0aWNhbGx5LCB1cHBlciBhbmQgbG93ZXIgbGltaXRzLlxyXG4gIFx0Ly8gUmFuZ2UgaXMgMCB0byBNYXRoLlBJIHJhZGlhbnMuXHJcbiAgXHR0aGlzLm1pblBvbGFyQW5nbGUgPSAwOyAvLyByYWRpYW5zXHJcbiAgXHR0aGlzLm1heFBvbGFyQW5nbGUgPSBNYXRoLlBJOyAvLyByYWRpYW5zXHJcblxyXG4gIFx0Ly8gSG93IGZhciB5b3UgY2FuIG9yYml0IGhvcml6b250YWxseSwgdXBwZXIgYW5kIGxvd2VyIGxpbWl0cy5cclxuICBcdC8vIElmIHNldCwgbXVzdCBiZSBhIHN1Yi1pbnRlcnZhbCBvZiB0aGUgaW50ZXJ2YWwgWy1NYXRoLlBJLCBNYXRoLlBJIF0uXHJcbiAgXHR0aGlzLm1pbkF6aW11dGhBbmdsZSA9IC1JbmZpbml0eTsgLy8gcmFkaWFuc1xyXG4gIFx0dGhpcy5tYXhBemltdXRoQW5nbGUgPSBJbmZpbml0eTsgLy8gcmFkaWFuc1xyXG5cclxuICBcdC8vIFNldCB0byB0cnVlIHRvIGVuYWJsZSBkYW1waW5nIChpbmVydGlhKVxyXG4gIFx0Ly8gSWYgZGFtcGluZyBpcyBlbmFibGVkLCB5b3UgbXVzdCBjYWxsIGNvbnRyb2xzLnVwZGF0ZSgpIGluIHlvdXIgYW5pbWF0aW9uIGxvb3BcclxuICBcdHRoaXMuZW5hYmxlRGFtcGluZyA9IGZhbHNlO1xyXG4gIFx0dGhpcy5kYW1waW5nRmFjdG9yID0gMC4yNTtcclxuXHJcbiAgXHQvLyBUaGlzIG9wdGlvbiBhY3R1YWxseSBlbmFibGVzIGRvbGx5aW5nIGluIGFuZCBvdXQ7IGxlZnQgYXMgXCJ6b29tXCIgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxyXG4gIFx0Ly8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgem9vbWluZ1xyXG4gIFx0dGhpcy5lbmFibGVab29tID0gdHJ1ZTtcclxuICBcdHRoaXMuem9vbVNwZWVkID0gMS4wO1xyXG5cclxuICBcdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHJvdGF0aW5nXHJcbiAgXHR0aGlzLmVuYWJsZVJvdGF0ZSA9IHRydWU7XHJcbiAgXHR0aGlzLnJvdGF0ZVNwZWVkID0gMS4wO1xyXG5cclxuICBcdC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHBhbm5pbmdcclxuICBcdHRoaXMuZW5hYmxlUGFuID0gdHJ1ZTtcclxuXHJcbiAgXHQvLyBTZXQgdG8gdHJ1ZSB0byBhdXRvbWF0aWNhbGx5IHJvdGF0ZSBhcm91bmQgdGhlIHRhcmdldFxyXG4gIFx0Ly8gSWYgYXV0by1yb3RhdGUgaXMgZW5hYmxlZCwgeW91IG11c3QgY2FsbCBjb250cm9scy51cGRhdGUoKSBpbiB5b3VyIGFuaW1hdGlvbiBsb29wXHJcbiAgXHR0aGlzLmF1dG9Sb3RhdGUgPSBmYWxzZTtcclxuICBcdHRoaXMuYXV0b1JvdGF0ZVNwZWVkID0gMi4wOyAvLyAzMCBzZWNvbmRzIHBlciByb3VuZCB3aGVuIGZwcyBpcyA2MFxyXG5cclxuICBcdC8vIGZvciByZXNldFxyXG4gIFx0dGhpcy50YXJnZXQwID0gdGhpcy50YXJnZXQuY2xvbmUoKTtcclxuICBcdHRoaXMucG9zaXRpb24wID0gdGhpcy5vYmplY3QucG9zaXRpb24uY2xvbmUoKTtcclxuICBcdHRoaXMuem9vbTAgPSB0aGlzLm9iamVjdC56b29tO1xyXG5cclxuICBcdC8vXHJcbiAgXHQvLyBwdWJsaWMgbWV0aG9kc1xyXG4gIFx0Ly9cclxuICBcdHRoaXMuZ2V0UG9sYXJBbmdsZSA9IGZ1bmN0aW9uICgpIHtcclxuICBcdFx0cmV0dXJuIHNwaGVyaWNhbC5waGk7XHJcbiAgXHR9O1xyXG5cclxuICBcdHRoaXMuZ2V0QXppbXV0aGFsQW5nbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgXHRcdHJldHVybiBzcGhlcmljYWwudGhldGE7XHJcbiAgXHR9O1xyXG5cclxuICBcdHRoaXMucmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgXHRcdHNjb3BlLnRhcmdldC5jb3B5KHNjb3BlLnRhcmdldDApO1xyXG4gIFx0XHRzY29wZS5vYmplY3QucG9zaXRpb24uY29weShzY29wZS5wb3NpdGlvbjApO1xyXG4gIFx0XHRzY29wZS5vYmplY3Quem9vbSA9IHNjb3BlLnpvb20wO1xyXG5cclxuICBcdFx0c2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuICBcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudCk7XHJcblxyXG4gIFx0XHRzY29wZS51cGRhdGUoKTtcclxuICBcdH07XHJcblxyXG4gICAgdGhpcy56b29tT3V0ID0gZnVuY3Rpb24oc3BlZWQ9dGhpcy56b29tU3BlZWQpIHtcclxuICAgICAgY29uc3QgX3NwZWVkID0gdGhpcy56b29tU3BlZWQ7XHJcbiAgICAgIHRoaXMuem9vbVNwZWVkID0gc3BlZWQ7XHJcbiAgICAgIGRvbGx5SW4oZ2V0Wm9vbVNjYWxlKCkpO1xyXG4gICAgICB0aGlzLnpvb21TcGVlZCA9IF9zcGVlZDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy56b29tSW4gPSBmdW5jdGlvbihzcGVlZD10aGlzLnpvb21TcGVlZCkge1xyXG4gICAgICBjb25zdCBfc3BlZWQgPSB0aGlzLnpvb21TcGVlZDtcclxuICAgICAgdGhpcy56b29tU3BlZWQgPSBzcGVlZDtcclxuICAgICAgZG9sbHlPdXQoZ2V0Wm9vbVNjYWxlKCkpO1xyXG4gICAgICB0aGlzLnpvb21TcGVlZCA9IF9zcGVlZDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRTY2FsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRTY2FsZSA9IGZ1bmN0aW9uKG5ld1NjYWxlKSB7XHJcbiAgICAgIHNjYWxlID0gbmV3U2NhbGU7XHJcbiAgICB9XHJcblxyXG4gIFx0Ly8gdGhpcyBtZXRob2QgaXMgZXhwb3NlZCwgYnV0IHBlcmhhcHMgaXQgd291bGQgYmUgYmV0dGVyIGlmIHdlIGNhbiBtYWtlIGl0IHByaXZhdGUuLi5cclxuICBcdHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgXHRcdHZhciBvZmZzZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gIFx0XHQvLyBzbyBjYW1lcmEudXAgaXMgdGhlIG9yYml0IGF4aXNcclxuICBcdFx0dmFyIHF1YXQgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21Vbml0VmVjdG9ycyhvYmplY3QudXAsIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDEsIDApKTtcclxuICBcdFx0dmFyIHF1YXRJbnZlcnNlID0gcXVhdC5jbG9uZSgpLmludmVyc2UoKTtcclxuICBcdFx0dmFyIGxhc3RQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgXHRcdHZhciBsYXN0UXVhdGVybmlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XHJcblxyXG4gIFx0XHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlICgpIHtcclxuICBcdFx0XHR2YXIgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247XHJcbiAgXHRcdFx0b2Zmc2V0LmNvcHkocG9zaXRpb24pLnN1YihzY29wZS50YXJnZXQpO1xyXG4gIFx0XHRcdC8vIHJvdGF0ZSBvZmZzZXQgdG8gXCJ5LWF4aXMtaXMtdXBcIiBzcGFjZVxyXG4gIFx0XHRcdG9mZnNldC5hcHBseVF1YXRlcm5pb24ocXVhdCk7XHJcbiAgXHRcdFx0Ly8gYW5nbGUgZnJvbSB6LWF4aXMgYXJvdW5kIHktYXhpc1xyXG4gIFx0XHRcdHNwaGVyaWNhbC5zZXRGcm9tVmVjdG9yMyhvZmZzZXQpO1xyXG4gIFx0XHRcdGlmKHNjb3BlLmF1dG9Sb3RhdGUpIHtcclxuICBcdFx0XHRcdHJvdGF0ZUxlZnQoZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKSk7XHJcbiAgXHRcdFx0fVxyXG4gIFx0XHRcdHNwaGVyaWNhbC50aGV0YSArPSBzcGhlcmljYWxEZWx0YS50aGV0YTtcclxuICBcdFx0XHRzcGhlcmljYWwucGhpICs9IHNwaGVyaWNhbERlbHRhLnBoaTtcclxuICBcdFx0XHQvLyByZXN0cmljdCB0aGV0YSB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzXHJcbiAgXHRcdFx0c3BoZXJpY2FsLnRoZXRhID0gTWF0aC5tYXgoc2NvcGUubWluQXppbXV0aEFuZ2xlLCBNYXRoLm1pbihzY29wZS5tYXhBemltdXRoQW5nbGUsIHNwaGVyaWNhbC50aGV0YSkpO1xyXG4gIFx0XHRcdC8vIHJlc3RyaWN0IHBoaSB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzXHJcbiAgXHRcdFx0c3BoZXJpY2FsLnBoaSA9IE1hdGgubWF4KHNjb3BlLm1pblBvbGFyQW5nbGUsIE1hdGgubWluKHNjb3BlLm1heFBvbGFyQW5nbGUsIHNwaGVyaWNhbC5waGkpKTtcclxuICBcdFx0XHRzcGhlcmljYWwubWFrZVNhZmUoKTtcclxuICBcdFx0XHRzcGhlcmljYWwucmFkaXVzICo9IHNjYWxlO1xyXG4gIFx0XHRcdC8vIHJlc3RyaWN0IHJhZGl1cyB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzXHJcbiAgXHRcdFx0c3BoZXJpY2FsLnJhZGl1cyA9IE1hdGgubWF4KHNjb3BlLm1pbkRpc3RhbmNlLCBNYXRoLm1pbihzY29wZS5tYXhEaXN0YW5jZSwgc3BoZXJpY2FsLnJhZGl1cykpO1xyXG4gIFx0XHRcdC8vIG1vdmUgdGFyZ2V0IHRvIHBhbm5lZCBsb2NhdGlvblxyXG4gIFx0XHRcdHNjb3BlLnRhcmdldC5hZGQocGFuT2Zmc2V0KTtcclxuICBcdFx0XHRvZmZzZXQuc2V0RnJvbVNwaGVyaWNhbChzcGhlcmljYWwpO1xyXG4gIFx0XHRcdC8vIHJvdGF0ZSBvZmZzZXQgYmFjayB0byBcImNhbWVyYS11cC12ZWN0b3ItaXMtdXBcIiBzcGFjZVxyXG4gIFx0XHRcdG9mZnNldC5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpO1xyXG4gIFx0XHRcdHBvc2l0aW9uLmNvcHkoc2NvcGUudGFyZ2V0KS5hZGQob2Zmc2V0KTtcclxuICBcdFx0XHRzY29wZS5vYmplY3QubG9va0F0KHNjb3BlLnRhcmdldCk7XHJcblxyXG4gIFx0XHRcdGlmKHNjb3BlLmVuYWJsZURhbXBpbmc9PT10cnVlKSB7XHJcbiAgXHRcdFx0XHRzcGhlcmljYWxEZWx0YS50aGV0YSAqPSgxLXNjb3BlLmRhbXBpbmdGYWN0b3IpO1xyXG4gIFx0XHRcdFx0c3BoZXJpY2FsRGVsdGEucGhpICo9KDEtc2NvcGUuZGFtcGluZ0ZhY3Rvcik7XHJcbiAgXHRcdFx0fSBlbHNlIHtcclxuICBcdFx0XHRcdHNwaGVyaWNhbERlbHRhLnNldCgwLCAwLCAwKTtcclxuICBcdFx0XHR9XHJcblxyXG4gIFx0XHRcdHNjYWxlID0gMTtcclxuICBcdFx0XHRwYW5PZmZzZXQuc2V0KDAsIDAsIDApO1xyXG5cclxuICBcdFx0XHQvLyB1cGRhdGUgY29uZGl0aW9uIGlzOlxyXG4gIFx0XHRcdC8vIG1pbihjYW1lcmEgZGlzcGxhY2VtZW50LCBjYW1lcmEgcm90YXRpb24gaW4gcmFkaWFucyleMiA+IEVQU1xyXG4gIFx0XHRcdC8vIHVzaW5nIHNtYWxsLWFuZ2xlIGFwcHJveGltYXRpb24gY29zKHgvMikgPSAxLXheMiAvIDhcclxuXHJcbiAgXHRcdFx0aWYoem9vbUNoYW5nZWQgfHxcclxuICBcdFx0XHRcdGxhc3RQb3NpdGlvbi5kaXN0YW5jZVRvU3F1YXJlZChzY29wZS5vYmplY3QucG9zaXRpb24pID4gRVBTIHx8XHJcbiAgXHRcdFx0XHQ4ICooMS1sYXN0UXVhdGVybmlvbi5kb3Qoc2NvcGUub2JqZWN0LnF1YXRlcm5pb24pKSA+IEVQUykge1xyXG5cclxuICBcdFx0XHRcdHNjb3BlLmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpO1xyXG5cclxuICBcdFx0XHRcdGxhc3RQb3NpdGlvbi5jb3B5KHNjb3BlLm9iamVjdC5wb3NpdGlvbik7XHJcbiAgXHRcdFx0XHRsYXN0UXVhdGVybmlvbi5jb3B5KHNjb3BlLm9iamVjdC5xdWF0ZXJuaW9uKTtcclxuICBcdFx0XHRcdHpvb21DaGFuZ2VkID0gZmFsc2U7XHJcblxyXG4gIFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcbiAgXHRcdFx0fVxyXG4gIFx0XHRcdHJldHVybiBmYWxzZTtcclxuICBcdFx0fTtcclxuICBcdH0oKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2UgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICB9O1xyXG5cclxuICBcdC8vXHJcbiAgXHQvLyBpbnRlcm5hbHNcclxuICBcdC8vXHJcbiAgXHR2YXIgc2NvcGUgPSB0aGlzO1xyXG4gIFx0dmFyIGNoYW5nZUV2ZW50ID0geyB0eXBlOiAnY2hhbmdlJyB9O1xyXG4gIFx0dmFyIEVQUyA9IDFlLTY7XHJcbiAgXHQvLyBjdXJyZW50IHBvc2l0aW9uIGluIHNwaGVyaWNhbCBjb29yZGluYXRlc1xyXG4gIFx0dmFyIHNwaGVyaWNhbCA9IG5ldyBUSFJFRS5TcGhlcmljYWwoKTtcclxuICBcdHZhciBzcGhlcmljYWxEZWx0YSA9IG5ldyBUSFJFRS5TcGhlcmljYWwoKTtcclxuXHJcbiAgXHR2YXIgc2NhbGUgPSAxO1xyXG4gIFx0dmFyIHBhbk9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgXHR2YXIgem9vbUNoYW5nZWQgPSBmYWxzZTtcclxuXHJcbiAgXHRmdW5jdGlvbiBnZXRBdXRvUm90YXRpb25BbmdsZSgpIHtcclxuICBcdFx0cmV0dXJuIDIgKiBNYXRoLlBJIC8gNjAgLyA2MCAqIHNjb3BlLmF1dG9Sb3RhdGVTcGVlZDtcclxuICBcdH1cclxuXHJcbiAgXHRmdW5jdGlvbiBnZXRab29tU2NhbGUoKSB7XHJcbiAgXHRcdHJldHVybiBNYXRoLnBvdygwLjk1LCBzY29wZS56b29tU3BlZWQpO1xyXG4gIFx0fVxyXG5cclxuICBcdGZ1bmN0aW9uIHJvdGF0ZUxlZnQoYW5nbGUpIHtcclxuICBcdFx0c3BoZXJpY2FsRGVsdGEudGhldGEgLT0gYW5nbGU7XHJcbiAgXHR9XHJcblxyXG4gIFx0ZnVuY3Rpb24gcm90YXRlVXAoYW5nbGUpIHtcclxuICBcdFx0c3BoZXJpY2FsRGVsdGEucGhpIC09IGFuZ2xlO1xyXG4gIFx0fVxyXG5cclxuICBcdHZhciBwYW5MZWZ0ID0gZnVuY3Rpb24oKSB7XHJcbiAgXHRcdHZhciB2ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICBcdFx0cmV0dXJuIGZ1bmN0aW9uIHBhbkxlZnQoZGlzdGFuY2UsIG9iamVjdE1hdHJpeCkge1xyXG4gIFx0XHRcdHYuc2V0RnJvbU1hdHJpeENvbHVtbihvYmplY3RNYXRyaXgsIDApOyAvLyBnZXQgWCBjb2x1bW4gb2Ygb2JqZWN0TWF0cml4XHJcbiAgXHRcdFx0di5tdWx0aXBseVNjYWxhcigtIGRpc3RhbmNlKTtcclxuICBcdFx0XHRwYW5PZmZzZXQuYWRkKHYpO1xyXG4gIFx0XHR9O1xyXG4gIFx0fSgpO1xyXG5cclxuICBcdHZhciBwYW5VcCA9IGZ1bmN0aW9uKCkge1xyXG4gIFx0XHR2YXIgdiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgXHRcdHJldHVybiBmdW5jdGlvbiBwYW5VcChkaXN0YW5jZSwgb2JqZWN0TWF0cml4KSB7XHJcbiAgXHRcdFx0di5zZXRGcm9tTWF0cml4Q29sdW1uKG9iamVjdE1hdHJpeCwgMSk7IC8vIGdldCBZIGNvbHVtbiBvZiBvYmplY3RNYXRyaXhcclxuICBcdFx0XHR2Lm11bHRpcGx5U2NhbGFyKGRpc3RhbmNlKTtcclxuICBcdFx0XHRwYW5PZmZzZXQuYWRkKHYpO1xyXG4gIFx0XHR9O1xyXG4gIFx0fSgpO1xyXG5cclxuICBcdC8vIGRlbHRhWCBhbmQgZGVsdGFZIGFyZSBpbiBwaXhlbHM7IHJpZ2h0IGFuZCBkb3duIGFyZSBwb3NpdGl2ZVxyXG4gIFx0c2NvcGUucGFuID0gZnVuY3Rpb24oKSB7XHJcbiAgXHRcdHZhciBvZmZzZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gIFx0XHRyZXR1cm4gZnVuY3Rpb24gcGFuKGRlbHRhWCwgZGVsdGFZKSB7XHJcbiAgXHRcdFx0dmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50O1xyXG4gIFx0XHRcdGlmKHNjb3BlLm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKSB7XHJcbiAgXHRcdFx0XHQvLyBwZXJzcGVjdGl2ZVxyXG4gIFx0XHRcdFx0dmFyIHBvc2l0aW9uID0gc2NvcGUub2JqZWN0LnBvc2l0aW9uO1xyXG4gIFx0XHRcdFx0b2Zmc2V0LmNvcHkocG9zaXRpb24pLnN1YihzY29wZS50YXJnZXQpO1xyXG4gIFx0XHRcdFx0dmFyIHRhcmdldERpc3RhbmNlID0gb2Zmc2V0Lmxlbmd0aCgpO1xyXG4gIFx0XHRcdFx0Ly8gaGFsZiBvZiB0aGUgZm92IGlzIGNlbnRlciB0byB0b3Agb2Ygc2NyZWVuXHJcbiAgXHRcdFx0XHR0YXJnZXREaXN0YW5jZSAqPSBNYXRoLnRhbigoc2NvcGUub2JqZWN0LmZvdiAvIDIpICogTWF0aC5QSSAvIDE4MC4wKTtcclxuICBcdFx0XHRcdC8vIHdlIGFjdHVhbGx5IGRvbid0IHVzZSBzY3JlZW5XaWR0aCwgc2luY2UgcGVyc3BlY3RpdmUgY2FtZXJhIGlzIGZpeGVkIHRvIHNjcmVlbiBoZWlnaHRcclxuICBcdFx0XHRcdHBhbkxlZnQoMiAqIGRlbHRhWCAqIHRhcmdldERpc3RhbmNlIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXgpO1xyXG4gIFx0XHRcdFx0cGFuVXAoMiAqIGRlbHRhWSAqIHRhcmdldERpc3RhbmNlIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXgpO1xyXG4gIFx0XHRcdH0gZWxzZSBpZihzY29wZS5vYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEpIHtcclxuICBcdFx0XHRcdC8vIG9ydGhvZ3JhcGhpY1xyXG4gIFx0XHRcdFx0cGFuTGVmdChkZWx0YVggKihzY29wZS5vYmplY3QucmlnaHQtc2NvcGUub2JqZWN0LmxlZnQpIC8gc2NvcGUub2JqZWN0Lnpvb20gLyBlbGVtZW50LmNsaWVudFdpZHRoLCBzY29wZS5vYmplY3QubWF0cml4KTtcclxuICBcdFx0XHRcdHBhblVwKGRlbHRhWSAqKHNjb3BlLm9iamVjdC50b3Atc2NvcGUub2JqZWN0LmJvdHRvbSkgLyBzY29wZS5vYmplY3Quem9vbSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0LCBzY29wZS5vYmplY3QubWF0cml4KTtcclxuICBcdFx0XHR9IGVsc2Uge1xyXG4gIFx0XHRcdFx0Ly8gY2FtZXJhIG5laXRoZXIgb3J0aG9ncmFwaGljIG5vciBwZXJzcGVjdGl2ZVxyXG4gIFx0XHRcdFx0Y29uc29sZS53YXJuKCdXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUtcGFuIGRpc2FibGVkLicpO1xyXG4gIFx0XHRcdFx0c2NvcGUuZW5hYmxlUGFuID0gZmFsc2U7XHJcbiAgXHRcdFx0fVxyXG4gIFx0XHR9O1xyXG4gIFx0fSgpO1xyXG5cclxuICBcdGZ1bmN0aW9uIGRvbGx5SW4oZG9sbHlTY2FsZSkge1xyXG4gICAgICBpZihzY29wZS5vYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSkge1xyXG4gIFx0XHRcdHNjYWxlIC89IGRvbGx5U2NhbGU7XHJcbiAgXHRcdH0gZWxzZSBpZihzY29wZS5vYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEpIHtcclxuICBcdFx0XHRzY29wZS5vYmplY3Quem9vbSA9IE1hdGgubWF4KHNjb3BlLm1pblpvb20sIE1hdGgubWluKHNjb3BlLm1heFpvb20sIHNjb3BlLm9iamVjdC56b29tICogZG9sbHlTY2FsZSkpO1xyXG4gIFx0XHRcdHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgXHRcdFx0em9vbUNoYW5nZWQgPSB0cnVlO1xyXG4gIFx0XHR9IGVsc2Uge1xyXG4gIFx0XHRcdGNvbnNvbGUud2FybignV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlLWRvbGx5L3pvb20gZGlzYWJsZWQuJyk7XHJcbiAgXHRcdFx0c2NvcGUuZW5hYmxlWm9vbSA9IGZhbHNlO1xyXG4gIFx0XHR9XHJcbiAgXHR9XHJcblxyXG4gIFx0ZnVuY3Rpb24gZG9sbHlPdXQoZG9sbHlTY2FsZSkge1xyXG4gICAgICBpZihzY29wZS5vYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSkge1xyXG4gIFx0XHRcdHNjYWxlICo9IGRvbGx5U2NhbGU7XHJcbiAgXHRcdH0gZWxzZSBpZihzY29wZS5vYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5PcnRob2dyYXBoaWNDYW1lcmEpIHtcclxuICBcdFx0XHRzY29wZS5vYmplY3Quem9vbSA9IE1hdGgubWF4KHNjb3BlLm1pblpvb20sIE1hdGgubWluKHNjb3BlLm1heFpvb20sIHNjb3BlLm9iamVjdC56b29tIC8gZG9sbHlTY2FsZSkpO1xyXG4gIFx0XHRcdHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgXHRcdFx0em9vbUNoYW5nZWQgPSB0cnVlO1xyXG4gIFx0XHR9IGVsc2Uge1xyXG4gIFx0XHRcdGNvbnNvbGUud2FybignV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlLWRvbGx5L3pvb20gZGlzYWJsZWQuJyk7XHJcbiAgXHRcdFx0c2NvcGUuZW5hYmxlWm9vbSA9IGZhbHNlO1xyXG4gIFx0XHR9XHJcbiAgXHR9XHJcblxyXG4gICAgLyogQWN0aW9ucyAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHJvdGF0ZShldmVudCwgZGF0YSkge1xyXG4gICAgICBpZihzY29wZS5lbmFibGVkICYmIHNjb3BlLmVuYWJsZVJvdGF0ZSAmJiBkYXRhLnN0YXRlPT09J21vdmUnKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50O1xyXG4gICAgICAgIC8vIHJvdGF0aW5nIGFjcm9zcyB3aG9sZSBzY3JlZW4gZ29lcyAzNjAgZGVncmVlcyBhcm91bmRcclxuICAgICAgICByb3RhdGVMZWZ0KDIgKiBNYXRoLlBJICogZGF0YS5keCAvIGVsZW1lbnQuY2xpZW50V2lkdGggKiBzY29wZS5yb3RhdGVTcGVlZCk7XHJcbiAgICAgICAgLy8gcm90YXRpbmcgdXAgYW5kIGRvd24gYWxvbmcgd2hvbGUgc2NyZWVuIGF0dGVtcHRzIHRvIGdvIDM2MCwgYnV0IGxpbWl0ZWQgdG8gMTgwXHJcbiAgICAgICAgcm90YXRlVXAoMiAqIE1hdGguUEkgKiBkYXRhLmR5IC8gZWxlbWVudC5jbGllbnRIZWlnaHQgKiBzY29wZS5yb3RhdGVTcGVlZCk7XHJcbiAgICAgICAgc2NvcGUudXBkYXRlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwYW4oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgaWYoc2NvcGUuZW5hYmxlZCAmJiBzY29wZS5lbmFibGVQYW4gJiYgZGF0YS5zdGF0ZT09PSdtb3ZlJykge1xyXG4gICAgICAgIHNjb3BlLnBhbihkYXRhLmR4LCBkYXRhLmR5KTtcclxuICAgICAgICBzY29wZS51cGRhdGUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9mZnNldERvbGx5KGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgIGlmKHNjb3BlLmVuYWJsZWQgJiYgc2NvcGUuZW5hYmxlWm9vbSAmJiBkYXRhLnN0YXRlPT09J21vdmUnKSB7XHJcbiAgICAgICAgaWYoZGF0YS5keT4wKSB7XHJcbiAgICAgICAgICBkb2xseUluKGdldFpvb21TY2FsZSgpKTtcclxuICAgICAgICB9IGVsc2UgaWYoZGF0YS5keTwwKSB7XHJcbiAgICAgICAgICBkb2xseU91dChnZXRab29tU2NhbGUoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNjb3BlLnVwZGF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gd2hlZWxEb2xseShldmVudCkge1xyXG4gICAgICBpZihzY29wZS5lbmFibGVkICYmIHNjb3BlLmVuYWJsZVpvb20pIHtcclxuICAgICAgICBpZihldmVudC5kZWx0YVk+MCkge1xyXG4gICAgICAgICAgZG9sbHlPdXQoZ2V0Wm9vbVNjYWxlKCkpO1xyXG4gICAgICAgIH0gZWxzZSBpZihldmVudC5kZWx0YVk8MCkge1xyXG4gICAgICAgICAgZG9sbHlJbihnZXRab29tU2NhbGUoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNjb3BlLnVwZGF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hY3Rpb25zID0ge1xyXG4gICAgICByb3RhdGUsXHJcbiAgICAgIHBhbixcclxuICAgICAgb2Zmc2V0RG9sbHksXHJcbiAgICAgIHdoZWVsRG9sbHlcclxuICAgIH1cclxuXHJcbiAgXHQvLyBmb3JjZSBhbiB1cGRhdGUgYXQgc3RhcnRcclxuICBcdHRoaXMudXBkYXRlKCk7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9PcmJpdC5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL09yYml0LmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IEltYWdlQmFzZSBmcm9tICcuL0ltYWdlQmFzZSc7XHJcbmltcG9ydCBQZGYgZnJvbSAnLi9QZGYnO1xyXG5pbXBvcnQgQmFzZU1hdGhVdGlscyBmcm9tICcuL0Jhc2VNYXRoVXRpbHMnO1xyXG5pbXBvcnQgQ3VzdG9tRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9DdXN0b21FdmVudENvbnZlcnRlcic7XHJcbmltcG9ydCBQb2x5VGFyZ2V0IGZyb20gJy4vdGFyZ2V0cy9Qb2x5VGFyZ2V0JztcclxuXHJcbmltcG9ydCBGaW5kZXIgZnJvbSAnLi9GaW5kZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGRmSW1hZ2UgZXh0ZW5kcyBJbWFnZUJhc2Uge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0LCB3aWR0aCwgaGVpZ2h0LCBjb2xvciwgcGRmLCBuKSB7XHJcbiAgICBzdXBlcihjb250ZXh0LCB3aWR0aCwgaGVpZ2h0LCBjb2xvcik7XHJcblxyXG4gICAgdGhpcy5xdWVyeSA9ICcnO1xyXG4gICAgdGhpcy5uID0gbjtcclxuICAgIHRoaXMucGRmID0gcGRmO1xyXG4gICAgdGhpcy52ID0ge3g6IDAsIHk6IDAsIHo6IDAsIHNldDogZnVuY3Rpb24oeCx5LHopIHtcclxuICAgICAgdGhpcy54PXg7IHRoaXMueT15OyB0aGlzLno9ejtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9LCB0cmFuc2Zvcm06IGZ1bmN0aW9uKG0pIHtcclxuICAgICAgY29uc3QgeD1tLm1bMF1bMF0qdGhpcy54K20ubVsxXVswXSp0aGlzLnkrbS5tWzJdWzBdKnRoaXMueixcclxuICAgICAgICAgICAgeT1tLm1bMF1bMV0qdGhpcy54K20ubVsxXVsxXSp0aGlzLnkrbS5tWzJdWzFdKnRoaXMueixcclxuICAgICAgICAgICAgej1tLm1bMF1bMl0qdGhpcy54K20ubVswXVsyXSp0aGlzLnkrbS5tWzJdWzBdKnRoaXMuejtcclxuICAgICAgdGhpcy54PXg7XHJcbiAgICAgIHRoaXMueT15O1xyXG4gICAgICB0aGlzLno9ejtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9fTtcclxuICAgIHRoaXMubSA9IHttOiBbWzEsMCwwXSxbMCwxLDBdLFswLDAsMV1dLCBzZXQ6IGZ1bmN0aW9uKG0wMCxtMDEsbTAyLG0xMCxtMTEsbTEyLG0yMCxtMjEsbTIyKSB7XHJcbiAgICAgIHRoaXMubT1bW20wMCxtMDEsbTAyXSxbbTEwLG0xMSxtMTJdLFttMjAsbTIxLG0yMl1dO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH19O1xyXG5cclxuICAgIHRoaXMuc3RhcnRSZW5kZXIgPSAoKT0+IHtcclxuICAgICAgdGhpcy5wZGYuZ2V0SGFuZGxlcih0aGlzLnJlbmRlci5iaW5kKHRoaXMpKTtcclxuICAgIH07XHJcbiAgICBQcm9taXNlLnJlc29sdmUoKS5cclxuICAgICAgdGhlbigoKT0+IHRoaXMucGRmLmdldEhhbmRsZXIodGhpcy5pbml0LmJpbmQodGhpcykpKTtcclxuICB9XHJcblxyXG4gIHNldFF1ZXJ5KHF1ZXJ5KSB7XHJcbiAgICB0aGlzLnF1ZXJ5ID0gcXVlcnkudHJpbSgpO1xyXG4gICAgaWYodGhpcy50ZXh0Q29udGVudCkge1xyXG4gICAgICB0aGlzLnNldEhpdHModGhpcy50ZXh0Q29udGVudCk7XHJcbiAgICAgIC8vIHRoaXMuZmluaXNoTG9hZCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVjdFNpemUocikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkdGg6IHJbMl0tclswXSxcclxuICAgICAgaGVpZ2h0OiByWzNdLXJbMV1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjcmVhdGVQb2x5KG0sIHAsIHMpIHtcclxuICAgIGNvbnN0IHBvbHkgPSBbXSwgdiA9IHRoaXMudjtcclxuICAgIHYuc2V0KHAueCwgcC55LCAxKS50cmFuc2Zvcm0obSk7XHJcbiAgICBwb2x5LnB1c2goe3g6IHYueCwgeTogdi55fSk7XHJcbiAgICB2LnNldChwLngsIHAueStzLmhlaWdodCwgMSkudHJhbnNmb3JtKG0pO1xyXG4gICAgcG9seS5wdXNoKHt4OiB2LngsIHk6IHYueX0pO1xyXG4gICAgdi5zZXQocC54K3Mud2lkdGgsIHAueStzLmhlaWdodCwgMSkudHJhbnNmb3JtKG0pO1xyXG4gICAgcG9seS5wdXNoKHt4OiB2LngsIHk6IHYueX0pO1xyXG4gICAgdi5zZXQocC54K3Mud2lkdGgsIHAueSwgMSkudHJhbnNmb3JtKG0pO1xyXG4gICAgcG9seS5wdXNoKHt4OiB2LngsIHk6IHYueX0pO1xyXG4gICAgcmV0dXJuIHBvbHk7XHJcbiAgfVxyXG5cclxuICBnZXRTaW11bGF0ZWREb2MoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYWdlO1xyXG4gIH1cclxuXHJcbiAgc2ltdWxhdGUoZSwgZG9jLCB4LCB5KSB7XHJcbiAgICBpZih0aGlzLmV2ZW50Q29udmVydGVyKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRDb252ZXJ0ZXIuY29udmVydChlLCB7ZG9jLCB4LCB5fSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRBbm5vdGF0aW9ucyhhbm5vcykge1xyXG4gICAgY29uc3QgdCA9IHRoaXMudmlld3BvcnQudHJhbnNmb3JtLFxyXG4gICAgICB0YXJnZXRzID0gW107XHJcbiAgICB0aGlzLm0uc2V0KFxyXG4gICAgICB0WzBdLHRbMV0sMCxcclxuICAgICAgdFsyXSx0WzNdLDAsXHJcbiAgICAgIHRbNF0sdFs1XSwxKTtcclxuXHJcbiAgICBmb3IobGV0IGFubm8gb2YgYW5ub3MpIHtcclxuICAgICAgaWYgKGFubm8uc3VidHlwZT09PSdMaW5rJykge1xyXG4gICAgICAgIGNvbnN0IHJlY3QgPSBhbm5vLnJlY3QsXHJcbiAgICAgICAgICBhUG9zID0ge1xyXG4gICAgICAgICAgICB4OiByZWN0WzBdLFxyXG4gICAgICAgICAgICB5OiByZWN0WzFdXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYVN6ID0gdGhpcy5yZWN0U2l6ZShyZWN0KTtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBuZXcgUG9seVRhcmdldCh0aGlzLmNyZWF0ZVBvbHkodGhpcy5tLCBhUG9zLCBhU3opLm1hcCgocCk9PiAoe3g6IHAueC90aGlzLnZpZXdwb3J0LndpZHRoLCB5OiAxLXAueS90aGlzLnZpZXdwb3J0LmhlaWdodH0pKSk7XHJcbiAgICAgICAgdGFyZ2V0LmFubm8gPSBhbm5vO1xyXG4gICAgICAgIHRhcmdldC5jYWxsYmFjayA9IHRoaXMuYW5ub0NsYi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRhcmdldHMucHVzaCh0YXJnZXQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZih0YXJnZXRzLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLmV2ZW50Q29udmVydGVyID0gbmV3IEN1c3RvbUV2ZW50Q29udmVydGVyKHRoaXMud25kLCB0aGlzLmRvYywgUG9seVRhcmdldC50ZXN0LCB0aGlzLnBhZ2UpO1xyXG4gICAgICBmb3IobGV0IHRhcmdldCBvZiB0YXJnZXRzKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudENvbnZlcnRlci5hZGRDdXN0b20odGFyZ2V0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0SGl0cyh0ZXh0Q29udGVudCkge1xyXG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xyXG4gICAgaWYodGhpcy5xdWVyeSE9PScnKSB7XHJcbiAgICAgIHRoaXMuZmluZGVyID0gbmV3IEZpbmRlcih0ZXh0Q29udGVudC5pdGVtcy5tYXAoKGl0ZW0pPT4gaXRlbS5zdHIpLCB0aGlzLnF1ZXJ5LCB7Y29udGV4dHM6IGZhbHNlfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXJIaXRzKCkge1xyXG4gICAgaWYodGhpcy5maW5kZXIpIHtcclxuICAgICAgY29uc3QgdmlldyA9IHRoaXMucGFnZS52aWV3LFxyXG4gICAgICAgIHRlc3RTeiA9ICQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHZpc2liaWxpdHk6IGhpZGRlbjtcIj48L2Rpdj4nKS5hcHBlbmRUbygnYm9keScpLCB0ZXh0RGl2ID0gdGVzdFN6WzBdLFxyXG4gICAgICAgIGJhc2VPZmZzZXQgPSB0ZXN0U3oub2Zmc2V0KCkubGVmdDtcclxuICAgICAgZm9yKGxldCBoaXQgb2YgdGhpcy5maW5kZXIuZ2V0SGl0cygpKSB7XHJcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy50ZXh0Q29udGVudC5pdGVtc1toaXQuaW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgdCA9IFBERkpTLlV0aWwudHJhbnNmb3JtKHRoaXMudmlld3BvcnQudHJhbnNmb3JtLCBpdGVtLnRyYW5zZm9ybSksXHJcbiAgICAgICAgICAgICAgICBzdHlsZSA9IHRoaXMudGV4dENvbnRlbnQuc3R5bGVzW2l0ZW0uZm9udE5hbWVdLFxyXG4gICAgICAgICAgICAgICAgYW5nbGUgPSBNYXRoLmF0YW4yKHRbMV0sIHRbMF0pKyhzdHlsZS52ZXJ0aWNhbD8gTWF0aC5QSSAvIDI6IDApLFxyXG4gICAgICAgICAgICAgICAgZm9udEhlaWdodCA9IE1hdGguc3FydCgodFsyXSAqIHRbMl0pICsgKHRbM10gKiB0WzNdKSksXHJcbiAgICAgICAgICAgICAgICBmb250QXNjZW50ID0gc3R5bGUuYXNjZW50P1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS5hc2NlbnQgKiBmb250SGVpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3R5bGUuZGVzY2VudD8gKDEgKyBzdHlsZS5kZXNjZW50KSAqIGZvbnRIZWlnaHQ6IGZvbnRIZWlnaHQpO1xyXG4gICAgICAgICAgdGVzdFN6Lmh0bWwoaXRlbS5zdHIuc3Vic3RyKDAsIGhpdC5vZmZzZXQpKyc8c3Bhbj4nK2l0ZW0uc3RyLnN1YnN0cihoaXQub2Zmc2V0LCBoaXQubGVuZ3RoKSsnPC9zcGFuPicraXRlbS5zdHIuc3Vic3RyKGhpdC5vZmZzZXQraGl0Lmxlbmd0aCkpO1xyXG5cclxuICAgICAgICAgIHRleHREaXYuc3R5bGUuZm9udFNpemUgPSBmb250SGVpZ2h0KydweCc7XHJcbiAgICAgICAgICB0ZXh0RGl2LnN0eWxlLmZvbnRGYW1pbHkgPSBzdHlsZS5mb250RmFtaWx5O1xyXG5cclxuICAgICAgICAgIGNvbnN0IHRlc3RTcGFuID0gdGVzdFN6LmZpbmQoJ3NwYW4nKSxcclxuICAgICAgICAgICAgICBpd2lkdGggPSBzdHlsZS52ZXJ0aWNhbD8gaXRlbS5oZWlnaHQqdGhpcy52aWV3cG9ydC5zY2FsZTogaXRlbS53aWR0aCp0aGlzLnZpZXdwb3J0LnNjYWxlLFxyXG4gICAgICAgICAgICAgIHdpZHRoID0gdGVzdFN6LndpZHRoKCksXHJcbiAgICAgICAgICAgICAgcmVsYXRpdmVPZmZzZXQgPSAodGVzdFNwYW4ub2Zmc2V0KCkubGVmdC1iYXNlT2Zmc2V0KS93aWR0aDtcclxuICAgICAgICAgIHRoaXMubS5zZXQoXHJcbiAgICAgICAgICAgIDEsMCwwLFxyXG4gICAgICAgICAgICAwLDEsMCxcclxuICAgICAgICAgICAgdFs0XStmb250QXNjZW50Kk1hdGguc2luKGFuZ2xlKSx0WzVdLWZvbnRBc2NlbnQqTWF0aC5jb3MoYW5nbGUpLDEpO1xyXG4gICAgICAgICAgbGV0IHBvbHkgPSB0aGlzLmNyZWF0ZVBvbHkodGhpcy5tLCB7eDogcmVsYXRpdmVPZmZzZXQqaXdpZHRoLCB5OiAwfSwge3dpZHRoOiBpd2lkdGgqdGVzdFNwYW4ud2lkdGgoKS93aWR0aCwgaGVpZ2h0OiB0ZXN0U3Bhbi5oZWlnaHQoKX0pO1xyXG4gICAgICAgICAgcG9seSA9IHBvbHkubWFwKChwKT0+ICh7eDogcC54L3RoaXMudmlld3BvcnQud2lkdGgsIHk6IDEtcC55L3RoaXMudmlld3BvcnQuaGVpZ2h0fSkpO1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJIaXQocG9seSk7XHJcbiAgICAgIH1cclxuICAgICAgdGVzdFN6LnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYW5ub0NsYihlLCBkYXRhKSB7XHJcbiAgICBpZih0aGlzLmNvbnRleHQuZGlzcGF0Y2hFdmVudCkge1xyXG4gICAgICB0aGlzLmNvbnRleHQuZGlzcGF0Y2hFdmVudCh7XHJcbiAgICAgICAgdHlwZTogJ3BkZkFubm90YXRpb24nLFxyXG4gICAgICAgIGV2ZW50OiBlLFxyXG4gICAgICAgIGFubm90YXRpb246IGRhdGEudGFyZ2V0LmFubm9cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYWxjVmlld3BvcnQoKSB7XHJcbiAgICBjb25zdCBzY2FsZSA9IEJhc2VNYXRoVXRpbHMuY2FsY1NjYWxlKHRoaXMuc2l6ZS53aWR0aCwgdGhpcy5zaXplLmhlaWdodCwgdGhpcy5yZXNXLCB0aGlzLnJlc0gpO1xyXG4gICAgaWYoIXRoaXMudmlld3BvcnQgfHwgTWF0aC5hYnModGhpcy52aWV3cG9ydC5zY2FsZS1zY2FsZSk+MWUtNCkge1xyXG4gICAgICB0aGlzLnZpZXdwb3J0ID0gdGhpcy5wYWdlLmdldFZpZXdwb3J0KHNjYWxlKTtcclxuICAgICAgaWYodGhpcy50eXBlIT09J2Z1bGwnKSB7XHJcbiAgICAgICAgaWYodGhpcy50eXBlPT09J3JpZ2h0Jykge1xyXG4gICAgICAgICAgdGhpcy52aWV3cG9ydC5vZmZzZXRYICs9IDAuNSp0aGlzLnZpZXdwb3J0LndpZHRoO1xyXG4gICAgICAgICAgdGhpcy52aWV3cG9ydC50cmFuc2Zvcm1bNF0gLT0gMC41KnRoaXMudmlld3BvcnQud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmlld3BvcnQud2lkdGggLz0gMjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnJlc1cgPSB0aGlzLndpZHRoID0gdGhpcy52aWV3cG9ydC53aWR0aDtcclxuICAgICAgdGhpcy5yZXNIID0gdGhpcy5oZWlnaHQgPSB0aGlzLnZpZXdwb3J0LmhlaWdodDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLnR5cGUgPSB0aGlzLnBkZi5nZXRQYWdlVHlwZSh0aGlzLm4pO1xyXG4gICAgdGhpcy5wZGYuZ2V0UGFnZSh0aGlzLm4pLlxyXG4gICAgICB0aGVuKChwYWdlKT0+IHtcclxuICAgICAgICB0aGlzLnBhZ2UgPSBwYWdlO1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IFBkZi5nZXRQYWdlU2l6ZShwYWdlKTtcclxuICAgICAgICBpZih0aGlzLnR5cGUhPT0nZnVsbCcpIHtcclxuICAgICAgICAgIHRoaXMuc2l6ZS53aWR0aCAvPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYWdlLmdldEFubm90YXRpb25zKCkuXHJcbiAgICAgICAgICB0aGVuKHRoaXMuc2V0QW5ub3RhdGlvbnMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgcGFnZS5nZXRUZXh0Q29udGVudCgpLlxyXG4gICAgICAgICAgdGhlbih0aGlzLnNldEhpdHMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5jYWxjVmlld3BvcnQoKTtcclxuICAgICAgICB0aGlzLmZpbmlzaExvYWQoKTtcclxuICAgICAgfSkuXHJcbiAgICAgIGNhdGNoKChlKT0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3QgbG9hZCBQREYgcGFnZTogJysodGhpcy5uKzEpKTtcclxuICAgICAgICB0aGlzLmZpbmlzaExvYWQoKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRSZXNvbHV0aW9uKHJlcykge1xyXG4gICAgc3VwZXIuc2V0UmVzb2x1dGlvbihyZXMpO1xyXG4gICAgaWYodGhpcy5wYWdlKSB7XHJcbiAgICAgIHRoaXMuY2FsY1ZpZXdwb3J0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoaGFuZGxlcikge1xyXG4gICAgaWYodGhpcy5wYWdlKSB7XHJcbiAgICAgIHRoaXMucGFnZS5yZW5kZXIoe1xyXG4gICAgICAgIGNhbnZhc0NvbnRleHQ6IHRoaXMucHVzaEN0eCgpLFxyXG4gICAgICAgIHZpZXdwb3J0OiB0aGlzLnZpZXdwb3J0XHJcbiAgICAgIH0pLlxyXG4gICAgICB0aGVuKCgpPT4ge1xyXG4gICAgICAgIHRoaXMucmVuZGVySGl0cygpO1xyXG4gICAgICAgIHRoaXMucG9wQ3R4KCk7XHJcbiAgICAgICAgdGhpcy5maW5pc2hSZW5kZXIoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5yZW5kZXJCbGFua1BhZ2UoKTtcclxuICAgICAgdGhpcy5maW5pc2hSZW5kZXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1BkZkltYWdlLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvUGRmSW1hZ2UuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VhcmNoIHtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGFpbmVyLCBwYWdlcykge1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB0aGlzLnBhZ2VzID0gcGFnZXM7XHJcbiAgICB0aGlzLnByZXZSZXN1bHRzID0gW107XHJcbiAgICBjb250YWluZXIuaHRtbChgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJzZWFyY2hcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicXVlcnlcIj5cclxuICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImlucFF1ZXJ5XCIgdHlwZT1cInRleHRcIiBtYXhsZW5ndGg9XCIzMFwiIHZhbHVlPVwiXCIgLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0c1wiPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0dXNcIj5cclxuXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYCk7XHJcbiAgICB0aGlzLnF1ZXJ5ID0gY29udGFpbmVyLmZpbmQoJy5xdWVyeSBpbnB1dCcpO1xyXG4gICAgdGhpcy5yZXN1bHRzID0gY29udGFpbmVyLmZpbmQoJy5yZXN1bHRzJyk7XHJcbiAgICB0aGlzLnN0YXR1cyA9IGNvbnRhaW5lci5maW5kKCcuc3RhdHVzJyk7XHJcblxyXG4gICAgdGhpcy5iaW5kcyA9IHtcclxuICAgICAgbmF2aWdhdGU6IHRoaXMubmF2aWdhdGUuYmluZCh0aGlzKSxcclxuICAgICAgZG9RdWVyeTogdGhpcy5kb1F1ZXJ5LmJpbmQodGhpcylcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5xdWVyeS5vbigna2V5ZG93bicsIHRoaXMuYmluZHMuZG9RdWVyeSk7XHJcbiAgICB0aGlzLnJlc3VsdHMub24oJ2NsaWNrJywgdGhpcy5iaW5kcy5uYXZpZ2F0ZSk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5yZXN1bHRzLm9mZignY2xpY2snLCB0aGlzLmJpbmRzLm5hdmlnYXRlKTtcclxuICAgIHRoaXMucXVlcnkub2ZmKCdrZXlkb3duJywgdGhpcy5iaW5kcy5kb1F1ZXJ5KTtcclxuICB9XHJcblxyXG4gIG5hdmlnYXRlKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmKHRoaXMub25OYXZpZ2F0ZSE9PXVuZGVmaW5lZCkge1xyXG4gICAgICBsZXQgdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICAgIGlmKCF0YXJnZXQuaGFzQ2xhc3MoJ3Jlc3VsdCcpKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHRhcmdldC5maW5kKCcucmVzdWx0Jyk7XHJcbiAgICAgICAgaWYodC5sZW5ndGgpIHtcclxuICAgICAgICAgIHRhcmdldCA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgd2hpbGUodGFyZ2V0Lmxlbmd0aCAmJiAhdGFyZ2V0Lmhhc0NsYXNzKCdyZXN1bHQnKSkge1xyXG4gICAgICAgICAgICB0YXJnZXQgPSAkKHRhcmdldFswXS5wYXJlbnROb2RlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcGFnZSA9IHRhcmdldC5hdHRyKCdkYXRhJyk7XHJcbiAgICAgIGlmKHBhZ2UhPT11bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLm9uTmF2aWdhdGUocGFyc2VJbnQocGFnZSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkb1F1ZXJ5KCkge1xyXG4gICAgaWYodGhpcy5vblF1ZXJ5KSB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5U3RhbXAgPSB0aGlzLnF1ZXJ5U3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpPT4ge1xyXG4gICAgICAgIGlmKHF1ZXJ5U3RhbXAgPT09IHRoaXMucXVlcnlTdGFtcCkge1xyXG4gICAgICAgICAgdGhpcy5vblF1ZXJ5KHRoaXMucXVlcnlbMF0udmFsdWUudHJpbSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0UmVzdWx0cyhyZXN1bHRzLCBsYXN0UGFnZSkge1xyXG4gICAgaWYodGhpcy5wcmV2UmVzdWx0cy5sZW5ndGggJiYgcmVzdWx0c1swXSE9PXRoaXMucHJldlJlc3VsdHNbMF0pIHtcclxuICAgICAgdGhpcy5wcmV2UmVzdWx0cyA9IFtdO1xyXG4gICAgICB0aGlzLnJlc3VsdHMuaHRtbCgnJyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBodG1scyA9IFtdO1xyXG4gICAgZm9yKGxldCBpPXRoaXMucHJldlJlc3VsdHMubGVuZ3RoOyBpPHJlc3VsdHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gcmVzdWx0c1tpXTtcclxuICAgICAgaHRtbHMucHVzaCgnPGRpdiBjbGFzcz1cInJlc3VsdFwiIGRhdGE9XCInK3Jlc3VsdC5wYWdlKydcIj4nKTtcclxuICAgICAgICBodG1scy5wdXNoKCc8YSBocmVmPVwiI1wiPicpO1xyXG4gICAgICAgICAgaHRtbHMucHVzaCgnPGRpdj4nK3Jlc3VsdC5jb250ZXh0cy5qb2luKCc8L2Rpdj48ZGl2PicpKyc8L2Rpdj4nKTtcclxuICAgICAgICBodG1scy5wdXNoKCc8L2E+Jyk7XHJcbiAgICAgIGh0bWxzLnB1c2goJzwvZGl2PicpO1xyXG4gICAgfVxyXG4gICAgJChodG1scy5qb2luKCcnKSkuYXBwZW5kVG8odGhpcy5yZXN1bHRzKTtcclxuICAgIHRoaXMucHJldlJlc3VsdHMgPSBbLi4ucmVzdWx0c107XHJcbiAgICBpZihsYXN0UGFnZT09PXVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnN0YXR1cy5odG1sKCcnKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLnN0YXR1cy5odG1sKGxhc3RQYWdlKycgb2YgJyt0aGlzLnBhZ2VzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1NlYXJjaC5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1NlYXJjaC5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBJbWFnZUJhc2UgZnJvbSAnLi9JbWFnZUJhc2UnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0aWNJbWFnZSBleHRlbmRzIEltYWdlQmFzZSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQsIGNvbG9yLCBzcmMpIHtcclxuICAgIHN1cGVyKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQsIGNvbG9yKTtcclxuXHJcbiAgICB0aGlzLmJpbmRzID0ge31cclxuICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHRoaXMuaW1hZ2UuY3Jvc3NPcmlnaW4gPSAnQW5vbnltb3VzJztcclxuICAgIHRoaXMuYmluZHMuaW1hZ2VMb2FkID0gKCk9PiB7XHJcbiAgICAgIHRoaXMud2lkdGggPSB0aGlzLmltYWdlLndpZHRoO1xyXG4gICAgICB0aGlzLmhlaWdodCA9IHRoaXMuaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICB0aGlzLnN0YXJ0UmVuZGVyID0gKCk9PiB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJJbWFnZSh0aGlzLmltYWdlKTtcclxuICAgICAgICB0aGlzLmZpbmlzaFJlbmRlcigpO1xyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLmZpbmlzaExvYWQoKTtcclxuICAgIH07XHJcbiAgICB0aGlzLmJpbmRzLmltYWdlRXJyb3IgPSAoKT0+IHtcclxuICAgICAgdGhpcy5zdGFydFJlbmRlciA9ICgpPT4ge1xyXG4gICAgICAgIHRoaXMucmVuZGVyTm90Rm91bmRQYWdlKCk7XHJcbiAgICAgICAgdGhpcy5maW5pc2hSZW5kZXIoKTtcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5maW5pc2hMb2FkKCk7XHJcbiAgICB9O1xyXG4gICAgJCh0aGlzLmltYWdlKS5vbignbG9hZCcsIHRoaXMuYmluZHMuaW1hZ2VMb2FkKS5vbignZXJyb3InLCB0aGlzLmJpbmRzLmltYWdlRXJyb3IpO1xyXG4gICAgdGhpcy5pbWFnZS5zcmMgPSBVdGlscy5ub3JtYWxpemVVcmwoc3JjKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICAkKHRoaXMuaW1hZ2UpLm9mZignbG9hZCcsIHRoaXMuYmluZHMuaW1hZ2VMb2FkKS5vZmYoJ2Vycm9yJywgdGhpcy5iaW5kcy5pbWFnZUVycm9yKTtcclxuICAgIHRoaXMuaW1hZ2Uuc3JjID0gJyc7XHJcbiAgICBkZWxldGUgdGhpcy5pbWFnZTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1N0YXRpY0ltYWdlLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvU3RhdGljSW1hZ2UuanMiLCJpbXBvcnQge1RIUkVFfSBmcm9tICcuLi9saWJzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV4dHVyZUFuaW1hdG9yIHtcclxuICBjb25zdHJ1Y3RvcihpbWcsIHRpbGVzSG9yaXosIHRpbGVzVmVydCwgbnVtVGlsZXMsIHRpbGVEaXNwRHVyYXRpb24pIHtcclxuXHJcbiAgICBjb25zdCB0ZXh0dXJlID0gbmV3IFRIUkVFLlRleHR1cmUoKTtcclxuICAgIHRleHR1cmUubWluRmlsdGVyID0gVEhSRUUuTGluZWFyRmlsdGVyO1xyXG4gICAgdGV4dHVyZS5pbWFnZSA9IGltZztcclxuICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICBcdC8vIG5vdGU6IHRleHR1cmUgcGFzc2VkIGJ5IHJlZmVyZW5jZSwgd2lsbCBiZSB1cGRhdGVkIGJ5IHRoZSB1cGRhdGUgZnVuY3Rpb24uXHJcbiAgICB0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xyXG4gIFx0dGhpcy50aWxlc0hvcml6b250YWwgPSB0aWxlc0hvcml6O1xyXG4gIFx0dGhpcy50aWxlc1ZlcnRpY2FsID0gdGlsZXNWZXJ0O1xyXG4gIFx0Ly8gaG93IG1hbnkgaW1hZ2VzIGRvZXMgdGhpcyBzcHJpdGVzaGVldCBjb250YWluP1xyXG4gIFx0Ly8gIHVzdWFsbHkgZXF1YWxzIHRpbGVzSG9yaXogKiB0aWxlc1ZlcnQsIGJ1dCBub3QgbmVjZXNzYXJpbHksXHJcbiAgXHQvLyAgaWYgdGhlcmUgYXQgYmxhbmsgdGlsZXMgYXQgdGhlIGJvdHRvbSBvZiB0aGUgc3ByaXRlc2hlZXQuXHJcbiAgXHR0aGlzLm51bWJlck9mVGlsZXMgPSBudW1UaWxlcztcclxuICBcdHRleHR1cmUucmVwZWF0LnNldCgxL3RoaXMudGlsZXNIb3Jpem9udGFsLCAxL3RoaXMudGlsZXNWZXJ0aWNhbCk7XHJcblxyXG4gIFx0Ly8gaG93IGxvbmcgc2hvdWxkIGVhY2ggaW1hZ2UgYmUgZGlzcGxheWVkP1xyXG4gIFx0dGhpcy50aWxlRGlzcGxheUR1cmF0aW9uID0gdGlsZURpc3BEdXJhdGlvbjtcclxuXHJcbiAgXHQvLyBob3cgbG9uZyBoYXMgdGhlIGN1cnJlbnQgaW1hZ2UgYmVlbiBkaXNwbGF5ZWQ/XHJcbiAgXHR0aGlzLmN1cnJlbnREaXNwbGF5VGltZSA9IDA7XHJcblxyXG4gIFx0Ly8gd2hpY2ggaW1hZ2UgaXMgY3VycmVudGx5IGJlaW5nIGRpc3BsYXllZD9cclxuICBcdHRoaXMuY3VycmVudFRpbGUgPSAwO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKG1pbGxpU2VjKSB7XHJcbiAgICB0aGlzLmN1cnJlbnREaXNwbGF5VGltZSArPSBtaWxsaVNlYztcclxuICAgIHdoaWxlKHRoaXMuY3VycmVudERpc3BsYXlUaW1lID4gdGhpcy50aWxlRGlzcGxheUR1cmF0aW9uKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudERpc3BsYXlUaW1lIC09IHRoaXMudGlsZURpc3BsYXlEdXJhdGlvbjtcclxuICAgICAgKyt0aGlzLmN1cnJlbnRUaWxlO1xyXG4gICAgICBpZih0aGlzLmN1cnJlbnRUaWxlID09IHRoaXMubnVtYmVyT2ZUaWxlcylcclxuICAgICAgICB0aGlzLmN1cnJlbnRUaWxlID0gMDtcclxuICAgICAgdmFyIGN1cnJlbnRDb2x1bW4gPSB0aGlzLmN1cnJlbnRUaWxlJXRoaXMudGlsZXNIb3Jpem9udGFsO1xyXG4gICAgICB0aGlzLnRleHR1cmUub2Zmc2V0LnggPSBjdXJyZW50Q29sdW1uL3RoaXMudGlsZXNIb3Jpem9udGFsO1xyXG4gICAgICB2YXIgY3VycmVudFJvdyA9IE1hdGguZmxvb3IodGhpcy5jdXJyZW50VGlsZS90aGlzLnRpbGVzSG9yaXpvbnRhbCk7XHJcbiAgICAgIHRoaXMudGV4dHVyZS5vZmZzZXQueSA9IGN1cnJlbnRSb3cvdGhpcy50aWxlc1ZlcnRpY2FsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGNvbnN0IGltZyA9IHRoaXMudGV4dHVyZS5pbWFnZTtcclxuICAgIGltZy5oZWlnaHQgPSBpbWcud2lkdGggPSAwO1xyXG4gICAgdGhpcy50ZXh0dXJlLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvVGV4dHVyZUFuaW1hdG9yLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVGV4dHVyZUFuaW1hdG9yLmpzIiwiaW1wb3J0IHtUSFJFRSwgJH0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuL1V0aWxzJztcclxuaW1wb3J0IE1vdXNlRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9Nb3VzZUV2ZW50Q29udmVydGVyJztcclxuaW1wb3J0IFRocmVlRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9UaHJlZUV2ZW50Q29udmVydGVyJztcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaHJlZU1vdXNlRXZlbnRDb252ZXJ0ZXIgZXh0ZW5kcyBNb3VzZUV2ZW50Q29udmVydGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3Iod25kLCBkb2MsIHZpc3VhbFdvcmxkLCB0ZXN0KSB7XHJcbiAgICBzdXBlcih3bmQsIGRvYywgdmlzdWFsV29ybGQuZWxlbWVudCk7XHJcbiAgICBVdGlscy5leHRlbmRzKHRoaXMsIG5ldyBUaHJlZUV2ZW50Q29udmVydGVyKHZpc3VhbFdvcmxkLCB0ZXN0KSk7XHJcbiAgfVxyXG5cclxuICBnZXRDYWxsYmFjayhvYmplY3QpIHtcclxuICAgIHJldHVybiBvYmplY3Qub2JqZWN0LnVzZXJEYXRhLm1vdXNlQ2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICBzZXRDb29yZHNGcm9tRXZlbnQoZSkge1xyXG4gICAgY29uc3QgakVsZW1lbnQgPSAkKHRoaXMuZWxlbWVudCk7XHJcbiAgICBjb25zdCBvZmZzZXQgPSBqRWxlbWVudC5vZmZzZXQoKTtcclxuICAgIHRoaXMuY29vcmRzLnggPSAoKGUucGFnZVgtb2Zmc2V0LmxlZnQpL2pFbGVtZW50LndpZHRoKCkpKjItMTtcclxuICAgIHRoaXMuY29vcmRzLnkgPSAtKChlLnBhZ2VZLW9mZnNldC50b3ApL2pFbGVtZW50LmhlaWdodCgpKSoyKzE7XHJcbiAgICByZXR1cm4gdGhpcy5jb29yZHM7XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1RocmVlTW91c2VFdmVudENvbnZlcnRlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1RocmVlTW91c2VFdmVudENvbnZlcnRlci5qcyIsImltcG9ydCB7VEhSRUUsICR9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscyc7XHJcbmltcG9ydCBUb3VjaEV2ZW50Q29udmVydGVyIGZyb20gJy4vVG91Y2hFdmVudENvbnZlcnRlcic7XHJcbmltcG9ydCBUaHJlZUV2ZW50Q29udmVydGVyIGZyb20gJy4vVGhyZWVFdmVudENvbnZlcnRlcic7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGhyZWVUb3VjaEV2ZW50Q29udmVydGVyIGV4dGVuZHMgVG91Y2hFdmVudENvbnZlcnRlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHduZCwgZG9jLCB2aXN1YWxXb3JsZCwgdGVzdCkge1xyXG4gICAgc3VwZXIod25kLCBkb2MsIHZpc3VhbFdvcmxkLmVsZW1lbnQpO1xyXG4gICAgVXRpbHMuZXh0ZW5kcyh0aGlzLCBuZXcgVGhyZWVFdmVudENvbnZlcnRlcih2aXN1YWxXb3JsZCwgdGVzdCkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FsbGJhY2sob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqZWN0Lm9iamVjdC51c2VyRGF0YS50b3VjaENhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgc2V0Q29vcmRzRnJvbUV2ZW50KGUpIHtcclxuICAgIGNvbnN0IGpFbGVtZW50ID0gJCh0aGlzLmVsZW1lbnQpLCBvZmZzZXQgPSBqRWxlbWVudC5vZmZzZXQoKSxcclxuICAgICAgdG91Y2hlcyA9IGUudG91Y2hlcyB8fCBlLm9yaWdpbmFsRXZlbnQudG91Y2hlcywgdG91Y2ggPSB0b3VjaGVzLmxlbmd0aD8gdG91Y2hlc1swXTogKHRoaXMubGFzdFRvdWNoZXMgfHwgW3twYWdlWDogMCwgcGFnZVk6IDB9XSlbMF0sXHJcbiAgICAgIHBhZ2VYID0gdG91Y2gucGFnZVgsIHBhZ2VZID0gdG91Y2gucGFnZVk7XHJcbiAgICB0aGlzLmxhc3RUb3VjaGVzID0gdG91Y2hlcy5sZW5ndGg/IHRvdWNoZXM6IHRoaXMubGFzdFRvdWNoZXM7XHJcbiAgICB0aGlzLmNvb3Jkcy54ID0gKChwYWdlWC1vZmZzZXQubGVmdCkvakVsZW1lbnQud2lkdGgoKSkqMi0xO1xyXG4gICAgdGhpcy5jb29yZHMueSA9IC0oKHBhZ2VZLW9mZnNldC50b3ApL2pFbGVtZW50LmhlaWdodCgpKSoyKzE7XHJcbiAgICByZXR1cm4gdGhpcy5jb29yZHM7XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1RocmVlVG91Y2hFdmVudENvbnZlcnRlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1RocmVlVG91Y2hFdmVudENvbnZlcnRlci5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBJbWFnZUZhY3RvcnkgZnJvbSAnLi9JbWFnZUZhY3RvcnknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGh1bWJuYWlscyB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQsIGNvbnRhaW5lciwgdGh1bWJuYWlsc0NsYiwgc2l6ZSwgcHJvcHM9e2tXdG9IOiAyMTAvMjk3fSkge1xyXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB0aGlzLnAgPSBwcm9wcztcclxuICAgIHRoaXMudGh1bWJuYWlsc0NsYiA9IHRodW1ibmFpbHNDbGI7XHJcbiAgICB0aGlzLnNpemUgPSBzaXplO1xyXG4gICAgdGhpcy5jYW52YXMgPSAkKCc8Y2FudmFzPicpWzBdO1xyXG4gICAgdGhpcy5pbWFnZUZhY3RvcnkgPSBuZXcgSW1hZ2VGYWN0b3J5KHtcclxuICAgICAgLi4uY29udGV4dCxcclxuICAgICAgcmVuZGVyQ2FudmFzOiB0aGlzLmNhbnZhcyxcclxuICAgICAgcmVuZGVyQ2FudmFzQ3R4OiB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICB9KTtcclxuICAgIHRoaXMudGh1bWJuYWlscyA9IFtdO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8c2l6ZTsgKytpKSB7XHJcbiAgICAgIGNvbnN0IGluZm8gPSB0aGlzLnRodW1ibmFpbHNDbGIoaSk7XHJcbiAgICAgIHRoaXMudGh1bWJuYWlscy5wdXNoKHtcclxuICAgICAgICAuLi5pbmZvLFxyXG4gICAgICAgIGluZGV4OiBpLFxyXG4gICAgICAgIGxvYWRlZDogaW5mby50eXBlPT09J3RodW1ibmFpbC1pbWFnZScsXHJcbiAgICAgICAgaGVhZGluZzogbnVsbCxcclxuICAgICAgICB0aHVtYm5haWw6IG51bGwsXHJcbiAgICAgICAgdGl0bGU6IGluZm8udGl0bGUgfHwgaVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICB1cGRhdGU6IHRoaXMudXBkYXRlLmJpbmQodGhpcyksXHJcbiAgICAgIG5hdmlnYXRlOiAoZSk9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmKHRoaXMub25OYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgbGV0IG5vZGUgPSBlLnRhcmdldDtcclxuICAgICAgICAgIHdoaWxlKG5vZGUgJiYgIW5vZGUuZGF0YVRodW1ibmFpbCkge1xyXG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5vbk5hdmlnYXRlKG5vZGUuZGF0YVRodW1ibmFpbC5pbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5jb250YWluZXIub24oJ3Njcm9sbCcsIHRoaXMuYmluZHMudXBkYXRlKTtcclxuICB9XHJcblxyXG4gIGdldFNpemUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zaXplO1xyXG4gIH1cclxuXHJcbiAgc2V0RW5hYmxlKGVuYWJsZSkge1xyXG4gICAgdGhpcy5lbmFibGUgPSBlbmFibGU7XHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJ2EnKS5vZmYoJ2NsaWNrJywgdGhpcy5iaW5kcy5uYXZpZ2F0ZSk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5vZmYoJ3Njcm9sbCcsIHRoaXMuYmluZHMudXBkYXRlKTtcclxuICAgIHRoaXMuY29udGFpbmVyLmh0bWwoJycpO1xyXG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jYW52YXMud2lkdGggPSAwO1xyXG4gICAgZGVsZXRlIHRoaXMuY2FudmFzO1xyXG4gIH1cclxuXHJcbiAgbG9hZCh0aHVtYm5haWwpIHtcclxuICAgIHRoaXMubG9hZGluZyA9IHRydWU7XHJcbiAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5pbWFnZUZhY3RvcnkuYnVpbGQodGh1bWJuYWlsLCB0aHVtYm5haWwubnVtYmVyPT09dW5kZWZpbmVkPyB0aHVtYm5haWwuaW5kZXg6IHRodW1ibmFpbC5udW1iZXIsIHRoaXMucC5rV3RvSCozMDAsIDMwMCk7XHJcbiAgICB3cmFwcGVyLm9uQ2hhbmdlID0gKGNhbnZhcyk9PiB7XHJcbiAgICAgIHRoaXMuc2V0SW1hZ2UodGh1bWJuYWlsLCBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKSk7XHJcbiAgICAgIHRodW1ibmFpbC5sb2FkZWQgPSB0cnVlO1xyXG4gICAgICB3cmFwcGVyLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PiB0aGlzLnVwZGF0ZSgpKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXRBY3RpdmUoKSB7XHJcbiAgICBjb25zdCBmaXJzdCA9IHRoaXMuY29udGFpbmVyLnNjcm9sbFRvcCgpLCBsYXN0ID0gZmlyc3QgKyB0aGlzLmNvbnRhaW5lci5oZWlnaHQoKSwgcmVzID0gW107XHJcbiAgICBmb3IobGV0IHRodW1ibmFpbCBvZiB0aGlzLnRodW1ibmFpbHMpIHtcclxuICAgICAgaWYoTWF0aC5tYXgodGh1bWJuYWlsLmZpcnN0LCBmaXJzdCk8TWF0aC5taW4odGh1bWJuYWlsLmxhc3QsIGxhc3QpKSB7XHJcbiAgICAgICAgcmVzLnB1c2godGh1bWJuYWlsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIGlmKCF0aGlzLmxvYWRpbmcgJiYgdGhpcy5jYW52YXMgJiYgdGhpcy5lbmFibGUpIHtcclxuICAgICAgaWYoIXRoaXMuYnVpbHQpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlKCk7XHJcbiAgICAgIGZvcihsZXQgdGh1bWJuYWlsIG9mIGFjdGl2ZSkge1xyXG4gICAgICAgIGlmKCF0aHVtYm5haWwubG9hZGVkKSB7XHJcbiAgICAgICAgICB0aGlzLmxvYWQodGh1bWJuYWlsKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0SW1hZ2UodGh1bWJuYWlsLCBpbWcpIHtcclxuICAgIHRodW1ibmFpbC5pbWcgPSBpbWc7XHJcbiAgICB0aHVtYm5haWwudGh1bWJuYWlsLmNzcygnYmFja2dyb3VuZC1pbWFnZScsIFsndXJsKFxcJycsIGltZywnXFwnKSddLmpvaW4oJycpKTtcclxuICAgIHRodW1ibmFpbC50aHVtYm5haWwucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IGVsZW1lbnRzID0gWyc8ZGl2IGNsYXNzPVwidGh1bWJuYWlsc1wiPiddXHJcbiAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnNpemU7ICsraSkge1xyXG4gICAgICBlbGVtZW50cy5wdXNoKFsnPGRpdiBjbGFzcz1cIml0ZW1cIj48YSBocmVmPVwiI1wiPjxkaXYgY2xhc3M9XCJ0aHVtYm5haWwgbG9hZGluZ1wiPjwvZGl2PjwvYT48ZGl2IGNsYXNzPVwiaGVhZGluZ1wiPjxhIGhyZWY9XCIjXCIgdGl0bGU9XCInLCBpKzEsJ1wiPicsIGkrMSwgJzwvYT48L2Rpdj48L2Rpdj4nXS5qb2luKCcnKSk7XHJcbiAgICB9XHJcbiAgICBlbGVtZW50cy5wdXNoKCc8L2Rpdj4nKTtcclxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChlbGVtZW50cy5qb2luKCcnKSk7XHJcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy5pdGVtJyksIGJhc2UgPSB0aGlzLmNvbnRhaW5lci5maW5kKCcudGh1bWJuYWlscycpLm9mZnNldCgpLnRvcDtcclxuICAgIGZvcihsZXQgaT0wOyBpPGl0ZW1zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSAkKGl0ZW1zW2ldKTtcclxuICAgICAgdGhpcy50aHVtYm5haWxzW2ldLmhlYWRpbmcgPSBpdGVtLmZpbmQoJy5oZWFkaW5nJyk7XHJcbiAgICAgIHRoaXMudGh1bWJuYWlsc1tpXS50aHVtYm5haWwgPSBpdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcclxuICAgICAgdGhpcy50aHVtYm5haWxzW2ldLmZpcnN0ID0gaXRlbS5vZmZzZXQoKS50b3AtYmFzZTtcclxuICAgICAgdGhpcy50aHVtYm5haWxzW2ldLmxhc3QgPSB0aGlzLnRodW1ibmFpbHNbaV0uZmlyc3QraXRlbS5oZWlnaHQoKTtcclxuICAgICAgaWYodGhpcy50aHVtYm5haWxzW2ldLmxvYWRlZCkge1xyXG4gICAgICAgIHRoaXMuc2V0SW1hZ2UodGhpcy50aHVtYm5haWxzW2ldLCB0aGlzLnRodW1ibmFpbHNbaV0uc3JjKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBhcyA9IGl0ZW0uZmluZCgnYScpO1xyXG4gICAgICBmb3IobGV0IGo9MDsgajxhcy5sZW5ndGg7ICsraikge1xyXG4gICAgICAgIGNvbnN0IGEgPSBhc1tqXTtcclxuICAgICAgICBhLmRhdGFUaHVtYm5haWwgPSB0aGlzLnRodW1ibmFpbHNbaV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJ2EnKS5vbignY2xpY2snLCB0aGlzLmJpbmRzLm5hdmlnYXRlKTtcclxuICAgIHRoaXMuYnVpbHQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvVGh1bWJuYWlscy5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1RodW1ibmFpbHMuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9FdmVudENvbnZlcnRlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb3VjaENvbnZlcnRlciBleHRlbmRzIEV2ZW50Q29udmVydGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3Iod25kLCBkb2MsIGVsZW1lbnQpIHtcclxuICAgIHN1cGVyKHduZCwgZG9jKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgdGhpcy5iaW5kcyA9IHtcclxuICAgICAgY29udmVydDogdGhpcy5jb252ZXJ0LmJpbmQodGhpcylcclxuICAgIH07XHJcbiAgICAkKHRoaXMuZWxlbWVudCkub24oJ3RvdWNoc3RhcnQgdG91Y2htb3ZlJywgdGhpcy5iaW5kcy5jb252ZXJ0KTtcclxuICAgICQodGhpcy5kb2MpLm9uKCd0b3VjaGVuZCcsIHRoaXMuYmluZHMuY29udmVydCk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgJCh0aGlzLmVsZW1lbnQpLm9mZigndG91Y2hzdGFydCB0b3VjaG1vdmUnLCB0aGlzLmJpbmRzLmNvbnZlcnQpO1xyXG4gICAgJCh0aGlzLmRvYykub2ZmKCd0b3VjaGVuZCcsIHRoaXMuYmluZHMuY29udmVydCk7XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1RvdWNoRXZlbnRDb252ZXJ0ZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Ub3VjaEV2ZW50Q29udmVydGVyLmpzIiwiaW1wb3J0IHskLCB0cn0gZnJvbSAnLi4vbGlicyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcclxuXHJcbiAgc3RhdGljIGxpbmtTdGF0ZUhhbmRsZXJzID0ge1xyXG4gICAgdmlzaWJsZTogKGN0cmwsIHZhbHVlKT0+IFZpZXcuY2xhc3NQcm9wZXJ0eShjdHJsLCAnaGlkZGVuJywgIXZhbHVlKSxcclxuICAgIGFjdGl2ZTogKGN0cmwsIHZhbHVlKT0+IFZpZXcuY2xhc3NQcm9wZXJ0eShjdHJsLCAnYWN0aXZlJywgdmFsdWUpLFxyXG4gICAgZW5hYmxlOiAoY3RybCwgdmFsdWUpPT4gVmlldy5jbGFzc1Byb3BlcnR5KGN0cmwsICdkaXNhYmxlZCcsICF2YWx1ZSlcclxuICB9O1xyXG5cclxuICBzdGF0aWMgd2lkZ2V0U3RhdGVIYW5kbGVycyA9IHtcclxuICAgIHZpc2libGU6IChjdHJsLCB2YWx1ZSk9PiBWaWV3LmNsYXNzUHJvcGVydHkoY3RybCwgJ2hpZGRlbicsICF2YWx1ZSksXHJcbiAgICBhY3RpdmU6IChjdHJsLCB2YWx1ZSk9PiBWaWV3LmNsYXNzUHJvcGVydHkoY3RybCwgJ2FjdGl2ZScsIHZhbHVlKSxcclxuICAgIGVuYWJsZTogKGN0cmwsIHZhbHVlKT0+IFZpZXcuY2xhc3NQcm9wZXJ0eShjdHJsLCAnZGlzYWJsZWQnLCAhdmFsdWUpXHJcbiAgfTtcclxuXHJcbiAgc3RhdGljIGlucHV0U3RhdGVIYW5kbGVycyA9IHtcclxuICAgIHZpc2libGU6IChjdHJsLCB2YWx1ZSk9PiBWaWV3LmNsYXNzUHJvcGVydHkoY3RybCwgJ2hpZGRlbicsICF2YWx1ZSksXHJcbiAgICB2YWx1ZTogKGN0cmwsIHZhbHVlKT0+IGN0cmxbMF0udmFsdWUgPSB2YWx1ZSxcclxuICAgIGVuYWJsZTogKGN0cmwsIHZhbHVlKT0+IFZpZXcuYXR0cmlidXRlUHJvcGVydHkoY3RybCwgJ2Rpc2FibGVkJywgIXZhbHVlKVxyXG4gIH07XHJcblxyXG4gIHN0YXRpYyB0ZXh0U3RhdGVIYW5kbGVycyA9IHtcclxuICAgIHZpc2libGU6IChjdHJsLCB2YWx1ZSk9PiBWaWV3LmNsYXNzUHJvcGVydHkoY3RybCwgJ2hpZGRlbicsICF2YWx1ZSksXHJcbiAgICB2YWx1ZTogKGN0cmwsIHZhbHVlKT0+IGN0cmwudGV4dCh2YWx1ZSlcclxuICB9O1xyXG5cclxuICBzdGF0aWMgY2xhc3NQcm9wZXJ0eShjdHJsLCBjbGFzc05hbWUsIHZhbHVlKSB7XHJcbiAgICBpZih2YWx1ZSkge1xyXG4gICAgICBjdHJsLmFkZENsYXNzKGNsYXNzTmFtZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY3RybC5yZW1vdmVDbGFzcyhjbGFzc05hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGF0dHJpYnV0ZVByb3BlcnR5KGN0cmwsIGF0dHJpYnV0ZU5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZih2YWx1ZSkge1xyXG4gICAgICBjdHJsLmF0dHIoYXR0cmlidXRlTmFtZSwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGN0cmwucmVtb3ZlQXR0cihhdHRyaWJ1dGVOYW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBjYWxsSGFuZGxlcnMoaGFuZGxlcnMsIGlkLCBlLCBkYXRhKSB7XHJcbiAgICBmb3IobGV0IGhhbmRsZXIgb2YgaGFuZGxlcnMpIHtcclxuICAgICAgaWYoaGFuZGxlcltpZF0pIHtcclxuICAgICAgICBoYW5kbGVyW2lkXShlLCBkYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGhhbmRsZXIuaGFuZGxlRGVmYXVsdCkge1xyXG4gICAgICAgIGhhbmRsZXIuaGFuZGxlRGVmYXVsdChpZCwgZSwgZGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBoYW5kbGVFdmVudChpZCwgZ2V0SGFuZGxlcnMsIGUsIGRhdGEpIHtcclxuICAgIFZpZXcuY2FsbEhhbmRsZXJzKGdldEhhbmRsZXJzKGlkKSwgaWQsIGUsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGhhbmRsZUxpbmtFdmVudChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZighdGhpcy5jdHJsLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7XHJcbiAgICAgIFZpZXcuaGFuZGxlRXZlbnQodGhpcy5pZCwgdGhpcy5nZXRIYW5kbGVycywgZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGFuZGxlSW5wdXRFdmVudChlKSB7XHJcbiAgICBWaWV3LmhhbmRsZUV2ZW50KHRoaXMuaWQsIHRoaXMuZ2V0SGFuZGxlcnMsIGUsIGUudGFyZ2V0LnZhbHVlKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBoYW5kbGVGb3JtRXZlbnQoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgVmlldy5oYW5kbGVFdmVudCh0aGlzLmlkLCB0aGlzLmdldEhhbmRsZXJzLCBlKTtcclxuICB9XHJcblxyXG4gIC8vIHZpcnR1YWwgZnVuY3Rpb25zIHtcclxuICBnZXRMaW5rcygpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0V2lkZ2V0cygpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXRzKCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRUZXh0cygpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4ge307XHJcbiAgfVxyXG5cclxuICBnZXRIYW5kbGVycyhpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlcnM7XHJcbiAgfVxyXG4gIC8vIH1cclxuXHJcbiAgY2FsbExhdGVyKGhhbmRsZXJzLCBpZCwgZSwgZGF0YSwgbXMpIHtcclxuICAgIHRoaXMucGVuZGluZ3NbaWRdID0ge1xyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkuZ2V0VGltZSgpXHJcbiAgICB9O1xyXG4gICAgc2V0VGltZW91dCgoKT0+IHtcclxuICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCksIHBlbmRpbmcgPSB0aGlzLnBlbmRpbmdzW2lkXTtcclxuICAgICAgaWYocGVuZGluZyAmJiB0aW1lc3RhbXAtcGVuZGluZy50aW1lc3RhbXA+PW1zKSB7XHJcbiAgICAgICAgVmlldy5jYWxsSGFuZGxlcnMoaGFuZGxlcnMsIGlkLCBlLCBkYXRhKTtcclxuICAgICAgICBkZWxldGUgdGhpcy5wZW5kaW5nc1tpZF07XHJcbiAgICAgIH1cclxuICAgIH0sIG1zKTtcclxuICB9XHJcblxyXG4gIC8vIGxvYWRGaWxlcyh1cmxzLCByZWFkeSwgZmFpbHVyZSkge1xyXG4gIC8vICAgbGV0IGRvbmUgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAvLyAgIGZvcihsZXQgdXJsIG9mIHVybHMpIHtcclxuICAvLyAgICAgZG9uZSA9IGRvbmUudGhlbigoKT0+IHtcclxuICAvLyAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PiB7XHJcbiAgLy8gICAgICAgICAkLmdldCh1cmwsIChyZXMpPT4ge1xyXG4gIC8vICAgICAgICAgICByZWFkeShyZXMsIHVybCk7XHJcbiAgLy8gICAgICAgICAgIHJlc29sdmUoKTtcclxuICAvLyAgICAgICAgIH0pLmZhaWwoKHJlcyk9PiB7XHJcbiAgLy8gICAgICAgICAgIGlmKGZhaWx1cmUgJiYgZmFpbHVyZShyZXMsIHVybCkpIHtcclxuICAvLyAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgLy8gICAgICAgICAgIH1cclxuICAvLyAgICAgICAgICAgZWxzZSB7XHJcbiAgLy8gICAgICAgICAgICAgcmVqZWN0KHJlcyk7XHJcbiAgLy8gICAgICAgICAgIH1cclxuICAvLyAgICAgICAgIH0pO1xyXG4gIC8vICAgICAgIH0pO1xyXG4gIC8vICAgICB9KTtcclxuICAvLyAgIH1cclxuICAvLyAgIHJldHVybiBkb25lO1xyXG4gIC8vIH1cclxuXHJcbiAgbG9hZEZpbGVzKHVybHMsIGZpbGVzKSB7XHJcbiAgICBjb25zdCB0YXNrcyA9IFtdO1xyXG4gICAgZm9yKGxldCBuYW1lIG9mIE9iamVjdC5rZXlzKHVybHMpKSB7XHJcbiAgICAgIGZpbGVzW25hbWVdID0gW107XHJcbiAgICAgIGZvcihsZXQgdXJsIG9mIHVybHNbbmFtZV0pIHtcclxuICAgICAgICB0YXNrcy5wdXNoKFxyXG4gICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PiB7XHJcbiAgICAgICAgICAgICQuZ2V0KHVybCwgKGRhdGEpPT4ge1xyXG4gICAgICAgICAgICAgIGZpbGVzW25hbWVdLnB1c2goe3VybCwgZGF0YX0pO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSkuZmFpbCgocmVzKT0+IHtcclxuICAgICAgICAgICAgICByZWplY3QocmVzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLmFsbCh0YXNrcyk7XHJcbiAgfVxyXG5cclxuICB1cmxSZXNvbHZlcihiYXNlVXJsLCB1cmwpIHtcclxuICAgIHVybCA9IHVybC5yZXBsYWNlKC9cXFxcL2csICcvJyk7XHJcbiAgICBpZih1cmwuY2hhckF0KDApIT09Jy8nKSB7XHJcbiAgICAgIGJhc2VVcmwgPSBiYXNlVXJsLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcclxuICAgICAgY29uc3QgcCA9IGJhc2VVcmwubGFzdEluZGV4T2YoJy8nKTtcclxuICAgICAgdXJsID0gKH5wPyBiYXNlVXJsLnN1YnN0cigwLCBwKzEpOiAnJykrdXJsO1xyXG5cclxuICAgICAgY29uc3QgcGFydHMgPSB1cmwuc3BsaXQoJy8nKTtcclxuICAgICAgdXJsID0gW107XHJcbiAgICAgIGZvcihsZXQgcGFydCBvZiBwYXJ0cykge1xyXG4gICAgICAgIGlmKHBhcnQ9PT0nLicpIHtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihwYXJ0PT09Jy4uJykge1xyXG4gICAgICAgICAgaWYodXJsLmxlbmd0aCAmJiAhKHVybC5sZW5ndGg9PT0xICYmIHVybFswXT09PScnKSkge1xyXG4gICAgICAgICAgICB1cmwucG9wKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdXJsLnB1c2gocGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHVybCA9IHVybC5qb2luKCcvJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVybDtcclxuICB9XHJcblxyXG4gIG9ialRvQXR0cnNTdHIobykge1xyXG4gICAgY29uc3QgcmVzID0gW107XHJcbiAgICBmb3IobGV0IG5hbWUgb2YgT2JqZWN0LmtleXMobykpIHtcclxuICAgICAgcmVzLnB1c2goW25hbWUsICc9XCInLCBvW25hbWVdLCAnXCInXS5qb2luKCcnKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzLmpvaW4oJyAnKTtcclxuICB9XHJcblxyXG4gIGNoZWNrSWZyYW1lU2l6ZSgpIHtcclxuICAgIGlmKHRoaXMuZnJhbWUpIHtcclxuICAgICAgaWYoTWF0aC5hYnModGhpcy5mcmFtZS53aWR0aC10aGlzLnBhcmVudENvbnRhaW5lci53aWR0aCgpKT4xIHx8IE1hdGguYWJzKHRoaXMuZnJhbWUuaGVpZ2h0LXRoaXMucGFyZW50Q29udGFpbmVyLmhlaWdodCgpKT4xKSB7XHJcbiAgICAgICAgdGhpcy5vblJlc2l6ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHNldFRpbWVvdXQodGhpcy5jaGVja0lmcmFtZVNpemUuYmluZCh0aGlzKSwgMjUwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uUmVzaXplKCkge1xyXG4gICAgdGhpcy5mcmFtZS53aWR0aCA9IHRoaXMucGFyZW50Q29udGFpbmVyLndpZHRoKCk7XHJcbiAgICB0aGlzLmZyYW1lLmhlaWdodCA9IHRoaXMucGFyZW50Q29udGFpbmVyLmhlaWdodCgpO1xyXG4gIH1cclxuXHJcbiAgdHJhbnNsYXRlKGh0bWwpIHtcclxuICAgIHJldHVybiBodG1sLnJlcGxhY2UoLzxcXCR0cj4oLiopPFxcL1xcJHRyPi9naSwgKHMwLHMxKT0+IHRyKHMxKSk7XHJcbiAgfVxyXG5cclxuICBmaXJlTGlua3NPbkxvYWRFdmVudCgpIHtcclxuICAgIGlmKHRoaXMudGVtcGxhdGVPYmplY3QgJiYgdGhpcy50ZW1wbGF0ZU9iamVjdC5saW5rTG9hZGVkKSB7XHJcbiAgICAgIGxldCBsb2FkZWQgPSB0cnVlO1xyXG4gICAgICBmb3IobGV0IGpMaW5rIG9mIHRoaXMuakxpbmtzKSB7XHJcbiAgICAgICAgY29uc3QgbGluayA9IGpMaW5rWzBdO1xyXG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIGltZy5vbmVycm9yID0gKCk9PiB0aGlzLnRlbXBsYXRlT2JqZWN0LmxpbmtMb2FkZWQobGluayk7XHJcbiAgICAgICAgaW1nLnNyYyA9IGxpbmsuaHJlZjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IocGFyZW50Q29udGFpbmVyLCBvbkxvYWQsIHRlbXBsYXRlPXt9KSB7XHJcbiAgICB0aGlzLnBlbmRpbmdzID0ge307XHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICBvblJlc2l6ZTogdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpXHJcbiAgICB9O1xyXG4gICAgdGhpcy5wYXJlbnRDb250YWluZXIgPSAkKHBhcmVudENvbnRhaW5lcik7XHJcbiAgICB0aGlzLmlzSU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIXdpbmRvdy5NU1N0cmVhbTtcclxuICAgIHRoaXMucGFyZW50Q29udGFpbmVyLmh0bWwoJzxpZnJhbWUgc3R5bGU9XCJib3JkZXI6IDA7JysodGhpcy5pc0lPUz8gJyc6ICcgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJScpKydcIiBzY3JvbGxpbmc9XCJub1wiPjwvaWZyYW1lPicpO1xyXG5cclxuICAgIHRoaXMuZnJhbWUgPSB0aGlzLnBhcmVudENvbnRhaW5lci5maW5kKCdpZnJhbWUnKVswXTtcclxuICAgIGlmKHRoaXMuZnJhbWUuY29udGVudFdpbmRvdy5zdG9wKSB7XHJcbiAgICAgIHRoaXMuZnJhbWUuY29udGVudFdpbmRvdy5zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLmlzSU9TKSB7XHJcbiAgICAgICQodGhpcy5wYXJlbnRDb250YWluZXJbMF0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldykub24oJ3Jlc2l6ZScsIHRoaXMuYmluZHMub25SZXNpemUpO1xyXG4gICAgICB0aGlzLm9uUmVzaXplKCk7XHJcbiAgICAgIHNldFRpbWVvdXQodGhpcy5jaGVja0lmcmFtZVNpemUuYmluZCh0aGlzKSwgMjUwKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNvbnRhaW5lciA9ICQodGhpcy5mcmFtZS5jb250ZW50RG9jdW1lbnQuYm9keSk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5jc3MoJ21hcmdpbicsICcwJyk7XHJcbiAgICB0aGlzLmhlYWQgPSAkKHRoaXMuZnJhbWUuY29udGVudERvY3VtZW50LmhlYWQpO1xyXG4gICAgdGhpcy5vbkxvYWQgPSBvbkxvYWQ7XHJcbiAgICB0aGlzLmhhbmRsZXJzID0gW107XHJcblxyXG4gICAgY29uc3Qgc2NyaXB0ID0gdGVtcGxhdGUuaHRtbD8gdGVtcGxhdGUuc2NyaXB0OiB0aGlzLmdldFRlbXBsYXRlKCkuc2NyaXB0O1xyXG4gICAgY29uc3QgdXJscyA9IHtcclxuICAgICAgc3R5bGVzOiB0ZW1wbGF0ZS5zdHlsZXMgfHwgdGhpcy5nZXRUZW1wbGF0ZSgpLnN0eWxlcyxcclxuICAgICAgaHRtbDogW3RlbXBsYXRlLmh0bWwgfHwgdGhpcy5nZXRUZW1wbGF0ZSgpLmh0bWxdLFxyXG4gICAgICBzY3JpcHQ6IHNjcmlwdD8gW3NjcmlwdF06IFtdXHJcbiAgICB9LCBmaWxlcyA9IHt9LCBsaW5rcyA9IHRlbXBsYXRlLmxpbmtzIHx8IHRoaXMuZ2V0VGVtcGxhdGUoKS5saW5rcztcclxuXHJcbiAgICB0aGlzLmxvYWRGaWxlcyh1cmxzLCBmaWxlcykudGhlbigoKT0+IHtcclxuICAgICAgZm9yKGxldCBzdHlsZSBvZiBmaWxlcy5zdHlsZXMpIHtcclxuICAgICAgICBsZXQgdGV4dENzcyA9IHN0eWxlLmRhdGEsIHVybCA9IHN0eWxlLnVybDtcclxuICAgICAgICB0ZXh0Q3NzID0gdGV4dENzcy5yZXBsYWNlKC91cmxcXChbJ1wiXSguKj8pW1wiJ11cXCkvZywgKHIsIHIxKT0+IHtcclxuICAgICAgICAgIHJldHVybiBbJ3VybCgnLCB0aGlzLnVybFJlc29sdmVyKHVybCwgcjEpLCAnKSddLmpvaW4oJycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoYDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj4ke3RleHRDc3N9PC9zdHlsZT5gKS5hcHBlbmRUbyh0aGlzLmhlYWQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmNvbnRhaW5lci5odG1sKHRoaXMudHJhbnNsYXRlKGZpbGVzLmh0bWxbMF0uZGF0YSkpO1xyXG5cclxuICAgICAgdGhpcy5qTGlua3MgPSBbXTtcclxuICAgICAgZm9yKGxldCBsaW5rIG9mIGxpbmtzKSB7XHJcbiAgICAgICAgdGhpcy5qTGlua3MucHVzaCgkKFsnPGxpbmsgJywgdGhpcy5vYmpUb0F0dHJzU3RyKGxpbmspLCAnPiddLmpvaW4oJycpKS5hcHBlbmRUbyh0aGlzLmhlYWQpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYoZmlsZXMuc2NyaXB0WzBdKSB7XHJcbiAgICAgICAgY29uc3QgaW5pdCA9IGV2YWwoZmlsZXMuc2NyaXB0WzBdLmRhdGEpO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVPYmplY3QgPSBpbml0KHRoaXMuY29udGFpbmVyKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlT2JqZWN0ID0ge307XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMubGlua0NvbnRyb2xzID0ge307XHJcbiAgICAgIGZvcihsZXQgaWQgb2YgdGhpcy5nZXRMaW5rcygpKSB7XHJcbiAgICAgICAgdGhpcy5saW5rQ29udHJvbHNbaWRdID0gdGhpcy5jb250YWluZXIuZmluZCgnLicraWQpO1xyXG4gICAgICAgIHRoaXMuYmluZHNbaWRdID0gVmlldy5oYW5kbGVMaW5rRXZlbnQuYmluZCh7Z2V0SGFuZGxlcnM6IHRoaXMuZ2V0SGFuZGxlcnMuYmluZCh0aGlzKSwgaWQsIGN0cmw6IHRoaXMubGlua0NvbnRyb2xzW2lkXX0pO1xyXG4gICAgICAgIHRoaXMubGlua0NvbnRyb2xzW2lkXS5vbignY2xpY2snLCB0aGlzLmJpbmRzW2lkXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMud2lkZ2V0Q29udHJvbHMgPSB7fTtcclxuICAgICAgZm9yKGxldCBpZCBvZiB0aGlzLmdldFdpZGdldHMoKSkge1xyXG4gICAgICAgIHRoaXMud2lkZ2V0Q29udHJvbHNbaWRdID0gdGhpcy5jb250YWluZXIuZmluZCgnLicraWQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmlucHV0Q29udHJvbHMgPSB7fTtcclxuICAgICAgZm9yKGxldCBpZCBvZiB0aGlzLmdldElucHV0cygpKSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dENvbnRyb2xzW2lkXSA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy4nK2lkKTtcclxuICAgICAgICB0aGlzLmJpbmRzW2lkXSA9IFZpZXcuaGFuZGxlSW5wdXRFdmVudC5iaW5kKHtnZXRIYW5kbGVyczogdGhpcy5nZXRIYW5kbGVycy5iaW5kKHRoaXMpLCBpZCwgY3RybDogdGhpcy5pbnB1dENvbnRyb2xzW2lkXX0pO1xyXG4gICAgICAgIHRoaXMuaW5wdXRDb250cm9sc1tpZF0ub24oJ2tleXVwJywgdGhpcy5iaW5kc1tpZF0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmZvcm1Db250cm9scyA9IHt9O1xyXG4gICAgICBmb3IobGV0IGlkIG9mIHRoaXMuZ2V0Rm9ybXMoKSkge1xyXG4gICAgICAgIHRoaXMuZm9ybUNvbnRyb2xzW2lkXSA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy4nK2lkKTtcclxuICAgICAgICB0aGlzLmJpbmRzW2lkXSA9IFZpZXcuaGFuZGxlRm9ybUV2ZW50LmJpbmQoe2dldEhhbmRsZXJzOiB0aGlzLmdldEhhbmRsZXJzLmJpbmQodGhpcyksIGlkLCBjdHJsOiB0aGlzLmZvcm1Db250cm9sc1tpZF19KTtcclxuICAgICAgICB0aGlzLmZvcm1Db250cm9sc1tpZF0ub24oJ3N1Ym1pdCcsIHRoaXMuYmluZHNbaWRdKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy50ZXh0Q29udHJvbHMgPSB7fTtcclxuICAgICAgZm9yKGxldCBpZCBvZiB0aGlzLmdldFRleHRzKCkpIHtcclxuICAgICAgICB0aGlzLnRleHRDb250cm9sc1tpZF0gPSB0aGlzLmNvbnRhaW5lci5maW5kKCcuJytpZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc3RhdGVTZXR0ZXJzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG1hcDogdGhpcy5saW5rQ29udHJvbHMsXHJcbiAgICAgICAgICBzZXR0ZXI6IHRoaXMuc2V0TGlua0NvbnRyb2xTdGF0ZS5iaW5kKHRoaXMpXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBtYXA6IHRoaXMud2lkZ2V0Q29udHJvbHMsXHJcbiAgICAgICAgICBzZXR0ZXI6IHRoaXMuc2V0V2lkZ2V0Q29udHJvbFN0YXRlLmJpbmQodGhpcylcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIG1hcDogdGhpcy5pbnB1dENvbnRyb2xzLFxyXG4gICAgICAgICAgc2V0dGVyOiB0aGlzLnNldElucHV0Q29udHJvbFN0YXRlLmJpbmQodGhpcylcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIG1hcDogdGhpcy50ZXh0Q29udHJvbHMsXHJcbiAgICAgICAgICBzZXR0ZXI6IHRoaXMuc2V0VGV4dENvbnRyb2xTdGF0ZS5iaW5kKHRoaXMpXHJcbiAgICAgICAgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgdGhpcy5pbml0VmlldygpO1xyXG5cclxuICAgICAgaWYodGhpcy5vbkxvYWQpIHtcclxuICAgICAgICB0aGlzLm9uTG9hZCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmZpcmVMaW5rc09uTG9hZEV2ZW50KCk7XHJcbiAgICB9KS5cclxuICAgIGNhdGNoKChyZXMpPT4gY29uc29sZS5lcnJvcihyZXMpKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBkZWxldGUgdGhpcy50ZXh0Q29udHJvbHM7XHJcbiAgICBmb3IobGV0IGlkIG9mIHRoaXMuZ2V0TGlua3MoKSkge1xyXG4gICAgICB0aGlzLmxpbmtDb250cm9sc1tpZF0ub2ZmKCdjbGljaycsIHRoaXMuYmluZHNbaWRdKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSB0aGlzLmxpbmtDb250cm9scztcclxuICAgIGRlbGV0ZSB0aGlzLndpZGdldENvbnRyb2xzO1xyXG4gICAgZm9yKGxldCBpZCBvZiB0aGlzLmdldElucHV0cygpKSB7XHJcbiAgICAgIHRoaXMuaW5wdXRDb250cm9sc1tpZF0ub2ZmKCdrZXl1cCcsIHRoaXMuYmluZHNbaWRdKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSB0aGlzLmlucHV0Q29udHJvbHM7XHJcbiAgICBmb3IobGV0IGlkIG9mIHRoaXMuZ2V0Rm9ybXMoKSkge1xyXG4gICAgICB0aGlzLmZvcm1Db250cm9sc1tpZF0ub2ZmKCdzdWJtaXQnLCB0aGlzLmJpbmRzW2lkXSk7XHJcbiAgICB9XHJcbiAgICBkZWxldGUgdGhpcy5mb3JtQ29udHJvbHM7XHJcblxyXG4gICAgIXRoaXMudGVtcGxhdGVPYmplY3QuZGlzcG9zZSB8fCB0aGlzLnRlbXBsYXRlT2JqZWN0LmRpc3Bvc2UoKTtcclxuICAgIGRlbGV0ZSB0aGlzLnRlbXBsYXRlT2JqZWN0O1xyXG5cclxuICAgIGlmKHRoaXMuaXNJT1MpIHtcclxuICAgICAgJCh0aGlzLnBhcmVudENvbnRhaW5lclswXS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KS5vZmYoJ3Jlc2l6ZScsIHRoaXMuYmluZHMub25SZXNpemUpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wYXJlbnRDb250YWluZXIuaHRtbCgnJyk7XHJcbiAgICBkZWxldGUgdGhpcy5mcmFtZTtcclxuICB9XHJcblxyXG4gIGdldENvbnRhaW5lcigpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lclswXTtcclxuICB9XHJcblxyXG4gIGdldFBhcmVudENvbnRhaW5lcigpIHtcclxuICAgIHJldHVybiB0aGlzLnBhcmVudENvbnRhaW5lclswXTtcclxuICB9XHJcblxyXG4gIGFkZEhhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgdGhpcy5oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG4gIH1cclxuXHJcbiAgaW5pdFZpZXcoKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldENvbnRyb2xTdGF0ZShjdHJsLCBkZWZhdWx0cywgc3RhdGUsIHN0YXRlSGFuZGxlcnMpIHtcclxuICAgIGlmKGN0cmwpIHtcclxuICAgICAgY29uc3Qgc3QgPSB7XHJcbiAgICAgICAgLi4uZGVmYXVsdHMsXHJcbiAgICAgICAgLi4uc3RhdGVcclxuICAgICAgfTtcclxuICAgICAgZm9yKGxldCBuYW1lIGluIHN0KSB7XHJcbiAgICAgICAgaWYoc3QuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgc3RhdGVIYW5kbGVyc1tuYW1lXSkge1xyXG4gICAgICAgICAgc3RhdGVIYW5kbGVyc1tuYW1lXShjdHJsLCBzdFtuYW1lXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRMaW5rQ29udHJvbFN0YXRlKGlkLCBzdGF0ZSkge1xyXG4gICAgVmlldy5zZXRDb250cm9sU3RhdGUoXHJcbiAgICAgIHRoaXMubGlua0NvbnRyb2xzW2lkXSxcclxuICAgICAge1xyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZSxcclxuICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgc3RhdGUsXHJcbiAgICAgIFZpZXcubGlua1N0YXRlSGFuZGxlcnNcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRXaWRnZXRDb250cm9sU3RhdGUoaWQsIHN0YXRlKSB7XHJcbiAgICBWaWV3LnNldENvbnRyb2xTdGF0ZShcclxuICAgICAgdGhpcy53aWRnZXRDb250cm9sc1tpZF0sXHJcbiAgICAgIHtcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgZW5hYmxlOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIHN0YXRlLFxyXG4gICAgICBWaWV3LndpZGdldFN0YXRlSGFuZGxlcnNcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dENvbnRyb2xTdGF0ZShpZCwgc3RhdGUpIHtcclxuICAgIFZpZXcuc2V0Q29udHJvbFN0YXRlKFxyXG4gICAgICB0aGlzLmlucHV0Q29udHJvbHNbaWRdLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmFsdWU6ICcnXHJcbiAgICAgIH0sXHJcbiAgICAgIHN0YXRlLFxyXG4gICAgICBWaWV3LmlucHV0U3RhdGVIYW5kbGVyc1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNldFRleHRDb250cm9sU3RhdGUoaWQsIHN0YXRlKSB7XHJcbiAgICBWaWV3LnNldENvbnRyb2xTdGF0ZShcclxuICAgICAgdGhpcy50ZXh0Q29udHJvbHNbaWRdLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICB2YWx1ZTogJydcclxuICAgICAgfSxcclxuICAgICAgc3RhdGUsXHJcbiAgICAgIFZpZXcudGV4dFN0YXRlSGFuZGxlcnNcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvbkl0ZW1TdGF0ZUNoYW5nZWQoKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgc2V0U3RhdGUoaWQsIHN0YXRlKSB7XHJcbiAgICBmb3IobGV0IGl0ZW0gb2YgdGhpcy5zdGF0ZVNldHRlcnMpIHtcclxuICAgICAgaWYoaXRlbS5tYXBbaWRdKSB7XHJcbiAgICAgICAgaXRlbS5zZXR0ZXIoaWQsIHN0YXRlKTtcclxuICAgICAgICB0aGlzLm9uSXRlbVN0YXRlQ2hhbmdlZChpZCwgc3RhdGUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9WaWV3LmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVmlldy5qcyIsImltcG9ydCB7JCwgVEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgT3JiaXQgZnJvbSAnLi9PcmJpdCc7XHJcbmltcG9ydCBUaHJlZU1vdXNlRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9UaHJlZU1vdXNlRXZlbnRDb252ZXJ0ZXInO1xyXG5pbXBvcnQgVGhyZWVUb3VjaEV2ZW50Q29udmVydGVyIGZyb20gJy4vVGhyZWVUb3VjaEV2ZW50Q29udmVydGVyJztcclxuaW1wb3J0IERyYWcgZnJvbSAnLi9EcmFnJztcclxuaW1wb3J0IENTUzNEUmVuZGVyZXIgZnJvbSAnLi9DU1MzRFJlbmRlcmVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpc3VhbFdvcmxkIGV4dGVuZHMgVEhSRUUuRXZlbnREaXNwYXRjaGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3Iod25kLCBkb2MsIGNvbnRhaW5lciwgdXNlSGVscGVycz1mYWxzZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMud25kID0gd25kO1xyXG4gICAgdGhpcy5kb2MgPSBkb2M7XHJcbiAgICB0aGlzLmpDb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB0aGlzLnJlbmRlckNhbGxiYWNrcyA9IFtdO1xyXG5cclxuICAgIHRoaXMuY2xvY2sgPSBuZXcgVEhSRUUuQ2xvY2soKTtcclxuXHJcbiAgICB0aGlzLnJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTtcclxuXHJcbiAgICB0aGlzLnNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XHJcbiAgICB0aGlzLmNzc1NjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XHJcblxyXG4gICAgdGhpcy5jYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoMzAsIHRoaXMud2lkdGgoKS90aGlzLmhlaWdodCgpLCAwLjIsIDIwMDApO1xyXG4gICAgY29uc3Qgc2NhbGUgPSAxO1xyXG5cclxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnggPSAwO1xyXG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueSA9IDUuNSpzY2FsZTtcclxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSAwO1xyXG5cclxuICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7YWxwaGE6IHRydWUsIGFudGlhbGlhczogdHJ1ZX0pO1xyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRDbGVhckNvbG9yKDB4MDAwMDAwLCAwKTtcclxuICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh0aGlzLnduZC5kZXZpY2VQaXhlbFJhdGlvKTtcclxuICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh0aGlzLndpZHRoKCksIHRoaXMuaGVpZ2h0KCkpO1xyXG5cclxuICAgIHRoaXMuakNvbnRhaW5lci5hcHBlbmQodGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTtcclxuXHJcbiAgICB0aGlzLmNzc1JlbmRlcmVyXHQ9IG5ldyBDU1MzRFJlbmRlcmVyKCk7XHJcbiAgICB0aGlzLmNzc1JlbmRlcmVyLnNldFNpemUodGhpcy53aWR0aCgpLCB0aGlzLmhlaWdodCgpKTtcclxuICAgICQodGhpcy5jc3NSZW5kZXJlci5kb21FbGVtZW50KS5jc3Moe1xyXG4gIFx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICBcdFx0dG9wOiAwLFxyXG4gIFx0XHRtYXJnaW46IDAsXHJcbiAgXHRcdHBhZGRpbmc6IDBcclxuXHQgIH0pO1xyXG4gICAgdGhpcy5qQ29udGFpbmVyLmFwcGVuZCh0aGlzLmNzc1JlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuY3NzUmVuZGVyZXIuZG9tRWxlbWVudDtcclxuXHJcblxyXG5cclxuICAgIHRoaXMuY29udHJvbHMgPSBuZXcgT3JiaXQodGhpcy5jYW1lcmEsIHRoaXMuZWxlbWVudCk7XHJcbiAgICB0aGlzLmNvbnRyb2xzLnRhcmdldC55ID0gMC41O1xyXG5cclxuICAgIGNvbnN0IGNzc1NjZW5lID0gJCh0aGlzLmNzc1JlbmRlcmVyLmRvbUVsZW1lbnQpLmZpbmQoJ2RpdicpLCB0bXBWZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKT0+IHtcclxuICAgICAgdGhpcy5jYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24odG1wVmVjdG9yKTtcclxuICAgICAgY3NzU2NlbmUuY3NzKCdkaXNwbGF5JywgdG1wVmVjdG9yLnktdGhpcy5jYW1lcmEucG9zaXRpb24ueT4wPyAnbm9uZSc6ICdibG9jaycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy50ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuXHJcbiAgICB0aGlzLnNjZW5lLmFkZChuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4RDBEMEQwKSk7Ly8weEMwQzBDMFxyXG5cclxuICAgIHRoaXMubGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweDQwNDA0MCwgMSk7XHJcbiAgICB0aGlzLmxpZ2h0LnBvc2l0aW9uLnNldCgwLCA2KnNjYWxlLCAwKTtcclxuICAgIHRoaXMubGlnaHQuY2FzdFNoYWRvdyA9IGZhbHNlO1xyXG4gICAgLy8gY29uc3QgZCA9IDIwKnNjYWxlO1xyXG4gICAgLy8gdGhpcy5saWdodC5zaGFkb3cuY2FtZXJhLmxlZnQgPSAtZDtcclxuICAgIC8vIHRoaXMubGlnaHQuc2hhZG93LmNhbWVyYS5yaWdodCA9IGQ7XHJcbiAgICAvLyB0aGlzLmxpZ2h0LnNoYWRvdy5jYW1lcmEudG9wID0gZDtcclxuICAgIC8vIHRoaXMubGlnaHQuc2hhZG93LmNhbWVyYS5ib3R0b20gPSAtZDtcclxuICAgIC8vIHRoaXMubGlnaHQuc2hhZG93LmNhbWVyYS5uZWFyID0gMSpzY2FsZTtcclxuICAgIC8vIHRoaXMubGlnaHQuc2hhZG93LmNhbWVyYS5mYXIgPSAyNSpzY2FsZTtcclxuICAgIC8vIHRoaXMubGlnaHQuc2hhZG93Lm1hcFNpemUueCA9IDEwMjQ7XHJcbiAgICAvLyB0aGlzLmxpZ2h0LnNoYWRvdy5tYXBTaXplLnkgPSAxMDI0O1xyXG4gICAgdGhpcy5zY2VuZS5hZGQodGhpcy5saWdodCk7XHJcblxyXG4gICAgaWYodXNlSGVscGVycykge1xyXG4gICAgICB0aGlzLnNjZW5lLmFkZChuZXcgVEhSRUUuQXhpc0hlbHBlcig1KSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5iaW5kcyA9IHtcclxuICAgICAgb25XaW5kb3dSZXNpemU6IHRoaXMub25XaW5kb3dSZXNpemUuYmluZCh0aGlzKSxcclxuICAgICAgYW5pbWF0ZTogdGhpcy5hbmltYXRlLmJpbmQodGhpcylcclxuICAgIH07XHJcblxyXG4gICAgJCh0aGlzLnduZCkub24oJ3Jlc2l6ZScsIHRoaXMuYmluZHMub25XaW5kb3dSZXNpemUpO1xyXG5cclxuICAgIHRoaXMubW91c2VFdmVudHMgPSBuZXcgVGhyZWVNb3VzZUV2ZW50Q29udmVydGVyKHRoaXMud25kLCB0aGlzLmRvYywgdGhpcyk7XHJcbiAgICB0aGlzLnRvdWNoRXZlbnRzID0gbmV3IFRocmVlVG91Y2hFdmVudENvbnZlcnRlcih0aGlzLnduZCwgdGhpcy5kb2MsIHRoaXMpO1xyXG4gICAgY29uc3QgZmlsdGVyRGF0YSA9IHt0eXBlOiAnbW91c2Vtb3ZlJ307XHJcbiAgICB0aGlzLm1vdXNlRXZlbnRzLmZpbHRlciA9IChlbGVtZW50LCBlKT0+IHtcclxuICAgICAgY29uc3QgdHlwZXMgPSBbJ21vdXNlZW50ZXInLCAnbW91c2VvdmVyJywgJ21vdXNlbGVhdmUnLCAnbW91c2VvdXQnXSwgY29udGFpbnMgPSAocCwgYyk9PiBwPT09YyB8fCAkLmNvbnRhaW5zKHAsIGMpO1xyXG4gICAgICBpZihlLnR5cGU9PT0nbW91c2Vtb3ZlJykge1xyXG4gICAgICAgIGZpbHRlckRhdGEucGFnZVggPSBlLnBhZ2VYO1xyXG4gICAgICAgIGZpbHRlckRhdGEucGFnZVkgPSBlLnBhZ2VZO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBlLnJlbGF0ZWRUYXJnZXQgJiYgfnR5cGVzLmluZGV4T2YoZS50eXBlKSAmJiBjb250YWlucyhlbGVtZW50LCBlLnRhcmdldCkgJiYgY29udGFpbnMoZWxlbWVudCwgZS5yZWxhdGVkVGFyZ2V0KT8gey4uLmUsIC4uLmZpbHRlckRhdGF9OiBlO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZHJhZyA9IG5ldyBEcmFnKHRoaXMud25kLCB0aGlzLmRvYywgdGhpcyk7XHJcblxyXG4gICAgdGhpcy5hbmltYXRlKCk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgZGVsZXRlIHRoaXMuYmluZHMuYW5pbWF0ZTtcclxuICAgICQodGhpcy53bmQpLm9mZigncmVzaXplJywgdGhpcy5iaW5kcy5vbldpbmRvd1Jlc2l6ZSk7XHJcbiAgICB0aGlzLm1vdXNlRXZlbnRzLmRpc3Bvc2UoKTtcclxuICAgIHRoaXMudG91Y2hFdmVudHMuZGlzcG9zZSgpO1xyXG4gICAgdGhpcy5kcmFnLmRpc3Bvc2UoKTtcclxuICAgIHRoaXMuY29udHJvbHMuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgd2lkdGgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5qQ29udGFpbmVyLndpZHRoKCk7XHJcbiAgfVxyXG5cclxuICBoZWlnaHQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5qQ29udGFpbmVyLmhlaWdodCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXh0cmFMaWdodGluZyh2KSB7XHJcbiAgICB0aGlzLmxpZ2h0LmludGVuc2l0eSA9IHY7XHJcbiAgfVxyXG5cclxuICBnZXRPcmJpdCgpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbnRyb2xzO1xyXG4gIH1cclxuXHJcbiAgc2V0Q29udHJvbHNTdGF0ZShzdGF0ZSkge1xyXG4gICAgdGhpcy5jb250cm9scy5lbmFibGVkID0gc3RhdGU7XHJcbiAgfVxyXG5cclxuICBnZXRDb250cm9sc1N0YXRlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udHJvbHMuZW5hYmxlZDtcclxuICB9XHJcblxyXG4gIG9uV2luZG93UmVzaXplKCkge1xyXG4gICAgY29uc3QgdXBkYXRlQ2FtZXJhID0gKGNhbWVyYSk9PiB7XHJcbiAgICAgIGNhbWVyYS5hc3BlY3QgPSB0aGlzLndpZHRoKCkvdGhpcy5oZWlnaHQoKTtcclxuICAgICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVSZW5kZXJlciA9IChyZW5kZXJlcik9PiB7XHJcbiAgICAgIHJlbmRlcmVyLnNldFNpemUodGhpcy53aWR0aCgpLCB0aGlzLmhlaWdodCgpKTtcclxuICAgIH07XHJcblxyXG4gICAgdXBkYXRlQ2FtZXJhKHRoaXMuY2FtZXJhKTtcclxuICAgIHVwZGF0ZVJlbmRlcmVyKHRoaXMucmVuZGVyZXIpO1xyXG4gICAgdXBkYXRlUmVuZGVyZXIodGhpcy5jc3NSZW5kZXJlcik7XHJcblxyXG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiAncmVzaXplJ30pO1xyXG4gIH1cclxuXHJcbiAgYWRkT2JqZWN0KG9iamVjdCkge1xyXG4gICAgdGhpcy5zY2VuZS5hZGQob2JqZWN0KTtcclxuICB9XHJcblxyXG4gIGFkZENzc09iamVjdChvYmplY3QpIHtcclxuICAgIHRoaXMuY3NzU2NlbmUuYWRkKG9iamVjdCk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDc3NPYmplY3Qob2JqZWN0KSB7XHJcbiAgICB0aGlzLmNzc1NjZW5lLnJlbW92ZShvYmplY3QpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlT2JqZWN0KG9iamVjdCkge1xyXG4gICAgdGhpcy5zY2VuZS5yZW1vdmUob2JqZWN0KTtcclxuICB9XHJcblxyXG4gIGFuaW1hdGUoKSB7XHJcbiAgICBpZih0aGlzLmJpbmRzLmFuaW1hdGUpIHtcclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYmluZHMuYW5pbWF0ZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgYWRkUmVuZGVyQ2FsbGJhY2soY2xiKSB7XHJcbiAgICB0aGlzLnJlbmRlckNhbGxiYWNrcy5wdXNoKGNsYik7XHJcbiAgfVxyXG5cclxuICByZW1vdmVSZW5kZXJDYWxsYmFjayhjbGIpIHtcclxuICAgIGNvbnN0IGkgPSB0aGlzLnJlbmRlckNhbGxiYWNrcy5pbmRleE9mKGNsYik7XHJcbiAgICBpZih+aSkge1xyXG4gICAgICB0aGlzLnJlbmRlckNhbGxiYWNrcy5zcGxpY2UoaSwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCBkZWx0YVRpbWUgPSB0aGlzLmNsb2NrLmdldERlbHRhKCk7XHJcbiAgICB0aGlzLmNvbnRyb2xzLnVwZGF0ZShkZWx0YVRpbWUpO1xyXG4gICAgZm9yKGxldCBjbGIgb2YgdGhpcy5yZW5kZXJDYWxsYmFja3MpIHtcclxuICAgICAgY2xiKGRlbHRhVGltZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNzc1JlbmRlcmVyLnJlbmRlcih0aGlzLmNzc1NjZW5lLCB0aGlzLmNhbWVyYSk7XHJcbiAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSk7XHJcbiAgfVxyXG5cclxuICBwcm9jZXNzR2VvbWV0cnkoYnVmR2VvbWV0cnksIG1lc2gpIHtcclxuICAgIG1lc2guZ2VvbWV0cnkgPSBidWZHZW9tZXRyeTtcclxuICAgIC8vIE9idGFpbiBhIEdlb21ldHJ5XHJcbiAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5HZW9tZXRyeSgpLmZyb21CdWZmZXJHZW9tZXRyeShidWZHZW9tZXRyeSk7XHJcbiAgICAvLyBNZXJnZSB0aGUgdmVydGljZXMgc28gdGhlIHRyaWFuZ2xlIHNvdXAgaXMgY29udmVydGVkIHRvIGluZGV4ZWQgdHJpYW5nbGVzXHJcbiAgICBnZW9tZXRyeS5tZXJnZVZlcnRpY2VzKCk7XHJcbiAgICAvLyBDb252ZXJ0IGFnYWluIHRvIEJ1ZmZlckdlb21ldHJ5LCBpbmRleGVkXHJcbiAgICBjb25zdCBpbmRleGVkQnVmZmVyR2VvbSA9IHRoaXMuY3JlYXRlSW5kZXhlZEJ1ZmZlckdlb21ldHJ5RnJvbUdlb21ldHJ5KGdlb21ldHJ5KTtcclxuICAgIC8vIENyZWF0ZSBpbmRleCBhcnJheXMgbWFwcGluZyB0aGUgaW5kZXhlZCB2ZXJ0aWNlcyB0byBidWZHZW9tZXRyeSB2ZXJ0aWNlc1xyXG4gICAgcmV0dXJuIHRoaXMubWFwSW5kaWNlcyhidWZHZW9tZXRyeSwgaW5kZXhlZEJ1ZmZlckdlb20pO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlSW5kZXhlZEJ1ZmZlckdlb21ldHJ5RnJvbUdlb21ldHJ5KGdlb21ldHJ5KSB7XHJcbiAgICBjb25zdCBudW1WZXJ0aWNlcyA9IGdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aDtcclxuICAgIGNvbnN0IG51bUZhY2VzID0gZ2VvbWV0cnkuZmFjZXMubGVuZ3RoO1xyXG5cclxuICAgIGNvbnN0IGJ1ZmZlckdlb20gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcclxuICAgIGNvbnN0IHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShudW1WZXJ0aWNlcyAqIDMpO1xyXG4gICAgY29uc3QgaW5kaWNlcyA9IG5ldyAobnVtRmFjZXMgKiAzID4gNjU1MzUgPyBVaW50MzJBcnJheSA6IFVpbnQxNkFycmF5KShudW1GYWNlcyAqIDMpO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBudW1WZXJ0aWNlczsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHAgPSBnZW9tZXRyeS52ZXJ0aWNlc1tpXTtcclxuICAgICAgY29uc3QgaTMgPSBpICogMztcclxuICAgICAgdmVydGljZXNbaTNdID0gcC54O1xyXG4gICAgICB2ZXJ0aWNlc1tpMyArIDFdID0gcC55O1xyXG4gICAgICB2ZXJ0aWNlc1tpMyArIDJdID0gcC56O1xyXG4gICAgfVxyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBudW1GYWNlczsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGYgPSBnZW9tZXRyeS5mYWNlc1tpXTtcclxuICAgICAgY29uc3QgaTMgPSBpICogMztcclxuICAgICAgaW5kaWNlc1tpM10gPSBmLmE7XHJcbiAgICAgIGluZGljZXNbaTMgKyAxXSA9IGYuYjtcclxuICAgICAgaW5kaWNlc1tpMyArIDJdID0gZi5jO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1ZmZlckdlb20uc2V0SW5kZXgobmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShpbmRpY2VzLCAxKSk7XHJcbiAgICBidWZmZXJHZW9tLmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHZlcnRpY2VzLCAzKSk7XHJcblxyXG4gICAgcmV0dXJuIGJ1ZmZlckdlb207XHJcbiAgfVxyXG5cclxuICBpc0VxdWFsKHgxLCB5MSwgejEsIHgyLCB5MiwgejIpIHtcclxuICAgIGNvbnN0IGRlbHRhID0gMC4wMDAwMDE7XHJcbiAgICByZXR1cm4gTWF0aC5hYnMoeDIgLSB4MSkgPCBkZWx0YSAmJlxyXG4gICAgTWF0aC5hYnMoeTIgLSB5MSkgPCBkZWx0YSAmJlxyXG4gICAgTWF0aC5hYnMoejIgLSB6MSkgPCBkZWx0YTtcclxuICB9XHJcblxyXG4gIG1hcEluZGljZXMoYnVmR2VvbWV0cnksIGluZGV4ZWRCdWZmZXJHZW9tKSB7XHJcbiAgICAvLyBDcmVhdGVzIG1hcHBlZFZlcnRpY2VzLCBtYXBwZWRJbmRpY2VzIGFuZCBtYXBwZWRBc3NvY2lhdGlvbiBpbiBidWZHZW9tZXRyeVxyXG4gICAgY29uc3QgdmVydGljZXMgPSBidWZHZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG4gICAgY29uc3QgaWR4VmVydGljZXMgPSBpbmRleGVkQnVmZmVyR2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG4gICAgY29uc3QgaW5kaWNlcyA9IGluZGV4ZWRCdWZmZXJHZW9tLmluZGV4LmFycmF5O1xyXG5cclxuICAgIGNvbnN0IG51bUlkeFZlcnRpY2VzID0gaWR4VmVydGljZXMubGVuZ3RoIC8gMztcclxuICAgIGNvbnN0IG51bVZlcnRpY2VzID0gdmVydGljZXMubGVuZ3RoIC8gMztcclxuXHJcbiAgICBidWZHZW9tZXRyeS5tYXBwZWRWZXJ0aWNlcyA9IGlkeFZlcnRpY2VzO1xyXG4gICAgYnVmR2VvbWV0cnkubWFwcGVkSW5kaWNlcyA9IGluZGljZXM7XHJcbiAgICBidWZHZW9tZXRyeS5tYXBwZWRBc3NvY2lhdGlvbiA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBudW1JZHhWZXJ0aWNlczsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGFzc29jaWF0aW9uID0gW107XHJcbiAgICAgIGJ1Zkdlb21ldHJ5Lm1hcHBlZEFzc29jaWF0aW9uLnB1c2goYXNzb2NpYXRpb24pO1xyXG4gICAgICBjb25zdCBpMyA9IGkgKiAzO1xyXG4gICAgICBmb3IobGV0IGogPSAwOyBqIDwgbnVtVmVydGljZXM7IGorKykge1xyXG4gICAgICAgIGNvbnN0IGozID0gaiAqIDM7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFcXVhbChpZHhWZXJ0aWNlc1tpM10sIGlkeFZlcnRpY2VzW2kzICsgMV0sIGlkeFZlcnRpY2VzW2kzICsgMl0sXHJcbiAgICAgICAgdmVydGljZXNbajNdLCB2ZXJ0aWNlc1tqMyArIDFdLCB2ZXJ0aWNlc1tqMyArIDJdKSkge1xyXG4gICAgICAgICAgYXNzb2NpYXRpb24ucHVzaChqMyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge3ZlcnRpY2VzOiBidWZHZW9tZXRyeS5tYXBwZWRWZXJ0aWNlcywgaW5kaWNlczogYnVmR2VvbWV0cnkubWFwcGVkSW5kaWNlc307XHJcbiAgfVxyXG5cclxuICBvbmVOb2RlUG9zaXRpb25DYWxsYmFjayhwLCBxKSB7XHJcbiAgICB0aGlzLnBvc2l0aW9uLnNldChwLngsIHAueSwgcC56KTtcclxuICAgIHRoaXMucXVhdGVybmlvbi5zZXQocS54LCBxLnksIHEueiwgcS53KTtcclxuICB9XHJcblxyXG4gIG11bHR5Tm9kZVBvc2l0aW9uQ2FsbGJhY2sobm9kZSwgcCwgbikge1xyXG4gICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLmdlb21ldHJ5O1xyXG4gICAgY29uc3Qgdm9sdW1lUG9zaXRpb25zID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcclxuICAgIGNvbnN0IHZvbHVtZU5vcm1hbHMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbC5hcnJheTtcclxuICAgIGNvbnN0IGFzc29jVmVydGV4ID0gZ2VvbWV0cnkubWFwcGVkQXNzb2NpYXRpb25bbm9kZV07XHJcblxyXG4gICAgZm9yKGxldCBrID0gMDsgayA8IGFzc29jVmVydGV4Lmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgbGV0IGluZGV4VmVydGV4ID0gYXNzb2NWZXJ0ZXhba107XHJcbiAgICAgICAgdm9sdW1lUG9zaXRpb25zW2luZGV4VmVydGV4XSA9IHAueDtcclxuICAgICAgICB2b2x1bWVOb3JtYWxzW2luZGV4VmVydGV4XSA9IG4ueDtcclxuICAgICAgICArK2luZGV4VmVydGV4O1xyXG4gICAgICAgIHZvbHVtZVBvc2l0aW9uc1tpbmRleFZlcnRleF0gPSBwLnk7XHJcbiAgICAgICAgdm9sdW1lTm9ybWFsc1tpbmRleFZlcnRleF0gPSBuLnk7XHJcbiAgICAgICAgKytpbmRleFZlcnRleDtcclxuICAgICAgICB2b2x1bWVQb3NpdGlvbnNbaW5kZXhWZXJ0ZXhdID0gcC56O1xyXG4gICAgICAgIHZvbHVtZU5vcm1hbHNbaW5kZXhWZXJ0ZXhdID0gbi56O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbXVsdHlOb2RlUG9zaXRpb25Qb3N0Q2FsbGJhY2soKSB7XHJcbiAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7XHJcbiAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHBhdGhQb3NpdGlvbkNhbGxiYWNrKG5vZGUsIHApIHtcclxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcclxuXHRcdGxldCBpID0gMyAqIG5vZGU7XHJcblx0XHRwb3NpdGlvbnNbaSsrXSA9IHAueDtcclxuXHRcdHBvc2l0aW9uc1tpKytdID0gcC55O1xyXG5cdFx0cG9zaXRpb25zW2ldID0gcC56O1xyXG4gIH1cclxuXHJcbiAgcGF0aFBvc2l0aW9uUG9zdENhbGxiYWNrKCkge1xyXG4gICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLmdlb21ldHJ5O1xyXG4gICAgZ2VvbWV0cnkuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcclxuICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvVmlzdWFsV29ybGQuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9WaXN1YWxXb3JsZC5qcyIsImltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vQ29udHJvbGxlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaWRnZXRDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpZXcpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnZpZXcgPSB2aWV3O1xyXG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICB0b2dsZSgpIHtcclxuICAgIHRoaXMudmlzaWJsZSA9ICF0aGlzLnZpc2libGU7XHJcbiAgICB0aGlzLmZpcmVDaGFuZ2UoKTtcclxuICB9XHJcblxyXG4gIGhpZGUoKSB7XHJcbiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuZmlyZUNoYW5nZSgpO1xyXG4gIH1cclxuXHJcbiAgZmlyZUNoYW5nZSgpIHtcclxuICAgIGlmKHRoaXMub25DaGFuZ2UpIHtcclxuICAgICAgdGhpcy5vbkNoYW5nZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVWaWV3KCkge1xyXG4gICAgaWYodGhpcy52aWV3KSB7XHJcbiAgICAgIHRoaXMudmlldy5zZXRTdGF0ZSgnd2lkRmxvYXRXbmQnLCB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMudmlzaWJsZSxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvV2lkZ2V0Q29udHJvbGxlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1dpZGdldENvbnRyb2xsZXIuanMiLCJpbXBvcnQgVGFyZ2V0IGZyb20gJy4vVGFyZ2V0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENpcmNsZVRhcmdldCBleHRlbmRzIFRhcmdldCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHgsIHksIHIpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnAgPSB7XHJcbiAgICAgIHgsXHJcbiAgICAgIHksXHJcbiAgICAgIHJcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICB0ZXN0SW50ZXJzZWN0aW9uKGUsIGRhdGEpIHtcclxuICAgIGxldCByZXM7XHJcbiAgICBjb25zdCB7eCwgeX0gPSBkYXRhLCBwID0gdGhpcy5wO1xyXG4gICAgaWYoKHgtcC54KSooeC1wLngpKyh5LXAueSkqKHktcC55KTw9cC5yKnAucikge1xyXG4gICAgICByZXMgPSB7XHJcbiAgICAgICAgdGFyZ2V0OiB0aGlzLFxyXG4gICAgICAgIGRhdGFcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy90YXJnZXRzL0NpcmNsZVRhcmdldC5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL3RhcmdldHMvQ2lyY2xlVGFyZ2V0LmpzIiwiaW1wb3J0IFRhcmdldCBmcm9tICcuL1RhcmdldCc7XHJcbmltcG9ydCBCYXNlTWF0aFV0aWxzIGZyb20gJy4uL0Jhc2VNYXRoVXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9seVRhcmdldCBleHRlbmRzIFRhcmdldCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBvbHkpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnBvbHkgPSBwb2x5O1xyXG4gIH1cclxuXHJcbiAgdGVzdEludGVyc2VjdGlvbihlLCBwKSB7XHJcbiAgICByZXR1cm4gQmFzZU1hdGhVdGlscy5pc0luc2lkZVBvbHkodGhpcy5wb2x5LCBwKT8ge1xyXG4gICAgICB0YXJnZXQ6IHRoaXMsXHJcbiAgICAgIGRhdGE6IHBcclxuICAgIH06IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL3RhcmdldHMvUG9seVRhcmdldC5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL3RhcmdldHMvUG9seVRhcmdldC5qcyIsIi8vIHN0YXRzLmpzIC0gaHR0cDovL2dpdGh1Yi5jb20vbXJkb29iL3N0YXRzLmpzXG4oZnVuY3Rpb24oZixlKXtcIm9iamVjdFwiPT09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKTpmLlN0YXRzPWUoKX0pKHRoaXMsZnVuY3Rpb24oKXt2YXIgZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoYSl7Yy5hcHBlbmRDaGlsZChhLmRvbSk7cmV0dXJuIGF9ZnVuY3Rpb24gdShhKXtmb3IodmFyIGQ9MDtkPGMuY2hpbGRyZW4ubGVuZ3RoO2QrKyljLmNoaWxkcmVuW2RdLnN0eWxlLmRpc3BsYXk9ZD09PWE/XCJibG9ja1wiOlwibm9uZVwiO2w9YX12YXIgbD0wLGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7Y3Vyc29yOnBvaW50ZXI7b3BhY2l0eTowLjk7ei1pbmRleDoxMDAwMFwiO2MuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpO1xudSgrK2wlYy5jaGlsZHJlbi5sZW5ndGgpfSwhMSk7dmFyIGs9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKSxnPWssYT0wLHI9ZShuZXcgZi5QYW5lbChcIkZQU1wiLFwiIzBmZlwiLFwiIzAwMlwiKSksaD1lKG5ldyBmLlBhbmVsKFwiTVNcIixcIiMwZjBcIixcIiMwMjBcIikpO2lmKHNlbGYucGVyZm9ybWFuY2UmJnNlbGYucGVyZm9ybWFuY2UubWVtb3J5KXZhciB0PWUobmV3IGYuUGFuZWwoXCJNQlwiLFwiI2YwOFwiLFwiIzIwMVwiKSk7dSgwKTtyZXR1cm57UkVWSVNJT046MTYsZG9tOmMsYWRkUGFuZWw6ZSxzaG93UGFuZWw6dSxiZWdpbjpmdW5jdGlvbigpe2s9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKX0sZW5kOmZ1bmN0aW9uKCl7YSsrO3ZhciBjPShwZXJmb3JtYW5jZXx8RGF0ZSkubm93KCk7aC51cGRhdGUoYy1rLDIwMCk7aWYoYz5nKzFFMyYmKHIudXBkYXRlKDFFMyphLyhjLWcpLDEwMCksZz1jLGE9MCx0KSl7dmFyIGQ9cGVyZm9ybWFuY2UubWVtb3J5O3QudXBkYXRlKGQudXNlZEpTSGVhcFNpemUvXG4xMDQ4NTc2LGQuanNIZWFwU2l6ZUxpbWl0LzEwNDg1NzYpfXJldHVybiBjfSx1cGRhdGU6ZnVuY3Rpb24oKXtrPXRoaXMuZW5kKCl9LGRvbUVsZW1lbnQ6YyxzZXRNb2RlOnV9fTtmLlBhbmVsPWZ1bmN0aW9uKGUsZixsKXt2YXIgYz1JbmZpbml0eSxrPTAsZz1NYXRoLnJvdW5kLGE9Zyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb3x8MSkscj04MCphLGg9NDgqYSx0PTMqYSx2PTIqYSxkPTMqYSxtPTE1KmEsbj03NCphLHA9MzAqYSxxPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cS53aWR0aD1yO3EuaGVpZ2h0PWg7cS5zdHlsZS5jc3NUZXh0PVwid2lkdGg6ODBweDtoZWlnaHQ6NDhweFwiO3ZhciBiPXEuZ2V0Q29udGV4dChcIjJkXCIpO2IuZm9udD1cImJvbGQgXCIrOSphK1wicHggSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWZcIjtiLnRleHRCYXNlbGluZT1cInRvcFwiO2IuZmlsbFN0eWxlPWw7Yi5maWxsUmVjdCgwLDAscixoKTtiLmZpbGxTdHlsZT1mO2IuZmlsbFRleHQoZSx0LHYpO1xuYi5maWxsUmVjdChkLG0sbixwKTtiLmZpbGxTdHlsZT1sO2IuZ2xvYmFsQWxwaGE9Ljk7Yi5maWxsUmVjdChkLG0sbixwKTtyZXR1cm57ZG9tOnEsdXBkYXRlOmZ1bmN0aW9uKGgsdyl7Yz1NYXRoLm1pbihjLGgpO2s9TWF0aC5tYXgoayxoKTtiLmZpbGxTdHlsZT1sO2IuZ2xvYmFsQWxwaGE9MTtiLmZpbGxSZWN0KDAsMCxyLG0pO2IuZmlsbFN0eWxlPWY7Yi5maWxsVGV4dChnKGgpK1wiIFwiK2UrXCIgKFwiK2coYykrXCItXCIrZyhrKStcIilcIix0LHYpO2IuZHJhd0ltYWdlKHEsZCthLG0sbi1hLHAsZCxtLG4tYSxwKTtiLmZpbGxSZWN0KGQrbi1hLG0sYSxwKTtiLmZpbGxTdHlsZT1sO2IuZ2xvYmFsQWxwaGE9Ljk7Yi5maWxsUmVjdChkK24tYSxtLGEsZygoMS1oL3cpKnApKX19fTtyZXR1cm4gZn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3N0YXRzLmpzL2J1aWxkL3N0YXRzLm1pbi5qc1xuLy8gbW9kdWxlIGlkID0gNzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vfi9zdGF0cy5qcy9idWlsZC9zdGF0cy5taW4uanMiLCIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgZGVmaW5lID0gZmFsc2U7XG5cbi8qIVxuICogalF1ZXJ5IE1vdXNld2hlZWwgMy4xLjEzXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICovXG5cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBOb2RlL0NvbW1vbkpTIHN0eWxlIGZvciBCcm93c2VyaWZ5XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcbiAgICAgICAgZmFjdG9yeShqUXVlcnkpO1xuICAgIH1cbn0oZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciB0b0ZpeCAgPSBbJ3doZWVsJywgJ21vdXNld2hlZWwnLCAnRE9NTW91c2VTY3JvbGwnLCAnTW96TW91c2VQaXhlbFNjcm9sbCddLFxuICAgICAgICB0b0JpbmQgPSAoICdvbndoZWVsJyBpbiBkb2N1bWVudCB8fCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPj0gOSApID9cbiAgICAgICAgICAgICAgICAgICAgWyd3aGVlbCddIDogWydtb3VzZXdoZWVsJywgJ0RvbU1vdXNlU2Nyb2xsJywgJ01vek1vdXNlUGl4ZWxTY3JvbGwnXSxcbiAgICAgICAgc2xpY2UgID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuICAgICAgICBudWxsTG93ZXN0RGVsdGFUaW1lb3V0LCBsb3dlc3REZWx0YTtcblxuICAgIGlmICggJC5ldmVudC5maXhIb29rcyApIHtcbiAgICAgICAgZm9yICggdmFyIGkgPSB0b0ZpeC5sZW5ndGg7IGk7ICkge1xuICAgICAgICAgICAgJC5ldmVudC5maXhIb29rc1sgdG9GaXhbLS1pXSBdID0gJC5ldmVudC5tb3VzZUhvb2tzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNwZWNpYWwgPSAkLmV2ZW50LnNwZWNpYWwubW91c2V3aGVlbCA9IHtcbiAgICAgICAgdmVyc2lvbjogJzMuMS4xMicsXG5cbiAgICAgICAgc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCB0aGlzLmFkZEV2ZW50TGlzdGVuZXIgKSB7XG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSB0b0JpbmQubGVuZ3RoOyBpOyApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCB0b0JpbmRbLS1pXSwgaGFuZGxlciwgZmFsc2UgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub25tb3VzZXdoZWVsID0gaGFuZGxlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBsaW5lIGhlaWdodCBhbmQgcGFnZSBoZWlnaHQgZm9yIHRoaXMgcGFydGljdWxhciBlbGVtZW50XG4gICAgICAgICAgICAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtbGluZS1oZWlnaHQnLCBzcGVjaWFsLmdldExpbmVIZWlnaHQodGhpcykpO1xuICAgICAgICAgICAgJC5kYXRhKHRoaXMsICdtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0Jywgc3BlY2lhbC5nZXRQYWdlSGVpZ2h0KHRoaXMpKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHtcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IHRvQmluZC5sZW5ndGg7IGk7ICkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHRvQmluZFstLWldLCBoYW5kbGVyLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbm1vdXNld2hlZWwgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGRhdGEgd2UgYWRkZWQgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLCAnbW91c2V3aGVlbC1saW5lLWhlaWdodCcpO1xuICAgICAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMsICdtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0Jyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0TGluZUhlaWdodDogZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICAgICAgdmFyICRlbGVtID0gJChlbGVtKSxcbiAgICAgICAgICAgICAgICAkcGFyZW50ID0gJGVsZW1bJ29mZnNldFBhcmVudCcgaW4gJC5mbiA/ICdvZmZzZXRQYXJlbnQnIDogJ3BhcmVudCddKCk7XG4gICAgICAgICAgICBpZiAoISRwYXJlbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJHBhcmVudCA9ICQoJ2JvZHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludCgkcGFyZW50LmNzcygnZm9udFNpemUnKSwgMTApIHx8IHBhcnNlSW50KCRlbGVtLmNzcygnZm9udFNpemUnKSwgMTApIHx8IDE2O1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFBhZ2VIZWlnaHQ6IGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybiAkKGVsZW0pLmhlaWdodCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBhZGp1c3RPbGREZWx0YXM6IHRydWUsIC8vIHNlZSBzaG91bGRBZGp1c3RPbGREZWx0YXMoKSBiZWxvd1xuICAgICAgICAgICAgbm9ybWFsaXplT2Zmc2V0OiB0cnVlICAvLyBjYWxscyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZm9yIGVhY2ggZXZlbnRcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkLmZuLmV4dGVuZCh7XG4gICAgICAgIG1vdXNld2hlZWw6IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4gPyB0aGlzLmJpbmQoJ21vdXNld2hlZWwnLCBmbikgOiB0aGlzLnRyaWdnZXIoJ21vdXNld2hlZWwnKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1bm1vdXNld2hlZWw6IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51bmJpbmQoJ21vdXNld2hlZWwnLCBmbik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgZnVuY3Rpb24gaGFuZGxlcihldmVudCkge1xuICAgICAgICB2YXIgb3JnRXZlbnQgICA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudCxcbiAgICAgICAgICAgIGFyZ3MgICAgICAgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG4gICAgICAgICAgICBkZWx0YSAgICAgID0gMCxcbiAgICAgICAgICAgIGRlbHRhWCAgICAgPSAwLFxuICAgICAgICAgICAgZGVsdGFZICAgICA9IDAsXG4gICAgICAgICAgICBhYnNEZWx0YSAgID0gMCxcbiAgICAgICAgICAgIG9mZnNldFggICAgPSAwLFxuICAgICAgICAgICAgb2Zmc2V0WSAgICA9IDA7XG4gICAgICAgIGV2ZW50ID0gJC5ldmVudC5maXgob3JnRXZlbnQpO1xuICAgICAgICBldmVudC50eXBlID0gJ21vdXNld2hlZWwnO1xuXG4gICAgICAgIC8vIE9sZCBzY2hvb2wgc2Nyb2xsd2hlZWwgZGVsdGFcbiAgICAgICAgaWYgKCAnZGV0YWlsJyAgICAgIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC5kZXRhaWwgKiAtMTsgICAgICB9XG4gICAgICAgIGlmICggJ3doZWVsRGVsdGEnICBpbiBvcmdFdmVudCApIHsgZGVsdGFZID0gb3JnRXZlbnQud2hlZWxEZWx0YTsgICAgICAgfVxuICAgICAgICBpZiAoICd3aGVlbERlbHRhWScgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWSA9IG9yZ0V2ZW50LndoZWVsRGVsdGFZOyAgICAgIH1cbiAgICAgICAgaWYgKCAnd2hlZWxEZWx0YVgnIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVggPSBvcmdFdmVudC53aGVlbERlbHRhWCAqIC0xOyB9XG5cbiAgICAgICAgLy8gRmlyZWZveCA8IDE3IGhvcml6b250YWwgc2Nyb2xsaW5nIHJlbGF0ZWQgdG8gRE9NTW91c2VTY3JvbGwgZXZlbnRcbiAgICAgICAgaWYgKCAnYXhpcycgaW4gb3JnRXZlbnQgJiYgb3JnRXZlbnQuYXhpcyA9PT0gb3JnRXZlbnQuSE9SSVpPTlRBTF9BWElTICkge1xuICAgICAgICAgICAgZGVsdGFYID0gZGVsdGFZICogLTE7XG4gICAgICAgICAgICBkZWx0YVkgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IGRlbHRhIHRvIGJlIGRlbHRhWSBvciBkZWx0YVggaWYgZGVsdGFZIGlzIDAgZm9yIGJhY2t3YXJkcyBjb21wYXRhYmlsaXRpeVxuICAgICAgICBkZWx0YSA9IGRlbHRhWSA9PT0gMCA/IGRlbHRhWCA6IGRlbHRhWTtcblxuICAgICAgICAvLyBOZXcgc2Nob29sIHdoZWVsIGRlbHRhICh3aGVlbCBldmVudClcbiAgICAgICAgaWYgKCAnZGVsdGFZJyBpbiBvcmdFdmVudCApIHtcbiAgICAgICAgICAgIGRlbHRhWSA9IG9yZ0V2ZW50LmRlbHRhWSAqIC0xO1xuICAgICAgICAgICAgZGVsdGEgID0gZGVsdGFZO1xuICAgICAgICB9XG4gICAgICAgIGlmICggJ2RlbHRhWCcgaW4gb3JnRXZlbnQgKSB7XG4gICAgICAgICAgICBkZWx0YVggPSBvcmdFdmVudC5kZWx0YVg7XG4gICAgICAgICAgICBpZiAoIGRlbHRhWSA9PT0gMCApIHsgZGVsdGEgID0gZGVsdGFYICogLTE7IH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5vIGNoYW5nZSBhY3R1YWxseSBoYXBwZW5lZCwgbm8gcmVhc29uIHRvIGdvIGFueSBmdXJ0aGVyXG4gICAgICAgIGlmICggZGVsdGFZID09PSAwICYmIGRlbHRhWCA9PT0gMCApIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgLy8gTmVlZCB0byBjb252ZXJ0IGxpbmVzIGFuZCBwYWdlcyB0byBwaXhlbHMgaWYgd2UgYXJlbid0IGFscmVhZHkgaW4gcGl4ZWxzXG4gICAgICAgIC8vIFRoZXJlIGFyZSB0aHJlZSBkZWx0YSBtb2RlczpcbiAgICAgICAgLy8gICAqIGRlbHRhTW9kZSAwIGlzIGJ5IHBpeGVscywgbm90aGluZyB0byBkb1xuICAgICAgICAvLyAgICogZGVsdGFNb2RlIDEgaXMgYnkgbGluZXNcbiAgICAgICAgLy8gICAqIGRlbHRhTW9kZSAyIGlzIGJ5IHBhZ2VzXG4gICAgICAgIGlmICggb3JnRXZlbnQuZGVsdGFNb2RlID09PSAxICkge1xuICAgICAgICAgICAgdmFyIGxpbmVIZWlnaHQgPSAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtbGluZS1oZWlnaHQnKTtcbiAgICAgICAgICAgIGRlbHRhICAqPSBsaW5lSGVpZ2h0O1xuICAgICAgICAgICAgZGVsdGFZICo9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBkZWx0YVggKj0gbGluZUhlaWdodDtcbiAgICAgICAgfSBlbHNlIGlmICggb3JnRXZlbnQuZGVsdGFNb2RlID09PSAyICkge1xuICAgICAgICAgICAgdmFyIHBhZ2VIZWlnaHQgPSAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtcGFnZS1oZWlnaHQnKTtcbiAgICAgICAgICAgIGRlbHRhICAqPSBwYWdlSGVpZ2h0O1xuICAgICAgICAgICAgZGVsdGFZICo9IHBhZ2VIZWlnaHQ7XG4gICAgICAgICAgICBkZWx0YVggKj0gcGFnZUhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0b3JlIGxvd2VzdCBhYnNvbHV0ZSBkZWx0YSB0byBub3JtYWxpemUgdGhlIGRlbHRhIHZhbHVlc1xuICAgICAgICBhYnNEZWx0YSA9IE1hdGgubWF4KCBNYXRoLmFicyhkZWx0YVkpLCBNYXRoLmFicyhkZWx0YVgpICk7XG5cbiAgICAgICAgaWYgKCAhbG93ZXN0RGVsdGEgfHwgYWJzRGVsdGEgPCBsb3dlc3REZWx0YSApIHtcbiAgICAgICAgICAgIGxvd2VzdERlbHRhID0gYWJzRGVsdGE7XG5cbiAgICAgICAgICAgIC8vIEFkanVzdCBvbGRlciBkZWx0YXMgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgICBpZiAoIHNob3VsZEFkanVzdE9sZERlbHRhcyhvcmdFdmVudCwgYWJzRGVsdGEpICkge1xuICAgICAgICAgICAgICAgIGxvd2VzdERlbHRhIC89IDQwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRqdXN0IG9sZGVyIGRlbHRhcyBpZiBuZWNlc3NhcnlcbiAgICAgICAgaWYgKCBzaG91bGRBZGp1c3RPbGREZWx0YXMob3JnRXZlbnQsIGFic0RlbHRhKSApIHtcbiAgICAgICAgICAgIC8vIERpdmlkZSBhbGwgdGhlIHRoaW5ncyBieSA0MCFcbiAgICAgICAgICAgIGRlbHRhICAvPSA0MDtcbiAgICAgICAgICAgIGRlbHRhWCAvPSA0MDtcbiAgICAgICAgICAgIGRlbHRhWSAvPSA0MDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBhIHdob2xlLCBub3JtYWxpemVkIHZhbHVlIGZvciB0aGUgZGVsdGFzXG4gICAgICAgIGRlbHRhICA9IE1hdGhbIGRlbHRhICA+PSAxID8gJ2Zsb29yJyA6ICdjZWlsJyBdKGRlbHRhICAvIGxvd2VzdERlbHRhKTtcbiAgICAgICAgZGVsdGFYID0gTWF0aFsgZGVsdGFYID49IDEgPyAnZmxvb3InIDogJ2NlaWwnIF0oZGVsdGFYIC8gbG93ZXN0RGVsdGEpO1xuICAgICAgICBkZWx0YVkgPSBNYXRoWyBkZWx0YVkgPj0gMSA/ICdmbG9vcicgOiAnY2VpbCcgXShkZWx0YVkgLyBsb3dlc3REZWx0YSk7XG5cbiAgICAgICAgLy8gTm9ybWFsaXNlIG9mZnNldFggYW5kIG9mZnNldFkgcHJvcGVydGllc1xuICAgICAgICBpZiAoIHNwZWNpYWwuc2V0dGluZ3Mubm9ybWFsaXplT2Zmc2V0ICYmIHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICkge1xuICAgICAgICAgICAgdmFyIGJvdW5kaW5nUmVjdCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBvZmZzZXRYID0gZXZlbnQuY2xpZW50WCAtIGJvdW5kaW5nUmVjdC5sZWZ0O1xuICAgICAgICAgICAgb2Zmc2V0WSA9IGV2ZW50LmNsaWVudFkgLSBib3VuZGluZ1JlY3QudG9wO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGluZm9ybWF0aW9uIHRvIHRoZSBldmVudCBvYmplY3RcbiAgICAgICAgZXZlbnQuZGVsdGFYID0gZGVsdGFYO1xuICAgICAgICBldmVudC5kZWx0YVkgPSBkZWx0YVk7XG4gICAgICAgIGV2ZW50LmRlbHRhRmFjdG9yID0gbG93ZXN0RGVsdGE7XG4gICAgICAgIGV2ZW50Lm9mZnNldFggPSBvZmZzZXRYO1xuICAgICAgICBldmVudC5vZmZzZXRZID0gb2Zmc2V0WTtcbiAgICAgICAgLy8gR28gYWhlYWQgYW5kIHNldCBkZWx0YU1vZGUgdG8gMCBzaW5jZSB3ZSBjb252ZXJ0ZWQgdG8gcGl4ZWxzXG4gICAgICAgIC8vIEFsdGhvdWdoIHRoaXMgaXMgYSBsaXR0bGUgb2RkIHNpbmNlIHdlIG92ZXJ3cml0ZSB0aGUgZGVsdGFYL1lcbiAgICAgICAgLy8gcHJvcGVydGllcyB3aXRoIG5vcm1hbGl6ZWQgZGVsdGFzLlxuICAgICAgICBldmVudC5kZWx0YU1vZGUgPSAwO1xuXG4gICAgICAgIC8vIEFkZCBldmVudCBhbmQgZGVsdGEgdG8gdGhlIGZyb250IG9mIHRoZSBhcmd1bWVudHNcbiAgICAgICAgYXJncy51bnNoaWZ0KGV2ZW50LCBkZWx0YSwgZGVsdGFYLCBkZWx0YVkpO1xuXG4gICAgICAgIC8vIENsZWFyb3V0IGxvd2VzdERlbHRhIGFmdGVyIHNvbWV0aW1lIHRvIGJldHRlclxuICAgICAgICAvLyBoYW5kbGUgbXVsdGlwbGUgZGV2aWNlIHR5cGVzIHRoYXQgZ2l2ZSBkaWZmZXJlbnRcbiAgICAgICAgLy8gYSBkaWZmZXJlbnQgbG93ZXN0RGVsdGFcbiAgICAgICAgLy8gRXg6IHRyYWNrcGFkID0gMyBhbmQgbW91c2Ugd2hlZWwgPSAxMjBcbiAgICAgICAgaWYgKG51bGxMb3dlc3REZWx0YVRpbWVvdXQpIHsgY2xlYXJUaW1lb3V0KG51bGxMb3dlc3REZWx0YVRpbWVvdXQpOyB9XG4gICAgICAgIG51bGxMb3dlc3REZWx0YVRpbWVvdXQgPSBzZXRUaW1lb3V0KG51bGxMb3dlc3REZWx0YSwgMjAwKTtcblxuICAgICAgICByZXR1cm4gKCQuZXZlbnQuZGlzcGF0Y2ggfHwgJC5ldmVudC5oYW5kbGUpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG51bGxMb3dlc3REZWx0YSgpIHtcbiAgICAgICAgbG93ZXN0RGVsdGEgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3VsZEFkanVzdE9sZERlbHRhcyhvcmdFdmVudCwgYWJzRGVsdGEpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBvbGRlciBldmVudCBhbmQgdGhlIGRlbHRhIGlzIGRpdmlzYWJsZSBieSAxMjAsXG4gICAgICAgIC8vIHRoZW4gd2UgYXJlIGFzc3VtaW5nIHRoYXQgdGhlIGJyb3dzZXIgaXMgdHJlYXRpbmcgdGhpcyBhcyBhblxuICAgICAgICAvLyBvbGRlciBtb3VzZSB3aGVlbCBldmVudCBhbmQgdGhhdCB3ZSBzaG91bGQgZGl2aWRlIHRoZSBkZWx0YXNcbiAgICAgICAgLy8gYnkgNDAgdG8gdHJ5IGFuZCBnZXQgYSBtb3JlIHVzYWJsZSBkZWx0YUZhY3Rvci5cbiAgICAgICAgLy8gU2lkZSBub3RlLCB0aGlzIGFjdHVhbGx5IGltcGFjdHMgdGhlIHJlcG9ydGVkIHNjcm9sbCBkaXN0YW5jZVxuICAgICAgICAvLyBpbiBvbGRlciBicm93c2VycyBhbmQgY2FuIGNhdXNlIHNjcm9sbGluZyB0byBiZSBzbG93ZXIgdGhhbiBuYXRpdmUuXG4gICAgICAgIC8vIFR1cm4gdGhpcyBvZmYgYnkgc2V0dGluZyAkLmV2ZW50LnNwZWNpYWwubW91c2V3aGVlbC5zZXR0aW5ncy5hZGp1c3RPbGREZWx0YXMgdG8gZmFsc2UuXG4gICAgICAgIHJldHVybiBzcGVjaWFsLnNldHRpbmdzLmFkanVzdE9sZERlbHRhcyAmJiBvcmdFdmVudC50eXBlID09PSAnbW91c2V3aGVlbCcgJiYgYWJzRGVsdGEgJSAxMjAgPT09IDA7XG4gICAgfVxuXG59KSk7XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2NvbW1vbi9+L2ltcG9ydHMtbG9hZGVyP2RlZmluZT0+ZmFsc2UhLi9+L2pxdWVyeS1tb3VzZXdoZWVsL2pxdWVyeS5tb3VzZXdoZWVsLmpzXG4vLyBtb2R1bGUgaWQgPSA3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9+L2pxdWVyeS1tb3VzZXdoZWVsL2pxdWVyeS5tb3VzZXdoZWVsLmpzIiwiY29uc3QgXyQgPSBHTE9CQUxfTElCUy5qUXVlcnk/IHdpbmRvdy5qUXVlcnk6IHJlcXVpcmUoJ2pxdWVyeScpLFxuICAgICAgX2h0bWwyY2FudmFzID0gR0xPQkFMX0xJQlMuaHRtbDJjYW52YXM/IHdpbmRvdy5odG1sMmNhbnZhczogcmVxdWlyZSgnaHRtbDJjYW52YXMnKSxcbiAgICAgIF9USFJFRSA9IEdMT0JBTF9MSUJTLlRIUkVFPyB3aW5kb3cuVEhSRUU6IHJlcXVpcmUoJ3RocmVlJyksXG4gICAgICBfUERGSlMgPSBHTE9CQUxfTElCUy5QREZKUz8gd2luZG93LlBERkpTOiByZXF1aXJlKCdwZGZqcycpO1xuXG5leHBvcnQge1xuICBfJCBhcyAkLFxuICBfaHRtbDJjYW52YXMgYXMgaHRtbDJjYW52YXMsXG4gIF9USFJFRSBhcyBUSFJFRSxcbiAgX1BERkpTIGFzIFBERkpTXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2xpYnMuanMiXSwic291cmNlUm9vdCI6IiJ9